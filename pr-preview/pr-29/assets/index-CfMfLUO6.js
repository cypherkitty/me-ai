var mf=Object.defineProperty;var Sl=t=>{throw TypeError(t)};var yf=(t,e,r)=>e in t?mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ye=(t,e,r)=>yf(t,typeof e!="symbol"?e+"":e,r),qi=(t,e,r)=>e.has(t)||Sl("Cannot "+r);var V=(t,e,r)=>(qi(t,e,"read from private field"),r?r.call(t):e.get(t)),Ve=(t,e,r)=>e.has(t)?Sl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),He=(t,e,r,a)=>(qi(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),Bt=(t,e,r)=>(qi(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const Zi=!1;var xo=Array.isArray,bf=Array.prototype.indexOf,Aa=Array.prototype.includes,oi=Array.from,_f=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,wf=Object.getOwnPropertyDescriptors,kf=Object.prototype,xf=Array.prototype,pu=Object.getPrototypeOf,Tl=Object.isExtensible;const Sf=()=>{};function Tf(t){for(var e=0;e<t.length;e++)t[e]()}function hu(){var t,e,r=new Promise((a,i)=>{t=a,e=i});return{promise:r,resolve:t,reject:e}}const Dt=2,is=4,li=8,vu=1<<24,dr=16,Bn=32,fa=64,gu=128,_n=512,Tt=1024,Mt=2048,qn=4096,un=8192,cr=16384,ps=32768,Ca=65536,El=1<<17,mu=1<<18,Da=1<<19,Ef=1<<20,ur=1<<25,sa=65536,Ji=1<<21,So=1<<22,Ar=1<<23,na=Symbol("$state"),Af=Symbol("legacy props"),Cf=Symbol(""),Yr=new class extends Error{constructor(){super(...arguments);Ye(this,"name","StaleReactionError");Ye(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function If(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Rf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Pf(t,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Of(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Df(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Mf(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Lf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nf(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function jf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function zf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ff=1,Kf=2,yu=4,Uf=8,Gf=16,Hf=1,Wf=4,Yf=8,Vf=16,bu=1,Xf=2,Ct=Symbol(),_u="http://www.w3.org/1999/xhtml";function Qf(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Zf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function wu(t){return t===this.v}function Jf(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ku(t){return!Jf(t,this.v)}let $f=!1,cn=null;function Ia(t){cn=t}function dt(t,e=!1,r){cn={p:cn,i:!1,c:null,e:null,s:t,x:null,l:null}}function pt(t){var e=cn,r=e.e;if(r!==null){e.e=null;for(var a of r)Gu(a)}return t!==void 0&&(e.x=t),e.i=!0,cn=e.p,t??{}}function xu(){return!0}let Vr=[];function Su(){var t=Vr;Vr=[],Tf(t)}function Cr(t){if(Vr.length===0&&!ns){var e=Vr;queueMicrotask(()=>{e===Vr&&Su()})}Vr.push(t)}function ed(){for(;Vr.length>0;)Su()}function Tu(t){var e=rt;if(e===null)return Xe.f|=Ar,t;if((e.f&ps)===0&&(e.f&is)===0)throw t;Ra(t,e)}function Ra(t,e){for(;e!==null;){if((e.f&gu)!==0){if((e.f&ps)===0)throw t;try{e.b.error(t);return}catch(r){t=r}}e=e.parent}throw t}const td=-7169;function wt(t,e){t.f=t.f&td|e}function To(t){(t.f&_n)!==0||t.deps===null?wt(t,Tt):wt(t,qn)}function Eu(t){if(t!==null)for(const e of t)(e.f&Dt)===0||(e.f&sa)===0||(e.f^=sa,Eu(e.deps))}function Au(t,e,r){(t.f&Mt)!==0?e.add(t):(t.f&qn)!==0&&r.add(t),Eu(t.deps),wt(t,Tt)}const js=new Set;let Ue=null,Js=null,It=null,Qt=[],ui=null,$i=!1,ns=!1;var _a,wa,Qr,ka,us,cs,Zr,sr,xa,Jn,eo,to,Cu;const Qo=class Qo{constructor(){Ve(this,Jn);Ye(this,"committed",!1);Ye(this,"current",new Map);Ye(this,"previous",new Map);Ve(this,_a,new Set);Ve(this,wa,new Set);Ve(this,Qr,0);Ve(this,ka,0);Ve(this,us,null);Ve(this,cs,new Set);Ve(this,Zr,new Set);Ve(this,sr,new Map);Ye(this,"is_fork",!1);Ve(this,xa,!1)}is_deferred(){return this.is_fork||V(this,ka)>0}skip_effect(e){V(this,sr).has(e)||V(this,sr).set(e,{d:[],m:[]})}unskip_effect(e){var r=V(this,sr).get(e);if(r){V(this,sr).delete(e);for(var a of r.d)wt(a,Mt),Nn(a);for(a of r.m)wt(a,qn),Nn(a)}}process(e){var i;Qt=[],this.apply();var r=[],a=[];for(const o of e)Bt(this,Jn,eo).call(this,o,r,a);if(this.is_deferred()){Bt(this,Jn,to).call(this,a),Bt(this,Jn,to).call(this,r);for(const[o,c]of V(this,sr))Ou(o,c)}else{for(const o of V(this,_a))o();V(this,_a).clear(),V(this,Qr)===0&&Bt(this,Jn,Cu).call(this),Js=this,Ue=null,Al(a),Al(r),Js=null,(i=V(this,us))==null||i.resolve()}It=null}capture(e,r){r!==Ct&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&Ar)===0&&(this.current.set(e,e.v),It==null||It.set(e,e.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,It=null)}flush(){if(this.activate(),Qt.length>0){if(Iu(),Ue!==null&&Ue!==this)return}else V(this,Qr)===0&&this.process([]);this.deactivate()}discard(){for(const e of V(this,wa))e(this);V(this,wa).clear()}increment(e){He(this,Qr,V(this,Qr)+1),e&&He(this,ka,V(this,ka)+1)}decrement(e){He(this,Qr,V(this,Qr)-1),e&&He(this,ka,V(this,ka)-1),!V(this,xa)&&(He(this,xa,!0),Cr(()=>{He(this,xa,!1),this.is_deferred()?Qt.length>0&&this.flush():this.revive()}))}revive(){for(const e of V(this,cs))V(this,Zr).delete(e),wt(e,Mt),Nn(e);for(const e of V(this,Zr))wt(e,qn),Nn(e);this.flush()}oncommit(e){V(this,_a).add(e)}ondiscard(e){V(this,wa).add(e)}settled(){return(V(this,us)??He(this,us,hu())).promise}static ensure(){if(Ue===null){const e=Ue=new Qo;js.add(Ue),ns||Cr(()=>{Ue===e&&e.flush()})}return Ue}apply(){}};_a=new WeakMap,wa=new WeakMap,Qr=new WeakMap,ka=new WeakMap,us=new WeakMap,cs=new WeakMap,Zr=new WeakMap,sr=new WeakMap,xa=new WeakMap,Jn=new WeakSet,eo=function(e,r,a){e.f^=Tt;for(var i=e.first,o=null;i!==null;){var c=i.f,d=(c&(Bn|fa))!==0,v=d&&(c&Tt)!==0,p=v||(c&un)!==0||V(this,sr).has(i);if(!p&&i.fn!==null){d?i.f^=Tt:o!==null&&(c&(is|li|vu))!==0?o.b.defer_effect(i):(c&is)!==0?r.push(i):vs(i)&&((c&dr)!==0&&V(this,Zr).add(i),Oa(i));var b=i.first;if(b!==null){i=b;continue}}var x=i.parent;for(i=i.next;i===null&&x!==null;)x===o&&(o=null),i=x.next,x=x.parent}},to=function(e){for(var r=0;r<e.length;r+=1)Au(e[r],V(this,cs),V(this,Zr))},Cu=function(){var i;if(js.size>1){this.previous.clear();var e=It,r=!0;for(const o of js){if(o===this){r=!1;continue}const c=[];for(const[v,p]of this.current){if(o.current.has(v))if(r&&p!==o.current.get(v))o.current.set(v,p);else continue;c.push(v)}if(c.length===0)continue;const d=[...o.current.keys()].filter(v=>!this.current.has(v));if(d.length>0){var a=Qt;Qt=[];const v=new Set,p=new Map;for(const b of c)Ru(b,d,v,p);if(Qt.length>0){Ue=o,o.apply();for(const b of Qt)Bt(i=o,Jn,eo).call(i,b,[],[]);o.deactivate()}Qt=a}}Ue=null,It=e}this.committed=!0,js.delete(this)};let Ir=Qo;function nd(t){var e=ns;ns=!0;try{for(var r;;){if(ed(),Qt.length===0&&(Ue==null||Ue.flush(),Qt.length===0))return ui=null,r;Iu()}}finally{ns=e}}function Iu(){$i=!0;var t=null;try{for(var e=0;Qt.length>0;){var r=Ir.ensure();if(e++>1e3){var a,i;rd()}r.process(Qt),Rr.clear()}}finally{Qt=[],$i=!1,ui=null}}function rd(){try{Lf()}catch(t){Ra(t,ui)}}let Pn=null;function Al(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var a=t[r++];if((a.f&(cr|un))===0&&vs(a)&&(Pn=new Set,Oa(a),a.deps===null&&a.first===null&&a.nodes===null&&a.teardown===null&&a.ac===null&&Vu(a),(Pn==null?void 0:Pn.size)>0)){Rr.clear();for(const i of Pn){if((i.f&(cr|un))!==0)continue;const o=[i];let c=i.parent;for(;c!==null;)Pn.has(c)&&(Pn.delete(c),o.push(c)),c=c.parent;for(let d=o.length-1;d>=0;d--){const v=o[d];(v.f&(cr|un))===0&&Oa(v)}}Pn.clear()}}Pn=null}}function Ru(t,e,r,a){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const i of t.reactions){const o=i.f;(o&Dt)!==0?Ru(i,e,r,a):(o&(So|dr))!==0&&(o&Mt)===0&&Pu(i,e,a)&&(wt(i,Mt),Nn(i))}}function Pu(t,e,r){const a=r.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const i of t.deps){if(Aa.call(e,i))return!0;if((i.f&Dt)!==0&&Pu(i,e,r))return r.set(i,!0),!0}return r.set(t,!1),!1}function Nn(t){for(var e=ui=t;e.parent!==null;){e=e.parent;var r=e.f;if($i&&e===rt&&(r&dr)!==0&&(r&mu)===0)return;if((r&(fa|Bn))!==0){if((r&Tt)===0)return;e.f^=Tt}}Qt.push(e)}function Ou(t,e){if(!((t.f&Bn)!==0&&(t.f&Tt)!==0)){(t.f&Mt)!==0?e.d.push(t):(t.f&qn)!==0&&e.m.push(t),wt(t,Tt);for(var r=t.first;r!==null;)Ou(r,e),r=r.next}}function ad(t){let e=0,r=ia(0),a;return()=>{Co()&&(m(r),Io(()=>(e===0&&(a=gs(()=>t(()=>rs(r)))),e+=1,()=>{Cr(()=>{e-=1,e===0&&(a==null||a(),a=void 0,rs(r))})})))}}var sd=Ca|Da|gu;function id(t,e,r){new od(t,e,r)}var mn,ko,Yn,Jr,Vn,yn,Vt,Xn,ir,Tr,$r,Er,Sa,ea,Ta,Ea,or,si,Et,ld,ud,no,Hs,Ws,ro;class od{constructor(e,r,a){Ve(this,Et);Ye(this,"parent");Ye(this,"is_pending",!1);Ve(this,mn);Ve(this,ko,null);Ve(this,Yn);Ve(this,Jr);Ve(this,Vn);Ve(this,yn,null);Ve(this,Vt,null);Ve(this,Xn,null);Ve(this,ir,null);Ve(this,Tr,null);Ve(this,$r,0);Ve(this,Er,0);Ve(this,Sa,!1);Ve(this,ea,!1);Ve(this,Ta,new Set);Ve(this,Ea,new Set);Ve(this,or,null);Ve(this,si,ad(()=>(He(this,or,ia(V(this,$r))),()=>{He(this,or,null)})));He(this,mn,e),He(this,Yn,r),He(this,Jr,a),this.parent=rt.b,this.is_pending=!!V(this,Yn).pending,He(this,Vn,Ro(()=>{rt.b=this;{var i=Bt(this,Et,no).call(this);try{He(this,yn,bn(()=>a(i)))}catch(o){this.error(o)}V(this,Er)>0?Bt(this,Et,Ws).call(this):this.is_pending=!1}return()=>{var o;(o=V(this,Tr))==null||o.remove()}},sd))}defer_effect(e){Au(e,V(this,Ta),V(this,Ea))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!V(this,Yn).pending}update_pending_count(e){Bt(this,Et,ro).call(this,e),He(this,$r,V(this,$r)+e),!(!V(this,or)||V(this,Sa))&&(He(this,Sa,!0),Cr(()=>{He(this,Sa,!1),V(this,or)&&Pa(V(this,or),V(this,$r))}))}get_effect_pending(){return V(this,si).call(this),m(V(this,or))}error(e){var r=V(this,Yn).onerror;let a=V(this,Yn).failed;if(V(this,ea)||!r&&!a)throw e;V(this,yn)&&(Jt(V(this,yn)),He(this,yn,null)),V(this,Vt)&&(Jt(V(this,Vt)),He(this,Vt,null)),V(this,Xn)&&(Jt(V(this,Xn)),He(this,Xn,null));var i=!1,o=!1;const c=()=>{if(i){Zf();return}i=!0,o&&zf(),Ir.ensure(),He(this,$r,0),V(this,Xn)!==null&&ra(V(this,Xn),()=>{He(this,Xn,null)}),this.is_pending=this.has_pending_snippet(),He(this,yn,Bt(this,Et,Hs).call(this,()=>(He(this,ea,!1),bn(()=>V(this,Jr).call(this,V(this,mn)))))),V(this,Er)>0?Bt(this,Et,Ws).call(this):this.is_pending=!1};Cr(()=>{try{o=!0,r==null||r(e,c),o=!1}catch(d){Ra(d,V(this,Vn)&&V(this,Vn).parent)}a&&He(this,Xn,Bt(this,Et,Hs).call(this,()=>{Ir.ensure(),He(this,ea,!0);try{return bn(()=>{a(V(this,mn),()=>e,()=>c)})}catch(d){return Ra(d,V(this,Vn).parent),null}finally{He(this,ea,!1)}}))})}}mn=new WeakMap,ko=new WeakMap,Yn=new WeakMap,Jr=new WeakMap,Vn=new WeakMap,yn=new WeakMap,Vt=new WeakMap,Xn=new WeakMap,ir=new WeakMap,Tr=new WeakMap,$r=new WeakMap,Er=new WeakMap,Sa=new WeakMap,ea=new WeakMap,Ta=new WeakMap,Ea=new WeakMap,or=new WeakMap,si=new WeakMap,Et=new WeakSet,ld=function(){try{He(this,yn,bn(()=>V(this,Jr).call(this,V(this,mn))))}catch(e){this.error(e)}},ud=function(){const e=V(this,Yn).pending;e&&(He(this,Vt,bn(()=>e(V(this,mn)))),Cr(()=>{var r=Bt(this,Et,no).call(this);He(this,yn,Bt(this,Et,Hs).call(this,()=>(Ir.ensure(),bn(()=>V(this,Jr).call(this,r))))),V(this,Er)>0?Bt(this,Et,Ws).call(this):(ra(V(this,Vt),()=>{He(this,Vt,null)}),this.is_pending=!1)}))},no=function(){var e=V(this,mn);return this.is_pending&&(He(this,Tr,fr()),V(this,mn).before(V(this,Tr)),e=V(this,Tr)),e},Hs=function(e){var r=rt,a=Xe,i=cn;Zn(V(this,Vn)),kn(V(this,Vn)),Ia(V(this,Vn).ctx);try{return e()}catch(o){return Tu(o),null}finally{Zn(r),kn(a),Ia(i)}},Ws=function(){const e=V(this,Yn).pending;V(this,yn)!==null&&(He(this,ir,document.createDocumentFragment()),V(this,ir).append(V(this,Tr)),Zu(V(this,yn),V(this,ir))),V(this,Vt)===null&&He(this,Vt,bn(()=>e(V(this,mn))))},ro=function(e){var r;if(!this.has_pending_snippet()){this.parent&&Bt(r=this.parent,Et,ro).call(r,e);return}if(He(this,Er,V(this,Er)+e),V(this,Er)===0){this.is_pending=!1;for(const a of V(this,Ta))wt(a,Mt),Nn(a);for(const a of V(this,Ea))wt(a,qn),Nn(a);V(this,Ta).clear(),V(this,Ea).clear(),V(this,Vt)&&ra(V(this,Vt),()=>{He(this,Vt,null)}),V(this,ir)&&(V(this,mn).before(V(this,ir)),He(this,ir,null))}};function cd(t,e,r,a){const i=ci;var o=t.filter(_=>!_.settled);if(r.length===0&&o.length===0){a(e.map(i));return}var c=Ue,d=rt,v=fd(),p=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(_=>_.promise)):null;function b(_){v();try{a(_)}catch(k){(d.f&cr)===0&&Ra(k,d)}c==null||c.deactivate(),ao()}if(r.length===0){p.then(()=>b(e.map(i)));return}function x(){v(),Promise.all(r.map(_=>dd(_))).then(_=>b([...e.map(i),..._])).catch(_=>Ra(_,d))}p?p.then(x):x()}function fd(){var t=rt,e=Xe,r=cn,a=Ue;return function(o=!0){Zn(t),kn(e),Ia(r),o&&(a==null||a.activate())}}function ao(){Zn(null),kn(null),Ia(null)}function ci(t){var e=Dt|Mt,r=Xe!==null&&(Xe.f&Dt)!==0?Xe:null;return rt!==null&&(rt.f|=Da),{ctx:cn,deps:null,effects:null,equals:wu,f:e,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:r??rt,ac:null}}function dd(t,e,r){let a=rt;a===null&&Rf();var i=a.b,o=void 0,c=ia(Ct),d=!Xe,v=new Map;return Ed(()=>{var k;var p=hu();o=p.promise;try{Promise.resolve(t()).then(p.resolve,p.reject).then(()=>{b===Ue&&b.committed&&b.deactivate(),ao()})}catch(M){p.reject(M),ao()}var b=Ue;if(d){var x=i.is_rendered();i.update_pending_count(1),b.increment(x),(k=v.get(b))==null||k.reject(Yr),v.delete(b),v.set(b,p)}const _=(M,N=void 0)=>{if(b.activate(),N)N!==Yr&&(c.f|=Ar,Pa(c,N));else{(c.f&Ar)!==0&&(c.f^=Ar),Pa(c,M);for(const[S,F]of v){if(v.delete(S),S===b)break;F.reject(Yr)}}d&&(i.update_pending_count(-1),b.decrement(x))};p.promise.then(_,M=>_(null,M||"unknown"))}),Uu(()=>{for(const p of v.values())p.reject(Yr)}),new Promise(p=>{function b(x){function _(){x===o?p(c):b(o)}x.then(_,_)}b(o)})}function ht(t){const e=ci(t);return Ju(e),e}function Du(t){const e=ci(t);return e.equals=ku,e}function pd(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Jt(e[r])}}function hd(t){for(var e=t.parent;e!==null;){if((e.f&Dt)===0)return(e.f&cr)===0?e:null;e=e.parent}return null}function Eo(t){var e,r=rt;Zn(hd(t));try{t.f&=~sa,pd(t),e=nc(t)}finally{Zn(r)}return e}function Mu(t){var e=Eo(t);if(!t.equals(e)&&(t.wv=ec(),(!(Ue!=null&&Ue.is_fork)||t.deps===null)&&(t.v=e,t.deps===null))){wt(t,Tt);return}Pr||(It!==null?(Co()||Ue!=null&&Ue.is_fork)&&It.set(t,e):To(t))}function vd(t){var e,r;if(t.effects!==null)for(const a of t.effects)(a.teardown||a.ac)&&((e=a.teardown)==null||e.call(a),(r=a.ac)==null||r.abort(Yr),a.teardown=Sf,a.ac=null,os(a,0),Po(a))}function Lu(t){if(t.effects!==null)for(const e of t.effects)e.teardown&&Oa(e)}let so=new Set;const Rr=new Map;let Nu=!1;function ia(t,e){var r={f:0,v:t,reactions:null,equals:wu,rv:0,wv:0};return r}function Pe(t,e){const r=ia(t);return Ju(r),r}function gd(t,e=!1,r=!0){const a=ia(t);return e||(a.equals=ku),a}function q(t,e,r=!1){Xe!==null&&(!jn||(Xe.f&El)!==0)&&xu()&&(Xe.f&(Dt|dr|So|El))!==0&&(wn===null||!Aa.call(wn,t))&&Bf();let a=r?Rt(e):e;return Pa(t,a)}function Pa(t,e){if(!t.equals(e)){var r=t.v;Pr?Rr.set(t,e):Rr.set(t,r),t.v=e;var a=Ir.ensure();if(a.capture(t,r),(t.f&Dt)!==0){const i=t;(t.f&Mt)!==0&&Eo(i),To(i)}t.wv=ec(),ju(t,Mt),rt!==null&&(rt.f&Tt)!==0&&(rt.f&(Bn|fa))===0&&(gn===null?Cd([t]):gn.push(t)),!a.is_fork&&so.size>0&&!Nu&&md()}return e}function md(){Nu=!1;for(const t of so)(t.f&Tt)!==0&&wt(t,qn),vs(t)&&Oa(t);so.clear()}function rs(t){q(t,t.v+1)}function ju(t,e){var r=t.reactions;if(r!==null)for(var a=r.length,i=0;i<a;i++){var o=r[i],c=o.f,d=(c&Mt)===0;if(d&&wt(o,e),(c&Dt)!==0){var v=o;It==null||It.delete(v),(c&sa)===0&&(c&_n&&(o.f|=sa),ju(v,qn))}else d&&((c&dr)!==0&&Pn!==null&&Pn.add(o),Nn(o))}}function Rt(t){if(typeof t!="object"||t===null||na in t)return t;const e=pu(t);if(e!==kf&&e!==xf)return t;var r=new Map,a=xo(t),i=Pe(0),o=aa,c=d=>{if(aa===o)return d();var v=Xe,p=aa;kn(null),Ol(o);var b=d();return kn(v),Ol(p),b};return a&&r.set("length",Pe(t.length)),new Proxy(t,{defineProperty(d,v,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&jf();var b=r.get(v);return b===void 0?c(()=>{var x=Pe(p.value);return r.set(v,x),x}):q(b,p.value,!0),!0},deleteProperty(d,v){var p=r.get(v);if(p===void 0){if(v in d){const b=c(()=>Pe(Ct));r.set(v,b),rs(i)}}else q(p,Ct),rs(i);return!0},get(d,v,p){var k;if(v===na)return t;var b=r.get(v),x=v in d;if(b===void 0&&(!x||(k=ba(d,v))!=null&&k.writable)&&(b=c(()=>{var M=Rt(x?d[v]:Ct),N=Pe(M);return N}),r.set(v,b)),b!==void 0){var _=m(b);return _===Ct?void 0:_}return Reflect.get(d,v,p)},getOwnPropertyDescriptor(d,v){var p=Reflect.getOwnPropertyDescriptor(d,v);if(p&&"value"in p){var b=r.get(v);b&&(p.value=m(b))}else if(p===void 0){var x=r.get(v),_=x==null?void 0:x.v;if(x!==void 0&&_!==Ct)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return p},has(d,v){var _;if(v===na)return!0;var p=r.get(v),b=p!==void 0&&p.v!==Ct||Reflect.has(d,v);if(p!==void 0||rt!==null&&(!b||(_=ba(d,v))!=null&&_.writable)){p===void 0&&(p=c(()=>{var k=b?Rt(d[v]):Ct,M=Pe(k);return M}),r.set(v,p));var x=m(p);if(x===Ct)return!1}return b},set(d,v,p,b){var Y;var x=r.get(v),_=v in d;if(a&&v==="length")for(var k=p;k<x.v;k+=1){var M=r.get(k+"");M!==void 0?q(M,Ct):k in d&&(M=c(()=>Pe(Ct)),r.set(k+"",M))}if(x===void 0)(!_||(Y=ba(d,v))!=null&&Y.writable)&&(x=c(()=>Pe(void 0)),q(x,Rt(p)),r.set(v,x));else{_=x.v!==Ct;var N=c(()=>Rt(p));q(x,N)}var S=Reflect.getOwnPropertyDescriptor(d,v);if(S!=null&&S.set&&S.set.call(b,p),!_){if(a&&typeof v=="string"){var F=r.get("length"),ie=Number(v);Number.isInteger(ie)&&ie>=F.v&&q(F,ie+1)}rs(i)}return!0},ownKeys(d){m(i);var v=Reflect.ownKeys(d).filter(x=>{var _=r.get(x);return _===void 0||_.v!==Ct});for(var[p,b]of r)b.v!==Ct&&!(p in d)&&v.push(p);return v},setPrototypeOf(){qf()}})}function Cl(t){try{if(t!==null&&typeof t=="object"&&na in t)return t[na]}catch{}return t}function yd(t,e){return Object.is(Cl(t),Cl(e))}var Il,qu,Bu,zu;function bd(){if(Il===void 0){Il=window,qu=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Bu=ba(e,"firstChild").get,zu=ba(e,"nextSibling").get,Tl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Tl(r)&&(r.__t=void 0)}}function fr(t=""){return document.createTextNode(t)}function ln(t){return Bu.call(t)}function hs(t){return zu.call(t)}function w(t,e){return ln(t)}function it(t,e=!1){{var r=ln(t);return r instanceof Comment&&r.data===""?hs(r):r}}function T(t,e=1,r=!1){let a=t;for(;e--;)a=hs(a);return a}function _d(t){t.textContent=""}function Fu(){return!1}function wd(t,e,r){return document.createElementNS(_u,t,void 0)}let Rl=!1;function kd(){Rl||(Rl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Ao(t){var e=Xe,r=rt;kn(null),Zn(null);try{return t()}finally{kn(e),Zn(r)}}function Ku(t,e,r,a=r){t.addEventListener(e,()=>Ao(r));const i=t.__on_r;i?t.__on_r=()=>{i(),a(!0)}:t.__on_r=()=>a(!0),kd()}function xd(t){rt===null&&(Xe===null&&Mf(),Df()),Pr&&Of()}function Sd(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function pr(t,e,r){var a=rt;a!==null&&(a.f&un)!==0&&(t|=un);var i={ctx:cn,deps:null,nodes:null,f:t|Mt|_n,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Oa(i)}catch(d){throw Jt(i),d}else e!==null&&Nn(i);var o=i;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Da)===0&&(o=o.first,(t&dr)!==0&&(t&Ca)!==0&&o!==null&&(o.f|=Ca)),o!==null&&(o.parent=a,a!==null&&Sd(o,a),Xe!==null&&(Xe.f&Dt)!==0&&(t&fa)===0)){var c=Xe;(c.effects??(c.effects=[])).push(o)}return i}function Co(){return Xe!==null&&!jn}function Uu(t){const e=pr(li,null,!1);return wt(e,Tt),e.teardown=t,e}function $s(t){xd();var e=rt.f,r=!Xe&&(e&Bn)!==0&&(e&ps)===0;if(r){var a=cn;(a.e??(a.e=[])).push(t)}else return Gu(t)}function Gu(t){return pr(is|Ef,t,!1)}function Td(t){Ir.ensure();const e=pr(fa|Da,t,!0);return(r={})=>new Promise(a=>{r.outro?ra(e,()=>{Jt(e),a(void 0)}):(Jt(e),a(void 0))})}function Hu(t){return pr(is,t,!1)}function Ed(t){return pr(So|Da,t,!0)}function Io(t,e=0){return pr(li|e,t,!0)}function ve(t,e=[],r=[],a=[]){cd(a,e,r,i=>{pr(li,()=>t(...i.map(m)),!0)})}function Ro(t,e=0){var r=pr(dr|e,t,!0);return r}function bn(t){return pr(Bn|Da,t,!0)}function Wu(t){var e=t.teardown;if(e!==null){const r=Pr,a=Xe;Pl(!0),kn(null);try{e.call(null)}finally{Pl(r),kn(a)}}}function Po(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const i=r.ac;i!==null&&Ao(()=>{i.abort(Yr)});var a=r.next;(r.f&fa)!==0?r.parent=null:Jt(r,e),r=a}}function Ad(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Bn)===0&&Jt(e),e=r}}function Jt(t,e=!0){var r=!1;(e||(t.f&mu)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Yu(t.nodes.start,t.nodes.end),r=!0),Po(t,e&&!r),os(t,0),wt(t,cr);var a=t.nodes&&t.nodes.t;if(a!==null)for(const o of a)o.stop();Wu(t);var i=t.parent;i!==null&&i.first!==null&&Vu(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Yu(t,e){for(;t!==null;){var r=t===e?null:hs(t);t.remove(),t=r}}function Vu(t){var e=t.parent,r=t.prev,a=t.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=r))}function ra(t,e,r=!0){var a=[];Xu(t,a,!0);var i=()=>{r&&Jt(t),e&&e()},o=a.length;if(o>0){var c=()=>--o||i();for(var d of a)d.out(c)}else i()}function Xu(t,e,r){if((t.f&un)===0){t.f^=un;var a=t.nodes&&t.nodes.t;if(a!==null)for(const d of a)(d.is_global||r)&&e.push(d);for(var i=t.first;i!==null;){var o=i.next,c=(i.f&Ca)!==0||(i.f&Bn)!==0&&(t.f&dr)!==0;Xu(i,e,c?r:!1),i=o}}}function Oo(t){Qu(t,!0)}function Qu(t,e){if((t.f&un)!==0){t.f^=un,(t.f&Tt)===0&&(wt(t,Mt),Nn(t));for(var r=t.first;r!==null;){var a=r.next,i=(r.f&Ca)!==0||(r.f&Bn)!==0;Qu(r,i?e:!1),r=a}var o=t.nodes&&t.nodes.t;if(o!==null)for(const c of o)(c.is_global||e)&&c.in()}}function Zu(t,e){if(t.nodes)for(var r=t.nodes.start,a=t.nodes.end;r!==null;){var i=r===a?null:hs(r);e.append(r),r=i}}let Ys=!1,Pr=!1;function Pl(t){Pr=t}let Xe=null,jn=!1;function kn(t){Xe=t}let rt=null;function Zn(t){rt=t}let wn=null;function Ju(t){Xe!==null&&(wn===null?wn=[t]:wn.push(t))}let Zt=null,sn=0,gn=null;function Cd(t){gn=t}let $u=1,Xr=0,aa=Xr;function Ol(t){aa=t}function ec(){return++$u}function vs(t){var e=t.f;if((e&Mt)!==0)return!0;if(e&Dt&&(t.f&=~sa),(e&qn)!==0){for(var r=t.deps,a=r.length,i=0;i<a;i++){var o=r[i];if(vs(o)&&Mu(o),o.wv>t.wv)return!0}(e&_n)!==0&&It===null&&wt(t,Tt)}return!1}function tc(t,e,r=!0){var a=t.reactions;if(a!==null&&!(wn!==null&&Aa.call(wn,t)))for(var i=0;i<a.length;i++){var o=a[i];(o.f&Dt)!==0?tc(o,e,!1):e===o&&(r?wt(o,Mt):(o.f&Tt)!==0&&wt(o,qn),Nn(o))}}function nc(t){var N;var e=Zt,r=sn,a=gn,i=Xe,o=wn,c=cn,d=jn,v=aa,p=t.f;Zt=null,sn=0,gn=null,Xe=(p&(Bn|fa))===0?t:null,wn=null,Ia(t.ctx),jn=!1,aa=++Xr,t.ac!==null&&(Ao(()=>{t.ac.abort(Yr)}),t.ac=null);try{t.f|=Ji;var b=t.fn,x=b();t.f|=ps;var _=t.deps,k=Ue==null?void 0:Ue.is_fork;if(Zt!==null){var M;if(k||os(t,sn),_!==null&&sn>0)for(_.length=sn+Zt.length,M=0;M<Zt.length;M++)_[sn+M]=Zt[M];else t.deps=_=Zt;if(Co()&&(t.f&_n)!==0)for(M=sn;M<_.length;M++)((N=_[M]).reactions??(N.reactions=[])).push(t)}else!k&&_!==null&&sn<_.length&&(os(t,sn),_.length=sn);if(xu()&&gn!==null&&!jn&&_!==null&&(t.f&(Dt|qn|Mt))===0)for(M=0;M<gn.length;M++)tc(gn[M],t);if(i!==null&&i!==t){if(Xr++,i.deps!==null)for(let S=0;S<r;S+=1)i.deps[S].rv=Xr;if(e!==null)for(const S of e)S.rv=Xr;gn!==null&&(a===null?a=gn:a.push(...gn))}return(t.f&Ar)!==0&&(t.f^=Ar),x}catch(S){return Tu(S)}finally{t.f^=Ji,Zt=e,sn=r,gn=a,Xe=i,wn=o,Ia(c),jn=d,aa=v}}function Id(t,e){let r=e.reactions;if(r!==null){var a=bf.call(r,t);if(a!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[a]=r[i],r.pop())}}if(r===null&&(e.f&Dt)!==0&&(Zt===null||!Aa.call(Zt,e))){var o=e;(o.f&_n)!==0&&(o.f^=_n,o.f&=~sa),To(o),vd(o),os(o,0)}}function os(t,e){var r=t.deps;if(r!==null)for(var a=e;a<r.length;a++)Id(t,r[a])}function Oa(t){var e=t.f;if((e&cr)===0){wt(t,Tt);var r=rt,a=Ys;rt=t,Ys=!0;try{(e&(dr|vu))!==0?Ad(t):Po(t),Wu(t);var i=nc(t);t.teardown=typeof i=="function"?i:null,t.wv=$u;var o;Zi&&$f&&(t.f&Mt)!==0&&t.deps}finally{Ys=a,rt=r}}}async function rc(){await Promise.resolve(),nd()}function m(t){var e=t.f,r=(e&Dt)!==0;if(Xe!==null&&!jn){var a=rt!==null&&(rt.f&cr)!==0;if(!a&&(wn===null||!Aa.call(wn,t))){var i=Xe.deps;if((Xe.f&Ji)!==0)t.rv<Xr&&(t.rv=Xr,Zt===null&&i!==null&&i[sn]===t?sn++:Zt===null?Zt=[t]:Zt.push(t));else{(Xe.deps??(Xe.deps=[])).push(t);var o=t.reactions;o===null?t.reactions=[Xe]:Aa.call(o,Xe)||o.push(Xe)}}}if(Pr&&Rr.has(t))return Rr.get(t);if(r){var c=t;if(Pr){var d=c.v;return((c.f&Tt)===0&&c.reactions!==null||sc(c))&&(d=Eo(c)),Rr.set(c,d),d}var v=(c.f&_n)===0&&!jn&&Xe!==null&&(Ys||(Xe.f&_n)!==0),p=(c.f&ps)===0;vs(c)&&(v&&(c.f|=_n),Mu(c)),v&&!p&&(Lu(c),ac(c))}if(It!=null&&It.has(t))return It.get(t);if((t.f&Ar)!==0)throw t.v;return t.v}function ac(t){if(t.f|=_n,t.deps!==null)for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Dt)!==0&&(e.f&_n)===0&&(Lu(e),ac(e))}function sc(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Rr.has(e)||(e.f&Dt)!==0&&sc(e))return!0;return!1}function gs(t){var e=jn;try{return jn=!0,t()}finally{jn=e}}const Rd=["touchstart","touchmove"];function Pd(t){return Rd.includes(t)}const ic=new Set,io=new Set;function Lt(t){for(var e=0;e<t.length;e++)ic.add(t[e]);for(var r of io)r(t)}let Dl=null;function Ml(t){var S;var e=this,r=e.ownerDocument,a=t.type,i=((S=t.composedPath)==null?void 0:S.call(t))||[],o=i[0]||t.target;Dl=t;var c=0,d=Dl===t&&t.__root;if(d){var v=i.indexOf(d);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var p=i.indexOf(e);if(p===-1)return;v<=p&&(c=v)}if(o=i[c]||t.target,o!==e){_f(t,"currentTarget",{configurable:!0,get(){return o||r}});var b=Xe,x=rt;kn(null),Zn(null);try{for(var _,k=[];o!==null;){var M=o.assignedSlot||o.parentNode||o.host||null;try{var N=o["__"+a];N!=null&&(!o.disabled||t.target===o)&&N.call(o,t)}catch(F){_?k.push(F):_=F}if(t.cancelBubble||M===e||M===null)break;o=M}if(_){for(let F of k)queueMicrotask(()=>{throw F});throw _}}finally{t.__root=e,delete t.currentTarget,kn(b),Zn(x)}}}var cu,fu;const Bi=(fu=(cu=globalThis==null?void 0:globalThis.window)==null?void 0:cu.trustedTypes)==null?void 0:fu.createPolicy("svelte-trusted-html",{createHTML:t=>t});function Od(t){return(Bi==null?void 0:Bi.createHTML(t))??t}function Do(t,e=!1){var r=wd("template");return t=t.replaceAll("<!>","<!---->"),r.innerHTML=e?Od(t):t,r.content}function oa(t,e){var r=rt;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function G(t,e){var r=(e&bu)!==0,a=(e&Xf)!==0,i,o=!t.startsWith("<!>");return()=>{i===void 0&&(i=Do(o?t:"<!>"+t,!0),r||(i=ln(i)));var c=a||qu?document.importNode(i,!0):i.cloneNode(!0);if(r){var d=ln(c),v=c.lastChild;oa(d,v)}else oa(c,c);return c}}function Dd(t,e,r="svg"){var a=!t.startsWith("<!>"),i=(e&bu)!==0,o=`<${r}>${a?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var d=Do(o,!0),v=ln(d);if(i)for(c=document.createDocumentFragment();ln(v);)c.appendChild(ln(v));else c=ln(v)}var p=c.cloneNode(!0);if(i){var b=ln(p),x=p.lastChild;oa(b,x)}else oa(p,p);return p}}function Mo(t,e){return Dd(t,e,"svg")}function Ll(t=""){{var e=fr(t+"");return oa(e,e),e}}function la(){var t=document.createDocumentFragment(),e=document.createComment(""),r=fr();return t.append(e,r),oa(e,r),t}function K(t,e){t!==null&&t.before(e)}function se(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Md(t,e){return Ld(t,e)}const qs=new Map;function Ld(t,{target:e,anchor:r,props:a={},events:i,context:o,intro:c=!0}){bd();var d=new Set,v=x=>{for(var _=0;_<x.length;_++){var k=x[_];if(!d.has(k)){d.add(k);var M=Pd(k);for(const F of[e,document]){var N=qs.get(F);N===void 0&&(N=new Map,qs.set(F,N));var S=N.get(k);S===void 0?(F.addEventListener(k,Ml,{passive:M}),N.set(k,1)):N.set(k,S+1)}}}};v(oi(ic)),io.add(v);var p=void 0,b=Td(()=>{var x=r??e.appendChild(fr());return id(x,{pending:()=>{}},_=>{dt({});var k=cn;o&&(k.c=o),i&&(a.$$events=i),p=t(_,a)||{},pt()}),()=>{var N;for(var _ of d)for(const S of[e,document]){var k=qs.get(S),M=k.get(_);--M==0?(S.removeEventListener(_,Ml),k.delete(_),k.size===0&&qs.delete(S)):k.set(_,M)}io.delete(v),x!==r&&((N=x.parentNode)==null||N.removeChild(x))}});return Nd.set(p,b),p}let Nd=new WeakMap;var Dn,Qn,on,ta,fs,ds,ii;class jd{constructor(e,r=!0){Ye(this,"anchor");Ve(this,Dn,new Map);Ve(this,Qn,new Map);Ve(this,on,new Map);Ve(this,ta,new Set);Ve(this,fs,!0);Ve(this,ds,()=>{var e=Ue;if(V(this,Dn).has(e)){var r=V(this,Dn).get(e),a=V(this,Qn).get(r);if(a)Oo(a),V(this,ta).delete(r);else{var i=V(this,on).get(r);i&&(V(this,Qn).set(r,i.effect),V(this,on).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[o,c]of V(this,Dn)){if(V(this,Dn).delete(o),o===e)break;const d=V(this,on).get(c);d&&(Jt(d.effect),V(this,on).delete(c))}for(const[o,c]of V(this,Qn)){if(o===r||V(this,ta).has(o))continue;const d=()=>{if(Array.from(V(this,Dn).values()).includes(o)){var p=document.createDocumentFragment();Zu(c,p),p.append(fr()),V(this,on).set(o,{effect:c,fragment:p})}else Jt(c);V(this,ta).delete(o),V(this,Qn).delete(o)};V(this,fs)||!a?(V(this,ta).add(o),ra(c,d,!1)):d()}}});Ve(this,ii,e=>{V(this,Dn).delete(e);const r=Array.from(V(this,Dn).values());for(const[a,i]of V(this,on))r.includes(a)||(Jt(i.effect),V(this,on).delete(a))});this.anchor=e,He(this,fs,r)}ensure(e,r){var a=Ue,i=Fu();if(r&&!V(this,Qn).has(e)&&!V(this,on).has(e))if(i){var o=document.createDocumentFragment(),c=fr();o.append(c),V(this,on).set(e,{effect:bn(()=>r(c)),fragment:o})}else V(this,Qn).set(e,bn(()=>r(this.anchor)));if(V(this,Dn).set(a,e),i){for(const[d,v]of V(this,Qn))d===e?a.unskip_effect(v):a.skip_effect(v);for(const[d,v]of V(this,on))d===e?a.unskip_effect(v.effect):a.skip_effect(v.effect);a.oncommit(V(this,ds)),a.ondiscard(V(this,ii))}else V(this,ds).call(this)}}Dn=new WeakMap,Qn=new WeakMap,on=new WeakMap,ta=new WeakMap,fs=new WeakMap,ds=new WeakMap,ii=new WeakMap;function we(t,e,r=!1){var a=new jd(t),i=r?Ca:0;function o(c,d){a.ensure(c,d)}Ro(()=>{var c=!1;e((d,v=0)=>{c=!0,o(v,d)}),c||o(!1,null)},i)}function hr(t,e){return e}function qd(t,e,r){for(var a=[],i=e.length,o,c=e.length,d=0;d<i;d++){let x=e[d];ra(x,()=>{if(o){if(o.pending.delete(x),o.done.add(x),o.pending.size===0){var _=t.outrogroups;oo(oi(o.done)),_.delete(o),_.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=a.length===0&&r!==null;if(v){var p=r,b=p.parentNode;_d(b),b.append(p),t.items.clear()}oo(e,!v)}else o={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(o)}function oo(t,e=!0){for(var r=0;r<t.length;r++)Jt(t[r],e)}var Nl;function Gt(t,e,r,a,i,o=null){var c=t,d=new Map,v=(e&yu)!==0;if(v){var p=t;c=p.appendChild(fr())}var b=null,x=Du(()=>{var F=r();return xo(F)?F:F==null?[]:oi(F)}),_,k=!0;function M(){S.fallback=b,Bd(S,_,c,e,a),b!==null&&(_.length===0?(b.f&ur)===0?Oo(b):(b.f^=ur,es(b,null,c)):ra(b,()=>{b=null}))}var N=Ro(()=>{_=m(x);for(var F=_.length,ie=new Set,Y=Ue,U=Fu(),$=0;$<F;$+=1){var Q=_[$],H=a(Q,$),pe=k?null:d.get(H);pe?(pe.v&&Pa(pe.v,Q),pe.i&&Pa(pe.i,$),U&&Y.unskip_effect(pe.e)):(pe=zd(d,k?c:Nl??(Nl=fr()),Q,H,$,i,e,r),k||(pe.e.f|=ur),d.set(H,pe)),ie.add(H)}if(F===0&&o&&!b&&(k?b=bn(()=>o(c)):(b=bn(()=>o(Nl??(Nl=fr()))),b.f|=ur)),F>ie.size&&Pf(),!k)if(U){for(const[Ne,ye]of d)ie.has(Ne)||Y.skip_effect(ye.e);Y.oncommit(M),Y.ondiscard(()=>{})}else M();m(x)}),S={effect:N,items:d,outrogroups:null,fallback:b};k=!1}function Wa(t){for(;t!==null&&(t.f&Bn)===0;)t=t.next;return t}function Bd(t,e,r,a,i){var ye,he,re,le,Oe,J,te,oe,X;var o=(a&Uf)!==0,c=e.length,d=t.items,v=Wa(t.effect.first),p,b=null,x,_=[],k=[],M,N,S,F;if(o)for(F=0;F<c;F+=1)M=e[F],N=i(M,F),S=d.get(N).e,(S.f&ur)===0&&((he=(ye=S.nodes)==null?void 0:ye.a)==null||he.measure(),(x??(x=new Set)).add(S));for(F=0;F<c;F+=1){if(M=e[F],N=i(M,F),S=d.get(N).e,t.outrogroups!==null)for(const ne of t.outrogroups)ne.pending.delete(S),ne.done.delete(S);if((S.f&ur)!==0)if(S.f^=ur,S===v)es(S,null,r);else{var ie=b?b.next:v;S===t.effect.last&&(t.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),xr(t,b,S),xr(t,S,ie),es(S,ie,r),b=S,_=[],k=[],v=Wa(b.next);continue}if((S.f&un)!==0&&(Oo(S),o&&((le=(re=S.nodes)==null?void 0:re.a)==null||le.unfix(),(x??(x=new Set)).delete(S))),S!==v){if(p!==void 0&&p.has(S)){if(_.length<k.length){var Y=k[0],U;b=Y.prev;var $=_[0],Q=_[_.length-1];for(U=0;U<_.length;U+=1)es(_[U],Y,r);for(U=0;U<k.length;U+=1)p.delete(k[U]);xr(t,$.prev,Q.next),xr(t,b,$),xr(t,Q,Y),v=Y,b=Q,F-=1,_=[],k=[]}else p.delete(S),es(S,v,r),xr(t,S.prev,S.next),xr(t,S,b===null?t.effect.first:b.next),xr(t,b,S),b=S;continue}for(_=[],k=[];v!==null&&v!==S;)(p??(p=new Set)).add(v),k.push(v),v=Wa(v.next);if(v===null)continue}(S.f&ur)===0&&_.push(S),b=S,v=Wa(S.next)}if(t.outrogroups!==null){for(const ne of t.outrogroups)ne.pending.size===0&&(oo(oi(ne.done)),(Oe=t.outrogroups)==null||Oe.delete(ne));t.outrogroups.size===0&&(t.outrogroups=null)}if(v!==null||p!==void 0){var H=[];if(p!==void 0)for(S of p)(S.f&un)===0&&H.push(S);for(;v!==null;)(v.f&un)===0&&v!==t.fallback&&H.push(v),v=Wa(v.next);var pe=H.length;if(pe>0){var Ne=(a&yu)!==0&&c===0?r:null;if(o){for(F=0;F<pe;F+=1)(te=(J=H[F].nodes)==null?void 0:J.a)==null||te.measure();for(F=0;F<pe;F+=1)(X=(oe=H[F].nodes)==null?void 0:oe.a)==null||X.fix()}qd(t,H,Ne)}}o&&Cr(()=>{var ne,be;if(x!==void 0)for(S of x)(be=(ne=S.nodes)==null?void 0:ne.a)==null||be.apply()})}function zd(t,e,r,a,i,o,c,d){var v=(c&Ff)!==0?(c&Gf)===0?gd(r,!1,!1):ia(r):null,p=(c&Kf)!==0?ia(i):null;return{v,i:p,e:bn(()=>(o(e,v??r,p??i,d),()=>{t.delete(a)}))}}function es(t,e,r){if(t.nodes)for(var a=t.nodes.start,i=t.nodes.end,o=e&&(e.f&ur)===0?e.nodes.start:r;a!==null;){var c=hs(a);if(o.before(a),a===i)return;a=c}}function xr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function Fd(t,e,r=!1,a=!1,i=!1){var o=t,c="";ve(()=>{var d=rt;if(c!==(c=e()??"")&&(d.nodes!==null&&(Yu(d.nodes.start,d.nodes.end),d.nodes=null),c!=="")){var v=c+"";r?v=`<svg>${v}</svg>`:a&&(v=`<math>${v}</math>`);var p=Do(v);if((r||a)&&(p=ln(p)),oa(ln(p),p.lastChild),r||a)for(;ln(p);)o.before(ln(p));else o.before(p)}})}const jl=[...` 	
\r\fÂ \v\uFEFF`];function Kd(t,e,r){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var o=i.length,c=0;(c=a.indexOf(i,c))>=0;){var d=c+o;(c===0||jl.includes(a[c-1]))&&(d===a.length||jl.includes(a[d]))?a=(c===0?"":a.substring(0,c))+a.substring(d+1):c=d}}return a===""?null:a}function ql(t,e=!1){var r=e?" !important;":";",a="";for(var i in t){var o=t[i];o!=null&&o!==""&&(a+=" "+i+": "+o+r)}return a}function zi(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ud(t,e){if(e){var r="",a,i;if(Array.isArray(e)?(a=e[0],i=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,c=0,d=!1,v=[];a&&v.push(...Object.keys(a).map(zi)),i&&v.push(...Object.keys(i).map(zi));var p=0,b=-1;const N=t.length;for(var x=0;x<N;x++){var _=t[x];if(d?_==="/"&&t[x-1]==="*"&&(d=!1):o?o===_&&(o=!1):_==="/"&&t[x+1]==="*"?d=!0:_==='"'||_==="'"?o=_:_==="("?c++:_===")"&&c--,!d&&o===!1&&c===0){if(_===":"&&b===-1)b=x;else if(_===";"||x===N-1){if(b!==-1){var k=zi(t.substring(p,b).trim());if(!v.includes(k)){_!==";"&&x++;var M=t.substring(p,x).trim();r+=" "+M+";"}}p=x+1,b=-1}}}}return a&&(r+=ql(a)),i&&(r+=ql(i,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function Pt(t,e,r,a,i,o){var c=t.__className;if(c!==r||c===void 0){var d=Kd(r,a,o);d==null?t.removeAttribute("class"):e?t.className=d:t.setAttribute("class",d),t.__className=r}else if(o&&i!==o)for(var v in o){var p=!!o[v];(i==null||p!==!!i[v])&&t.classList.toggle(v,p)}return o}function Fi(t,e={},r,a){for(var i in r){var o=r[i];e[i]!==o&&(r[i]==null?t.style.removeProperty(i):t.style.setProperty(i,o,a))}}function $t(t,e,r,a){var i=t.__style;if(i!==e){var o=Ud(e,a);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}else a&&(Array.isArray(a)?(Fi(t,r==null?void 0:r[0],a[0]),Fi(t,r==null?void 0:r[1],a[1],"important")):Fi(t,r,a));return a}function oc(t,e,r=!1){if(t.multiple){if(e==null)return;if(!xo(e))return Qf();for(var a of t.options)a.selected=e.includes(as(a));return}for(a of t.options){var i=as(a);if(yd(i,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Gd(t){var e=new MutationObserver(()=>{oc(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Uu(()=>{e.disconnect()})}function Lo(t,e,r=e){var a=new WeakSet,i=!0;Ku(t,"change",o=>{var c=o?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(c),as);else{var v=t.querySelector(c)??t.querySelector("option:not([disabled])");d=v&&as(v)}r(d),Ue!==null&&a.add(Ue)}),Hu(()=>{var o=e();if(t===document.activeElement){var c=Js??Ue;if(a.has(c))return}if(oc(t,o,i),i&&o===void 0){var d=t.querySelector(":checked");d!==null&&(o=as(d),r(o))}t.__value=o,i=!1}),Gd(t)}function as(t){return"__value"in t?t.__value:t.value}const Hd=Symbol("is custom element"),Wd=Symbol("is html");function lc(t,e,r,a){var i=Yd(t);i[e]!==(i[e]=r)&&(e==="loading"&&(t[Cf]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Vd(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Yd(t){return t.__attributes??(t.__attributes={[Hd]:t.nodeName.includes("-"),[Wd]:t.namespaceURI===_u})}var Bl=new Map;function Vd(t){var e=t.getAttribute("is")||t.nodeName,r=Bl.get(e);if(r)return r;Bl.set(e,r=[]);for(var a,i=t,o=Element.prototype;o!==i;){a=wf(i);for(var c in a)a[c].set&&r.push(c);i=pu(i)}return r}function No(t,e,r=e){var a=new WeakSet;Ku(t,"input",async i=>{var o=i?t.defaultValue:t.value;if(o=Ki(t)?Ui(o):o,r(o),Ue!==null&&a.add(Ue),await rc(),o!==(o=e())){var c=t.selectionStart,d=t.selectionEnd,v=t.value.length;if(t.value=o??"",d!==null){var p=t.value.length;c===d&&d===v&&p>v?(t.selectionStart=p,t.selectionEnd=p):(t.selectionStart=c,t.selectionEnd=Math.min(d,p))}}}),gs(e)==null&&t.value&&(r(Ki(t)?Ui(t.value):t.value),Ue!==null&&a.add(Ue)),Io(()=>{var i=e();if(t===document.activeElement){var o=Js??Ue;if(a.has(o))return}Ki(t)&&i===Ui(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ki(t){var e=t.type;return e==="number"||e==="range"}function Ui(t){return t===""?null:+t}function zl(t,e){return t===e||(t==null?void 0:t[na])===e}function lo(t={},e,r,a){return Hu(()=>{var i,o;return Io(()=>{i=o,o=[],gs(()=>{t!==r(...o)&&(e(t,...o),i&&zl(r(...i),t)&&e(null,...i))})}),()=>{Cr(()=>{o&&zl(r(...o),t)&&e(null,...o)})}}),t}let Bs=!1;function Xd(t){var e=Bs;try{return Bs=!1,[t(),Bs]}finally{Bs=e}}function Ie(t,e,r,a){var ie;var i=(r&Yf)!==0,o=(r&Vf)!==0,c=a,d=!0,v=()=>(d&&(d=!1,c=o?gs(a):a),c),p;if(i){var b=na in t||Af in t;p=((ie=ba(t,e))==null?void 0:ie.set)??(b&&e in t?Y=>t[e]=Y:void 0)}var x,_=!1;i?[x,_]=Xd(()=>t[e]):x=t[e],x===void 0&&a!==void 0&&(x=v(),p&&(Nf(),p(x)));var k;if(k=()=>{var Y=t[e];return Y===void 0?v():(d=!0,Y)},(r&Wf)===0)return k;if(p){var M=t.$$legacy;return(function(Y,U){return arguments.length>0?((!U||M||_)&&p(U?k():Y),Y):k()})}var N=!1,S=((r&Hf)!==0?ci:Du)(()=>(N=!1,k()));i&&m(S);var F=rt;return(function(Y,U){if(arguments.length>0){const $=U?m(S):i?Rt(Y):Y;return q(S,$),N=!0,c!==void 0&&(c=$),Y}return Pr&&N||(F.f&cr)!==0?S.v:m(S)})}function Nt(t){cn===null&&If(),$s(()=>{const e=gs(t);if(typeof e=="function")return e})}const Qd="5";var du;typeof window<"u"&&((du=window.__svelte??(window.__svelte={})).v??(du.v=new Set)).add(Qd);const ls=[{id:"onnx-community/Qwen3-0.6B-ONNX",name:"Qwen3 0.6B",size:"~400 MB",description:"Fastest, best for quick answers"},{id:"onnx-community/Qwen3-1.7B-ONNX",name:"Qwen3 1.7B",size:"~1.1 GB",description:"Balanced speed and quality"},{id:"onnx-community/Qwen3-4B-ONNX",name:"Qwen3 4B",size:"~2.6 GB",description:"Better reasoning, slower"},{id:"onnx-community/DeepSeek-R1-Distill-Qwen-1.5B-ONNX",name:"DeepSeek R1 1.5B",size:"~1 GB",description:"Strong reasoning, CoT focused"},{id:"onnx-community/Phi-4-mini-instruct-ONNX",name:"Phi-4 Mini",size:"~2.5 GB",description:"Microsoft, good at reasoning"},{id:"onnx-community/Phi-3-mini-128k-instruct-ONNX",name:"Phi-3 Mini 128k",size:"~2.6 GB",description:"128k context, reliable"},{id:"onnx-community/gemma-3-270m-it-ONNX",name:"Gemma 3 270M",size:"~190 MB",description:"Smallest, ultra fast"}];let Xt=null,lr="idle",Vs=null,Hr=new Set;function zs(){return Xt||(Xt=new Worker(new URL(""+new URL("worker-CdBv0KP2.js",import.meta.url).href,import.meta.url),{type:"module"}),Xt.addEventListener("message",t=>{const e=t.data;e.status==="loading"&&(lr="loading"),e.status==="ready"&&(lr="ready"),e.status==="start"&&(lr="generating"),(e.status==="complete"||e.status==="error")&&(lr=Vs?"ready":"idle");for(const r of Hr)try{r(e)}catch{}})),Xt}function uc(){return{check(){zs().postMessage({type:"check"})},loadModel(t){Vs=t,lr="loading",zs().postMessage({type:"load",modelId:t})},generate(t,e){zs().postMessage({type:"generate",data:t,options:e})},generateFull(t,e){return new Promise((r,a)=>{let i="";const o=d=>{switch(d.status){case"thinking":break;case"thinking-done":break;case"update":i+=d.output;break;case"complete":c(),r(i);break;case"error":c(),a(new Error(d.data));break}},c=()=>{Hr.delete(o)};Hr.add(o),zs().postMessage({type:"generate",data:t,options:e})})},interrupt(){Xt==null||Xt.postMessage({type:"interrupt"})},reset(){Xt==null||Xt.postMessage({type:"reset"})},onMessage(t){return Hr.add(t),()=>Hr.delete(t)},offMessage(t){Hr.delete(t)},get status(){return lr},get isReady(){return lr==="ready"},get isGenerating(){return lr==="generating"},get modelId(){return Vs},terminate(){Xt==null||Xt.terminate(),Xt=null,lr="idle",Vs=null,Hr.clear()}}}var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xs={exports:{}},$d=Xs.exports,Fl;function ep(){return Fl||(Fl=1,(function(t,e){((r,a)=>{t.exports=a()})($d,function(){var r=function(n,s){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(l,u){l.__proto__=u}:function(l,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])}))(n,s)},a=function(){return(a=Object.assign||function(n){for(var s,l=1,u=arguments.length;l<u;l++)for(var f in s=arguments[l])Object.prototype.hasOwnProperty.call(s,f)&&(n[f]=s[f]);return n}).apply(this,arguments)};function i(n,s,l){for(var u,f=0,h=s.length;f<h;f++)!u&&f in s||((u=u||Array.prototype.slice.call(s,0,f))[f]=s[f]);return n.concat(u||Array.prototype.slice.call(s))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Zd,c=Object.keys,d=Array.isArray;function v(n,s){return typeof s=="object"&&c(s).forEach(function(l){n[l]=s[l]}),n}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var p=Object.getPrototypeOf,b={}.hasOwnProperty;function x(n,s){return b.call(n,s)}function _(n,s){typeof s=="function"&&(s=s(p(n))),(typeof Reflect>"u"?c:Reflect.ownKeys)(s).forEach(function(l){M(n,l,s[l])})}var k=Object.defineProperty;function M(n,s,l,u){k(n,s,v(l&&x(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},u))}function N(n){return{from:function(s){return n.prototype=Object.create(s.prototype),M(n.prototype,"constructor",n),{extend:_.bind(null,n.prototype)}}}}var S=Object.getOwnPropertyDescriptor,F=[].slice;function ie(n,s,l){return F.call(n,s,l)}function Y(n,s){return s(n)}function U(n){if(!n)throw new Error("Assertion Failed")}function $(n){o.setImmediate?setImmediate(n):setTimeout(n,0)}function Q(n,s){if(typeof s=="string"&&x(n,s))return n[s];if(!s)return n;if(typeof s!="string"){for(var l=[],u=0,f=s.length;u<f;++u){var h=Q(n,s[u]);l.push(h)}return l}var g,y=s.indexOf(".");return y===-1||(g=n[s.substr(0,y)])==null?void 0:Q(g,s.substr(y+1))}function H(n,s,l){if(n&&s!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof s!="string"&&"length"in s){U(typeof l!="string"&&"length"in l);for(var u=0,f=s.length;u<f;++u)H(n,s[u],l[u])}else{var h,g,y=s.indexOf(".");y!==-1?(h=s.substr(0,y),(y=s.substr(y+1))===""?l===void 0?d(n)&&!isNaN(parseInt(h))?n.splice(h,1):delete n[h]:n[h]=l:H(g=(g=n[h])&&x(n,h)?g:n[h]={},y,l)):l===void 0?d(n)&&!isNaN(parseInt(s))?n.splice(s,1):delete n[s]:n[s]=l}}function pe(n){var s,l={};for(s in n)x(n,s)&&(l[s]=n[s]);return l}var Ne=[].concat;function ye(n){return Ne.apply([],n)}var W="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ye([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(s){return s+n+"Array"})}))).filter(function(n){return o[n]}),he=new Set(W.map(function(n){return o[n]})),re=null;function le(n){return re=new WeakMap,n=(function s(l){if(!l||typeof l!="object")return l;var u=re.get(l);if(u)return u;if(d(l)){u=[],re.set(l,u);for(var f=0,h=l.length;f<h;++f)u.push(s(l[f]))}else if(he.has(l.constructor))u=l;else{var g,y=p(l);for(g in u=y===Object.prototype?{}:Object.create(y),re.set(l,u),l)x(l,g)&&(u[g]=s(l[g]))}return u})(n),re=null,n}var Oe={}.toString;function J(n){return Oe.call(n).slice(8,-1)}var te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof te=="symbol"?function(n){var s;return n!=null&&(s=n[te])&&s.apply(n)}:function(){return null};function X(n,s){s=n.indexOf(s),0<=s&&n.splice(s,1)}var ne={};function be(n){var s,l,u,f;if(arguments.length===1){if(d(n))return n.slice();if(this===ne&&typeof n=="string")return[n];if(f=oe(n))for(l=[];!(u=f.next()).done;)l.push(u.value);else{if(n==null)return[n];if(typeof(s=n.length)!="number")return[n];for(l=new Array(s);s--;)l[s]=n[s]}}else for(s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return l}var Ae=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Fe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(n,s){this.name=n,this.message=s}function ge(n,s){return n+". Errors: "+Object.keys(s).map(function(l){return s[l].toString()}).filter(function(l,u,f){return f.indexOf(l)===u}).join(`
`)}function fe(n,s,l,u){this.failures=s,this.failedKeys=u,this.successCount=l,this.message=ge(n,s)}function ae(n,s){this.name="BulkError",this.failures=Object.keys(s).map(function(l){return s[l]}),this.failuresByPos=s,this.message=ge(n,this.failures)}N(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(fe).from(ke),N(ae).from(ke);var De=Fe.reduce(function(n,s){return n[s]=s+"Error",n},{}),ze=ke,_e=Fe.reduce(function(n,s){var l=s+"Error";function u(f,h){this.name=l,f?typeof f=="string"?(this.message="".concat(f).concat(h?`
 `+h:""),this.inner=h||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=ee[s]||l,this.inner=null)}return N(u).from(ze),n[s]=u,n},{}),ut=(_e.Syntax=SyntaxError,_e.Type=TypeError,_e.Range=RangeError,W.reduce(function(n,s){return n[s+"Error"]=_e[s],n},{}));W=Fe.reduce(function(n,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(n[s+"Error"]=_e[s]),n},{});function Ke(){}function ct(n){return n}function en(n,s){return n==null||n===ct?s:function(l){return s(n(l))}}function At(n,s){return function(){n.apply(this,arguments),s.apply(this,arguments)}}function Or(n,s){return n===Ke?s:function(){var l=n.apply(this,arguments),u=(l!==void 0&&(arguments[0]=l),this.onsuccess),f=this.onerror,h=(this.onsuccess=null,this.onerror=null,s.apply(this,arguments));return u&&(this.onsuccess=this.onsuccess?At(u,this.onsuccess):u),f&&(this.onerror=this.onerror?At(f,this.onerror):f),h!==void 0?h:l}}function Dr(n,s){return n===Ke?s:function(){n.apply(this,arguments);var l=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?At(l,this.onsuccess):l),u&&(this.onerror=this.onerror?At(u,this.onerror):u)}}function Sn(n,s){return n===Ke?s:function(f){var u=n.apply(this,arguments),f=(v(f,u),this.onsuccess),h=this.onerror,g=(this.onsuccess=null,this.onerror=null,s.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?At(f,this.onsuccess):f),h&&(this.onerror=this.onerror?At(h,this.onerror):h),u===void 0?g===void 0?void 0:g:v(u,g)}}function vr(n,s){return n===Ke?s:function(){return s.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function zn(n,s){return n===Ke?s:function(){var l=n.apply(this,arguments);if(l&&typeof l.then=="function"){for(var u=this,f=arguments.length,h=new Array(f);f--;)h[f]=arguments[f];return l.then(function(){return s.apply(u,h)})}return s.apply(this,arguments)}}W.ModifyError=fe,W.DexieError=ke,W.BulkError=ae;var Ft=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mr(n){Ft=n}var Fn={},$n=100,tn=typeof Promise>"u"?[]:(Fe=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[tn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),p(tn),Fe]:[Fe,p(Fe),Fe]),Fe=tn[0],ma=tn[1],ma=ma&&ma.then,at=Fe&&Fe.constructor,nn=!!tn[2],rn=function(n,s){er.push([n,s]),Tn&&(queueMicrotask(yr),Tn=!1)},Kn=!0,Tn=!0,dn=[],En=[],gr=ct,xt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},Le=xt,er=[],An=0,pa=[];function Ee(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=Le;if(typeof n!="function"){if(n!==Fn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&tr(this,this._value)}else this._state=null,this._value=null,++s.ref,(function l(u,f){try{f(function(h){if(u._state===null){if(h===u)throw new TypeError("A promise cannot be resolved with itself.");var g=u._lib&&br();h&&typeof h.then=="function"?l(u,function(y,I){h instanceof Ee?h._then(y,I):h.then(y,I)}):(u._state=!0,u._value=h,bs(u)),g&&nr()}},tr.bind(null,u))}catch(h){tr(u,h)}})(this,n)}var mr={get:function(){var n=Le,s=qr;function l(u,f){var h=this,g=!n.global&&(n!==Le||s!==qr),y=g&&!In(),I=new Ee(function(j,R){Ma(h,new ys(A(u,n,g,y),A(f,n,g,y),j,R,n))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return l.prototype=Fn,l},set:function(n){M(this,"then",n&&n.prototype===Fn?mr:{get:function(){return n},set:mr.set})}};function ys(n,s,l,u,f){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof s=="function"?s:null,this.resolve=l,this.reject=u,this.psd=f}function tr(n,s){var l,u;En.push(s),n._state===null&&(l=n._lib&&br(),s=gr(s),n._state=!1,n._value=s,u=n,dn.some(function(f){return f._value===u._value})||dn.push(u),bs(n),l)&&nr()}function bs(n){var s=n._listeners;n._listeners=[];for(var l=0,u=s.length;l<u;++l)Ma(n,s[l]);var f=n._PSD;--f.ref||f.finalize(),An===0&&(++An,rn(function(){--An==0&&Lr()},[]))}function Ma(n,s){if(n._state===null)n._listeners.push(s);else{var l=n._state?s.onFulfilled:s.onRejected;if(l===null)return(n._state?s.resolve:s.reject)(n._value);++s.psd.ref,++An,rn(yt,[l,n,s])}}function yt(n,s,l){try{var u,f=s._value;!s._state&&En.length&&(En=[]),u=Ft&&s._consoleTask?s._consoleTask.run(function(){return n(f)}):n(f),s._state||En.indexOf(f)!==-1||(h=>{for(var g=dn.length;g;)if(dn[--g]._value===h._value)return dn.splice(g,1)})(s),l.resolve(u)}catch(h){l.reject(h)}finally{--An==0&&Lr(),--l.psd.ref||l.psd.finalize()}}function yr(){je(xt,function(){br()&&nr()})}function br(){var n=Kn;return Tn=Kn=!1,n}function nr(){var n,s,l;do for(;0<er.length;)for(n=er,er=[],l=n.length,s=0;s<l;++s){var u=n[s];u[0].apply(null,u[1])}while(0<er.length);Tn=Kn=!0}function Lr(){for(var n=dn,s=(dn=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)}),pa.slice(0)),l=s.length;l;)s[--l]()}function Nr(n){return new Ee(Fn,!1,n)}function st(n,s){var l=Le;return function(){var u=br(),f=Le;try{return Rn(l,!0),n.apply(this,arguments)}catch(h){s&&s(h)}finally{Rn(f,!1),u&&nr()}}}_(Ee.prototype,{then:mr,_then:function(n,s){Ma(this,new ys(null,null,n,s,Le))},catch:function(n){var s,l;return arguments.length===1?this.then(null,n):(s=n,l=arguments[1],typeof s=="function"?this.then(null,function(u){return(u instanceof s?l:Nr)(u)}):this.then(null,function(u){return(u&&u.name===s?l:Nr)(u)}))},finally:function(n){return this.then(function(s){return Ee.resolve(n()).then(function(){return s})},function(s){return Ee.resolve(n()).then(function(){return Nr(s)})})},timeout:function(n,s){var l=this;return n<1/0?new Ee(function(u,f){var h=setTimeout(function(){return f(new _e.Timeout(s))},n);l.then(u,f).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),xt.env=ws(),_(Ee,{all:function(){var n=be.apply(null,arguments).map(Br);return new Ee(function(s,l){n.length===0&&s([]);var u=n.length;n.forEach(function(f,h){return Ee.resolve(f).then(function(g){n[h]=g,--u||s(n)},l)})})},resolve:function(n){return n instanceof Ee?n:n&&typeof n.then=="function"?new Ee(function(s,l){n.then(s,l)}):new Ee(Fn,!0,n)},reject:Nr,race:function(){var n=be.apply(null,arguments).map(Br);return new Ee(function(s,l){n.map(function(u){return Ee.resolve(u).then(s,l)})})},PSD:{get:function(){return Le},set:function(n){return Le=n}},totalEchoes:{get:function(){return qr}},newPSD:Cn,usePSD:je,scheduler:{get:function(){return rn},set:function(n){rn=n}},rejectionMapper:{get:function(){return gr},set:function(n){gr=n}},follow:function(n,s){return new Ee(function(l,u){return Cn(function(f,h){var g=Le;g.unhandleds=[],g.onunhandled=h,g.finalize=At(function(){var y,I=this;y=function(){I.unhandleds.length===0?f():h(I.unhandleds[0])},pa.push(function j(){y(),pa.splice(pa.indexOf(j),1)}),++An,rn(function(){--An==0&&Lr()},[])},g.finalize),n()},s,l,u)})}}),at&&(at.allSettled&&M(Ee,"allSettled",function(){var n=be.apply(null,arguments).map(Br);return new Ee(function(s){n.length===0&&s([]);var l=n.length,u=new Array(l);n.forEach(function(f,h){return Ee.resolve(f).then(function(g){return u[h]={status:"fulfilled",value:g}},function(g){return u[h]={status:"rejected",reason:g}}).then(function(){return--l||s(u)})})})}),at.any&&typeof AggregateError<"u"&&M(Ee,"any",function(){var n=be.apply(null,arguments).map(Br);return new Ee(function(s,l){n.length===0&&l(new AggregateError([]));var u=n.length,f=new Array(u);n.forEach(function(h,g){return Ee.resolve(h).then(function(y){return s(y)},function(y){f[g]=y,--u||l(new AggregateError(f))})})})}),at.withResolvers)&&(Ee.withResolvers=at.withResolvers);var kt={awaits:0,echoes:0,id:0},pn=0,hn=[],jr=0,qr=0,La=0;function Cn(n,g,l,u){var f=Le,h=Object.create(f),g=(h.parent=f,h.ref=0,h.global=!1,h.id=++La,xt.env,h.env=nn?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},g&&v(h,g),++f.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},je(h,n,l,u));return h.ref===0&&h.finalize(),g}function jt(){return kt.id||(kt.id=++pn),++kt.awaits,kt.echoes+=$n,kt.id}function In(){return!!kt.awaits&&(--kt.awaits==0&&(kt.id=0),kt.echoes=kt.awaits*$n,!0)}function Br(n){return kt.echoes&&n&&n.constructor===at?(jt(),n.then(function(s){return In(),s},function(s){return In(),xe(s)})):n}function _s(){var n=hn[hn.length-1];hn.pop(),Rn(n,!1)}function Rn(n,s){var l,u,f=Le;(s?!kt.echoes||jr++&&n===Le:!jr||--jr&&n===Le)||queueMicrotask(s?(function(h){++qr,kt.echoes&&--kt.echoes!=0||(kt.echoes=kt.awaits=kt.id=0),hn.push(Le),Rn(h,!0)}).bind(null,n):_s),n!==Le&&(Le=n,f===xt&&(xt.env=ws()),nn)&&(l=xt.env.Promise,u=n.env,f.global||n.global)&&(Object.defineProperty(o,"Promise",u.PromiseProp),l.all=u.all,l.race=u.race,l.resolve=u.resolve,l.reject=u.reject,u.allSettled&&(l.allSettled=u.allSettled),u.any)&&(l.any=u.any)}function ws(){var n=o.Promise;return nn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function je(n,s,l,u,f){var h=Le;try{return Rn(n,!0),s(l,u,f)}finally{Rn(h,!1)}}function A(n,s,l,u){return typeof n!="function"?n:function(){var f=Le;l&&jt(),Rn(s,!0);try{return n.apply(this,arguments)}finally{Rn(f,!1),u&&queueMicrotask(In)}}}function de(n){Promise===at&&kt.echoes===0?jr===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+ma).indexOf("[native code]")===-1&&(jt=In=Ke);var xe=Ee.reject,$e="ï¿¿",ot="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vt="String expected.",bt=[],Yt="__dbnames",Un="readonly",zr="readwrite";function ft(n,s){return n?s?function(){return n.apply(this,arguments)&&s.apply(this,arguments)}:n:s}var Na={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Fr(n){return typeof n!="string"||/\./.test(n)?function(s){return s}:function(s){return s[n]===void 0&&n in s&&delete(s=le(s))[n],s}}function Zo(){throw _e.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qe(n,s){try{var l=Jo(n),u=Jo(s);if(l!==u)return l==="Array"?1:u==="Array"?-1:l==="binary"?1:u==="binary"?-1:l==="string"?1:u==="string"?-1:l==="Date"?1:u!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return s<n?1:n<s?-1:0;case"binary":for(var f=$o(n),h=$o(s),g=f.length,y=h.length,I=g<y?g:y,j=0;j<I;++j)if(f[j]!==h[j])return f[j]<h[j]?-1:1;return g===y?0:g<y?-1:1;case"Array":for(var R=n,E=s,O=R.length,D=E.length,P=O<D?O:D,C=0;C<P;++C){var B=Qe(R[C],E[C]);if(B!==0)return B}return O===D?0:O<D?-1:1}}catch{}return NaN}function Jo(n){var s=typeof n;return s=="object"&&(ArrayBuffer.isView(n)||(s=J(n))==="ArrayBuffer")?"binary":s}function $o(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function ks(n,s,l){var u=n.schema.yProps;return u?(s&&0<l.numFailures&&(s=s.filter(function(f,h){return!l.failures[h]})),Promise.all(u.map(function(f){return f=f.updatesTable,s?n.db.table(f).where("k").anyOf(s).delete():n.db.table(f).clear()})).then(function(){return l})):l}el.prototype.execute=function(n){var s=this["@@propmod"];if(s.add!==void 0){var l=s.add;if(d(l))return i(i([],d(n)?n:[],!0),l).sort();if(typeof l=="number")return(Number(n)||0)+l;if(typeof l=="bigint")try{return BigInt(n)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(s.remove!==void 0){var u=s.remove;if(d(u))return d(n)?n.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(n)-u;if(typeof u=="bigint")try{return BigInt(n)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return l=(l=s.replacePrefix)==null?void 0:l[0],l&&typeof n=="string"&&n.startsWith(l)?s.replacePrefix[1]+n.substring(l.length):n};var ja=el;function el(n){this["@@propmod"]=n}function tl(n,s){for(var l=c(s),u=l.length,f=!1,h=0;h<u;++h){var g=l[h],y=s[g],I=Q(n,g);y instanceof ja?(H(n,g,y.execute(I)),f=!0):I!==y&&(H(n,g,y),f=!0)}return f}lt.prototype._trans=function(n,s,l){var u=this._tx||Le.trans,f=this.name,h=Ft&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function g(j,R,E){if(E.schema[f])return s(E.idbtrans,E);throw new _e.NotFound("Table "+f+" not part of transaction")}var y=br();try{var I=u&&u.db._novip===this.db._novip?u===Le.trans?u._promise(n,g,l):Cn(function(){return u._promise(n,g,l)},{trans:u,transless:Le.transless||Le}):(function j(R,E,O,D){if(R.idbdb&&(R._state.openComplete||Le.letThrough||R._vip)){var P=R._createTransaction(E,O,R._dbSchema);try{P.create(),R._state.PR1398_maxLoop=3}catch(C){return C.name===De.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return j(R,E,O,D)})):xe(C)}return P._promise(E,function(C,B){return Cn(function(){return Le.trans=P,D(C,B,P)})}).then(function(C){if(E==="readwrite")try{P.idbtrans.commit()}catch{}return E==="readonly"?C:P._completion.then(function(){return C})})}if(R._state.openComplete)return xe(new _e.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return xe(new _e.DatabaseClosed);R.open().catch(Ke)}return R._state.dbReadyPromise.then(function(){return j(R,E,O,D)})})(this.db,n,[this.name],g);return h&&(I._consoleTask=h,I=I.catch(function(j){return console.trace(j),xe(j)})),I}finally{y&&nr()}},lt.prototype.get=function(n,s){var l=this;return n&&n.constructor===Object?this.where(n).first(s):n==null?xe(new _e.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return l.core.get({trans:u,key:n}).then(function(f){return l.hook.reading.fire(f)})}).then(s)},lt.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(d(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var s=c(n);if(s.length===1)return this.where(s[0]).equals(n[s[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&s.every(function(j){return 0<=y.keyPath.indexOf(j)})){for(var I=0;I<s.length;++I)if(s.indexOf(y.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(y,I){return y.keyPath.length-I.keyPath.length})[0];if(l&&this.db._maxKey!==$e)return g=l.keyPath.slice(0,s.length),this.where(g).equals(g.map(function(y){return n[y]}));!l&&Ft&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(s.join("+"),"]"));var u=this.schema.idxByName;function f(y,I){return Qe(y,I)===0}var g=s.reduce(function(R,I){var j=R[0],R=R[1],E=u[I],O=n[I];return[j||E,j||!E?ft(R,E&&E.multi?function(D){return D=Q(D,I),d(D)&&D.some(function(P){return f(O,P)})}:function(D){return f(O,Q(D,I))}):R]},[null,null]),h=g[0],g=g[1];return h?this.where(h.name).equals(n[h.keyPath]).filter(g):l?this.filter(g):this.where(s).equals("")},lt.prototype.filter=function(n){return this.toCollection().and(n)},lt.prototype.count=function(n){return this.toCollection().count(n)},lt.prototype.offset=function(n){return this.toCollection().offset(n)},lt.prototype.limit=function(n){return this.toCollection().limit(n)},lt.prototype.each=function(n){return this.toCollection().each(n)},lt.prototype.toArray=function(n){return this.toCollection().toArray(n)},lt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},lt.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,d(n)?"[".concat(n.join("+"),"]"):n))},lt.prototype.reverse=function(){return this.toCollection().reverse()},lt.prototype.mapToClass=function(n){for(var s=this.db,l=this.name,u=((this.schema.mappedClass=n).prototype instanceof Zo&&(n=(g=>{var y=R,I=g;if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function j(){this.constructor=y}function R(){return g!==null&&g.apply(this,arguments)||this}return r(y,I),y.prototype=I===null?Object.create(I):(j.prototype=I.prototype,new j),Object.defineProperty(R.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),R.prototype.table=function(){return l},R})(n)),new Set),f=n.prototype;f;f=p(f))Object.getOwnPropertyNames(f).forEach(function(g){return u.add(g)});function h(g){if(!g)return g;var y,I=Object.create(n.prototype);for(y in g)if(!u.has(y))try{I[y]=g[y]}catch{}return I}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},lt.prototype.defineClass=function(){return this.mapToClass(function(n){v(this,n)})},lt.prototype.add=function(n,s){var l=this,u=this.schema.primKey,f=u.auto,h=u.keyPath,g=n;return h&&f&&(g=Fr(h)(n)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"add",keys:s!=null?[s]:null,values:[g]})}).then(function(y){return y.numFailures?Ee.reject(y.failures[0]):y.lastResult}).then(function(y){if(h)try{H(n,h,y)}catch{}return y})},lt.prototype.upsert=function(n,s){var l=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return l.core.get({trans:f,key:n}).then(function(h){var g=h??{};return tl(g,s),u&&H(g,u,n),l.core.mutate({trans:f,type:"put",values:[g],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[s]}}).then(function(y){return y.numFailures?Ee.reject(y.failures[0]):!!h})})})},lt.prototype.update=function(n,s){return typeof n!="object"||d(n)?this.where(":id").equals(n).modify(s):(n=Q(n,this.schema.primKey.keyPath))===void 0?xe(new _e.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(s)},lt.prototype.put=function(n,s){var l=this,u=this.schema.primKey,f=u.auto,h=u.keyPath,g=n;return h&&f&&(g=Fr(h)(n)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"put",values:[g],keys:s!=null?[s]:null})}).then(function(y){return y.numFailures?Ee.reject(y.failures[0]):y.lastResult}).then(function(y){if(h)try{H(n,h,y)}catch{}return y})},lt.prototype.delete=function(n){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"delete",keys:[n]}).then(function(u){return ks(s,[n],u)}).then(function(u){return u.numFailures?Ee.reject(u.failures[0]):void 0})})},lt.prototype.clear=function(){var n=this;return this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"deleteRange",range:Na}).then(function(l){return ks(n,null,l)})}).then(function(s){return s.numFailures?Ee.reject(s.failures[0]):void 0})},lt.prototype.bulkGet=function(n){var s=this;return this._trans("readonly",function(l){return s.core.getMany({keys:n,trans:l}).then(function(u){return u.map(function(f){return s.hook.reading.fire(f)})})})},lt.prototype.bulkAdd=function(n,s,l){var u=this,f=Array.isArray(s)?s:void 0,h=(l=l||(f?void 0:s))?l.allKeys:void 0;return this._trans("readwrite",function(g){var y=u.schema.primKey,j=y.auto,y=y.keyPath;if(y&&f)throw new _e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var I=n.length,j=y&&j?n.map(Fr(y)):n;return u.core.mutate({trans:g,type:"add",keys:f,values:j,wantResults:h}).then(function(R){var E=R.numFailures,O=R.failures;if(E===0)return h?R.results:R.lastResult;throw new ae("".concat(u.name,".bulkAdd(): ").concat(E," of ").concat(I," operations failed"),O)})})},lt.prototype.bulkPut=function(n,s,l){var u=this,f=Array.isArray(s)?s:void 0,h=(l=l||(f?void 0:s))?l.allKeys:void 0;return this._trans("readwrite",function(g){var y=u.schema.primKey,j=y.auto,y=y.keyPath;if(y&&f)throw new _e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var I=n.length,j=y&&j?n.map(Fr(y)):n;return u.core.mutate({trans:g,type:"put",keys:f,values:j,wantResults:h}).then(function(R){var E=R.numFailures,O=R.failures;if(E===0)return h?R.results:R.lastResult;throw new ae("".concat(u.name,".bulkPut(): ").concat(E," of ").concat(I," operations failed"),O)})})},lt.prototype.bulkUpdate=function(n){var s=this,l=this.core,u=n.map(function(g){return g.key}),f=n.map(function(g){return g.changes}),h=[];return this._trans("readwrite",function(g){return l.getMany({trans:g,keys:u,cache:"clone"}).then(function(y){var I=[],j=[],R=(n.forEach(function(E,O){var D=E.key,P=E.changes,C=y[O];if(C){for(var B=0,z=Object.keys(P);B<z.length;B++){var L=z[B],Z=P[L];if(L===s.schema.primKey.keyPath){if(Qe(Z,D)!==0)throw new _e.Constraint("Cannot update primary key in bulkUpdate()")}else H(C,L,Z)}h.push(O),I.push(D),j.push(C)}}),I.length);return l.mutate({trans:g,type:"put",keys:I,values:j,updates:{keys:u,changeSpecs:f}}).then(function(E){var O=E.numFailures,D=E.failures;if(O===0)return R;for(var P=0,C=Object.keys(D);P<C.length;P++){var B,z=C[P],L=h[Number(z)];L!=null&&(B=D[z],delete D[z],D[L]=B)}throw new ae("".concat(s.name,".bulkUpdate(): ").concat(O," of ").concat(R," operations failed"),D)})})})},lt.prototype.bulkDelete=function(n){var s=this,l=n.length;return this._trans("readwrite",function(u){return s.core.mutate({trans:u,type:"delete",keys:n}).then(function(f){return ks(s,n,f)})}).then(function(u){var f=u.numFailures,h=u.failures;if(f===0)return u.lastResult;throw new ae("".concat(s.name,".bulkDelete(): ").concat(f," of ").concat(l," operations failed"),h)})};var nl=lt;function lt(){}function qa(n){function s(g,y){if(y){for(var I=arguments.length,j=new Array(I-1);--I;)j[I-1]=arguments[I];return l[g].subscribe.apply(null,j),n}if(typeof g=="string")return l[g]}var l={};s.addEventType=h;for(var u=1,f=arguments.length;u<f;++u)h(arguments[u]);return s;function h(g,y,I){var j,R;if(typeof g!="object")return y=y||vr,R={subscribers:[],fire:I=I||Ke,subscribe:function(E){R.subscribers.indexOf(E)===-1&&(R.subscribers.push(E),R.fire=y(R.fire,E))},unsubscribe:function(E){R.subscribers=R.subscribers.filter(function(O){return O!==E}),R.fire=R.subscribers.reduce(y,I)}},l[g]=s[g]=R;c(j=g).forEach(function(E){var O=j[E];if(d(O))h(E,j[E][0],j[E][1]);else{if(O!=="asap")throw new _e.InvalidArgument("Invalid event config");var D=h(E,ct,function(){for(var P=arguments.length,C=new Array(P);P--;)C[P]=arguments[P];D.subscribers.forEach(function(B){$(function(){B.apply(null,C)})})})}})}}function Ba(n,s){return N(s).from({prototype:n}),s}function ha(n,s){return!(n.filter||n.algorithm||n.or)&&(s?n.justLimit:!n.replayFilter)}function hi(n,s){n.filter=ft(n.filter,s)}function vi(n,s,l){var u=n.replayFilter;n.replayFilter=u?function(){return ft(u(),s())}:s,n.justLimit=l&&!u}function xs(n,s){if(n.isPrimKey)return s.primaryKey;var l=s.getIndexByKeyPath(n.index);if(l)return l;throw new _e.Schema("KeyPath "+n.index+" on object store "+s.name+" is not indexed")}function rl(n,s,l){var u=xs(n,s.schema);return s.openCursor({trans:l,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function Ss(n,s,l,u){var f,h,g=n.replayFilter?ft(n.filter,n.replayFilter()):n.filter;return n.or?(f={},h=function(y,I,j){var R,E;g&&!g(I,j,function(O){return I.stop(O)},function(O){return I.fail(O)})||((E=""+(R=I.primaryKey))=="[object ArrayBuffer]"&&(E=""+new Uint8Array(R)),x(f,E))||(f[E]=!0,s(y,I,j))},Promise.all([n.or._iterate(h,l),al(rl(n,u,l),n.algorithm,h,!n.keysOnly&&n.valueMapper)])):al(rl(n,u,l),ft(n.algorithm,g),s,!n.keysOnly&&n.valueMapper)}function al(n,s,l,u){var f=st(u?function(h,g,y){return l(u(h),g,y)}:l);return n.then(function(h){if(h)return h.start(function(){var g=function(){return h.continue()};s&&!s(h,function(y){return g=y},function(y){h.stop(y),g=Ke},function(y){h.fail(y),g=Ke})||f(h.value,h,function(y){return g=y}),g()})})}et.prototype._read=function(n,s){var l=this._ctx;return l.error?l.table._trans(null,xe.bind(null,l.error)):l.table._trans("readonly",n).then(s)},et.prototype._write=function(n){var s=this._ctx;return s.error?s.table._trans(null,xe.bind(null,s.error)):s.table._trans("readwrite",n,"locked")},et.prototype._addAlgorithm=function(n){var s=this._ctx;s.algorithm=ft(s.algorithm,n)},et.prototype._iterate=function(n,s){return Ss(this._ctx,n,s,this._ctx.table.core)},et.prototype.clone=function(n){var s=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return n&&v(l,n),s._ctx=l,s},et.prototype.raw=function(){return this._ctx.valueMapper=null,this},et.prototype.each=function(n){var s=this._ctx;return this._read(function(l){return Ss(s,n,l,s.table.core)})},et.prototype.count=function(n){var s=this;return this._read(function(l){var u,f=s._ctx,h=f.table.core;return ha(f,!0)?h.count({trans:l,query:{index:xs(f,h.schema),range:f.range}}).then(function(g){return Math.min(g,f.limit)}):(u=0,Ss(f,function(){return++u,!1},l,h).then(function(){return u}))}).then(n)},et.prototype.sortBy=function(n,s){var l=n.split(".").reverse(),u=l[0],f=l.length-1;function h(I,j){return j?h(I[l[j]],j-1):I[u]}var g=this._ctx.dir==="next"?1:-1;function y(I,j){return Qe(h(I,f),h(j,f))*g}return this.toArray(function(I){return I.sort(y)}).then(s)},et.prototype.toArray=function(n){var s=this;return this._read(function(l){var u,f,h,g=s._ctx;return g.dir==="next"&&ha(g,!0)&&0<g.limit?(u=g.valueMapper,f=xs(g,g.table.core.schema),g.table.core.query({trans:l,limit:g.limit,values:!0,query:{index:f,range:g.range}}).then(function(y){return y=y.result,u?y.map(u):y})):(h=[],Ss(g,function(y){return h.push(y)},l,g.table.core).then(function(){return h}))},n)},et.prototype.offset=function(n){var s=this._ctx;return n<=0||(s.offset+=n,ha(s)?vi(s,function(){var l=n;return function(u,f){return l===0||(l===1?--l:f(function(){u.advance(l),l=0}),!1)}}):vi(s,function(){var l=n;return function(){return--l<0}})),this},et.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),vi(this._ctx,function(){var s=n;return function(l,u,f){return--s<=0&&u(f),0<=s}},!0),this},et.prototype.until=function(n,s){return hi(this._ctx,function(l,u,f){return!n(l.value)||(u(f),s)}),this},et.prototype.first=function(n){return this.limit(1).toArray(function(s){return s[0]}).then(n)},et.prototype.last=function(n){return this.reverse().first(n)},et.prototype.filter=function(n){var s;return hi(this._ctx,function(l){return n(l.value)}),(s=this._ctx).isMatch=ft(s.isMatch,n),this},et.prototype.and=function(n){return this.filter(n)},et.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},et.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},et.prototype.desc=function(){return this.reverse()},et.prototype.eachKey=function(n){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(l,u){n(u.key,u)})},et.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},et.prototype.eachPrimaryKey=function(n){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(l,u){n(u.primaryKey,u)})},et.prototype.keys=function(n){var s=this._ctx,l=(s.keysOnly=!s.isMatch,[]);return this.each(function(u,f){l.push(f.key)}).then(function(){return l}).then(n)},et.prototype.primaryKeys=function(n){var s=this._ctx;if(s.dir==="next"&&ha(s,!0)&&0<s.limit)return this._read(function(u){var f=xs(s,s.table.core.schema);return s.table.core.query({trans:u,values:!1,limit:s.limit,query:{index:f,range:s.range}})}).then(function(u){return u.result}).then(n);s.keysOnly=!s.isMatch;var l=[];return this.each(function(u,f){l.push(f.primaryKey)}).then(function(){return l}).then(n)},et.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},et.prototype.firstKey=function(n){return this.limit(1).keys(function(s){return s[0]}).then(n)},et.prototype.lastKey=function(n){return this.reverse().firstKey(n)},et.prototype.distinct=function(){var n,s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];return s&&s.multi&&(n={},hi(this._ctx,function(u){var u=u.primaryKey.toString(),f=x(n,u);return n[u]=!0,!f})),this},et.prototype.modify=function(n){var s=this,l=this._ctx;return this._write(function(u){function f(C,B){var z=B.failures;O+=C-B.numFailures;for(var L=0,Z=c(z);L<Z.length;L++){var ue=Z[L];E.push(z[ue])}}var h=typeof n=="function"?n:function(C){return tl(C,n)},g=l.table.core,R=g.schema.primaryKey,y=R.outbound,I=R.extractKey,j=200,R=s.db._options.modifyChunkSize,E=(R&&(j=typeof R=="object"?R[g.name]||R["*"]||200:R),[]),O=0,D=[],P=n===sl;return s.clone().primaryKeys().then(function(C){function B(L){var Z=Math.min(j,C.length-L),ue=C.slice(L,L+Z);return(P?Promise.resolve([]):g.getMany({trans:u,keys:ue,cache:"immutable"})).then(function(Se){var Te=[],ce=[],Re=y?[]:null,Ce=P?ue:[];if(!P)for(var me=0;me<Z;++me){var Me=Se[me],Ze={value:le(Me),primKey:C[L+me]};h.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?Ce.push(C[L+me]):y||Qe(I(Me),I(Ze.value))===0?(ce.push(Ze.value),y&&Re.push(C[L+me])):(Ce.push(C[L+me]),Te.push(Ze.value)))}return Promise.resolve(0<Te.length&&g.mutate({trans:u,type:"add",values:Te}).then(function(tt){for(var Be in tt.failures)Ce.splice(parseInt(Be),1);f(Te.length,tt)})).then(function(){return(0<ce.length||z&&typeof n=="object")&&g.mutate({trans:u,type:"put",keys:Re,values:ce,criteria:z,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<L}).then(function(tt){return f(ce.length,tt)})}).then(function(){return(0<Ce.length||z&&P)&&g.mutate({trans:u,type:"delete",keys:Ce,criteria:z,isAdditionalChunk:0<L}).then(function(tt){return ks(l.table,Ce,tt)}).then(function(tt){return f(Ce.length,tt)})}).then(function(){return C.length>L+Z&&B(L+j)})})}var z=ha(l)&&l.limit===1/0&&(typeof n!="function"||P)&&{index:l.index,range:l.range};return B(0).then(function(){if(0<E.length)throw new fe("Error modifying one or more objects",E,O,D);return C.length})})})},et.prototype.delete=function(){var n=this._ctx,s=n.range;return!ha(n)||n.table.schema.yProps||!n.isPrimKey&&s.type!==3?this.modify(sl):this._write(function(l){var u=n.table.core.schema.primaryKey,f=s;return n.table.core.count({trans:l,query:{index:u,range:f}}).then(function(h){return n.table.core.mutate({trans:l,type:"deleteRange",range:f}).then(function(I){var y=I.failures,I=I.numFailures;if(I)throw new fe("Could not delete some values",Object.keys(y).map(function(j){return y[j]}),h-I);return h-I})})})};var Qc=et;function et(){}var sl=function(n,s){return s.value=null};function Zc(n,s){return n<s?-1:n===s?0:1}function Jc(n,s){return s<n?-1:n===s?0:1}function an(n,s,l){return n=n instanceof ol?new n.Collection(n):n,n._ctx.error=new(l||TypeError)(s),n}function va(n){return new n.Collection(n,function(){return il("")}).limit(0)}function Ts(D,s,l,u){var f,h,g,y,I,j,R,E=l.length;if(!l.every(function(C){return typeof C=="string"}))return an(D,vt);function O(C){f=C==="next"?function(z){return z.toUpperCase()}:function(z){return z.toLowerCase()},h=C==="next"?function(z){return z.toLowerCase()}:function(z){return z.toUpperCase()},g=C==="next"?Zc:Jc;var B=l.map(function(z){return{lower:h(z),upper:f(z)}}).sort(function(z,L){return g(z.lower,L.lower)});y=B.map(function(z){return z.upper}),I=B.map(function(z){return z.lower}),R=(j=C)==="next"?"":u}O("next");var D=new D.Collection(D,function(){return _r(y[0],I[E-1]+u)}),P=(D._ondirectionchange=function(C){O(C)},0);return D._addAlgorithm(function(C,B,z){var L=C.key;if(typeof L=="string"){var Z=h(L);if(s(Z,I,P))return!0;for(var ue=null,Se=P;Se<E;++Se){var Te=((ce,Re,Ce,me,Me,Ze)=>{for(var tt=Math.min(ce.length,me.length),Be=-1,Ge=0;Ge<tt;++Ge){var gt=Re[Ge];if(gt!==me[Ge])return Me(ce[Ge],Ce[Ge])<0?ce.substr(0,Ge)+Ce[Ge]+Ce.substr(Ge+1):Me(ce[Ge],me[Ge])<0?ce.substr(0,Ge)+me[Ge]+Ce.substr(Ge+1):0<=Be?ce.substr(0,Be)+Re[Be]+Ce.substr(Be+1):null;Me(ce[Ge],gt)<0&&(Be=Ge)}return tt<me.length&&Ze==="next"?ce+Ce.substr(ce.length):tt<ce.length&&Ze==="prev"?ce.substr(0,Ce.length):Be<0?null:ce.substr(0,Be)+me[Be]+Ce.substr(Be+1)})(L,Z,y[Se],I[Se],g,j);Te===null&&ue===null?P=Se+1:(ue===null||0<g(ue,Te))&&(ue=Te)}B(ue!==null?function(){C.continue(ue+R)}:z)}return!1}),D}function _r(n,s,l,u){return{type:2,lower:n,upper:s,lowerOpen:l,upperOpen:u}}function il(n){return{type:1,lower:n,upper:n}}Object.defineProperty(St.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),St.prototype.between=function(n,s,l,u){l=l!==!1,u=u===!0;try{return 0<this._cmp(n,s)||this._cmp(n,s)===0&&(l||u)&&(!l||!u)?va(this):new this.Collection(this,function(){return _r(n,s,!l,!u)})}catch{return an(this,ot)}},St.prototype.equals=function(n){return n==null?an(this,ot):new this.Collection(this,function(){return il(n)})},St.prototype.above=function(n){return n==null?an(this,ot):new this.Collection(this,function(){return _r(n,void 0,!0)})},St.prototype.aboveOrEqual=function(n){return n==null?an(this,ot):new this.Collection(this,function(){return _r(n,void 0,!1)})},St.prototype.below=function(n){return n==null?an(this,ot):new this.Collection(this,function(){return _r(void 0,n,!1,!0)})},St.prototype.belowOrEqual=function(n){return n==null?an(this,ot):new this.Collection(this,function(){return _r(void 0,n)})},St.prototype.startsWith=function(n){return typeof n!="string"?an(this,vt):this.between(n,n+$e,!0,!0)},St.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Ts(this,function(s,l){return s.indexOf(l[0])===0},[n],$e)},St.prototype.equalsIgnoreCase=function(n){return Ts(this,function(s,l){return s===l[0]},[n],"")},St.prototype.anyOfIgnoreCase=function(){var n=be.apply(ne,arguments);return n.length===0?va(this):Ts(this,function(s,l){return l.indexOf(s)!==-1},n,"")},St.prototype.startsWithAnyOfIgnoreCase=function(){var n=be.apply(ne,arguments);return n.length===0?va(this):Ts(this,function(s,l){return l.some(function(u){return s.indexOf(u)===0})},n,$e)},St.prototype.anyOf=function(){var n,s,l=this,u=be.apply(ne,arguments),f=this._cmp;try{u.sort(f)}catch{return an(this,ot)}return u.length===0?va(this):((n=new this.Collection(this,function(){return _r(u[0],u[u.length-1])}))._ondirectionchange=function(h){f=h==="next"?l._ascending:l._descending,u.sort(f)},s=0,n._addAlgorithm(function(h,g,y){for(var I=h.key;0<f(I,u[s]);)if(++s===u.length)return g(y),!1;return f(I,u[s])===0||(g(function(){h.continue(u[s])}),!1)}),n)},St.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},St.prototype.noneOf=function(){var n=be.apply(ne,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return an(this,ot)}var s=n.reduce(function(l,u){return l?l.concat([[l[l.length-1][1],u]]):[[-1/0,u]]},null);return s.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(s,{includeLowers:!1,includeUppers:!1})},St.prototype.inAnyRange=function(n,z){var l=this,u=this._cmp,f=this._ascending,h=this._descending,g=this._min,y=this._max;if(n.length===0)return va(this);if(!n.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&f(L[0],L[1])<=0}))return an(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_e.InvalidArgument);var I=!z||z.includeLowers!==!1,j=z&&z.includeUppers===!0,R,E=f;function O(L,Z){return E(L[0],Z[0])}try{(R=n.reduce(function(L,Z){for(var ue=0,Se=L.length;ue<Se;++ue){var Te=L[ue];if(u(Z[0],Te[1])<0&&0<u(Z[1],Te[0])){Te[0]=g(Te[0],Z[0]),Te[1]=y(Te[1],Z[1]);break}}return ue===Se&&L.push(Z),L},[])).sort(O)}catch{return an(this,ot)}var D=0,P=j?function(L){return 0<f(L,R[D][1])}:function(L){return 0<=f(L,R[D][1])},C=I?function(L){return 0<h(L,R[D][0])}:function(L){return 0<=h(L,R[D][0])},B=P,z=new this.Collection(this,function(){return _r(R[0][0],R[R.length-1][1],!I,!j)});return z._ondirectionchange=function(L){E=L==="next"?(B=P,f):(B=C,h),R.sort(O)},z._addAlgorithm(function(L,Z,ue){for(var Se,Te=L.key;B(Te);)if(++D===R.length)return Z(ue),!1;return!P(Se=Te)&&!C(Se)||(l._cmp(Te,R[D][1])===0||l._cmp(Te,R[D][0])===0||Z(function(){E===f?L.continue(R[D][0]):L.continue(R[D][1])}),!1)}),z},St.prototype.startsWithAnyOf=function(){var n=be.apply(ne,arguments);return n.every(function(s){return typeof s=="string"})?n.length===0?va(this):this.inAnyRange(n.map(function(s){return[s,s+$e]})):an(this,"startsWithAnyOf() only works with strings")};var ol=St;function St(){}function Gn(n){return st(function(s){return za(s),n(s.target.error),!1})}function za(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Fa="storagemutated",gi="x-storagemutated-1",wr=qa(null,Fa),$c=(Hn.prototype._lock=function(){return U(!Le.global),++this._reculock,this._reculock!==1||Le.global||(Le.lockOwnerFor=this),this},Hn.prototype._unlock=function(){if(U(!Le.global),--this._reculock==0)for(Le.global||(Le.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{je(n[1],n[0])}catch{}}return this},Hn.prototype._locked=function(){return this._reculock&&Le.lockOwnerFor!==this},Hn.prototype.create=function(n){var s=this;if(this.mode){var l=this.db.idbdb,u=this.db._state.dbOpenError;if(U(!this.idbtrans),!n&&!l)switch(u&&u.name){case"DatabaseClosedError":throw new _e.DatabaseClosed(u);case"MissingAPIError":throw new _e.MissingAPI(u.message,u);default:throw new _e.OpenFailed(u)}if(!this.active)throw new _e.TransactionInactive;U(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=st(function(f){za(f),s._reject(n.error)}),n.onabort=st(function(f){za(f),s.active&&s._reject(new _e.Abort(n.error)),s.active=!1,s.on("abort").fire(f)}),n.oncomplete=st(function(){s.active=!1,s._resolve(),"mutatedParts"in n&&wr.storagemutated.fire(n.mutatedParts)})}return this},Hn.prototype._promise=function(n,s,l){var u,f=this;return n==="readwrite"&&this.mode!=="readwrite"?xe(new _e.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Ee(function(h,g){f._blockedFuncs.push([function(){f._promise(n,s,l).then(h,g)},Le])}):l?Cn(function(){var h=new Ee(function(g,y){f._lock();var I=s(g,y,f);I&&I.then&&I.then(g,y)});return h.finally(function(){return f._unlock()}),h._lib=!0,h}):((u=new Ee(function(h,g){var y=s(h,g,f);y&&y.then&&y.then(h,g)}))._lib=!0,u):xe(new _e.TransactionInactive)},Hn.prototype._root=function(){return this.parent?this.parent._root():this},Hn.prototype.waitFor=function(n){var s,l=this._root(),u=Ee.resolve(n),f=(l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return u}):(l._waitingFor=u,l._waitingQueue=[],s=l.idbtrans.objectStore(l.storeNames[0]),(function h(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(s.get(-1/0).onsuccess=h)})()),l._waitingFor);return new Ee(function(h,g){u.then(function(y){return l._waitingQueue.push(st(h.bind(null,y)))},function(y){return l._waitingQueue.push(st(g.bind(null,y)))}).finally(function(){l._waitingFor===f&&(l._waitingFor=null)})})},Hn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _e.Abort))},Hn.prototype.table=function(n){var s=this._memoizedTables||(this._memoizedTables={});if(x(s,n))return s[n];var l=this.schema[n];if(l)return(l=new this.db.Table(n,l,this)).core=this.db.core.table(n),s[n]=l;throw new _e.NotFound("Table "+n+" not part of transaction")},Hn);function Hn(){}function mi(n,s,l,u,f,h,g,y){return{name:n,keyPath:s,unique:l,multi:u,auto:f,compound:h,src:(l&&!g?"&":"")+(u?"*":"")+(f?"++":"")+ll(s),type:y}}function ll(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function yi(n,s,l){return{name:n,primKey:s,indexes:l,mappedClass:null,idxByName:(u=function(f){return[f.name,f]},l.reduce(function(f,h,g){return h=u(h,g),h&&(f[h[0]]=h[1]),f},{}))};var u}var Ka=function(n){try{return n.only([[]]),Ka=function(){return[[]]},[[]]}catch{return Ka=function(){return $e},$e}};function bi(n){return n==null?function(){}:typeof n=="string"?(s=n).split(".").length===1?function(l){return l[s]}:function(l){return Q(l,s)}:function(l){return Q(l,n)};var s}function ul(n){return[].slice.call(n)}var ef=0;function Ua(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function tf(n,s,I){function u(P){if(P.type===3)return null;if(P.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=P.lower,O=P.upper,D=P.lowerOpen,P=P.upperOpen;return E===void 0?O===void 0?null:s.upperBound(O,!!P):O===void 0?s.lowerBound(E,!!D):s.bound(E,O,!!D,!!P)}function f(R){var E,O=R.name;return{name:O,schema:R,mutate:function(D){var P=D.trans,C=D.type,B=D.keys,z=D.values,L=D.range;return new Promise(function(Z,ue){Z=st(Z);var Se=P.objectStore(O),Te=Se.keyPath==null,ce=C==="put"||C==="add";if(!ce&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var Re,Ce=(B||z||{length:1}).length;if(B&&z&&B.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(Ce===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});function me(mt){++tt,za(mt)}var Me=[],Ze=[],tt=0;if(C==="deleteRange"){if(L.type===4)return Z({numFailures:tt,failures:Ze,results:[],lastResult:void 0});L.type===3?Me.push(Re=Se.clear()):Me.push(Re=Se.delete(u(L)))}else{var Te=ce?Te?[z,B]:[z,null]:[B,null],Be=Te[0],Ge=Te[1];if(ce)for(var gt=0;gt<Ce;++gt)Me.push(Re=Ge&&Ge[gt]!==void 0?Se[C](Be[gt],Ge[gt]):Se[C](Be[gt])),Re.onerror=me;else for(gt=0;gt<Ce;++gt)Me.push(Re=Se[C](Be[gt])),Re.onerror=me}function vn(mt){mt=mt.target.result,Me.forEach(function(Gr,ji){return Gr.error!=null&&(Ze[ji]=Gr.error)}),Z({numFailures:tt,failures:Ze,results:C==="delete"?B:Me.map(function(Gr){return Gr.result}),lastResult:mt})}Re.onerror=function(mt){me(mt),vn(mt)},Re.onsuccess=vn})},getMany:function(D){var P=D.trans,C=D.keys;return new Promise(function(B,z){B=st(B);for(var L,Z=P.objectStore(O),ue=C.length,Se=new Array(ue),Te=0,ce=0,Re=function(Me){Me=Me.target,Se[Me._pos]=Me.result,++ce===Te&&B(Se)},Ce=Gn(z),me=0;me<ue;++me)C[me]!=null&&((L=Z.get(C[me]))._pos=me,L.onsuccess=Re,L.onerror=Ce,++Te);Te===0&&B(Se)})},get:function(D){var P=D.trans,C=D.key;return new Promise(function(B,z){B=st(B);var L=P.objectStore(O).get(C);L.onsuccess=function(Z){return B(Z.target.result)},L.onerror=Gn(z)})},query:(E=y,function(D){return new Promise(function(P,C){P=st(P);var B,z,L,ce=D.trans,Z=D.values,ue=D.limit,Te=D.query,Se=ue===1/0?void 0:ue,Re=Te.index,Te=Te.range,ce=ce.objectStore(O),ce=Re.isPrimaryKey?ce:ce.index(Re.name),Re=u(Te);if(ue===0)return P({result:[]});E?((Te=Z?ce.getAll(Re,Se):ce.getAllKeys(Re,Se)).onsuccess=function(Ce){return P({result:Ce.target.result})},Te.onerror=Gn(C)):(B=0,z=!Z&&"openKeyCursor"in ce?ce.openKeyCursor(Re):ce.openCursor(Re),L=[],z.onsuccess=function(Ce){var me=z.result;return!me||(L.push(Z?me.value:me.primaryKey),++B===ue)?P({result:L}):void me.continue()},z.onerror=Gn(C))})}),openCursor:function(D){var P=D.trans,C=D.values,B=D.query,z=D.reverse,L=D.unique;return new Promise(function(Z,ue){Z=st(Z);var ce=B.index,Se=B.range,Te=P.objectStore(O),Te=ce.isPrimaryKey?Te:Te.index(ce.name),ce=z?L?"prevunique":"prev":L?"nextunique":"next",Re=!C&&"openKeyCursor"in Te?Te.openKeyCursor(u(Se),ce):Te.openCursor(u(Se),ce);Re.onerror=Gn(ue),Re.onsuccess=st(function(Ce){var me,Me,Ze,tt,Be=Re.result;Be?(Be.___id=++ef,Be.done=!1,me=Be.continue.bind(Be),Me=(Me=Be.continuePrimaryKey)&&Me.bind(Be),Ze=Be.advance.bind(Be),tt=function(){throw new Error("Cursor not stopped")},Be.trans=P,Be.stop=Be.continue=Be.continuePrimaryKey=Be.advance=function(){throw new Error("Cursor not started")},Be.fail=st(ue),Be.next=function(){var Ge=this,gt=1;return this.start(function(){return gt--?Ge.continue():Ge.stop()}).then(function(){return Ge})},Be.start=function(Ge){function gt(){if(Re.result)try{Ge()}catch(mt){Be.fail(mt)}else Be.done=!0,Be.start=function(){throw new Error("Cursor behind last entry")},Be.stop()}var vn=new Promise(function(mt,Gr){mt=st(mt),Re.onerror=Gn(Gr),Be.fail=Gr,Be.stop=function(ji){Be.stop=Be.continue=Be.continuePrimaryKey=Be.advance=tt,mt(ji)}});return Re.onsuccess=st(function(mt){Re.onsuccess=gt,gt()}),Be.continue=me,Be.continuePrimaryKey=Me,Be.advance=Ze,gt(),vn},Z(Be)):Z(null)},ue)})},count:function(D){var P=D.query,C=D.trans,B=P.index,z=P.range;return new Promise(function(L,Z){var ue=C.objectStore(O),ue=B.isPrimaryKey?ue:ue.index(B.name),Se=u(z),Se=Se?ue.count(Se):ue.count();Se.onsuccess=st(function(Te){return L(Te.target.result)}),Se.onerror=Gn(Z)})}}}h=I,g=ul((I=n).objectStoreNames);var h,I={schema:{name:I.name,tables:g.map(function(R){return h.objectStore(R)}).map(function(R){var E=R.keyPath,O=R.autoIncrement,P=d(E),D={},P={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:P,keyPath:E,autoIncrement:O,unique:!0,extractKey:bi(E)},indexes:ul(R.indexNames).map(function(C){return R.index(C)}).map(function(L){var Z=L.name,B=L.unique,z=L.multiEntry,L=L.keyPath,Z={name:Z,compound:d(L),keyPath:L,unique:B,multiEntry:z,extractKey:bi(L)};return D[Ua(L)]=Z}),getIndexByKeyPath:function(C){return D[Ua(C)]}};return D[":id"]=P.primaryKey,E!=null&&(D[Ua(E)]=P.primaryKey),P})},hasGetAll:0<g.length&&"getAll"in h.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},g=I.schema,y=I.hasGetAll,I=g.tables.map(f),j={};return I.forEach(function(R){return j[R.name]=R}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(R){if(j[R])return j[R];throw new Error("Table '".concat(R,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ka(s),schema:g}}function nf(n,s,l,u){return l=l.IDBKeyRange,s=tf(s,l,u),{dbcore:n.dbcore.reduce(function(f,h){return h=h.create,a(a({},f),h(f))},s)}}function Es(n,s){var l=s.db,l=nf(n._middlewares,l,n._deps,s);n.core=l.dbcore,n.tables.forEach(function(u){var f=u.name;n.core.schema.tables.some(function(h){return h.name===f})&&(u.core=n.core.table(f),n[f]instanceof n.Table)&&(n[f].core=u.core)})}function As(n,s,l,u){l.forEach(function(f){var h=u[f];s.forEach(function(g){var y=(function I(j,R){return S(j,R)||(j=p(j))&&I(j,R)})(g,f);(!y||"value"in y&&y.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?M(g,f,{get:function(){return this.table(f)},set:function(I){k(this,f,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):g[f]=new n.Table(f,h))})})}function _i(n,s){s.forEach(function(l){for(var u in l)l[u]instanceof n.Table&&delete l[u]})}function rf(n,s){return n._cfg.version-s._cfg.version}function af(n,s,l,u){var f=n._dbSchema,h=(l.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=yi("$meta",fl("")[0],[]),n._storeNames.push("$meta")),n._createTransaction("readwrite",n._storeNames,f)),g=(h.create(l),h._completion.catch(u),h._reject.bind(h)),y=Le.transless||Le;Cn(function(){if(Le.trans=h,Le.transless=y,s!==0)return Es(n,l),j=s,((I=h).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(R){return R??j}):Ee.resolve(j)).then(function(B){var E=n,O=B,D=h,P=l,C=[],B=E._versions,z=E._dbSchema=Is(0,E.idbdb,P);return(B=B.filter(function(L){return L._cfg.version>=O})).length===0?Ee.resolve():(B.forEach(function(L){C.push(function(){var Z,ue,Se,Te=z,ce=L._cfg.dbschema,Re=(Rs(E,Te,P),Rs(E,ce,P),z=E._dbSchema=ce,wi(Te,ce)),Ce=(Re.add.forEach(function(me){ki(P,me[0],me[1].primKey,me[1].indexes)}),Re.change.forEach(function(me){if(me.recreate)throw new _e.Upgrade("Not yet support for changing primary key");var Me=P.objectStore(me.name);me.add.forEach(function(Ze){return Cs(Me,Ze)}),me.change.forEach(function(Ze){Me.deleteIndex(Ze.name),Cs(Me,Ze)}),me.del.forEach(function(Ze){return Me.deleteIndex(Ze)})}),L._cfg.contentUpgrade);if(Ce&&L._cfg.version>O)return Es(E,P),D._memoizedTables={},Z=pe(ce),Re.del.forEach(function(me){Z[me]=Te[me]}),_i(E,[E.Transaction.prototype]),As(E,[E.Transaction.prototype],c(Z),Z),D.schema=Z,(ue=Ae(Ce))&&jt(),ce=Ee.follow(function(){var me;(Se=Ce(D))&&ue&&(me=In.bind(null,null),Se.then(me,me))}),Se&&typeof Se.then=="function"?Ee.resolve(Se):ce.then(function(){return Se})}),C.push(function(Z){var ue,Se,Te=L._cfg.dbschema;ue=Te,Se=Z,[].slice.call(Se.db.objectStoreNames).forEach(function(ce){return ue[ce]==null&&Se.db.deleteObjectStore(ce)}),_i(E,[E.Transaction.prototype]),As(E,[E.Transaction.prototype],E._storeNames,E._dbSchema),D.schema=E._dbSchema}),C.push(function(Z){E.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(E.idbdb.version/10)===L._cfg.version?(E.idbdb.deleteObjectStore("$meta"),delete E._dbSchema.$meta,E._storeNames=E._storeNames.filter(function(ue){return ue!=="$meta"})):Z.objectStore("$meta").put(L._cfg.version,"version"))})}),(function L(){return C.length?Ee.resolve(C.shift()(D.idbtrans)).then(L):Ee.resolve()})().then(function(){cl(z,P)}))}).catch(g);var I,j;c(f).forEach(function(R){ki(l,R,f[R].primKey,f[R].indexes)}),Es(n,l),Ee.follow(function(){return n.on.populate.fire(h)}).catch(g)})}function sf(n,s){cl(n._dbSchema,s),s.db.version%10!=0||s.objectStoreNames.contains("$meta")||s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var l=Is(0,n.idbdb,s);Rs(n,n._dbSchema,s);for(var u=0,f=wi(l,n._dbSchema).change;u<f.length;u++){var h=(g=>{if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var y=s.objectStore(g.name);g.add.forEach(function(I){Ft&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(I.src)),Cs(y,I)})})(f[u]);if(typeof h=="object")return h.value}}function wi(n,s){var l,u={del:[],add:[],change:[]};for(l in n)s[l]||u.del.push(l);for(l in s){var f=n[l],h=s[l];if(f){var g={name:l,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||f.primKey.auto!==h.primKey.auto)g.recreate=!0,u.change.push(g);else{var y=f.idxByName,I=h.idxByName,j=void 0;for(j in y)I[j]||g.del.push(j);for(j in I){var R=y[j],E=I[j];R?R.src!==E.src&&g.change.push(E):g.add.push(E)}(0<g.del.length||0<g.add.length||0<g.change.length)&&u.change.push(g)}}else u.add.push([l,h])}return u}function ki(n,s,l,u){var f=n.db.createObjectStore(s,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});u.forEach(function(h){return Cs(f,h)})}function cl(n,s){c(n).forEach(function(l){s.db.objectStoreNames.contains(l)||(Ft&&console.debug("Dexie: Creating missing table",l),ki(s,l,n[l].primKey,n[l].indexes))})}function Cs(n,s){n.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function Is(n,s,l){var u={};return ie(s.objectStoreNames,0).forEach(function(f){for(var h=l.objectStore(f),g=mi(ll(j=h.keyPath),j||"",!0,!1,!!h.autoIncrement,j&&typeof j!="string",!0),y=[],I=0;I<h.indexNames.length;++I){var R=h.index(h.indexNames[I]),j=R.keyPath,R=mi(R.name,j,!!R.unique,!!R.multiEntry,!1,j&&typeof j!="string",!1);y.push(R)}u[f]=yi(f,g,y)}),u}function Rs(n,s,l){for(var u=l.db.objectStoreNames,f=0;f<u.length;++f){var h=u[f],g=l.objectStore(h);n._hasGetAll="getAll"in g;for(var y=0;y<g.indexNames.length;++y){var I,j=g.indexNames[y],R=g.index(j).keyPath,R=typeof R=="string"?R:"["+ie(R).join("+")+"]";s[h]&&(I=s[h].idxByName[R])&&(I.name=j,delete s[h].idxByName[R],s[h].idxByName[j]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function fl(n){return n.split(",").map(function(s,l){var f=s.split(":"),u=(u=f[1])==null?void 0:u.trim(),f=(s=f[0].trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return mi(f,h||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),d(h),l===0,u)})}ga.prototype._createTableSchema=yi,ga.prototype._parseIndexSyntax=fl,ga.prototype._parseStoresSpec=function(n,s){var l=this;c(n).forEach(function(u){if(n[u]!==null){var f=l._parseIndexSyntax(n[u]),h=f.shift();if(!h)throw new _e.Schema("Invalid schema for table "+u+": "+n[u]);if(h.unique=!0,h.multi)throw new _e.Schema("Primary key cannot be multiEntry*");f.forEach(function(g){if(g.auto)throw new _e.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new _e.Schema("Index must have a name and cannot be an empty string")}),h=l._createTableSchema(u,h,f),s[u]=h}})},ga.prototype.stores=function(l){var s=this.db,l=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,l):l,s._versions),u={},f={};return l.forEach(function(h){v(u,h._cfg.storesSource),f=h._cfg.dbschema={},h._parseStoresSpec(u,f)}),s._dbSchema=f,_i(s,[s._allTables,s,s.Transaction.prototype]),As(s,[s._allTables,s,s.Transaction.prototype,this._cfg.tables],c(f),f),s._storeNames=c(f),this},ga.prototype.upgrade=function(n){return this._cfg.contentUpgrade=zn(this._cfg.contentUpgrade||Ke,n),this};var of=ga;function ga(){}function xi(n,s){var l=n._dbNamesDB;return l||(l=n._dbNamesDB=new rr(Yt,{addons:[],indexedDB:n,IDBKeyRange:s})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Si(n){return n&&typeof n.databases=="function"}function Ti(n){return Cn(function(){return Le.letThrough=!0,n()})}function Ei(n){return!("from"in n)}var qt=function(n,s){var l;if(!this)return l=new qt,n&&"d"in n&&v(l,n),l;v(this,arguments.length?{d:1,from:n,to:1<arguments.length?s:n}:{d:0})};function Ga(n,s,l){var u=Qe(s,l);if(!isNaN(u)){if(0<u)throw RangeError();if(Ei(n))return v(n,{from:s,to:l,d:1});var u=n.l,f=n.r;if(Qe(l,n.from)<0)return u?Ga(u,s,l):n.l={from:s,to:l,d:1,l:null,r:null},pl(n);if(0<Qe(s,n.to))return f?Ga(f,s,l):n.r={from:s,to:l,d:1,l:null,r:null},pl(n);Qe(s,n.from)<0&&(n.from=s,n.l=null,n.d=f?f.d+1:1),0<Qe(l,n.to)&&(n.to=l,n.r=null,n.d=n.l?n.l.d+1:1),s=!n.r,u&&!n.l&&Ha(n,u),f&&s&&Ha(n,f)}}function Ha(n,s){Ei(s)||(function l(u,f){var h=f.from,g=f.l,y=f.r;Ga(u,h,f.to),g&&l(u,g),y&&l(u,y)})(n,s)}function dl(n,s){var l=Ps(s),u=l.next();if(!u.done)for(var f=u.value,h=Ps(n),g=h.next(f.from),y=g.value;!u.done&&!g.done;){if(Qe(y.from,f.to)<=0&&0<=Qe(y.to,f.from))return!0;Qe(f.from,y.from)<0?f=(u=l.next(y.from)).value:y=(g=h.next(f.from)).value}return!1}function Ps(n){var s=Ei(n)?null:{s:0,n};return{next:function(l){for(var u=0<arguments.length;s;)switch(s.s){case 0:if(s.s=1,u)for(;s.n.l&&Qe(l,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!u||Qe(l,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function pl(n){var s,l,u,f=(((f=n.r)==null?void 0:f.d)||0)-(((f=n.l)==null?void 0:f.d)||0),f=1<f?"r":f<-1?"l":"";f&&(s=f=="r"?"l":"r",l=a({},n),u=n[f],n.from=u.from,n.to=u.to,n[f]=u[f],l[f]=u[s],(n[s]=l).d=hl(l)),n.d=hl(n)}function hl(l){var s=l.r,l=l.l;return(s?l?Math.max(s.d,l.d):s.d:l?l.d:0)+1}function Os(n,s){return c(s).forEach(function(l){n[l]?Ha(n[l],s[l]):n[l]=(function u(f){var h,g,y={};for(h in f)x(f,h)&&(g=f[h],y[h]=!g||typeof g!="object"||he.has(g.constructor)?g:u(g));return y})(s[l])}),n}function Ai(n,s){return n.all||s.all||Object.keys(n).some(function(l){return s[l]&&dl(s[l],n[l])})}_(qt.prototype,((Fe={add:function(n){return Ha(this,n),this},addKey:function(n){return Ga(this,n,n),this},addKeys:function(n){var s=this;return n.forEach(function(l){return Ga(s,l,l)}),this},hasKey:function(n){var s=Ps(this).next(n).value;return s&&Qe(s.from,n)<=0&&0<=Qe(s.to,n)}})[te]=function(){return Ps(this)},Fe));var Kr={},Ci={},Ii=!1;function Ds(n){Os(Ci,n),Ii||(Ii=!0,setTimeout(function(){Ii=!1,Ri(Ci,!(Ci={}))},0))}function Ri(n,s){s===void 0&&(s=!1);var l=new Set;if(n.all)for(var u=0,f=Object.values(Kr);u<f.length;u++)vl(y=f[u],n,l,s);else for(var h in n){var g,y,h=/^idb\:\/\/(.*)\/(.*)\//.exec(h);h&&(g=h[1],h=h[2],y=Kr["idb://".concat(g,"/").concat(h)])&&vl(y,n,l,s)}l.forEach(function(I){return I()})}function vl(n,s,l,u){for(var f=[],h=0,g=Object.entries(n.queries.query);h<g.length;h++){for(var y=g[h],I=y[0],j=[],R=0,E=y[1];R<E.length;R++){var O=E[R];Ai(s,O.obsSet)?O.subscribers.forEach(function(B){return l.add(B)}):u&&j.push(O)}u&&f.push([I,j])}if(u)for(var D=0,P=f;D<P.length;D++){var C=P[D],I=C[0],j=C[1];n.queries.query[I]=j}}function lf(n){var s=n._state,l=n._deps.indexedDB;if(s.isBeingOpened||n.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?xe(s.dbOpenError):n});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var u=s.openCanceller,f=Math.round(10*n.verno),h=!1;function g(){if(s.openCanceller!==u)throw new _e.DatabaseClosed("db.open() was cancelled")}function y(){return new Ee(function(O,D){if(g(),!l)throw new _e.MissingAPI;var P=n.name,C=s.autoSchema||!f?l.open(P):l.open(P,f);if(!C)throw new _e.MissingAPI;C.onerror=Gn(D),C.onblocked=st(n._fireOnBlocked),C.onupgradeneeded=st(function(B){var z;R=C.transaction,s.autoSchema&&!n._options.allowEmptyDB?(C.onerror=za,R.abort(),C.result.close(),(z=l.deleteDatabase(P)).onsuccess=z.onerror=st(function(){D(new _e.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(R.onerror=Gn(D),z=B.oldVersion>Math.pow(2,62)?0:B.oldVersion,E=z<1,n.idbdb=C.result,h&&sf(n,R),af(n,z/10,R,D))},D),C.onsuccess=st(function(){R=null;var B,z,L,Z,ue,Se,Te=n.idbdb=C.result,ce=ie(Te.objectStoreNames);if(0<ce.length)try{var Re=Te.transaction((ue=ce).length===1?ue[0]:ue,"readonly");if(s.autoSchema)Se=Te,Z=Re,(L=n).verno=Se.version/10,Z=L._dbSchema=Is(0,Se,Z),L._storeNames=ie(Se.objectStoreNames,0),As(L,[L._allTables],c(Z),Z);else if(Rs(n,n._dbSchema,Re),z=Re,((z=wi(Is(0,(B=n).idbdb,z),B._dbSchema)).add.length||z.change.some(function(Ce){return Ce.add.length||Ce.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),f=Te.version+1,h=!0,O(y());Es(n,Re)}catch{}bt.push(n),Te.onversionchange=st(function(Ce){s.vcFired=!0,n.on("versionchange").fire(Ce)}),Te.onclose=st(function(){n.close({disableAutoOpen:!1})}),E&&(ce=n._deps,ue=P,Si(Se=ce.indexedDB)||ue===Yt||xi(Se,ce.IDBKeyRange).put({name:ue}).catch(Ke)),O()},D)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<s.PR1398_maxLoop)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),y();break;case"VersionError":if(0<f)return f=0,y()}return Ee.reject(O)})}var I,j=s.dbReadyResolve,R=null,E=!1;return Ee.race([u,(typeof navigator>"u"?Ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function D(){return indexedDB.databases().finally(O)}I=setInterval(D,100),D()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(y)]).then(function(){return g(),s.onReadyBeingFired=[],Ee.resolve(Ti(function(){return n.on.ready.fire(n.vip)})).then(function O(){var D;if(0<s.onReadyBeingFired.length)return D=s.onReadyBeingFired.reduce(zn,Ke),s.onReadyBeingFired=[],Ee.resolve(Ti(function(){return D(n.vip)})).then(O)})}).finally(function(){s.openCanceller===u&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(O){s.dbOpenError=O;try{R&&R.abort()}catch{}return u===s.openCanceller&&n._close(),xe(O)}).finally(function(){s.openComplete=!0,j()}).then(function(){var O;return E&&(O={},n.tables.forEach(function(D){D.schema.indexes.forEach(function(P){P.name&&(O["idb://".concat(n.name,"/").concat(D.name,"/").concat(P.name)]=new qt(-1/0,[[[]]]))}),O["idb://".concat(n.name,"/").concat(D.name,"/")]=O["idb://".concat(n.name,"/").concat(D.name,"/:dels")]=new qt(-1/0,[[[]]])}),wr(Fa).fire(O),Ri(O,!0)),n})}function Pi(n){function s(h){return n.next(h)}var l=f(s),u=f(function(h){return n.throw(h)});function f(h){return function(y){var y=h(y),I=y.value;return y.done?I:I&&typeof I.then=="function"?I.then(l,u):d(I)?Promise.all(I).then(l,u):l(I)}}return f(s)()}function Ms(n,s,l){for(var u=d(n)?n.slice():[n],f=0;f<l;++f)u.push(s);return u}var uf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return a(a({},n),{table:function(u){var l=n.table(u),u=l.schema,f={},h=[];function g(O,D,P){var L=Ua(O),C=f[L]=f[L]||[],B=O==null?0:typeof O=="string"?1:O.length,z=0<D,L=a(a({},P),{name:z?"".concat(L,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:z,keyTail:D,keyLength:B,extractKey:bi(O),unique:!z&&P.unique});return C.push(L),L.isPrimaryKey||h.push(L),1<B&&g(B===2?O[0]:O.slice(0,B-1),D+1,P),C.sort(function(Z,ue){return Z.keyTail-ue.keyTail}),L}var y=g(u.primaryKey.keyPath,0,u.primaryKey);f[":id"]=[y];for(var I=0,j=u.indexes;I<j.length;I++){var R=j[I];g(R.keyPath,0,R)}function E(O){var D,P=O.query.index;return P.isVirtual?a(a({},O),{query:{index:P.lowLevelIndex,range:(D=O.query.range,P=P.keyTail,{type:D.type===1?2:D.type,lower:Ms(D.lower,D.lowerOpen?n.MAX_KEY:n.MIN_KEY,P),lowerOpen:!0,upper:Ms(D.upper,D.upperOpen?n.MIN_KEY:n.MAX_KEY,P),upperOpen:!0})}}):O}return a(a({},l),{schema:a(a({},u),{primaryKey:y,indexes:h,getIndexByKeyPath:function(O){return(O=f[Ua(O)])&&O[0]}}),count:function(O){return l.count(E(O))},query:function(O){return l.query(E(O))},openCursor:function(O){var D=O.query.index,P=D.keyTail,C=D.keyLength;return D.isVirtual?l.openCursor(E(O)).then(function(z){return z&&B(z)}):l.openCursor(O);function B(z){return Object.create(z,{continue:{value:function(L){L!=null?z.continue(Ms(L,O.reverse?n.MAX_KEY:n.MIN_KEY,P)):O.unique?z.continue(z.key.slice(0,C).concat(O.reverse?n.MIN_KEY:n.MAX_KEY,P)):z.continue()}},continuePrimaryKey:{value:function(L,Z){z.continuePrimaryKey(Ms(L,n.MAX_KEY,P),Z)}},primaryKey:{get:function(){return z.primaryKey}},key:{get:function(){var L=z.key;return C===1?L[0]:L.slice(0,C)}},value:{get:function(){return z.value}}})}}})}})}};function Oi(n,s,l,u){return l=l||{},u=u||"",c(n).forEach(function(f){var h,g,y;x(s,f)?(h=n[f],g=s[f],typeof h=="object"&&typeof g=="object"&&h&&g?(y=J(h))!==J(g)?l[u+f]=s[f]:y==="Object"?Oi(h,g,l,u+f+"."):h!==g&&(l[u+f]=s[f]):h!==g&&(l[u+f]=s[f])):l[u+f]=void 0}),c(s).forEach(function(f){x(n,f)||(l[u+f]=s[f])}),l}function Di(n,s){return s.type==="delete"?s.keys:s.keys||s.values.map(n.extractKey)}var cf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return a(a({},n),{table:function(s){var l=n.table(s),u=l.schema.primaryKey;return a(a({},l),{mutate:function(f){var h=Le.trans,g=h.table(s).hook,y=g.deleting,I=g.creating,j=g.updating;switch(f.type){case"add":if(I.fire===Ke)break;return h._promise("readwrite",function(){return R(f)},!0);case"put":if(I.fire===Ke&&j.fire===Ke)break;return h._promise("readwrite",function(){return R(f)},!0);case"delete":if(y.fire===Ke)break;return h._promise("readwrite",function(){return R(f)},!0);case"deleteRange":if(y.fire===Ke)break;return h._promise("readwrite",function(){return(function E(O,D,P){return l.query({trans:O,values:!1,query:{index:u,range:D},limit:P}).then(function(C){var B=C.result;return R({type:"delete",keys:B,trans:O}).then(function(z){return 0<z.numFailures?Promise.reject(z.failures[0]):B.length<P?{failures:[],numFailures:0,lastResult:void 0}:E(O,a(a({},D),{lower:B[B.length-1],lowerOpen:!0}),P)})})})(f.trans,f.range,1e4)},!0)}return l.mutate(f);function R(E){var O,D,P,C=Le.trans,B=E.keys||Di(u,E);if(B)return(E=E.type==="add"||E.type==="put"?a(a({},E),{keys:B}):a({},E)).type!=="delete"&&(E.values=i([],E.values)),E.keys&&(E.keys=i([],E.keys)),O=l,P=B,((D=E).type==="add"?Promise.resolve([]):O.getMany({trans:D.trans,keys:P,cache:"immutable"})).then(function(z){var L=B.map(function(Z,ue){var Se,Te,ce,Re=z[ue],Ce={onerror:null,onsuccess:null};return E.type==="delete"?y.fire.call(Ce,Z,Re,C):E.type==="add"||Re===void 0?(Se=I.fire.call(Ce,Z,E.values[ue],C),Z==null&&Se!=null&&(E.keys[ue]=Z=Se,u.outbound||H(E.values[ue],u.keyPath,Z))):(Se=Oi(Re,E.values[ue]),(Te=j.fire.call(Ce,Se,Z,Re,C))&&(ce=E.values[ue],Object.keys(Te).forEach(function(me){x(ce,me)?ce[me]=Te[me]:H(ce,me,Te[me])}))),Ce});return l.mutate(E).then(function(Z){for(var ue=Z.failures,Se=Z.results,Te=Z.numFailures,Z=Z.lastResult,ce=0;ce<B.length;++ce){var Re=(Se||B)[ce],Ce=L[ce];Re==null?Ce.onerror&&Ce.onerror(ue[ce]):Ce.onsuccess&&Ce.onsuccess(E.type==="put"&&z[ce]?E.values[ce]:Re)}return{failures:ue,results:Se,numFailures:Te,lastResult:Z}}).catch(function(Z){return L.forEach(function(ue){return ue.onerror&&ue.onerror(Z)}),Promise.reject(Z)})});throw new Error("Keys missing")}}})}})}};function gl(n,s,l){try{if(!s||s.keys.length<n.length)return null;for(var u=[],f=0,h=0;f<s.keys.length&&h<n.length;++f)Qe(s.keys[f],n[h])===0&&(u.push(l?le(s.values[f]):s.values[f]),++h);return u.length===n.length?u:null}catch{return null}}var ff={stack:"dbcore",level:-1,create:function(n){return{table:function(s){var l=n.table(s);return a(a({},l),{getMany:function(u){var f;return u.cache?(f=gl(u.keys,u.trans._cache,u.cache==="clone"))?Ee.resolve(f):l.getMany(u).then(function(h){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?le(h):h},h}):l.getMany(u)},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),l.mutate(u)}})}}}};function ml(n,s){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function yl(n,s){switch(n){case"query":return s.values&&!s.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var df={stack:"dbcore",level:0,name:"Observability",create:function(n){var s=n.schema.name,l=new qt(n.MIN_KEY,n.MAX_KEY);return a(a({},n),{transaction:function(u,f,h){if(Le.subscr&&f!=="readonly")throw new _e.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Le.querier));return n.transaction(u,f,h)},table:function(u){function f(B){var C,B=B.query;return[C=B.index,new qt((C=(B=B.range).lower)!=null?C:n.MIN_KEY,(C=B.upper)!=null?C:n.MAX_KEY)]}var h=n.table(u),g=h.schema,y=g.primaryKey,I=g.indexes,j=y.extractKey,R=y.outbound,E=y.autoIncrement&&I.filter(function(P){return P.compound&&P.keyPath.includes(y.keyPath)}),O=a(a({},h),{mutate:function(P){function C(Me){return Me="idb://".concat(s,"/").concat(u,"/").concat(Me),ue[Me]||(ue[Me]=new qt)}var B,z,L,Z=P.trans,ue=P.mutatedParts||(P.mutatedParts={}),Se=C(""),Te=C(":dels"),ce=P.type,Ce=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[Di(y,P).filter(function(Me){return Me}),P.values]:[],Re=Ce[0],Ce=Ce[1],me=P.trans._cache;return d(Re)?(Se.addKeys(Re),(ce=ce==="delete"||Re.length===Ce.length?gl(Re,me):null)||Te.addKeys(Re),(ce||Ce)&&(B=C,z=ce,L=Ce,g.indexes.forEach(function(Me){var Ze=B(Me.name||"");function tt(Ge){return Ge!=null?Me.extractKey(Ge):null}function Be(Ge){Me.multiEntry&&d(Ge)?Ge.forEach(function(gt){return Ze.addKey(gt)}):Ze.addKey(Ge)}(z||L).forEach(function(Ge,mt){var vn=z&&tt(z[mt]),mt=L&&tt(L[mt]);Qe(vn,mt)!==0&&(vn!=null&&Be(vn),mt!=null)&&Be(mt)})}))):Re?(Ce={from:(me=Re.lower)!=null?me:n.MIN_KEY,to:(ce=Re.upper)!=null?ce:n.MAX_KEY},Te.add(Ce),Se.add(Ce)):(Se.add(l),Te.add(l),g.indexes.forEach(function(Me){return C(Me.name).add(l)})),h.mutate(P).then(function(Me){return!Re||P.type!=="add"&&P.type!=="put"||(Se.addKeys(Me.results),E&&E.forEach(function(Ze){for(var tt=P.values.map(function(vn){return Ze.extractKey(vn)}),Be=Ze.keyPath.findIndex(function(vn){return vn===y.keyPath}),Ge=0,gt=Me.results.length;Ge<gt;++Ge)tt[Ge][Be]=Me.results[Ge];C(Ze.name).addKeys(tt)})),Z.mutatedParts=Os(Z.mutatedParts||{},ue),Me})}}),D={get:function(P){return[y,new qt(P.key)]},getMany:function(P){return[y,new qt().addKeys(P.keys)]},count:f,query:f,openCursor:f};return c(D).forEach(function(P){O[P]=function(C){var B=Le.subscr,z=!!B,L=ml(Le,h)&&yl(P,C)?C.obsSet={}:B;if(z){var Z,B=function(Ce){return Ce="idb://".concat(s,"/").concat(u,"/").concat(Ce),L[Ce]||(L[Ce]=new qt)},ue=B(""),Se=B(":dels"),z=D[P](C),Te=z[0],z=z[1];if((P==="query"&&Te.isPrimaryKey&&!C.values?Se:B(Te.name||"")).add(z),!Te.isPrimaryKey){if(P!=="count")return Z=P==="query"&&R&&C.values&&h.query(a(a({},C),{values:!1})),h[P].apply(this,arguments).then(function(Ce){if(P==="query"){if(R&&C.values)return Z.then(function(tt){return tt=tt.result,ue.addKeys(tt),Ce});var me=C.values?Ce.result.map(j):Ce.result;(C.values?ue:Se).addKeys(me)}else{var Me,Ze;if(P==="openCursor")return Ze=C.values,(Me=Ce)&&Object.create(Me,{key:{get:function(){return Se.addKey(Me.primaryKey),Me.key}},primaryKey:{get:function(){var tt=Me.primaryKey;return Se.addKey(tt),tt}},value:{get:function(){return Ze&&ue.addKey(Me.primaryKey),Me.value}}})}return Ce});Se.add(l)}}return h[P].apply(this,arguments)}}),O}})}};function bl(n,s,l){var u;return l.numFailures===0?s:s.type==="deleteRange"||(u=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1,l.numFailures===u)?null:(u=a({},s),d(u.keys)&&(u.keys=u.keys.filter(function(f,h){return!(h in l.failures)})),"values"in u&&d(u.values)&&(u.values=u.values.filter(function(f,h){return!(h in l.failures)})),u)}function Mi(n,s){return l=n,((u=s).lower===void 0||(u.lowerOpen?0<Qe(l,u.lower):0<=Qe(l,u.lower)))&&(l=n,(u=s).upper===void 0||(u.upperOpen?Qe(l,u.upper)<0:Qe(l,u.upper)<=0));var l,u}function _l(n,s,l,u,f,h){var g,y,I,j,R,E;return!l||l.length===0||(g=s.query.index,y=g.multiEntry,I=s.query.range,j=u.schema.primaryKey.extractKey,R=g.extractKey,E=(g.lowLevelIndex||g).extractKey,(u=l.reduce(function(O,D){var P=O,C=[];if(D.type==="add"||D.type==="put")for(var B=new qt,z=D.values.length-1;0<=z;--z){var L,Z=D.values[z],ue=j(Z);!B.hasKey(ue)&&(L=R(Z),y&&d(L)?L.some(function(Ce){return Mi(Ce,I)}):Mi(L,I))&&(B.addKey(ue),C.push(Z))}switch(D.type){case"add":var Se=new qt().addKeys(s.values?O.map(function(me){return j(me)}):O),P=O.concat(s.values?C.filter(function(me){return me=j(me),!Se.hasKey(me)&&(Se.addKey(me),!0)}):C.map(function(me){return j(me)}).filter(function(me){return!Se.hasKey(me)&&(Se.addKey(me),!0)}));break;case"put":var Te=new qt().addKeys(D.values.map(function(me){return j(me)}));P=O.filter(function(me){return!Te.hasKey(s.values?j(me):me)}).concat(s.values?C:C.map(function(me){return j(me)}));break;case"delete":var ce=new qt().addKeys(D.keys);P=O.filter(function(me){return!ce.hasKey(s.values?j(me):me)});break;case"deleteRange":var Re=D.range;P=O.filter(function(me){return!Mi(j(me),Re)})}return P},n))===n)?n:(u.sort(function(O,D){return Qe(E(O),E(D))||Qe(j(O),j(D))}),s.limit&&s.limit<1/0&&(u.length>s.limit?u.length=s.limit:n.length===s.limit&&u.length<s.limit&&(f.dirty=!0)),h?Object.freeze(u):u)}function wl(n,s){return Qe(n.lower,s.lower)===0&&Qe(n.upper,s.upper)===0&&!!n.lowerOpen==!!s.lowerOpen&&!!n.upperOpen==!!s.upperOpen}function pf(n,s){return((l,u,f,h)=>{if(l===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((l=Qe(l,u))===0){if(f&&h)return 0;if(f)return 1;if(h)return-1}return l})(n.lower,s.lower,n.lowerOpen,s.lowerOpen)<=0&&0<=((l,u,f,h)=>{if(l===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((l=Qe(l,u))===0){if(f&&h)return 0;if(f)return-1;if(h)return 1}return l})(n.upper,s.upper,n.upperOpen,s.upperOpen)}function hf(n,s,l,u){n.subscribers.add(l),u.addEventListener("abort",function(){var f,h;n.subscribers.delete(l),n.subscribers.size===0&&(f=n,h=s,setTimeout(function(){f.subscribers.size===0&&X(h,f)},3e3))})}var vf={stack:"dbcore",level:0,name:"Cache",create:function(n){var s=n.schema.name;return a(a({},n),{transaction:function(l,u,f){var h,g,y=n.transaction(l,u,f);return u==="readwrite"&&(f=(h=new AbortController).signal,y.addEventListener("abort",(g=function(I){return function(){if(h.abort(),u==="readwrite"){for(var j=new Set,R=0,E=l;R<E.length;R++){var O=E[R],D=Kr["idb://".concat(s,"/").concat(O)];if(D){var P=n.table(O),C=D.optimisticOps.filter(function(Me){return Me.trans===y});if(y._explicit&&I&&y.mutatedParts)for(var B=0,z=Object.values(D.queries.query);B<z.length;B++)for(var L=0,Z=(Te=z[B]).slice();L<Z.length;L++)Ai((ce=Z[L]).obsSet,y.mutatedParts)&&(X(Te,ce),ce.subscribers.forEach(function(Me){return j.add(Me)}));else if(0<C.length){D.optimisticOps=D.optimisticOps.filter(function(Me){return Me.trans!==y});for(var ue=0,Se=Object.values(D.queries.query);ue<Se.length;ue++)for(var Te,ce,Re,Ce=0,me=(Te=Se[ue]).slice();Ce<me.length;Ce++)(ce=me[Ce]).res!=null&&y.mutatedParts&&(I&&!ce.dirty?(Re=Object.isFrozen(ce.res),Re=_l(ce.res,ce.req,C,P,ce,Re),ce.dirty?(X(Te,ce),ce.subscribers.forEach(function(Me){return j.add(Me)})):Re!==ce.res&&(ce.res=Re,ce.promise=Ee.resolve({result:Re}))):(ce.dirty&&X(Te,ce),ce.subscribers.forEach(function(Me){return j.add(Me)})))}}}j.forEach(function(Me){return Me()})}}})(!1),{signal:f}),y.addEventListener("error",g(!1),{signal:f}),y.addEventListener("complete",g(!0),{signal:f})),y},table:function(l){var u=n.table(l),f=u.schema.primaryKey;return a(a({},u),{mutate:function(h){var g,y=Le.trans;return!f.outbound&&y.db._options.cache!=="disabled"&&!y.explicit&&y.idbtrans.mode==="readwrite"&&(g=Kr["idb://".concat(s,"/").concat(l)])?(y=u.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||Di(f,h).some(function(I){return I==null}))?(g.optimisticOps.push(h),h.mutatedParts&&Ds(h.mutatedParts),y.then(function(I){0<I.numFailures&&(X(g.optimisticOps,h),(I=bl(0,h,I))&&g.optimisticOps.push(I),h.mutatedParts)&&Ds(h.mutatedParts)}),y.catch(function(){X(g.optimisticOps,h),h.mutatedParts&&Ds(h.mutatedParts)})):y.then(function(I){var j=bl(0,a(a({},h),{values:h.values.map(function(R,E){var O;return I.failures[E]?R:(H(O=(O=f.keyPath)!=null&&O.includes(".")?le(R):a({},R),f.keyPath,I.results[E]),O)})}),I);g.optimisticOps.push(j),queueMicrotask(function(){return h.mutatedParts&&Ds(h.mutatedParts)})}),y):u.mutate(h)},query:function(h){var g,y,I,j,R,E,O;return ml(Le,u)&&yl("query",h)?(g=((I=Le.trans)==null?void 0:I.db._options.cache)==="immutable",y=(I=Le).requery,I=I.signal,E=((D,P,C,B)=>{var z=Kr["idb://".concat(D,"/").concat(P)];if(!z)return[];if(!(D=z.queries[C]))return[null,!1,z,null];var L=D[(B.query?B.query.index.name:null)||""];if(!L)return[null,!1,z,null];switch(C){case"query":var Z=L.find(function(ue){return ue.req.limit===B.limit&&ue.req.values===B.values&&wl(ue.req.query.range,B.query.range)});return Z?[Z,!0,z,L]:[L.find(function(ue){return("limit"in ue.req?ue.req.limit:1/0)>=B.limit&&(!B.values||ue.req.values)&&pf(ue.req.query.range,B.query.range)}),!1,z,L];case"count":return Z=L.find(function(ue){return wl(ue.req.query.range,B.query.range)}),[Z,!!Z,z,L]}})(s,l,"query",h),O=E[0],j=E[2],R=E[3],O&&E[1]?O.obsSet=h.obsSet:(E=u.query(h).then(function(D){var P=D.result;if(O&&(O.res=P),g){for(var C=0,B=P.length;C<B;++C)Object.freeze(P[C]);Object.freeze(P)}else D.result=le(P);return D}).catch(function(D){return R&&O&&X(R,O),Promise.reject(D)}),O={obsSet:h.obsSet,promise:E,subscribers:new Set,type:"query",req:h,dirty:!1},R?R.push(O):(R=[O],(j=j||(Kr["idb://".concat(s,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=R)),hf(O,R,y,I),O.promise.then(function(D){return{result:_l(D.result,h,j==null?void 0:j.optimisticOps,u,O,g)}})):u.query(h)}})}})}};function Ls(n,s){return new Proxy(n,{get:function(l,u,f){return u==="db"?s:Reflect.get(l,u,f)}})}_t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new _e.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new _e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var s=this._versions,l=s.filter(function(u){return u._cfg.version===n})[0];return l||(l=new this.Version(n),s.push(l),s.sort(rf),l.stores({}),this._state.autoSchema=!1),l},_t.prototype._whenReady=function(n){var s=this;return this.idbdb&&(this._state.openComplete||Le.letThrough||this._vip)?n():new Ee(function(l,u){if(s._state.openComplete)return u(new _e.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return void u(new _e.DatabaseClosed);s.open().catch(Ke)}s._state.dbReadyPromise.then(l,u)}).then(n)},_t.prototype.use=function(f){var s=f.stack,l=f.create,u=f.level,f=f.name,h=(f&&this.unuse({stack:s,name:f}),this._middlewares[s]||(this._middlewares[s]=[]));return h.push({stack:s,create:l,level:u??10,name:f}),h.sort(function(g,y){return g.level-y.level}),this},_t.prototype.unuse=function(n){var s=n.stack,l=n.name,u=n.create;return s&&this._middlewares[s]&&(this._middlewares[s]=this._middlewares[s].filter(function(f){return u?f.create!==u:!!l&&f.name!==l})),this},_t.prototype.open=function(){var n=this;return je(xt,function(){return lf(n)})},_t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,s=bt.indexOf(this);if(0<=s&&bt.splice(s,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new Ee(function(l){n.dbReadyResolve=l}),n.openCanceller=new Ee(function(l,u){n.cancelOpen=u}))},_t.prototype.close=function(s){var s=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,l=this._state;s?(l.isBeingOpened&&l.cancelOpen(new _e.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new _e.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},_t.prototype.delete=function(n){var s=this,l=(n===void 0&&(n={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),u=this._state;return new Ee(function(f,h){function g(){s.close(n);var y=s._deps.indexedDB.deleteDatabase(s.name);y.onsuccess=st(function(){var I,j,R;I=s._deps,j=s.name,Si(R=I.indexedDB)||j===Yt||xi(R,I.IDBKeyRange).delete(j).catch(Ke),f()}),y.onerror=Gn(h),y.onblocked=s._fireOnBlocked}if(l)throw new _e.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(g):g()})},_t.prototype.backendDB=function(){return this.idbdb},_t.prototype.isOpen=function(){return this.idbdb!==null},_t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},_t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},_t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(_t.prototype,"tables",{get:function(){var n=this;return c(this._allTables).map(function(s){return n._allTables[s]})},enumerable:!1,configurable:!0}),_t.prototype.transaction=function(){var n=(function(s,l,u){var f=arguments.length;if(f<2)throw new _e.InvalidArgument("Too few arguments");for(var h=new Array(f-1);--f;)h[f-1]=arguments[f];return u=h.pop(),[s,ye(h),u]}).apply(this,arguments);return this._transaction.apply(this,n)},_t.prototype._transaction=function(n,s,l){var u,f,h=this,g=Le.trans,y=(g&&g.db===this&&n.indexOf("!")===-1||(g=null),n.indexOf("?")!==-1);n=n.replace("!","").replace("?","");try{if(f=s.map(function(j){if(j=j instanceof h.Table?j.name:j,typeof j!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return j}),n=="r"||n===Un)u=Un;else{if(n!="rw"&&n!=zr)throw new _e.InvalidArgument("Invalid transaction mode: "+n);u=zr}if(g){if(g.mode===Un&&u===zr){if(!y)throw new _e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&f.forEach(function(j){if(g&&g.storeNames.indexOf(j)===-1){if(!y)throw new _e.SubTransaction("Table "+j+" not included in parent transaction.");g=null}}),y&&g&&!g.active&&(g=null)}}catch(j){return g?g._promise(null,function(R,E){E(j)}):xe(j)}var I=(function j(R,E,O,D,P){return Ee.resolve().then(function(){var L=Le.transless||Le,C=R._createTransaction(E,O,R._dbSchema,D),L=(C.explicit=!0,{trans:C,transless:L});if(D)C.idbtrans=D.idbtrans;else try{C.create(),C.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(Z){return Z.name===De.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return j(R,E,O,null,P)})):xe(Z)}var B,z=Ae(P),L=(z&&jt(),Ee.follow(function(){var Z;(B=P.call(C,C))&&(z?(Z=In.bind(null,null),B.then(Z,Z)):typeof B.next=="function"&&typeof B.throw=="function"&&(B=Pi(B)))},L));return(B&&typeof B.then=="function"?Ee.resolve(B).then(function(Z){return C.active?Z:xe(new _e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return B})).then(function(Z){return D&&C._resolve(),C._completion.then(function(){return Z})}).catch(function(Z){return C._reject(Z),xe(Z)})})}).bind(null,this,u,f,g,l);return g?g._promise(u,I,"lock"):Le.trans?je(Le.transless,function(){return h._whenReady(I)}):this._whenReady(I)},_t.prototype.table=function(n){if(x(this._allTables,n))return this._allTables[n];throw new _e.InvalidTable("Table ".concat(n," does not exist"))};var rr=_t;function _t(n,s){var l,u,f,h,g,y=this,I=(this._middlewares={},this.verno=0,_t.dependencies),I=(this._options=s=a({addons:_t.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},s),this._deps={indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},s.addons),j=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:s.autoOpen}),R=(j.dbReadyPromise=new Ee(function(E){j.dbReadyResolve=E}),j.openCanceller=new Ee(function(E,O){j.cancelOpen=O}),this._state=j,this.name=n,this.on=qa(this,"populate","blocked","versionchange","close",{ready:[zn,Ke]}),this.once=function(E,O){var D=function(){for(var P=[],C=0;C<arguments.length;C++)P[C]=arguments[C];y.on(E).unsubscribe(D),O.apply(y,P)};return y.on(E,D)},this.on.ready.subscribe=Y(this.on.ready.subscribe,function(E){return function(O,D){_t.vip(function(){var P,C=y._state;C.openComplete?(C.dbOpenError||Ee.resolve().then(O),D&&E(O)):C.onReadyBeingFired?(C.onReadyBeingFired.push(O),D&&E(O)):(E(O),P=y,D||E(function B(){P.on.ready.unsubscribe(O),P.on.ready.unsubscribe(B)}))})}}),this.Collection=(l=this,Ba(Qc.prototype,function(B,C){this.db=l;var D=Na,P=null;if(C)try{D=C()}catch(L){P=L}var C=B._ctx,B=C.table,z=B.hook.reading.fire;this._ctx={table:B,index:C.index,isPrimKey:!C.index||B.schema.primKey.keyPath&&C.index===B.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:C.or,valueMapper:z!==ct?z:null}})),this.Table=(u=this,Ba(nl.prototype,function(E,O,D){this.db=u,this._tx=D,this.name=E,this.schema=O,this.hook=u._allTables[E]?u._allTables[E].hook:qa(null,{creating:[Or,Ke],reading:[en,ct],updating:[Sn,Ke],deleting:[Dr,Ke]})})),this.Transaction=(f=this,Ba($c.prototype,function(E,O,D,P,C){var B=this;E!=="readonly"&&O.forEach(function(z){z=(z=D[z])==null?void 0:z.yProps,z&&(O=O.concat(z.map(function(L){return L.updatesTable})))}),this.db=f,this.mode=E,this.storeNames=O,this.schema=D,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=qa(this,"complete","error","abort"),this.parent=C||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee(function(z,L){B._resolve=z,B._reject=L}),this._completion.then(function(){B.active=!1,B.on.complete.fire()},function(z){var L=B.active;return B.active=!1,B.on.error.fire(z),B.parent?B.parent._reject(z):L&&B.idbtrans&&B.idbtrans.abort(),xe(z)})})),this.Version=(h=this,Ba(of.prototype,function(E){this.db=h,this._cfg={version:E,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,Ba(ol.prototype,function(E,O,D){if(this.db=g,this._ctx={table:E,index:O===":id"?null:O,or:D},this._cmp=this._ascending=Qe,this._descending=function(P,C){return Qe(C,P)},this._max=function(P,C){return 0<Qe(P,C)?P:C},this._min=function(P,C){return Qe(P,C)<0?P:C},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new _e.MissingAPI})),this.on("versionchange",function(E){0<E.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(E){!E.newVersion||E.newVersion<E.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(E.oldVersion/10))}),this._maxKey=Ka(s.IDBKeyRange),this._createTransaction=function(E,O,D,P){return new y.Transaction(E,O,D,y._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(E){y.on("blocked").fire(E),bt.filter(function(O){return O.name===y.name&&O!==y&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(E)})},this.use(ff),this.use(vf),this.use(df),this.use(uf),this.use(cf),new Proxy(this,{get:function(E,O,D){var P;return O==="_vip"||(O==="table"?function(C){return Ls(y.table(C),R)}:(P=Reflect.get(E,O,D))instanceof nl?Ls(P,R):O==="tables"?P.map(function(C){return Ls(C,R)}):O==="_createTransaction"?function(){return Ls(P.apply(this,arguments),R)}:P)}}));this.vip=R,I.forEach(function(E){return E(y)})}var Ns,ma=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",gf=(Li.prototype.subscribe=function(n,s,l){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:s,complete:l})},Li.prototype[ma]=function(){return this},Li);function Li(n){this._subscribe=n}try{Ns={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Ns={indexedDB:null,IDBKeyRange:null}}function kl(n){var s,l=!1,u=new gf(function(f){var h=Ae(n),g,y=!1,I={},j={},R={get closed(){return y},unsubscribe:function(){y||(y=!0,g&&g.abort(),E&&wr.storagemutated.unsubscribe(D))}},E=(f.start&&f.start(R),!1),O=function(){return de(P)},D=function(C){Os(I,C),Ai(j,I)&&O()},P=function(){var C,B,z;!y&&Ns.indexedDB&&(I={},C={},g&&g.abort(),g=new AbortController,z=(L=>{var Z=br();try{h&&jt();var ue=Cn(n,L);return ue=h?ue.finally(In):ue}finally{Z&&nr()}})(B={subscr:C,signal:g.signal,requery:O,querier:n,trans:null}),Promise.resolve(z).then(function(L){l=!0,s=L,y||B.signal.aborted||(I={},(Z=>{for(var ue in Z)if(x(Z,ue))return;return 1})(j=C)||E||(wr(Fa,D),E=!0),de(function(){return!y&&f.next&&f.next(L)}))},function(L){l=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||y||de(function(){y||f.error&&f.error(L)})}))};return setTimeout(O,0),R});return u.hasValue=function(){return l},u.getValue=function(){return s},u}var Ur=rr;function Ni(n){var s=kr;try{kr=!0,wr.storagemutated.fire(n),Ri(n,!0)}finally{kr=s}}_(Ur,a(a({},W),{delete:function(n){return new Ur(n,{addons:[]}).delete()},exists:function(n){return new Ur(n,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return s=Ur.dependencies,l=s.indexedDB,s=s.IDBKeyRange,(Si(l)?Promise.resolve(l.databases()).then(function(u){return u.map(function(f){return f.name}).filter(function(f){return f!==Yt})}):xi(l,s).toCollection().primaryKeys()).then(n)}catch{return xe(new _e.MissingAPI)}var s,l},defineClass:function(){return function(n){v(this,n)}},ignoreTransaction:function(n){return Le.trans?je(Le.transless,n):n()},vip:Ti,async:function(n){return function(){try{var s=Pi(n.apply(this,arguments));return s&&typeof s.then=="function"?s:Ee.resolve(s)}catch(l){return xe(l)}}},spawn:function(n,s,l){try{var u=Pi(n.apply(l,s||[]));return u&&typeof u.then=="function"?u:Ee.resolve(u)}catch(f){return xe(f)}},currentTransaction:{get:function(){return Le.trans||null}},waitFor:function(n,s){return n=Ee.resolve(typeof n=="function"?Ur.ignoreTransaction(n):n).timeout(s||6e4),Le.trans?Le.trans.waitFor(n):n},Promise:Ee,debug:{get:function(){return Ft},set:function(n){Mr(n)}},derive:N,extend:v,props:_,override:Y,Events:qa,on:wr,liveQuery:kl,extendObservabilitySet:Os,getByKeyPath:Q,setByKeyPath:H,delByKeyPath:function(n,s){typeof s=="string"?H(n,s,void 0):"length"in s&&[].map.call(s,function(l){H(n,l,void 0)})},shallowClone:pe,deepClone:le,getObjectDiff:Oi,cmp:Qe,asap:$,minKey:-1/0,addons:[],connections:bt,errnames:De,dependencies:Ns,cache:Kr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(n){return parseInt(n)}).reduce(function(n,s,l){return n+s/Math.pow(10,2*l)})})),Ur.maxKey=Ka(Ur.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(wr(Fa,function(n){kr||(n=new CustomEvent(gi,{detail:n}),kr=!0,dispatchEvent(n),kr=!1)}),addEventListener(gi,function(n){n=n.detail,kr||Ni(n)}));var ya,kr=!1,xl=function(){};return typeof BroadcastChannel<"u"&&((xl=function(){(ya=new BroadcastChannel(gi)).onmessage=function(n){return n.data&&Ni(n.data)}})(),typeof ya.unref=="function"&&ya.unref(),wr(Fa,function(n){kr||ya.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!rr.disableBfCache&&n.persisted){Ft&&console.debug("Dexie: handling persisted pagehide"),ya!=null&&ya.close();for(var s=0,l=bt;s<l.length;s++)l[s].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!rr.disableBfCache&&n.persisted&&(Ft&&console.debug("Dexie: handling persisted pageshow"),xl(),Ni({all:new qt(-1/0,[[]])}))})),Ee.rejectionMapper=function(n,s){return!n||n instanceof ke||n instanceof TypeError||n instanceof SyntaxError||!n.name||!ut[n.name]?n:(s=new ut[n.name](s||n.message,n),"stack"in n&&M(s,"stack",{get:function(){return this.inner.stack}}),s)},Mr(Ft),a(rr,Object.freeze({__proto__:null,Dexie:rr,Entity:Zo,PropModification:ja,RangeSet:qt,add:function(n){return new ja({add:n})},cmp:Qe,default:rr,liveQuery:kl,mergeRanges:Ha,rangesOverlap:dl,remove:function(n){return new ja({remove:n})},replacePrefix:function(n,s){return new ja({replacePrefix:[n,s]})}}),{default:rr}),rr})})(Xs)),Xs.exports}var tp=ep();const uo=Jd(tp),Kl=Symbol.for("Dexie"),zt=globalThis[Kl]||(globalThis[Kl]=uo);if(uo.semVer!==zt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${uo.semVer} and ${zt.semVer}`);const{liveQuery:ly,mergeRanges:uy,rangesOverlap:cy,RangeSet:fy,cmp:dy,Entity:py,PropModification:hy,replacePrefix:vy,add:gy,remove:my,DexieYProvider:yy}=zt,qe=new zt("me-ai-store");qe.version(1).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType"});qe.version(2).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType",actionItems:"++id, type, status, sourceItemId, createdAt, dueDate, [type+status]"});qe.version(3).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType",emailClassifications:"emailId, action, date, scannedAt, status, [action+status]",actionItems:null});qe.version(4).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType",emailClassifications:"emailId, action, date, scannedAt, status, *tags, [action+status]"});function cc(t,e){return`${t}:${e}`}function co(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,a)).toFixed(1)+" "+r[a]}function Gi(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(e)),i=t/Math.pow(e,a),o=a>=2?2:a>=1?1:0;return i.toFixed(o)+" "+r[a]}function np(t,e){return!e||e<=0?null:Math.min(100,t/e*100)}function fc(t,e){return t?t.length<=e?t:t.slice(0,e)+"...":""}function dc(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);return Math.abs(e)%360}const rp="https://gmail.googleapis.com/gmail/v1/users/me";class jo extends Error{constructor(e,r,a){super(e),this.name="GmailApiError",this.status=r,this.code=a||null}}function ap(t){return{Authorization:`Bearer ${t}`}}async function fi(t,e){var a,i,o,c;const r=await fetch(`${rp}${e}`,{headers:ap(t)});if(!r.ok){const d=await r.json().catch(()=>({})),v=((a=d.error)==null?void 0:a.message)||`Gmail API error: ${r.status}`,p=((c=(o=(i=d.error)==null?void 0:i.errors)==null?void 0:o[0])==null?void 0:c.reason)||void 0;throw new jo(v,r.status,p)}return r.json()}function pc(t){return fi(t,"/profile")}function hc(t,{maxResults:e=20,pageToken:r,q:a}={}){const i=new URLSearchParams;return i.set("maxResults",String(e)),r&&i.set("pageToken",r),a&&i.set("q",a),fi(t,`/messages?${i}`)}function vc(t,e,r="full"){return fi(t,`/messages/${e}?format=${r}`)}function sp(t,{startHistoryId:e,pageToken:r,maxResults:a=500}={}){const i=new URLSearchParams;return i.set("startHistoryId",e),i.set("maxResults",String(a)),i.append("historyTypes","messageAdded"),i.append("historyTypes","messageDeleted"),r&&i.set("pageToken",r),fi(t,`/history?${i}`)}function Sr(t,e){var o;const r=((o=t==null?void 0:t.payload)==null?void 0:o.headers)||[],a=e.toLowerCase(),i=r.find(c=>c.name.toLowerCase()===a);return(i==null?void 0:i.value)||""}function ss(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;r&&(e+="=".repeat(4-r));const a=atob(e),i=Uint8Array.from(a,o=>o.charCodeAt(0));return new TextDecoder().decode(i)}function ip(t){var o,c,d;const e=t==null?void 0:t.payload;if(!e)return"";if((o=e.body)!=null&&o.data)return ss(e.body.data);const r=e.parts||[],a=ei(r,"text/plain");if((c=a==null?void 0:a.body)!=null&&c.data)return ss(a.body.data);const i=ei(r,"text/html");if((d=i==null?void 0:i.body)!=null&&d.data){const v=ss(i.body.data);return lp(v)}return"(no body)"}function op(t){var i,o;const e=t==null?void 0:t.payload;if(!e)return null;if(e.mimeType==="text/html"&&((i=e.body)!=null&&i.data))return ss(e.body.data);const r=e.parts||[],a=ei(r,"text/html");return(o=a==null?void 0:a.body)!=null&&o.data?ss(a.body.data):null}function ei(t,e){for(const r of t){if(r.mimeType===e)return r;if(r.parts){const a=ei(r.parts,e);if(a)return a}}return null}function lp(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script"))r.remove();return(e.body.textContent||"").replace(/\s+/g," ").trim()}catch{return t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&#x([0-9a-f]+);/gi,(e,r)=>String.fromCodePoint(parseInt(r,16))).replace(/&#(\d+);/g,(e,r)=>String.fromCodePoint(Number(r))).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/\s+/g," ").trim()}}function qo(t){if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}catch{return t}}function Bo(t){if(!t)return"Unknown";const e=t.match(/^"?([^"<]+)"?\s*</);return e?e[1].trim():t.split("@")[0]}function gc(t){return Bo(t).charAt(0).toUpperCase()}function up(t){try{const e=new Date(t),r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}-${a}-${i}`}catch{return"email"}}function cp(t){return(t||"email").replace(/[^a-zA-Z0-9 _-]/g,"").replace(/\s+/g,"-").slice(0,60).replace(/-+$/,"")}function mc(t,e){return`${up(t.date)}_${cp(t.subject)}.${e}`}function yc(t){const e={};for(const a of t){const i=a.action||"UNKNOWN";e[i]||(e[i]=[]),e[i].push(a)}for(const a of Object.keys(e))e[a].sort((i,o)=>(o.date||0)-(i.date||0));const r=Object.keys(e).sort((a,i)=>e[i].length-e[a].length);return{groups:e,order:r}}async function fp(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.contacts.count();if(t===0)return null;const r=[`Stored data: ${t} emails, ${e} contacts.`],{oldest:a,newest:i}=await bc();if(a&&i){const c=new Date(a.date).toLocaleDateString(),d=new Date(i.date).toLocaleDateString();r.push(`Date range: ${c} to ${d}.`)}const o=await gp(5);return o.length>0&&r.push("Top senders: "+o.map(([c,d])=>`${Bo(c)} (${d})`).join(", ")+"."),r.join(" ")}async function dp(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.contacts.count();if(t===0)return"No emails stored locally.";const r=["## Data Summary",`- **Emails:** ${t}`,`- **Contacts:** ${e}`],{oldest:a,newest:i}=await bc();if(a&&i){const v=new Date(a.date).toLocaleDateString(),p=new Date(i.date).toLocaleDateString();r.push(`- **Date range:** ${v} â ${p}`)}const o=await qe.items.where("sourceType").equals("gmail").toArray(),c=_c(o,10),d=mp(o,10);if(c.length>0){r.push("","### Top Senders");for(const[v,p]of c)r.push(`- ${v}: ${p}`)}if(d.length>0){r.push("","### Labels");for(const[v,p]of d)r.push(`- ${v}: ${p}`)}return r.join(`
`)}async function pp(t=10){const e=await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).reverse().limit(t).toArray();return e.length===0?"No emails stored locally.":e.map(wc).join(`

---

`)}async function hp(t,e=10){if(!t)return"No search query provided.";const r=t.toLowerCase(),i=(await qe.items.where("sourceType").equals("gmail").toArray()).map(o=>{var d,v,p,b,x;let c=0;return(d=o.subject)!=null&&d.toLowerCase().includes(r)&&(c+=3),(v=o.from)!=null&&v.toLowerCase().includes(r)&&(c+=2),(p=o.to)!=null&&p.toLowerCase().includes(r)&&(c+=2),(b=o.snippet)!=null&&b.toLowerCase().includes(r)&&(c+=1),(x=o.body)!=null&&x.toLowerCase().includes(r)&&(c+=1),{item:o,score:c}}).filter(({score:o})=>o>0).sort((o,c)=>c.score-o.score).slice(0,e);return i.length===0?`No results found for "${t}".`:i.map(({item:o})=>wc(o)).join(`

---

`)}async function fo(){const t=await qe.emailClassifications.where("status").equals("pending").toArray();if(t.length===0)return null;const{groups:e,order:r}=yc(t);return{groups:e,order:r,total:t.length}}async function vp({query:t,limit:e=50,offset:r=0}={}){if(t){const o=t.toLowerCase(),c=await qe.items.where("sourceType").equals("gmail").filter(d=>{var v,p,b,x;return((v=d.subject)==null?void 0:v.toLowerCase().includes(o))||((p=d.from)==null?void 0:p.toLowerCase().includes(o))||((b=d.to)==null?void 0:b.toLowerCase().includes(o))||((x=d.snippet)==null?void 0:x.toLowerCase().includes(o))}).toArray();return c.sort((d,v)=>(v.date||0)-(d.date||0)),{items:c.slice(r,r+e),total:c.length}}const a=await qe.items.where("sourceType").equals("gmail").count();return{items:await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).reverse().offset(r).limit(e).toArray(),total:a}}async function bc(){const t=await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).first(),e=await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).last();return{oldest:t,newest:e}}async function gp(t){const e=await qe.items.where("sourceType").equals("gmail").toArray();return _c(e,t)}function _c(t,e){const r={};for(const a of t){const i=a.from||"Unknown";r[i]=(r[i]||0)+1}return Object.entries(r).sort((a,i)=>i[1]-a[1]).slice(0,e)}function mp(t,e){const r={};for(const a of t)for(const i of a.labels||[])r[i]=(r[i]||0)+1;return Object.entries(r).sort((a,i)=>i[1]-a[1]).slice(0,e)}function wc(t){const e=t.date?new Date(t.date).toLocaleString():"Unknown date",r=fc(t.body||t.snippet||"",500);switch(t.type){case"email":return[`**Subject:** ${t.subject}`,`**From:** ${t.from}`,`**To:** ${t.to}`,t.cc?`**CC:** ${t.cc}`:"",`**Date:** ${e}`,`**Labels:** ${(t.labels||[]).join(", ")}`,"",r].filter(Boolean).join(`
`);default:return[`**From:** ${t.from}`,`**Date:** ${e}`,"",r].join(`
`)}}async function yp(){const t=await fp();return t?["You have access to the user's locally stored data.",t,"The user can ask you about their emails. If they do, you can see recent emails and search results that will be provided."].join(" "):null}async function bp(t){const e=[],r=await dp();if(e.push(r),t){const a=await hp(t,5);e.push("","## Relevant Emails",a)}else{const a=await pp(5);e.push("","## Recent Emails",a)}return e.join(`
`)}async function _p(){const t=await fo();if(!t)return null;const e=["## Pending Action Items",`You have ${t.total} pending email action items that need attention:`,""];for(const r of t.order){const a=t.groups[r],i=r.replace(/_/g," ");e.push(`### ${i} (${a.length})`);for(const o of a.slice(0,5)){const c=o.date?new Date(o.date).toLocaleDateString():"unknown date";e.push(`- **${o.subject}** from ${o.from} (${c})`),o.summary&&e.push(`  ${o.summary}`)}a.length>5&&e.push(`  ...and ${a.length-5} more`),e.push("")}return e.push("The user is seeing these pending items in their chat. Help them decide what to do with these items. You can suggest specific actions like archiving, replying, following up, etc."),e.join(`
`)}const wp=20,kp={maxTokens:512},kc=`You are an email classifier. Analyze this email and produce a classification.

Output ONLY a valid JSON object â no markdown, no explanation, no extra text.

Format:
{
  "action": "SHORT_ACTION_NAME",
  "reason": "One sentence explaining why",
  "summary": "2-3 sentence summary of the email content",
  "tags": ["tag1", "tag2", "tag3"]
}

Guidelines for "action":
- Use a short UPPER_SNAKE_CASE label that describes what the user should do
- Examples: DELETE, REPLY, REVIEW, READ_LATER, ARCHIVE, PAY_BILL, TRACK_DELIVERY, SCHEDULE_MEETING, UNSUBSCRIBE, SAVE_RECEIPT, FOLLOW_UP, ACKNOWLEDGE, IGNORE
- Be specific: prefer "TRACK_DELIVERY" over "NOTIFY", prefer "PAY_BILL" over "REVIEW"
- If genuinely nothing to do, use "NO_ACTION"

Guidelines for "tags":
- 2-5 short lowercase tags describing the email's nature
- Examples: ad, promotion, newsletter, delivery, billing, personal, work, social, receipt, shipping, subscription, security, update, notification, newsletter, finance, travel
- Be descriptive and specific

Guidelines for "summary":
- 2-3 sentences capturing the key information
- Include specific details: amounts, dates, names, tracking numbers, deadlines
- Write from the perspective of what matters to the recipient

Rules:
- Output ONLY the JSON object, nothing else
- "action" must be UPPER_SNAKE_CASE
- "tags" must be an array of lowercase strings
- "summary" must be a string`;async function xc(t,{count:e=wp,force:r=!1,onProgress:a=()=>{}}={}){if(!t.isReady)throw new Error("Model not loaded. Please load a model first.");a({phase:"loading",message:"Loading recent emails..."});let i,o=0;if(r)i=await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).reverse().limit(e).toArray();else{const p=new Set(await qe.emailClassifications.toCollection().primaryKeys());o=0,i=[],await qe.items.where("[sourceType+date]").between(["gmail",zt.minKey],["gmail",zt.maxKey]).reverse().until(()=>i.length>=e).each(b=>{p.has(b.id)?o++:i.push(b)})}if(i.length===0){const p=r?"No emails to scan.":`All emails already classified (${o} total). Use "Rescan All" to reclassify.`;return a({phase:"done",message:p,classified:0}),{scanned:0,classified:0,skipped:o,errors:0}}const c=Date.now();let d=0,v=0;for(let p=0;p<i.length;p++){const b=i[p];a({phase:"scanning",message:`Classifying email ${p+1} of ${i.length}${o?` (${o} skipped)`:""}...`,current:p+1,total:i.length,classified:d});try{const x=Ec(b),_=[{role:"system",content:kc},{role:"user",content:x}],k=await t.generateFull(_,{maxTokens:512,enableThinking:!1}),M=Ep(k);M&&(await qe.emailClassifications.put({emailId:b.id,action:M.action,reason:M.reason,summary:M.summary,tags:M.tags,subject:b.subject||"(no subject)",from:b.from||"",date:b.date,scannedAt:c,status:"pending"}),d++)}catch(x){console.error(`Triage email ${p+1} failed:`,x),v++}}return a({phase:"done",message:`Classified ${d} of ${i.length} emails${o?`, ${o} already done`:""}.`,classified:d}),{scanned:i.length,classified:d,skipped:o,errors:v}}async function xp(){const t=await qe.emailClassifications.toArray();return yc(t)}async function Sp(){const t=await qe.emailClassifications.toArray(),e={total:t.length};for(const r of t){const a=r.action||"UNKNOWN";e[a]=(e[a]||0)+1}return e}async function ti(t,e){await qe.emailClassifications.update(t,{status:e})}async function Tp(){await qe.emailClassifications.clear()}async function Sc(t){await qe.emailClassifications.where("action").equals(t).delete()}async function Tc(t){await qe.emailClassifications.delete(t)}async function po(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.emailClassifications.count();return{totalEmails:t,classified:e,unclassified:Math.max(0,t-e)}}function Ec(t){const e=t.date?new Date(t.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown date",r=fc(t.body||t.snippet||"",500);return[`Subject: ${t.subject}`,`From: ${t.from}`,`To: ${t.to||"me"}`,`Date: ${e}`,`Labels: ${(t.labels||[]).join(", ")}`,"",r].join(`
`)}function Ep(t){if(!t||!t.trim())return null;let e=t.trim();e=e.replace(/^```(?:json)?\s*\n?/i,"").replace(/\n?```\s*$/i,""),e=e.trim();const r=e.indexOf("{"),a=e.lastIndexOf("}");if(r===-1||a===-1||a<=r)return console.warn("Triage: no JSON object found in response"),null;const i=e.indexOf("[");if(i!==-1&&i<r)return console.warn("Triage: expected JSON object, got array"),null;const o=e.slice(r,a+1);try{const c=JSON.parse(o);if(!c||typeof c!="object"||Array.isArray(c))return null;const d=Ap(c.action);if(!d)return console.warn("Triage: missing or invalid action field"),null;let v=[];return Array.isArray(c.tags)&&(v=c.tags.filter(p=>typeof p=="string"&&p.trim()).map(p=>p.trim().toLowerCase()).slice(0,10)),{action:d,reason:String(c.reason||"").slice(0,300),summary:String(c.summary||"").slice(0,500),tags:v}}catch(c){return console.warn("Triage: failed to parse JSON response:",c.message),null}}function Ap(t){return!t||typeof t!="string"?null:t.trim().toUpperCase().replace(/[\s-]+/g,"_").replace(/[^A-Z0-9_]/g,"")||null}function zo(t){return`hsl(${dc(t)}, 55%, 55%)`}function Ac(t){return`hsl(${dc(t)}, 40%, 35%)`}const Cp=typeof localStorage<"u"&&localStorage.getItem("debug")==="true";function Ul(...t){Cp&&console.log("[debug]",...t)}function fn(t){return Ul(`[MOUNT] ${t}`),()=>Ul(`[DESTROY] ${t}`)}var Ip=G("<option> </option>"),Rp=G('<p class="model-description svelte-1p89qnn"> </p>'),Pp=G('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Device</span><span class="svelte-1p89qnn"> </span></div>'),Op=G('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Description</span><span class="svelte-1p89qnn"> </span></div>'),Dp=G('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Max buffer</span><span class="svelte-1p89qnn"> </span></div>'),Mp=G('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Features</span><span class="svelte-1p89qnn"> </span></div>'),Lp=G('<div class="gpu-card svelte-1p89qnn"><div class="gpu-card-header svelte-1p89qnn"><span class="gpu-dot svelte-1p89qnn"></span> <span>WebGPU Active</span></div> <div class="gpu-card-body svelte-1p89qnn"><div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Vendor</span><span class="svelte-1p89qnn"> </span></div> <div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Architecture</span><span class="svelte-1p89qnn"> </span></div> <!> <!> <!> <!></div></div>'),Np=G('<p class="error svelte-1p89qnn"> </p>'),jp=G('<div class="container center svelte-1p89qnn"><p class="subtitle svelte-1p89qnn">A private AI chat that runs <strong>entirely in your browser</strong> using WebGPU.</p> <div class="model-selector svelte-1p89qnn"><label for="model-select" class="svelte-1p89qnn">Choose Model:</label> <select id="model-select" class="svelte-1p89qnn"></select> <!></div> <!> <!> <button class="btn primary svelte-1p89qnn">Load Model</button></div>');function qp(t,e){dt(e,!0);let r=Ie(e,"selectedModel",15),a=Ie(e,"gpuInfo",3,null),i=Ie(e,"error",3,null);Nt(()=>fn("ModelSelector"));var o=jp(),c=T(w(o),2),d=T(w(c),2);Gt(d,21,()=>ls,hr,(N,S)=>{var F=Ip(),ie=w(F),Y={};ve(()=>{se(ie,`${m(S).name??""} â ${m(S).size??""}`),Y!==(Y=m(S).id)&&(F.value=(F.__value=m(S).id)??"")}),K(N,F)});var v=T(d,2);{var p=N=>{const S=ht(()=>ls.find(U=>U.id===r()));var F=la(),ie=it(F);{var Y=U=>{var $=Rp(),Q=w($);ve(()=>se(Q,m(S).description)),K(U,$)};we(ie,U=>{m(S)&&U(Y)})}K(N,F)};we(v,N=>{r()&&N(p)})}var b=T(c,2);{var x=N=>{var S=Lp(),F=T(w(S),2),ie=w(F),Y=T(w(ie)),U=w(Y),$=T(ie,2),Q=T(w($)),H=w(Q),pe=T($,2);{var Ne=te=>{var oe=Pp(),X=T(w(oe)),ne=w(X);ve(()=>se(ne,a().device)),K(te,oe)};we(pe,te=>{a().device&&a().device!=="unknown"&&te(Ne)})}var ye=T(pe,2);{var he=te=>{var oe=Op(),X=T(w(oe)),ne=w(X);ve(()=>se(ne,a().description)),K(te,oe)};we(ye,te=>{a().description&&a().description!=="unknown"&&te(he)})}var re=T(ye,2);{var le=te=>{var oe=Dp(),X=T(w(oe)),ne=w(X);ve(be=>se(ne,be),[()=>co(a().limits.maxBufferSize)]),K(te,oe)};we(re,te=>{var oe;(oe=a().limits)!=null&&oe.maxBufferSize&&te(le)})}var Oe=T(re,2);{var J=te=>{var oe=Mp(),X=T(w(oe)),ne=w(X);ve(()=>se(ne,`${a().features.length??""} supported`)),K(te,oe)};we(Oe,te=>{var oe;(oe=a().features)!=null&&oe.length&&te(J)})}ve(()=>{se(U,a().vendor),se(H,a().architecture)}),K(N,S)};we(b,N=>{a()&&N(x)})}var _=T(b,2);{var k=N=>{var S=Np(),F=w(S);ve(()=>se(F,i())),K(N,S)};we(_,N=>{i()&&N(k)})}var M=T(_,2);M.__click=function(...N){var S;(S=e.onload)==null||S.apply(this,N)},ve(()=>M.disabled=i()),Lo(d,r),K(t,o),pt()}Lt(["click"]);var Bp=G('<span class="progress-percent svelte-r5fnze"> </span>'),zp=G('<div class="progress-bar svelte-r5fnze"><div class="progress-fill svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-sep svelte-r5fnze">/</span> <span class="progress-total svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span></div>',1),Fp=G('<span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span>',1),Kp=G('<span class="progress-indeterminate svelte-r5fnze">downloadingâ¦</span>'),Up=G('<div class="progress-bar svelte-r5fnze"><div class="progress-fill indeterminate svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><!></div>',1),Gp=G('<div class="progress-card svelte-r5fnze"><div class="progress-header svelte-r5fnze"><span class="progress-file svelte-r5fnze"> </span> <!></div> <!></div>'),Hp=G('<div class="container center loading-container svelte-r5fnze"><p class="loading-msg svelte-r5fnze"> </p> <!></div>');function Wp(t,e){dt(e,!0);let r=Ie(e,"message",3,""),a=Ie(e,"items",19,()=>[]);Nt(()=>fn("LoadingProgress"));var i=Hp(),o=w(i),c=w(o),d=T(o,2);Gt(d,17,a,hr,(v,p)=>{const b=ht(()=>m(p).total?np(m(p).loaded||0,m(p).total):null);var x=Gp(),_=w(x),k=w(_),M=w(k),N=T(k,2);{var S=U=>{var $=Bp(),Q=w($);ve(H=>se(Q,`${H??""}%`),[()=>m(b).toFixed(1)]),K(U,$)};we(N,U=>{m(b)!==null&&U(S)})}var F=T(_,2);{var ie=U=>{var $=zp(),Q=it($),H=w(Q),pe=T(Q,2),Ne=w(pe),ye=w(Ne),he=T(Ne,4),re=w(he),le=T(he,2),Oe=w(le);ve((J,te,oe,X,ne)=>{$t(H,`width: ${J??""}%`),se(ye,te),se(re,oe),se(Oe,`(${X??""} / ${ne??""} B)`)},[()=>Math.max(m(p).progress??0,.5).toFixed(1),()=>Gi(m(p).loaded||0),()=>Gi(m(p).total),()=>(m(p).loaded||0).toLocaleString(),()=>m(p).total.toLocaleString()]),K(U,$)},Y=U=>{var $=Up(),Q=T(it($),2),H=w(Q);{var pe=ye=>{var he=Fp(),re=it(he),le=w(re),Oe=T(re,2),J=w(Oe);ve((te,oe)=>{se(le,te),se(J,`(${oe??""} B)`)},[()=>Gi(m(p).loaded),()=>m(p).loaded.toLocaleString()]),K(ye,he)},Ne=ye=>{var he=Kp();K(ye,he)};we(H,ye=>{m(p).loaded?ye(pe):ye(Ne,!1)})}K(U,$)};we(F,U=>{m(p).total?U(ie):U(Y,!1)})}ve(()=>{lc(k,"title",m(p).file),se(M,m(p).file)}),K(v,x)}),ve(()=>se(c,r())),K(t,i),pt()}var Yp=G('<span class="thinking-tokens svelte-11gjw00"> </span>'),Vp=G('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Thinking...</span> <!></div>'),Xp=G('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Preparing...</span></div>'),Qp=G('<details class="thinking-details svelte-11gjw00"><summary class="thinking-summary svelte-11gjw00"><span class="thinking-icon svelte-11gjw00">ð­</span> Thinking <span class="thinking-token-count svelte-11gjw00"> </span></summary> <div class="thinking-content svelte-11gjw00"> </div></details>'),Zp=G('<div class="gen-status svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> Generating...</div>'),Jp=G('<span class="cursor svelte-11gjw00">|</span>'),$p=G(" <!>",1),eh=G('<!> <!> <div class="content svelte-11gjw00"><!></div>',1),th=G('<div class="content svelte-11gjw00"> </div>'),nh=G('<div><div class="role svelte-11gjw00"> </div> <!></div>');function rh(t,e){dt(e,!0);let r=Ie(e,"isLast",3,!1),a=Ie(e,"isRunning",3,!1),i=Ie(e,"generationPhase",3,null),o=Ie(e,"numTokens",3,null);Nt(()=>fn(`MessageBubble[${e.msg.role}]`));var c=nh(),d=w(c),v=w(d),p=T(d,2);{var b=_=>{var k=eh(),M=it(k);{var N=H=>{var pe=Vp(),Ne=T(w(pe),4);{var ye=he=>{var re=Yp(),le=w(re);ve(()=>se(le,`${o()??""} tokens`)),K(he,re)};we(Ne,he=>{o()&&he(ye)})}K(H,pe)},S=H=>{var pe=Xp();K(H,pe)};we(M,H=>{a()&&r()&&i()==="thinking"?H(N):a()&&r()&&i()==="preparing"&&H(S,1)})}var F=T(M,2);{var ie=H=>{var pe=Qp(),Ne=w(pe),ye=T(w(Ne),2),he=w(ye),re=T(Ne,2),le=w(re);ve(Oe=>{se(he,`${Oe??""} words`),se(le,e.msg.thinking)},[()=>e.msg.thinking.split(/\s+/).length]),K(H,pe)};we(F,H=>{e.msg.thinking&&H(ie)})}var Y=T(F,2),U=w(Y);{var $=H=>{var pe=Zp();K(H,pe)},Q=H=>{var pe=$p(),Ne=it(pe,!0),ye=T(Ne);{var he=re=>{var le=Jp();K(re,le)};we(ye,re=>{a()&&r()&&re(he)})}ve(()=>se(Ne,e.msg.content)),K(H,pe)};we(U,H=>{a()&&r()&&!e.msg.content&&i()!=="thinking"?H($):H(Q,!1)})}K(_,k)},x=_=>{var k=th(),M=w(k);ve(()=>se(M,e.msg.content)),K(_,k)};we(p,_=>{e.msg.role==="assistant"?_(b):_(x,!1)})}ve(()=>{Pt(c,1,`bubble ${e.msg.role??""}`,"svelte-11gjw00"),se(v,e.msg.role==="user"?"You":"AI")}),K(t,c),pt()}var ah=G('<span class="email-date svelte-mt5nvh"> </span>'),sh=G('<span class="email-summary svelte-mt5nvh"> </span>'),ih=G('<span class="tag svelte-mt5nvh"> </span>'),oh=G('<span class="email-tags svelte-mt5nvh"></span>'),lh=G('<div class="email-row svelte-mt5nvh"><button class="email-info svelte-mt5nvh"><span class="email-subject svelte-mt5nvh"> </span> <span class="email-meta svelte-mt5nvh"><span class="email-from svelte-mt5nvh"> </span> <!></span> <!> <!></button> <div class="email-actions svelte-mt5nvh"><button class="icon-btn done-btn svelte-mt5nvh" title="Mark handled"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg></button> <button class="icon-btn dismiss-btn svelte-mt5nvh" title="Dismiss"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button> <button class="icon-btn remove-btn svelte-mt5nvh" title="Remove"><svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="m19 6-.867 12.142A2 2 0 0 1 16.138 20H7.862a2 2 0 0 1-1.995-1.858L5 6"></path></svg></button></div></div>'),uh=G('<button class="batch-btn svelte-mt5nvh"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg> Mark All Handled</button> <button class="batch-btn danger svelte-mt5nvh">Clear Group</button>',1),ch=G('<span class="confirm-text svelte-mt5nvh"> </span> <button class="batch-btn svelte-mt5nvh">Cancel</button> <button class="batch-btn danger svelte-mt5nvh">Delete</button>',1),fh=G('<div class="group-body svelte-mt5nvh"><!> <div class="batch-bar svelte-mt5nvh"><!></div></div>'),dh=G('<div><button class="group-btn svelte-mt5nvh"><span class="group-dot svelte-mt5nvh"></span> <span class="group-label svelte-mt5nvh"> </span> <span class="group-count svelte-mt5nvh"> </span> <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div>'),ph=G('<div class="dashboard svelte-mt5nvh"><div class="dash-header svelte-mt5nvh"><svg class="dash-icon svelte-mt5nvh" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"></rect><rect x="14" y="3" width="7" height="7" rx="1"></rect><rect x="3" y="14" width="7" height="7" rx="1"></rect><rect x="14" y="14" width="7" height="7" rx="1"></rect></svg> <span class="dash-title svelte-mt5nvh"> </span></div> <div class="group-grid svelte-mt5nvh"></div></div>');function hh(t,e){dt(e,!0);let r=Ie(e,"pendingData",3,null),a=Pe(null),i=Pe(null);function o(_){q(a,m(a)===_?null:_,!0)}function c(_){return _.split("_").map(k=>k.charAt(0)+k.slice(1).toLowerCase()).join(" ")}function d(_){if(!_)return"";try{return new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}}var v={toggleGroup:o},p=la(),b=it(p);{var x=_=>{var k=ph(),M=w(k),N=T(w(M),2),S=w(N),F=T(M,2);Gt(F,20,()=>r().order,ie=>ie,(ie,Y)=>{const U=ht(()=>r().groups[Y]),$=ht(()=>zo(Y)),Q=ht(()=>m(a)===Y);var H=dh();let pe;var Ne=w(H);Ne.__click=()=>o(Y);var ye=w(Ne);let he;var re=T(ye,2),le=w(re),Oe=T(re,2),J=w(Oe),te=T(Oe,2);let oe;var X=T(Ne,2);{var ne=be=>{var Ae=fh(),W=w(Ae);Gt(W,17,()=>m(U),ae=>ae.emailId,(ae,De)=>{var ze=lh(),_e=w(ze);_e.__click=()=>{var Fe;return(Fe=e.onaskai)==null?void 0:Fe.call(e,`Tell me about the email "${m(De).subject}" from ${m(De).from}`)};var ut=w(_e),Ke=w(ut),ct=T(ut,2),en=w(ct),At=w(en),Or=T(en,2);{var Dr=Fe=>{var at=ah(),nn=w(at);ve(rn=>se(nn,rn),[()=>d(m(De).date)]),K(Fe,at)};we(Or,Fe=>{m(De).date&&Fe(Dr)})}var Sn=T(ct,2);{var vr=Fe=>{var at=sh(),nn=w(at);ve(()=>se(nn,m(De).summary)),K(Fe,at)};we(Sn,Fe=>{m(De).summary&&Fe(vr)})}var zn=T(Sn,2);{var Ft=Fe=>{var at=oh();Gt(at,21,()=>m(De).tags,hr,(nn,rn)=>{var Kn=ih();let Tn;var dn=w(Kn);ve(En=>{Tn=$t(Kn,"",Tn,En),se(dn,m(rn))},[()=>({background:Ac(m(rn))})]),K(nn,Kn)}),K(Fe,at)};we(zn,Fe=>{m(De).tags&&m(De).tags.length>0&&Fe(Ft)})}var Mr=T(_e,2),Fn=w(Mr);Fn.__click=()=>{var Fe;return(Fe=e.onmarkacted)==null?void 0:Fe.call(e,m(De).emailId)};var $n=T(Fn,2);$n.__click=()=>{var Fe;return(Fe=e.ondismiss)==null?void 0:Fe.call(e,m(De).emailId)};var tn=T($n,2);tn.__click=()=>{var Fe;return(Fe=e.onremove)==null?void 0:Fe.call(e,m(De).emailId)},ve(()=>{se(Ke,m(De).subject),se(At,m(De).from)}),K(ae,ze)});var ee=T(W,2),ke=w(ee);{var ge=ae=>{var De=uh(),ze=it(De);ze.__click=()=>e.onmarkacted&&m(U).forEach(ut=>e.onmarkacted(ut.emailId));var _e=T(ze,2);_e.__click=()=>q(i,Y,!0),K(ae,De)},fe=ae=>{var De=ch(),ze=it(De),_e=w(ze),ut=T(ze,2);ut.__click=()=>q(i,null);var Ke=T(ut,2);Ke.__click=()=>{var ct;(ct=e.oncleargroup)==null||ct.call(e,Y),q(i,null)},ve(()=>se(_e,`Clear ${m(U).length??""} items?`)),K(ae,De)};we(ke,ae=>{m(i)!==Y?ae(ge):ae(fe,!1)})}K(be,Ae)};we(X,be=>{m(Q)&&be(ne)})}ve(be=>{pe=Pt(H,1,"group-card svelte-mt5nvh",null,pe,{expanded:m(Q)}),he=$t(ye,"",he,{background:m($)}),se(le,be),se(J,m(U).length),oe=Pt(te,0,"group-chevron svelte-mt5nvh",null,oe,{open:m(Q)})},[()=>c(Y)]),K(ie,H)}),ve(()=>se(S,`${r().total??""} pending action${r().total!==1?"s":""}`)),K(_,k)};we(b,_=>{r()&&r().total>0&&_(x)})}return K(t,p),pt(v)}Lt(["click"]);var vh=G('<div class="chip scanning svelte-1ed7zw1"><span class="scan-spinner svelte-1ed7zw1"></span> <span>Scanning...</span></div>'),gh=G('<button class="chip scan-chip svelte-1ed7zw1"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg> Scan Emails</button>'),mh=G('<button class="chip action-chip svelte-1ed7zw1"><span class="chip-dot svelte-1ed7zw1"></span> <span class="chip-label svelte-1ed7zw1"> </span> <span class="chip-count svelte-1ed7zw1"> </span></button>'),yh=G('<div class="quick-strip svelte-1ed7zw1"><!> <!></div>');function bh(t,e){dt(e,!0);let r=Ie(e,"pendingData",3,null),a=Ie(e,"hasScanData",3,!1),i=Ie(e,"engineReady",3,!1),o=Ie(e,"isScanning",3,!1);function c(_){return _.split("_").map(k=>k.charAt(0)+k.slice(1).toLowerCase()).join(" ")}let d=ht(()=>i()&&!a()&&!o()),v=ht(()=>r()&&r().total>0||m(d)||o());var p=la(),b=it(p);{var x=_=>{var k=yh(),M=w(k);{var N=Y=>{var U=vh();K(Y,U)},S=Y=>{var U=gh();U.__click=function(...$){var Q;(Q=e.onscan)==null||Q.apply(this,$)},K(Y,U)};we(M,Y=>{o()?Y(N):m(d)&&Y(S,1)})}var F=T(M,2);{var ie=Y=>{var U=la(),$=it(U);Gt($,16,()=>r().order,Q=>Q,(Q,H)=>{const pe=ht(()=>r().groups[H]),Ne=ht(()=>zo(H));var ye=mh();ye.__click=()=>{var oe;return(oe=e.ontogglegroup)==null?void 0:oe.call(e,H)};var he=w(ye);let re;var le=T(he,2),Oe=w(le),J=T(le,2),te=w(J);ve(oe=>{re=$t(he,"",re,{background:m(Ne)}),se(Oe,oe),se(te,m(pe).length)},[()=>c(H)]),K(Q,ye)}),K(Y,U)};we(F,Y=>{r()&&r().total>0&&Y(ie)})}K(_,k)};we(b,_=>{m(v)&&_(x)})}K(t,p),pt()}Lt(["click"]);var _h=G('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Device</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),wh=G('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Buffer</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),kh=G('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Compute Invocations</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),xh=G('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Workgroup Storage</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Sh=G('<span class="gpu-feature-tag svelte-1qmgokn"> </span>'),Th=G('<div class="gpu-panel-item full svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn"> </div> <div class="gpu-panel-features svelte-1qmgokn"></div></div>'),Eh=G('<div class="gpu-panel svelte-1qmgokn"><div class="gpu-panel-grid svelte-1qmgokn"><div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Status</div> <div class="gpu-panel-value ok svelte-1qmgokn">Active</div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Vendor</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Architecture</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <!> <!> <!> <!> <!></div></div>');function Ah(t,e){dt(e,!0),Nt(()=>fn("GpuPanel"));var r=Eh(),a=w(r),i=T(w(a),2),o=T(w(i),2),c=w(o),d=T(i,2),v=T(w(d),2),p=w(v),b=T(d,2);{var x=U=>{var $=_h(),Q=T(w($),2),H=w(Q);ve(()=>se(H,e.gpuInfo.device)),K(U,$)};we(b,U=>{e.gpuInfo.device&&e.gpuInfo.device!=="unknown"&&U(x)})}var _=T(b,2);{var k=U=>{var $=wh(),Q=T(w($),2),H=w(Q);ve(pe=>se(H,pe),[()=>co(e.gpuInfo.limits.maxBufferSize)]),K(U,$)};we(_,U=>{var $;($=e.gpuInfo.limits)!=null&&$.maxBufferSize&&U(k)})}var M=T(_,2);{var N=U=>{var $=kh(),Q=T(w($),2),H=w(Q);ve(()=>se(H,e.gpuInfo.limits.maxComputeInvocationsPerWorkgroup)),K(U,$)};we(M,U=>{var $;($=e.gpuInfo.limits)!=null&&$.maxComputeInvocationsPerWorkgroup&&U(N)})}var S=T(M,2);{var F=U=>{var $=xh(),Q=T(w($),2),H=w(Q);ve(pe=>se(H,pe),[()=>co(e.gpuInfo.limits.maxComputeWorkgroupStorageSize)]),K(U,$)};we(S,U=>{var $;($=e.gpuInfo.limits)!=null&&$.maxComputeWorkgroupStorageSize&&U(F)})}var ie=T(S,2);{var Y=U=>{var $=Th(),Q=w($),H=w(Q),pe=T(Q,2);Gt(pe,21,()=>e.gpuInfo.features,hr,(Ne,ye)=>{var he=Sh(),re=w(he);ve(()=>se(re,m(ye))),K(Ne,he)}),ve(()=>se(H,`Features (${e.gpuInfo.features.length??""})`)),K(U,$)};we(ie,U=>{var $;($=e.gpuInfo.features)!=null&&$.length&&U(Y)})}ve(()=>{se(c,e.gpuInfo.vendor),se(p,e.gpuInfo.architecture)}),K(t,r),pt()}var Ch=G('<button class="gpu-badge svelte-1ktw27c"> </button>'),Ih=G('<span class="stats svelte-1ktw27c"> </span>'),Rh=G('<span class="stats preparing svelte-1ktw27c">preparing...</span>'),Ph=G('<span class="stats preparing svelte-1ktw27c"> </span>'),Oh=G('<span class="stats svelte-1ktw27c"> </span>'),Dh=G('<div class="empty svelte-1ktw27c">Send a message to start chatting.</div>'),Mh=G('<button class="btn svelte-1ktw27c">Stop</button>'),Lh=G('<button class="btn primary svelte-1ktw27c">Send</button>'),Nh=G('<div class="chat-wrapper svelte-1ktw27c"><header class="svelte-1ktw27c"><!> <!> <span class="spacer svelte-1ktw27c"></span> <button class="btn small svelte-1ktw27c">Reset</button></header> <!> <div class="messages svelte-1ktw27c"><!> <!></div> <!> <div class="input-row svelte-1ktw27c"><textarea rows="1" placeholder="Type a message..." class="svelte-1ktw27c"></textarea> <!></div></div>');function jh(t,e){dt(e,!0),Nt(()=>fn("ChatView"));let r=Ie(e,"messages",19,()=>[]),a=Ie(e,"pendingData",3,null),i=Ie(e,"hasScanData",3,!1),o=Ie(e,"engineReady",3,!1),c=Ie(e,"isScanning",3,!1),d=Ie(e,"isRunning",3,!1),v=Ie(e,"tps",3,null),p=Ie(e,"numTokens",3,null),b=Ie(e,"generationPhase",3,null),x=Ie(e,"gpuInfo",3,null),_=Ie(e,"chatContainer",15),k=Pe(""),M=Pe(!1),N=Pe(null);function S(fe){fe.key==="Enter"&&!fe.shiftKey&&(fe.preventDefault(),F())}function F(){const fe=m(k).trim();!fe||d()||(q(k,""),e.onsend(fe))}function ie(fe){m(N)&&m(N).toggleGroup(fe)}function Y(fe){fe&&!d()&&e.onsend(fe)}var U=Nh(),$=w(U),Q=w($);{var H=fe=>{var ae=Ch();ae.__click=()=>q(M,!m(M));var De=w(ae);ve(()=>se(De,`WebGPU ${m(M)?"â²":"â¼"}`)),K(fe,ae)};we(Q,fe=>{x()&&fe(H)})}var pe=T(Q,2);{var Ne=fe=>{var ae=Ih(),De=w(ae);ve((ze,_e)=>se(De,`${p()??""} tokens in ${ze??""}s
        (${_e??""} tok/s)`),[()=>(p()/v()).toFixed(1),()=>v().toFixed(1)]),K(fe,ae)},ye=fe=>{var ae=Rh();K(fe,ae)},he=fe=>{var ae=Ph(),De=w(ae);ve(ze=>se(De,`thinking... ${ze??""}`),[()=>v()?`${v().toFixed(0)} tok/s`:""]),K(fe,ae)},re=fe=>{var ae=Oh(),De=w(ae);ve(ze=>se(De,`${ze??""} tok/s`),[()=>v().toFixed(1)]),K(fe,ae)};we(pe,fe=>{v()&&!d()?fe(Ne):d()&&b()==="preparing"?fe(ye,1):d()&&b()==="thinking"?fe(he,2):v()&&d()&&fe(re,3)})}var le=T(pe,4);le.__click=function(...fe){var ae;(ae=e.onreset)==null||ae.apply(this,fe)};var Oe=T($,2);{var J=fe=>{Ah(fe,{get gpuInfo(){return x()}})};we(Oe,fe=>{m(M)&&x()&&fe(J)})}var te=T(Oe,2),oe=w(te);{var X=fe=>{var ae=Dh();K(fe,ae)};we(oe,fe=>{r().length===0&&!(a()&&a().total>0)&&fe(X)})}var ne=T(oe,2);Gt(ne,17,r,hr,(fe,ae,De)=>{var ze=la(),_e=it(ze);{var ut=ct=>{lo(hh(ct,{get pendingData(){return m(ae).pendingData},get onmarkacted(){return e.onmarkacted},get ondismiss(){return e.ondismiss},get onremove(){return e.onremove},get oncleargroup(){return e.oncleargroup},onaskai:Y}),en=>q(N,en,!0),()=>m(N))},Ke=ct=>{{let en=ht(()=>De===r().length-1);rh(ct,{get msg(){return m(ae)},get isLast(){return m(en)},get isRunning(){return d()},get generationPhase(){return b()},get numTokens(){return p()}})}};we(_e,ct=>{m(ae).type==="dashboard"?ct(ut):ct(Ke,!1)})}K(fe,ze)}),lo(te,fe=>_(fe),()=>_());var be=T(te,2);bh(be,{get pendingData(){return a()},get hasScanData(){return i()},get engineReady(){return o()},get isScanning(){return c()},ontogglegroup:ie,get onscan(){return e.onscan}});var Ae=T(be,2),W=w(Ae);W.__keydown=S;var ee=T(W,2);{var ke=fe=>{var ae=Mh();ae.__click=function(...De){var ze;(ze=e.onstop)==null||ze.apply(this,De)},K(fe,ae)},ge=fe=>{var ae=Lh();ae.__click=F,ve(De=>ae.disabled=De,[()=>!m(k).trim()]),K(fe,ae)};we(ee,fe=>{d()?fe(ke):fe(ge,!1)})}ve(()=>{le.disabled=d(),W.disabled=d()}),No(W,()=>m(k),fe=>q(k,fe)),K(t,U),pt()}Lt(["click","keydown"]);var qh=G('<div class="container center svelte-1bi93vx"><h1 class="svelte-1bi93vx">WebGPU Not Available</h1> <p>Your browser does not support WebGPU. Please try Chrome 113+ or Edge 113+.</p></div>');function Bh(t,e){dt(e,!0);const r=!!navigator.gpu,a=uc();let i=Pe(Rt(localStorage.getItem("selectedModel")||ls[0].id)),o=Pe(null),c=Pe(null),d=Pe(""),v=Pe(Rt([])),p=Pe(Rt([])),b=Pe(!1),x=Pe(null),_=Pe(null),k=Pe(null),M=Pe(null),N=Pe(null),S=Pe(null),F=Pe(!1),ie=Pe(!1),Y=!1;Nt(()=>{a.check(),a.isReady&&U();const W=a.onMessage(ee=>{switch(ee.status){case"webgpu-info":q(M,ee.data,!0);break;case"loading":q(o,"loading"),q(d,ee.data,!0);break;case"initiate":q(v,[...m(v),ee],!0);break;case"progress":q(v,m(v).map(ke=>ke.file===ee.file?{...ke,...ee}:ke),!0);break;case"done":q(v,m(v).filter(ke=>ke.file!==ee.file),!0);break;case"ready":q(o,"ready"),U();break;case"start":if(!m(b))break;q(N,ee.phase||"preparing",!0),q(p,[...m(p),{role:"assistant",content:"",thinking:""}],!0);break;case"phase":if(!m(b))break;q(N,ee.phase,!0);break;case"thinking":{if(!m(b))break;q(x,ee.tps,!0),q(_,ee.numTokens,!0);const ke=m(p)[m(p).length-1];q(p,[...m(p).slice(0,-1),{...ke,thinking:(ke.thinking||"")+ee.content}],!0),he();break}case"thinking-done":{if(!m(b))break;q(x,ee.tps,!0),q(_,ee.numTokens,!0);const ke=m(p)[m(p).length-1];q(p,[...m(p).slice(0,-1),{...ke,thinking:ee.content}],!0);break}case"update":{if(!m(b))break;q(x,ee.tps,!0),q(_,ee.numTokens,!0);const ke=m(p)[m(p).length-1];q(p,[...m(p).slice(0,-1),{...ke,content:ke.content+ee.output}],!0),he();break}case"complete":if(!m(b))break;q(b,!1),q(N,null),$();break;case"error":if(!m(b))break;q(c,ee.data,!0),q(b,!1),q(N,null);break}});return()=>W()});async function U(){if(!(Y||m(p).length>0))try{const W=await fo();q(S,W,!0),W&&(Y=!0,q(p,[{role:"assistant",type:"dashboard",pendingData:W}],!0),he());const ee=await po();q(F,ee.classified>0)}catch{}}async function $(){try{const W=await fo();q(S,W,!0);const ee=m(p).findIndex(ge=>ge.type==="dashboard");ee!==-1&&(W&&W.total>0?q(p,m(p).map((ge,fe)=>fe===ee?{...ge,pendingData:W}:ge),!0):q(p,m(p).filter((ge,fe)=>fe!==ee),!0));const ke=await po();q(F,ke.classified>0)}catch{}}async function Q(W){await ti(W,"acted"),await $()}async function H(W){await ti(W,"dismissed"),await $()}async function pe(W){await Tc(W),await $()}async function Ne(W){await Sc(W),await $()}async function ye(){if(!(m(ie)||!a.isReady)){q(ie,!0);try{await xc(a,{count:20}),await $(),m(S)&&!m(p).some(W=>W.type==="dashboard")&&(q(p,[{role:"assistant",type:"dashboard",pendingData:m(S)},...m(p)],!0),he())}catch(W){console.error("Scan failed:",W)}finally{q(ie,!1)}}}function he(){rc().then(()=>{m(k)&&(m(k).scrollTop=m(k).scrollHeight)})}function re(){q(o,"loading"),localStorage.setItem("selectedModel",m(i)),a.loadModel(m(i))}async function le(W){if(!W||m(b))return;q(p,[...m(p),{role:"user",content:W}],!0),q(x,null),q(b,!0);let ee=[];try{const ge=await _p(),fe=/\b(email|mail|inbox|message|sent|sender|from|subject|unread|gmail|pending|action|archive|delete|reply|follow.?up|prioriti|triage|urgent)\b/i;let ae;fe.test(W)||ge?(ae=await bp(W),ge&&(ae=(ae||"")+`

`+ge)):ae=await yp(),ae&&(ee=[{role:"system",content:ae}])}catch{}const ke=m(p).filter(ge=>ge.type!=="dashboard").map(ge=>({role:ge.role,content:ge.content}));a.generate([...ee,...ke]),he()}function Oe(){a.interrupt()}function J(){a.reset(),q(p,[],!0),q(x,null),q(_,null),Y=!1,U()}var te=la(),oe=it(te);{var X=W=>{var ee=qh();K(W,ee)},ne=W=>{qp(W,{get gpuInfo(){return m(M)},get error(){return m(c)},onload:re,get selectedModel(){return m(i)},set selectedModel(ee){q(i,ee,!0)}})},be=W=>{Wp(W,{get message(){return m(d)},get items(){return m(v)}})},Ae=W=>{jh(W,{get messages(){return m(p)},get pendingData(){return m(S)},get hasScanData(){return m(F)},get engineReady(){return a.isReady},get isScanning(){return m(ie)},get isRunning(){return m(b)},get tps(){return m(x)},get numTokens(){return m(_)},get generationPhase(){return m(N)},get gpuInfo(){return m(M)},onsend:le,onstop:Oe,onreset:J,onmarkacted:Q,ondismiss:H,onremove:pe,oncleargroup:Ne,onscan:ye,get chatContainer(){return m(k)},set chatContainer(ee){q(k,ee,!0)}})};we(oe,W=>{r?m(o)===null?W(ne,1):m(o)==="loading"?W(be,2):W(Ae,!1):W(X)})}K(t,te),pt()}const Gl="https://accounts.google.com/gsi/client",zh="https://www.googleapis.com/auth/gmail.readonly";let ho=null,Qs=null;function Fh(){return new Promise((t,e)=>{var i,o;if((o=(i=window.google)==null?void 0:i.accounts)!=null&&o.oauth2){t();return}const r=document.querySelector(`script[src="${Gl}"]`);if(r){r.addEventListener("load",()=>t()),r.addEventListener("error",()=>e(new Error("Failed to load Google Identity Services")));return}const a=document.createElement("script");a.src=Gl,a.async=!0,a.defer=!0,a.onload=()=>t(),a.onerror=()=>e(new Error("Failed to load Google Identity Services")),document.head.appendChild(a)})}async function Hl(t){await Fh(),ho=google.accounts.oauth2.initTokenClient({client_id:t,scope:zh,callback:e=>{Qs&&(Qs(e),Qs=null)}})}function Kh(){return new Promise((t,e)=>{if(!ho){e(new Error("Google Auth not initialized. Call initGoogleAuth first."));return}Qs=r=>{r.error?e(new Error(r.error_description||r.error)):t({access_token:r.access_token,expires_in:r.expires_in})},ho.requestAccessToken()})}function Uh(t){return new Promise(e=>{var r,a;(a=(r=window.google)==null?void 0:r.accounts)!=null&&a.oauth2?google.accounts.oauth2.revoke(t,()=>e()):e()})}const Ot="gmail",Wl=8,Cc=50,Ic=100;async function Gh(t,{limit:e=Cc,onProgress:r=()=>{},signal:a}={}){var c;const i=await qe.syncState.get(Ot);if(i!=null&&i.historyId)try{return await Qh(t,i,r,a)}catch(d){if(d instanceof jo&&(d.status===404||d.code==="notFound")||((c=d.message)==null?void 0:c.includes("Start history id")))r({phase:"info",message:"History expired, performing full re-sync..."}),await qe.syncState.delete(Ot);else throw d}return await Vh(t,e===0?1/0:e,r,a)}async function Hh(t,{limit:e=Cc,onProgress:r=()=>{},signal:a}={}){const i=await qe.syncState.get(Ot);return i!=null&&i.oldestPageToken?await Xh(t,i,e===0?1/0:e,r,a):(r({phase:"done",message:"All messages already synced"}),{added:0,errors:0})}async function Wh(){const t=await qe.syncState.get(Ot);return t?{synced:!0,totalItems:t.totalItems||0,lastSyncAt:t.lastSyncAt,historyId:t.historyId,hasMore:!!t.oldestPageToken}:{synced:!1,totalItems:0,lastSyncAt:null,hasMore:!1}}async function Yh(){await qe.transaction("rw",[qe.items,qe.syncState],async()=>{await qe.items.where("sourceType").equals(Ot).delete(),await qe.syncState.delete(Ot)})}async function Vh(t,e,r,a){r({phase:"counting",message:"Getting mailbox info..."}),ua(a);const i=await pc(t);r({phase:"listing",message:"Listing messages...",current:0,total:Math.min(i.messagesTotal||e,e)});const o=[];let c,d=null;for(;o.length<e;){ua(a);const x=e-o.length,_=await hc(t,{maxResults:Math.min(Ic,x),pageToken:c}),k=(_.messages||[]).map(M=>M.id);if(o.push(...k),r({phase:"listing",message:`Listed ${o.length} messages...`,current:o.length,total:Math.min(i.messagesTotal||e,e)}),c=_.nextPageToken,!c||k.length===0)break}if(d=c||null,o.length===0)return await qe.syncState.put({sourceType:Ot,historyId:i.historyId,lastSyncAt:Date.now(),totalItems:0,oldestPageToken:null}),{added:0,deleted:0,errors:0};const{added:v,errors:p}=await Rc(t,o,r,a),b=await qe.items.where("sourceType").equals(Ot).count();return await qe.syncState.put({sourceType:Ot,historyId:i.historyId,lastSyncAt:Date.now(),totalItems:b,oldestPageToken:d}),r({phase:"done",message:`Synced ${v} messages`,current:v,total:v}),{added:v,deleted:0,errors:p}}async function Xh(t,e,r,a,i){a({phase:"listing",message:"Loading more messages...",current:0}),ua(i);const o=[];let c=e.oldestPageToken,d=null;for(;o.length<r;){ua(i);const x=r-o.length,_=await hc(t,{maxResults:Math.min(Ic,x),pageToken:c}),k=(_.messages||[]).map(M=>M.id);if(o.push(...k),a({phase:"listing",message:`Listed ${o.length} more messages...`,current:o.length}),c=_.nextPageToken,!c||k.length===0)break}if(d=c||null,o.length===0)return await qe.syncState.update(Ot,{oldestPageToken:null,lastSyncAt:Date.now()}),a({phase:"done",message:"All messages synced"}),{added:0,errors:0};const{added:v,errors:p}=await Rc(t,o,a,i),b=await qe.items.where("sourceType").equals(Ot).count();return await qe.syncState.update(Ot,{totalItems:b,lastSyncAt:Date.now(),oldestPageToken:d}),a({phase:"done",message:d?`Downloaded ${v} more (more available)`:`Downloaded ${v} more (all synced)`,current:b,total:b}),{added:v,errors:p}}async function Qh(t,e,r,a){r({phase:"syncing",message:"Checking for changes..."}),ua(a);let i=0,o=0,c=0,d,v=e.historyId;do{ua(a);const b=await sp(t,{startHistoryId:e.historyId,pageToken:d});if(v=b.historyId||v,d=b.nextPageToken,!!b.history){for(const x of b.history){if(x.messagesAdded){const _=x.messagesAdded.map(M=>M.message.id),k=[...new Set(_.filter(M=>M))];if(k.length>0){const M=await Promise.allSettled(k.map(S=>vc(t,S))),N=[];for(const S of M)S.status==="fulfilled"?N.push(Pc(S.value)):c++;N.length>0&&(await qe.items.bulkPut(N),await Oc(N),i+=N.length)}}if(x.messagesDeleted){const _=x.messagesDeleted.map(k=>cc(Ot,k.message.id)).filter(k=>k);_.length>0&&(await qe.items.bulkDelete(_),o+=_.length)}}r({phase:"syncing",message:`Changes: +${i} -${o}`,current:i+o})}}while(d);const p=await qe.items.where("sourceType").equals(Ot).count();return await qe.syncState.put({sourceType:Ot,historyId:v,lastSyncAt:Date.now(),totalItems:p,oldestPageToken:e.oldestPageToken}),r({phase:"done",message:i===0&&o===0?"Already up to date":`Synced: +${i} -${o}`,current:p,total:p}),{added:i,deleted:o,errors:c}}async function Rc(t,e,r,a){r({phase:"downloading",message:"Downloading messages...",current:0,total:e.length});let i=0,o=0;for(let c=0;c<e.length;c+=Wl){ua(a);const d=e.slice(c,c+Wl),v=await Promise.allSettled(d.map(b=>vc(t,b))),p=[];for(const b of v)b.status==="fulfilled"?p.push(Pc(b.value)):o++;p.length>0&&(await qe.items.bulkPut(p),await Oc(p)),i+=p.length,r({phase:"downloading",message:`Downloaded ${i} of ${e.length} messages`,current:i,total:e.length})}return{added:i,errors:o}}function Pc(t){const e=Sr(t,"From"),r=Sr(t,"To"),a=Sr(t,"Cc"),i=Sr(t,"Subject")||"(no subject)",o=Sr(t,"Date"),c=Sr(t,"Message-ID"),d=Sr(t,"In-Reply-To"),v=Sr(t,"References");let p;try{p=o?new Date(o).getTime():t.internalDate?Number(t.internalDate):Date.now()}catch{p=Date.now()}return{id:cc(Ot,t.id),sourceType:Ot,sourceId:t.id,threadKey:`gmail:${t.threadId}`,type:"email",from:e,to:r,cc:a,subject:i,snippet:t.snippet||"",body:ip(t),htmlBody:op(t),date:p,labels:t.labelIds||[],messageId:c,inReplyTo:d,references:v,raw:t,syncedAt:Date.now()}}async function Oc(t){const e=new Map;for(const r of t)for(const a of[r.from,r.to,r.cc]){if(!a)continue;const i=a.split(",").map(o=>o.trim()).filter(Boolean);for(const o of i){const c=Zh(o);c&&!e.has(c.email)&&e.set(c.email,{...c,date:r.date})}}for(const[r,{name:a,date:i}]of e)try{const o=await qe.contacts.where("email").equals(r).first();if(o){const c={};a&&!o.name&&(c.name=a),i>(o.lastSeen||0)&&(c.lastSeen=i),Object.keys(c).length>0&&await qe.contacts.update(o.id,c)}else await qe.contacts.add({email:r,name:a||"",firstSeen:i,lastSeen:i})}catch(o){(o==null?void 0:o.name)!=="ConstraintError"&&console.debug("Contact upsert skipped:",r,(o==null?void 0:o.message)||o)}}function Zh(t){if(!t)return null;const e=t.match(/<([^>]+)>/);if(e){const a=e[1].toLowerCase().trim(),i=t.slice(0,t.indexOf("<")).replace(/"/g,"").trim();return{email:a,name:i}}const r=t.toLowerCase().trim();return r.includes("@")?{email:r,name:""}:null}function ua(t){if(t!=null&&t.aborted)throw new DOMException("Sync was cancelled","AbortError")}var Jh=G(`<div class="setup-container svelte-1mdd5r2"><div class="setup-card svelte-1mdd5r2"><h2 class="svelte-1mdd5r2">Connect Gmail</h2> <p class="setup-intro svelte-1mdd5r2">To access Gmail from the browser, you need a Google Cloud OAuth Client ID.
      This stays in your browser â no data is sent to any server.</p> <div class="setup-steps svelte-1mdd5r2"><div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">1</span> <div><a href="https://console.cloud.google.com/projectcreate" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create a Google Cloud project</a> (or use an existing one)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">2</span> <div><a href="https://console.cloud.google.com/apis/library/gmail.googleapis.com" target="_blank" rel="noopener" class="svelte-1mdd5r2">Enable the Gmail API</a> for your project</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">3</span> <div><a href="https://console.cloud.google.com/apis/credentials/oauthclient" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create an OAuth 2.0 Client ID</a> (type: <strong>Web application</strong>)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">4</span> <div><p class="step-label svelte-1mdd5r2">Add these URLs to your OAuth client. Click to copy:</p> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized JavaScript origins (no trailing slash):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized redirect URIs (add all three):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <p class="step-hint svelte-1mdd5r2">Both localhost (dev) and GitHub Pages (prod) are needed. The /me-ai/ path
            is required because the app is deployed at a subpath. Changes may take a
            few minutes to propagate after saving.</p></div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">5</span> <div>Copy the <strong>Client ID</strong> and paste it below</div></div></div> <div class="client-id-form svelte-1mdd5r2"><input type="text" placeholder="xxxx.apps.googleusercontent.com" class="svelte-1mdd5r2"/> <button class="btn primary svelte-1mdd5r2">Save</button></div></div></div>`);function $h(t,e){dt(e,!0);let r=Ie(e,"clientIdInput",15);Nt(()=>fn("SetupGuide"));let a=Pe(null);async function i(ke){try{await navigator.clipboard.writeText(ke),q(a,ke,!0),setTimeout(()=>{q(a,null)},1500)}catch{const ge=document.createElement("input");ge.value=ke,document.body.appendChild(ge),ge.select(),document.execCommand("copy"),document.body.removeChild(ge),q(a,ke,!0),setTimeout(()=>{q(a,null)},1500)}}const o="http://localhost:5173",c="https://cypherkitty.github.io",d="https://cypherkitty.github.io/me-ai/";var v=Jh(),p=w(v),b=T(w(p),4),x=T(w(b),6),_=T(w(x),2),k=T(w(_),2),M=T(w(k),2),N=w(M);N.__click=()=>i(o);var S=w(N);S.textContent="http://localhost:5173";var F=T(S,2),ie=w(F),Y=T(N,2);Y.__click=()=>i(c);var U=w(Y);U.textContent="https://cypherkitty.github.io";var $=T(U,2),Q=w($),H=T(k,2),pe=T(w(H),2),Ne=w(pe);Ne.__click=()=>i(o);var ye=w(Ne);ye.textContent="http://localhost:5173";var he=T(ye,2),re=w(he),le=T(Ne,2);le.__click=()=>i(c);var Oe=w(le);Oe.textContent="https://cypherkitty.github.io";var J=T(Oe,2),te=w(J),oe=T(le,2);oe.__click=()=>i(d);var X=w(oe);X.textContent="https://cypherkitty.github.io/me-ai/";var ne=T(X,2),be=w(ne),Ae=T(b,2),W=w(Ae);W.__keydown=ke=>ke.key==="Enter"&&e.onsave();var ee=T(W,2);ee.__click=function(...ke){var ge;(ge=e.onsave)==null||ge.apply(this,ke)},ve(ke=>{se(ie,m(a)===o?"â":"â§"),se(Q,m(a)===c?"â":"â§"),se(re,m(a)===o?"â":"â§"),se(te,m(a)===c?"â":"â§"),se(be,m(a)===d?"â":"â§"),ee.disabled=ke},[()=>!r().trim()]),No(W,r),K(t,v),pt()}Lt(["click","keydown"]);function ev(t){const e=typeof t=="object"&&t!==null?t:null,r=(e==null?void 0:e.message)||String(t||""),a=e instanceof jo?e.status:null;if(r.includes("has not been used in project")||r.includes("is disabled")){const i=r.match(/project\s+(\d+)/),o=i==null?void 0:i[1];return{title:"Gmail API not enabled",description:"The Gmail API needs to be enabled in your Google Cloud project before it can be used.",fix:"Click the link below to enable it, then wait ~30 seconds and retry.",link:{url:o?`https://console.developers.google.com/apis/api/gmail.googleapis.com/overview?project=${o}`:"https://console.cloud.google.com/apis/library/gmail.googleapis.com",label:"Enable Gmail API"}}}return a===401||r.includes("Invalid Credentials")||r.includes("invalid_token")?{title:"Session expired",description:"Your access token has expired or is invalid.",fix:"Sign out and sign in again to get a fresh token.",action:"signout"}:a===403||r.includes("insufficient")&&r.includes("scope")?{title:"Insufficient permissions",description:"The app doesn't have the required permissions to access Gmail.",fix:"Sign out, sign in again, and make sure to grant the Gmail read permission in the consent screen.",action:"signout"}:r.includes("access_denied")||r.includes("user_denied")?{title:"Access denied",description:"You declined the Gmail permission request.",fix:"Click 'Sign in with Google' again and grant the Gmail read-only permission when prompted."}:r.includes("popup")||r.includes("blocked")?{title:"Popup blocked",description:"The sign-in popup was blocked by your browser.",fix:"Allow popups for localhost:5173 in your browser settings, then try again."}:a===429||r.includes("Rate Limit")||r.includes("quota")?{title:"Rate limit exceeded",description:"Too many requests to the Gmail API.",fix:"Wait a minute and try again."}:r.includes("Failed to fetch")||r.includes("NetworkError")||r.includes("network")?{title:"Network error",description:"Could not reach the Gmail API.",fix:"Check your internet connection and try again."}:{title:"Something went wrong",description:r,fix:null}}var tv=G('<div class="error-card-header svelte-14buhqq"><div class="error-card-title svelte-14buhqq"> </div> <button class="error-dismiss svelte-14buhqq">â</button></div>'),nv=G('<div class="error-card-title svelte-14buhqq"> </div>'),rv=G('<p class="error-card-fix svelte-14buhqq"> </p>'),av=G('<a class="error-card-link svelte-14buhqq" target="_blank" rel="noopener"> </a>'),sv=G('<button class="btn small error-action svelte-14buhqq">Sign Out & Retry</button>'),iv=G('<div class="error-card svelte-14buhqq"><!> <p class="error-card-desc svelte-14buhqq"> </p> <!> <!> <!></div>');function Dc(t,e){dt(e,!0);let r=Ie(e,"ondismiss",3,null),a=Ie(e,"onsignout",3,null),i=ht(()=>ev(e.error));Nt(()=>fn("ErrorCard"));var o=iv(),c=w(o);{var d=F=>{var ie=tv(),Y=w(ie),U=w(Y),$=T(Y,2);$.__click=function(...Q){var H;(H=r())==null||H.apply(this,Q)},ve(()=>se(U,m(i).title)),K(F,ie)},v=F=>{var ie=nv(),Y=w(ie);ve(()=>se(Y,m(i).title)),K(F,ie)};we(c,F=>{r()?F(d):F(v,!1)})}var p=T(c,2),b=w(p),x=T(p,2);{var _=F=>{var ie=rv(),Y=w(ie);ve(()=>se(Y,m(i).fix)),K(F,ie)};we(x,F=>{m(i).fix&&F(_)})}var k=T(x,2);{var M=F=>{var ie=av(),Y=w(ie);ve(()=>{lc(ie,"href",m(i).link.url),se(Y,`${m(i).link.label??""} â`)}),K(F,ie)};we(k,F=>{m(i).link&&F(M)})}var N=T(k,2);{var S=F=>{var ie=sv();ie.__click=function(...Y){var U;(U=a())==null||U.apply(this,Y)},K(F,ie)};we(N,F=>{m(i).action==="signout"&&a()&&F(S)})}ve(()=>se(b,m(i).description)),K(t,o),pt()}Lt(["click"]);var ov=G('<span class="spinner svelte-nyqevv"></span> Signing in...',1),lv=Mo('<svg viewBox="0 0 24 24" width="18" height="18" class="google-icon svelte-nyqevv"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg> Sign in with Google',1),uv=G(`<div class="auth-container svelte-nyqevv"><div class="auth-card svelte-nyqevv"><h2 class="svelte-nyqevv">Gmail Dashboard</h2> <p class="auth-desc svelte-nyqevv">Sign in with your Google account to browse your Gmail messages.
      Read-only access â nothing is modified.</p> <!> <button class="btn google-btn svelte-nyqevv"><!></button> <div class="client-id-info svelte-nyqevv"><span class="client-id-label">Client ID:</span> <span class="client-id-value svelte-nyqevv"> </span> <button class="btn-link svelte-nyqevv">Change</button></div></div></div>`);function cv(t,e){dt(e,!0);let r=Ie(e,"error",3,null),a=Ie(e,"loadingAuth",3,!1);Nt(()=>fn("AuthCard"));var i=uv(),o=w(i),c=T(w(o),4);{var d=S=>{Dc(S,{get error(){return r()},get onsignout(){return e.onsignout}})};we(c,S=>{r()&&S(d)})}var v=T(c,2);v.__click=function(...S){var F;(F=e.onsignin)==null||F.apply(this,S)};var p=w(v);{var b=S=>{var F=ov();K(S,F)},x=S=>{var F=lv();K(S,F)};we(p,S=>{a()?S(b):S(x,!1)})}var _=T(v,2),k=T(w(_),2),M=w(k),N=T(k,2);N.__click=function(...S){var F;(F=e.onclear)==null||F.apply(this,S)},ve(S=>{v.disabled=a(),se(M,`${S??""}...`)},[()=>e.clientId.slice(0,20)]),K(t,i),pt()}Lt(["click"]);var fv=G('<span class="profile-email svelte-1w180uc">Loading profile...</span>'),dv=G('<span class="profile-email svelte-1w180uc"> </span> <span class="profile-stats svelte-1w180uc"> </span>',1),pv=G('<div class="profile-card svelte-1w180uc"><div class="profile-avatar svelte-1w180uc"> </div> <div class="profile-info svelte-1w180uc"><!></div> <button class="btn small svelte-1w180uc">Sign Out</button></div>');function hv(t,e){dt(e,!0);let r=Ie(e,"profile",3,null),a=Ie(e,"loadingProfile",3,!1);Nt(()=>fn("ProfileCard"));var i=pv(),o=w(i),c=w(o),d=T(o,2),v=w(d);{var p=_=>{var k=fv();K(_,k)},b=_=>{var k=dv(),M=it(k),N=w(M),S=T(M,2),F=w(S);ve((ie,Y)=>{se(N,r().emailAddress),se(F,`${ie??""} messages
        Â· ${Y??""} threads`)},[()=>{var ie;return((ie=r().messagesTotal)==null?void 0:ie.toLocaleString())||"?"},()=>{var ie;return((ie=r().threadsTotal)==null?void 0:ie.toLocaleString())||"?"}]),K(_,k)};we(v,_=>{a()?_(p):r()&&_(b,1)})}var x=T(d,2);x.__click=function(..._){var k;(k=e.onsignout)==null||k.apply(this,_)},ve(_=>se(c,_),[()=>r()?gc(r().emailAddress):"?"]),K(t,i),pt()}Lt(["click"]);var vv=G('<span class="spinner svelte-1ds3j4k"></span>'),gv=Mo('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m0 0a9 9 0 0 1 9-9m-9 9a9 9 0 0 0 9 9" class="svelte-1ds3j4k"></path></svg>'),mv=G('<span class="sync-meta svelte-1ds3j4k"> <!></span>'),yv=G('<span class="sync-meta svelte-1ds3j4k">Not synced yet</span>'),bv=G('<button class="btn-icon svelte-1ds3j4k" title="Clear local data"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M3 6h18M8 6V4h8v2m1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z" class="svelte-1ds3j4k"></path></svg></button>'),_v=G('<option class="svelte-1ds3j4k"> </option>'),wv=G('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),kv=G('<button class="btn sync-btn svelte-1ds3j4k"> </button> <!>',1),xv=G('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),Sv=G('<div class="sync-progress svelte-1ds3j4k"><div class="progress-bar svelte-1ds3j4k"><div></div></div> <span class="progress-text svelte-1ds3j4k"> </span></div>'),Tv=G('<div class="clear-confirm svelte-1ds3j4k"><span class="svelte-1ds3j4k">Delete all locally stored emails?</span> <div class="clear-actions svelte-1ds3j4k"><button class="btn small svelte-1ds3j4k">Cancel</button> <button class="btn small danger svelte-1ds3j4k">Delete</button></div></div>'),Ev=G('<div class="sync-card svelte-1ds3j4k"><div class="sync-header svelte-1ds3j4k"><div class="sync-icon svelte-1ds3j4k"><!></div> <div class="sync-info svelte-1ds3j4k"><span class="sync-title svelte-1ds3j4k">Local Storage</span> <!></div> <div class="sync-actions svelte-1ds3j4k"><!></div></div> <div class="sync-controls svelte-1ds3j4k"><div class="limit-group svelte-1ds3j4k"><label class="limit-label svelte-1ds3j4k" for="sync-limit">Batch:</label> <select id="sync-limit" class="limit-select svelte-1ds3j4k"></select></div> <div class="sync-buttons svelte-1ds3j4k"><!></div></div> <!> <!></div>');function Av(t,e){dt(e,!0),Nt(()=>fn("SyncStatus"));let r=Ie(e,"syncStatus",3,null),a=Ie(e,"syncProgress",3,null),i=Ie(e,"isSyncing",3,!1),o=Pe(!1),c=Pe(50);const d=[{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:0,label:"All"}];function v(X){if(!X)return"never";const ne=Math.floor((Date.now()-X)/1e3);if(ne<60)return"just now";const be=Math.floor(ne/60);if(be<60)return`${be}m ago`;const Ae=Math.floor(be/60);return Ae<24?`${Ae}h ago`:`${Math.floor(Ae/24)}d ago`}function p(){var X,ne;return!((X=a())!=null&&X.total)||!((ne=a())!=null&&ne.current)?0:Math.round(a().current/a().total*100)}var b=Ev(),x=w(b),_=w(x),k=w(_);{var M=X=>{var ne=vv();K(X,ne)},N=X=>{var ne=gv();K(X,ne)};we(k,X=>{i()?X(M):X(N,!1)})}var S=T(_,2),F=T(w(S),2);{var ie=X=>{var ne=mv(),be=w(ne),Ae=T(be);{var W=ke=>{var ge=Ll("Â· more available");K(ke,ge)},ee=ke=>{var ge=Ll("Â· all synced");K(ke,ge)};we(Ae,ke=>{r().hasMore?ke(W):ke(ee,!1)})}ve((ke,ge)=>se(be,`${ke??""} emails stored
          Â· synced ${ge??""} `),[()=>r().totalItems.toLocaleString(),()=>v(r().lastSyncAt)]),K(X,ne)},Y=X=>{var ne=yv();K(X,ne)};we(F,X=>{var ne;(ne=r())!=null&&ne.synced?X(ie):X(Y,!1)})}var U=T(S,2),$=w(U);{var Q=X=>{var ne=bv();ne.__click=()=>q(o,!m(o)),K(X,ne)};we($,X=>{var ne;(ne=r())!=null&&ne.synced&&!i()&&X(Q)})}var H=T(x,2),pe=w(H),Ne=T(w(pe),2);Gt(Ne,21,()=>d,hr,(X,ne)=>{var be=_v(),Ae=w(be),W={};ve(()=>{se(Ae,m(ne).label),W!==(W=m(ne).value)&&(be.value=(be.__value=m(ne).value)??"")}),K(X,be)});var ye=T(pe,2),he=w(ye);{var re=X=>{var ne=kv(),be=it(ne);be.__click=()=>e.onsync(m(c));var Ae=w(be),W=T(be,2);{var ee=ke=>{var ge=wv();ge.__click=()=>e.onsyncmore(m(c));var fe=w(ge);ve(()=>{ge.disabled=i(),se(fe,i()?"Loading...":"Sync More")}),K(ke,ge)};we(W,ke=>{r().hasMore&&ke(ee)})}ve(()=>{be.disabled=i(),se(Ae,i()?"Syncing...":"Sync New")}),K(X,ne)},le=X=>{var ne=xv();ne.__click=()=>e.onsync(m(c));var be=w(ne);ve(()=>{ne.disabled=i(),se(be,i()?"Syncing...":"Download Emails")}),K(X,ne)};we(he,X=>{var ne;(ne=r())!=null&&ne.synced?X(re):X(le,!1)})}var Oe=T(H,2);{var J=X=>{var ne=Sv(),be=w(ne),Ae=w(be);let W,ee;var ke=T(be,2),ge=w(ke);ve(fe=>{W=Pt(Ae,1,"progress-fill svelte-1ds3j4k",null,W,{indeterminate:!a().total}),ee=$t(Ae,"",ee,fe),se(ge,a().message||"Syncing...")},[()=>({width:`${p()??""}%`})]),K(X,ne)};we(Oe,X=>{i()&&a()&&X(J)})}var te=T(Oe,2);{var oe=X=>{var ne=Tv(),be=T(w(ne),2),Ae=w(be);Ae.__click=()=>q(o,!1);var W=T(Ae,2);W.__click=()=>{e.onclear(),q(o,!1)},K(X,ne)};we(te,X=>{m(o)&&X(oe)})}ve(()=>Ne.disabled=i()),Lo(Ne,()=>m(c),X=>q(c,X)),K(t,b),pt()}Lt(["click"]);var Cv=G('<button class="message-row svelte-y2uamw"><div class="msg-avatar svelte-y2uamw"> </div> <div class="msg-body svelte-y2uamw"><div class="msg-top svelte-y2uamw"><span class="msg-from svelte-y2uamw"> </span> <span class="msg-date svelte-y2uamw"> </span></div> <div class="msg-subject svelte-y2uamw"> </div> <div class="msg-snippet svelte-y2uamw"> </div></div></button>'),Iv=G('<div class="message-list svelte-y2uamw"></div>');function Rv(t,e){dt(e,!0);let r=Ie(e,"messages",19,()=>[]);Nt(()=>fn("MessageList"));var a=Iv();Gt(a,21,r,hr,(i,o)=>{var c=Cv();c.__click=()=>e.onselect(m(o));var d=w(c),v=w(d),p=T(d,2),b=w(p),x=w(b),_=w(x),k=T(x,2),M=w(k),N=T(b,2),S=w(N),F=T(N,2),ie=w(F);ve((Y,U,$)=>{se(v,Y),se(_,U),se(M,$),se(S,m(o).subject),se(ie,m(o).snippet)},[()=>gc(m(o).from),()=>Bo(m(o).from),()=>qo(m(o).date)]),K(i,c)}),K(t,a),pt()}Lt(["click"]);function Fo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var da=Fo();function Mc(t){da=t}var Wr={exec:()=>null};function Je(t,e=""){let r=typeof t=="string"?t:t.source,a={replace:(i,o)=>{let c=typeof o=="string"?o:o.source;return c=c.replace(Ut.caret,"$1"),r=r.replace(i,c),a},getRegex:()=>new RegExp(r,e)};return a}var Pv=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ut={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}>`)},Ov=/^(?:[ \t]*(?:\n|$))+/,Dv=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Mv=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ms=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Lv=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ko=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,Lc=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Nc=Je(Lc).replace(/bull/g,Ko).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Nv=Je(Lc).replace(/bull/g,Ko).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Uo=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,jv=/^[^\n]+/,Go=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,qv=Je(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Go).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Bv=Je(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ko).getRegex(),di="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ho=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,zv=Je("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ho).replace("tag",di).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),jc=Je(Uo).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",di).getRegex(),Fv=Je(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",jc).getRegex(),Wo={blockquote:Fv,code:Dv,def:qv,fences:Mv,heading:Lv,hr:ms,html:zv,lheading:Nc,list:Bv,newline:Ov,paragraph:jc,table:Wr,text:jv},Yl=Je("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",di).getRegex(),Kv={...Wo,lheading:Nv,table:Yl,paragraph:Je(Uo).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",di).getRegex()},Uv={...Wo,html:Je(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ho).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Wr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Je(Uo).replace("hr",ms).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Nc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Gv=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Hv=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,qc=/^( {2,}|\\)\n(?!\s*$)/,Wv=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pi=/[\p{P}\p{S}]/u,Yo=/[\s\p{P}\p{S}]/u,Bc=/[^\s\p{P}\p{S}]/u,Yv=Je(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Yo).getRegex(),zc=/(?!~)[\p{P}\p{S}]/u,Vv=/(?!~)[\s\p{P}\p{S}]/u,Xv=/(?:[^\s\p{P}\p{S}]|~)/u,Fc=/(?![*_])[\p{P}\p{S}]/u,Qv=/(?![*_])[\s\p{P}\p{S}]/u,Zv=/(?:[^\s\p{P}\p{S}]|[*_])/u,Jv=Je(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Pv?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Kc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$v=Je(Kc,"u").replace(/punct/g,pi).getRegex(),eg=Je(Kc,"u").replace(/punct/g,zc).getRegex(),Uc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",tg=Je(Uc,"gu").replace(/notPunctSpace/g,Bc).replace(/punctSpace/g,Yo).replace(/punct/g,pi).getRegex(),ng=Je(Uc,"gu").replace(/notPunctSpace/g,Xv).replace(/punctSpace/g,Vv).replace(/punct/g,zc).getRegex(),rg=Je("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Bc).replace(/punctSpace/g,Yo).replace(/punct/g,pi).getRegex(),ag=Je(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,Fc).getRegex(),sg="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",ig=Je(sg,"gu").replace(/notPunctSpace/g,Zv).replace(/punctSpace/g,Qv).replace(/punct/g,Fc).getRegex(),og=Je(/\\(punct)/,"gu").replace(/punct/g,pi).getRegex(),lg=Je(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ug=Je(Ho).replace("(?:-->|$)","-->").getRegex(),cg=Je("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ug).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ni=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,fg=Je(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ni).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gc=Je(/^!?\[(label)\]\[(ref)\]/).replace("label",ni).replace("ref",Go).getRegex(),Hc=Je(/^!?\[(ref)\](?:\[\])?/).replace("ref",Go).getRegex(),dg=Je("reflink|nolink(?!\\()","g").replace("reflink",Gc).replace("nolink",Hc).getRegex(),Vl=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Vo={_backpedal:Wr,anyPunctuation:og,autolink:lg,blockSkip:Jv,br:qc,code:Hv,del:Wr,delLDelim:Wr,delRDelim:Wr,emStrongLDelim:$v,emStrongRDelimAst:tg,emStrongRDelimUnd:rg,escape:Gv,link:fg,nolink:Hc,punctuation:Yv,reflink:Gc,reflinkSearch:dg,tag:cg,text:Wv,url:Wr},pg={...Vo,link:Je(/^!?\[(label)\]\((.*?)\)/).replace("label",ni).getRegex(),reflink:Je(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ni).getRegex()},vo={...Vo,emStrongRDelimAst:ng,emStrongLDelim:eg,delLDelim:ag,delRDelim:ig,url:Je(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Vl).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Je(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Vl).getRegex()},hg={...vo,br:Je(qc).replace("{2,}","*").getRegex(),text:Je(vo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fs={normal:Wo,gfm:Kv,pedantic:Uv},Ya={normal:Vo,gfm:vo,breaks:hg,pedantic:pg},vg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xl=t=>vg[t];function ar(t,e){if(e){if(Ut.escapeTest.test(t))return t.replace(Ut.escapeReplace,Xl)}else if(Ut.escapeTestNoEncode.test(t))return t.replace(Ut.escapeReplaceNoEncode,Xl);return t}function Ql(t){try{t=encodeURI(t).replace(Ut.percentDecode,"%")}catch{return null}return t}function Zl(t,e){var o;let r=t.replace(Ut.findPipe,(c,d,v)=>{let p=!1,b=d;for(;--b>=0&&v[b]==="\\";)p=!p;return p?"|":" |"}),a=r.split(Ut.splitPipe),i=0;if(a[0].trim()||a.shift(),a.length>0&&!((o=a.at(-1))!=null&&o.trim())&&a.pop(),e)if(a.length>e)a.splice(e);else for(;a.length<e;)a.push("");for(;i<a.length;i++)a[i]=a[i].trim().replace(Ut.slashPipe,"|");return a}function Va(t,e,r){let a=t.length;if(a===0)return"";let i=0;for(;i<a&&t.charAt(a-i-1)===e;)i++;return t.slice(0,a-i)}function gg(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let a=0;a<t.length;a++)if(t[a]==="\\")a++;else if(t[a]===e[0])r++;else if(t[a]===e[1]&&(r--,r<0))return a;return r>0?-2:-1}function mg(t,e=0){let r=e,a="";for(let i of t)if(i==="	"){let o=4-r%4;a+=" ".repeat(o),r+=o}else a+=i,r++;return a}function Jl(t,e,r,a,i){let o=e.href,c=e.title||null,d=t[1].replace(i.other.outputLinkReplace,"$1");a.state.inLink=!0;let v={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:o,title:c,text:d,tokens:a.inlineTokens(d)};return a.state.inLink=!1,v}function yg(t,e,r){let a=t.match(r.other.indentCodeCompensation);if(a===null)return e;let i=a[1];return e.split(`
`).map(o=>{let c=o.match(r.other.beginningSpace);if(c===null)return o;let[d]=c;return d.length>=i.length?o.slice(i.length):o}).join(`
`)}var ri=class{constructor(t){Ye(this,"options");Ye(this,"rules");Ye(this,"lexer");this.options=t||da}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Va(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],a=yg(r,e[3]||"",this.rules);return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:a}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(this.rules.other.endingHash.test(r)){let a=Va(r,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(r=a.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Va(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=Va(e[0],`
`).split(`
`),a="",i="",o=[];for(;r.length>0;){let c=!1,d=[],v;for(v=0;v<r.length;v++)if(this.rules.other.blockquoteStart.test(r[v]))d.push(r[v]),c=!0;else if(!c)d.push(r[v]);else break;r=r.slice(v);let p=d.join(`
`),b=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${p}`:p,i=i?`${i}
${b}`:b;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(b,o,!0),this.lexer.state.top=x,r.length===0)break;let _=o.at(-1);if((_==null?void 0:_.type)==="code")break;if((_==null?void 0:_.type)==="blockquote"){let k=_,M=k.raw+`
`+r.join(`
`),N=this.blockquote(M);o[o.length-1]=N,a=a.substring(0,a.length-k.raw.length)+N.raw,i=i.substring(0,i.length-k.text.length)+N.text;break}else if((_==null?void 0:_.type)==="list"){let k=_,M=k.raw+`
`+r.join(`
`),N=this.list(M);o[o.length-1]=N,a=a.substring(0,a.length-_.raw.length)+N.raw,i=i.substring(0,i.length-k.raw.length)+N.raw,r=M.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:o,text:i}}}list(t){var r,a;let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim(),o=i.length>1,c={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");let d=this.rules.other.listItemRegex(i),v=!1;for(;t;){let b=!1,x="",_="";if(!(e=d.exec(t))||this.rules.block.hr.test(t))break;x=e[0],t=t.substring(x.length);let k=mg(e[2].split(`
`,1)[0],e[1].length),M=t.split(`
`,1)[0],N=!k.trim(),S=0;if(this.options.pedantic?(S=2,_=k.trimStart()):N?S=e[1].length+1:(S=k.search(this.rules.other.nonSpaceChar),S=S>4?1:S,_=k.slice(S),S+=e[1].length),N&&this.rules.other.blankLine.test(M)&&(x+=M+`
`,t=t.substring(M.length+1),b=!0),!b){let F=this.rules.other.nextBulletRegex(S),ie=this.rules.other.hrRegex(S),Y=this.rules.other.fencesBeginRegex(S),U=this.rules.other.headingBeginRegex(S),$=this.rules.other.htmlBeginRegex(S),Q=this.rules.other.blockquoteBeginRegex(S);for(;t;){let H=t.split(`
`,1)[0],pe;if(M=H,this.options.pedantic?(M=M.replace(this.rules.other.listReplaceNesting,"  "),pe=M):pe=M.replace(this.rules.other.tabCharGlobal,"    "),Y.test(M)||U.test(M)||$.test(M)||Q.test(M)||F.test(M)||ie.test(M))break;if(pe.search(this.rules.other.nonSpaceChar)>=S||!M.trim())_+=`
`+pe.slice(S);else{if(N||k.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Y.test(k)||U.test(k)||ie.test(k))break;_+=`
`+M}N=!M.trim(),x+=H+`
`,t=t.substring(H.length+1),k=pe.slice(S)}}c.loose||(v?c.loose=!0:this.rules.other.doubleBlankLine.test(x)&&(v=!0)),c.items.push({type:"list_item",raw:x,task:!!this.options.gfm&&this.rules.other.listIsTask.test(_),loose:!1,text:_,tokens:[]}),c.raw+=x}let p=c.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;c.raw=c.raw.trimEnd();for(let b of c.items){if(this.lexer.state.top=!1,b.tokens=this.lexer.blockTokens(b.text,[]),b.task){if(b.text=b.text.replace(this.rules.other.listReplaceTask,""),((r=b.tokens[0])==null?void 0:r.type)==="text"||((a=b.tokens[0])==null?void 0:a.type)==="paragraph"){b.tokens[0].raw=b.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),b.tokens[0].text=b.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let _=this.lexer.inlineQueue.length-1;_>=0;_--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[_].src)){this.lexer.inlineQueue[_].src=this.lexer.inlineQueue[_].src.replace(this.rules.other.listReplaceTask,"");break}}let x=this.rules.other.listTaskCheckbox.exec(b.raw);if(x){let _={type:"checkbox",raw:x[0]+" ",checked:x[0]!=="[ ]"};b.checked=_.checked,c.loose?b.tokens[0]&&["paragraph","text"].includes(b.tokens[0].type)&&"tokens"in b.tokens[0]&&b.tokens[0].tokens?(b.tokens[0].raw=_.raw+b.tokens[0].raw,b.tokens[0].text=_.raw+b.tokens[0].text,b.tokens[0].tokens.unshift(_)):b.tokens.unshift({type:"paragraph",raw:_.raw,text:_.raw,tokens:[_]}):b.tokens.unshift(_)}}if(!c.loose){let x=b.tokens.filter(k=>k.type==="space"),_=x.length>0&&x.some(k=>this.rules.other.anyLine.test(k.raw));c.loose=_}}if(c.loose)for(let b of c.items){b.loose=!0;for(let x of b.tokens)x.type==="text"&&(x.type="paragraph")}return c}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:a,title:i}}}table(t){var c;let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=Zl(e[1]),a=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===a.length){for(let d of a)this.rules.other.tableAlignRight.test(d)?o.align.push("right"):this.rules.other.tableAlignCenter.test(d)?o.align.push("center"):this.rules.other.tableAlignLeft.test(d)?o.align.push("left"):o.align.push(null);for(let d=0;d<r.length;d++)o.header.push({text:r[d],tokens:this.lexer.inline(r[d]),header:!0,align:o.align[d]});for(let d of i)o.rows.push(Zl(d,o.header.length).map((v,p)=>({text:v,tokens:this.lexer.inline(v),header:!1,align:o.align[p]})));return o}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=Va(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=gg(e[2],"()");if(o===-2)return;if(o>-1){let c=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let a=e[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(a);o&&(a=o[1],i=o[3])}else i=e[3]?e[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?a=a.slice(1):a=a.slice(1,-1)),Jl(e,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let a=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[a.toLowerCase()];if(!i){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Jl(r,i,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!r||this.rules.inline.punctuation.exec(r))){let i=[...a[0]].length-1,o,c,d=i,v=0,p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,e=e.slice(-1*t.length+i);(a=p.exec(e))!=null;){if(o=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!o)continue;if(c=[...o].length,a[3]||a[4]){d+=c;continue}else if((a[5]||a[6])&&i%3&&!((i+c)%3)){v+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d+v);let b=[...a[0]][0].length,x=t.slice(0,i+a.index+b+c);if(Math.min(i,c)%2){let k=x.slice(1,-1);return{type:"em",raw:x,text:k,tokens:this.lexer.inlineTokens(k)}}let _=x.slice(2,-2);return{type:"strong",raw:x,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(r),i=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return a&&i&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t,e,r=""){let a=this.rules.inline.delLDelim.exec(t);if(a&&(!a[1]||!r||this.rules.inline.punctuation.exec(r))){let i=[...a[0]].length-1,o,c,d=i,v=this.rules.inline.delRDelim;for(v.lastIndex=0,e=e.slice(-1*t.length+i);(a=v.exec(e))!=null;){if(o=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!o||(c=[...o].length,c!==i))continue;if(a[3]||a[4]){d+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d);let p=[...a[0]][0].length,b=t.slice(0,i+a.index+p+c),x=b.slice(i,-i);return{type:"del",raw:b,text:x,tokens:this.lexer.inlineTokens(x)}}}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,a;return e[2]==="@"?(r=e[1],a="mailto:"+r):(r=e[1],a=r),{type:"link",raw:e[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let e;if(e=this.rules.inline.url.exec(t)){let a,i;if(e[2]==="@")a=e[0],i="mailto:"+a;else{let o;do o=e[0],e[0]=((r=this.rules.inline._backpedal.exec(e[0]))==null?void 0:r[0])??"";while(o!==e[0]);a=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:a,href:i,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:r}}}},Mn=class go{constructor(e){Ye(this,"tokens");Ye(this,"options");Ye(this,"state");Ye(this,"inlineQueue");Ye(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||da,this.options.tokenizer=this.options.tokenizer||new ri,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Ut,block:Fs.normal,inline:Ya.normal};this.options.pedantic?(r.block=Fs.pedantic,r.inline=Ya.pedantic):this.options.gfm&&(r.block=Fs.gfm,this.options.breaks?r.inline=Ya.breaks:r.inline=Ya.gfm),this.tokenizer.rules=r}static get rules(){return{block:Fs,inline:Ya}}static lex(e,r){return new go(r).lex(e)}static lexInline(e,r){return new go(r).inlineTokens(e)}lex(e){e=e.replace(Ut.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let a=this.inlineQueue[r];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],a=!1){var i,o,c;for(this.options.pedantic&&(e=e.replace(Ut.tabCharGlobal,"    ").replace(Ut.spaceLine,""));e;){let d;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(p=>(d=p.call({lexer:this},e,r))?(e=e.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.space(e)){e=e.substring(d.raw.length);let p=r.at(-1);d.raw.length===1&&p!==void 0?p.raw+=`
`:r.push(d);continue}if(d=this.tokenizer.code(e)){e=e.substring(d.raw.length);let p=r.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+d.raw,p.text+=`
`+d.text,this.inlineQueue.at(-1).src=p.text):r.push(d);continue}if(d=this.tokenizer.fences(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.heading(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.hr(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.blockquote(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.list(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.html(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.def(e)){e=e.substring(d.raw.length);let p=r.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+d.raw,p.text+=`
`+d.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title},r.push(d));continue}if(d=this.tokenizer.table(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.lheading(e)){e=e.substring(d.raw.length),r.push(d);continue}let v=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0,b=e.slice(1),x;this.options.extensions.startBlock.forEach(_=>{x=_.call({lexer:this},b),typeof x=="number"&&x>=0&&(p=Math.min(p,x))}),p<1/0&&p>=0&&(v=e.substring(0,p+1))}if(this.state.top&&(d=this.tokenizer.paragraph(v))){let p=r.at(-1);a&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+d.raw,p.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):r.push(d),a=v.length!==e.length,e=e.substring(d.raw.length);continue}if(d=this.tokenizer.text(e)){e=e.substring(d.raw.length);let p=r.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+d.raw,p.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):r.push(d);continue}if(e){let p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){var v,p,b,x,_;let a=e,i=null;if(this.tokens.links){let k=Object.keys(this.tokens.links);if(k.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)k.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,i.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)o=i[2]?i[2].length:0,a=a.slice(0,i.index+o)+"["+"a".repeat(i[0].length-o-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);a=((p=(v=this.options.hooks)==null?void 0:v.emStrongMask)==null?void 0:p.call({lexer:this},a))??a;let c=!1,d="";for(;e;){c||(d=""),c=!1;let k;if((x=(b=this.options.extensions)==null?void 0:b.inline)!=null&&x.some(N=>(k=N.call({lexer:this},e,r))?(e=e.substring(k.raw.length),r.push(k),!0):!1))continue;if(k=this.tokenizer.escape(e)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.tag(e)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.link(e)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(k.raw.length);let N=r.at(-1);k.type==="text"&&(N==null?void 0:N.type)==="text"?(N.raw+=k.raw,N.text+=k.text):r.push(k);continue}if(k=this.tokenizer.emStrong(e,a,d)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.codespan(e)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.br(e)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.del(e,a,d)){e=e.substring(k.raw.length),r.push(k);continue}if(k=this.tokenizer.autolink(e)){e=e.substring(k.raw.length),r.push(k);continue}if(!this.state.inLink&&(k=this.tokenizer.url(e))){e=e.substring(k.raw.length),r.push(k);continue}let M=e;if((_=this.options.extensions)!=null&&_.startInline){let N=1/0,S=e.slice(1),F;this.options.extensions.startInline.forEach(ie=>{F=ie.call({lexer:this},S),typeof F=="number"&&F>=0&&(N=Math.min(N,F))}),N<1/0&&N>=0&&(M=e.substring(0,N+1))}if(k=this.tokenizer.inlineText(M)){e=e.substring(k.raw.length),k.raw.slice(-1)!=="_"&&(d=k.raw.slice(-1)),c=!0;let N=r.at(-1);(N==null?void 0:N.type)==="text"?(N.raw+=k.raw,N.text+=k.text):r.push(k);continue}if(e){let N="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(N);break}else throw new Error(N)}}return r}},ai=class{constructor(t){Ye(this,"options");Ye(this,"parser");this.options=t||da}space(t){return""}code({text:t,lang:e,escaped:r}){var o;let a=(o=(e||"").match(Ut.notSpaceStart))==null?void 0:o[0],i=t.replace(Ut.endingNewline,"")+`
`;return a?'<pre><code class="language-'+ar(a)+'">'+(r?i:ar(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:ar(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,r=t.start,a="";for(let c=0;c<t.items.length;c++){let d=t.items[c];a+=this.listitem(d)}let i=e?"ol":"ul",o=e&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+a+"</"+i+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",r="";for(let i=0;i<t.header.length;i++)r+=this.tablecell(t.header[i]);e+=this.tablerow({text:r});let a="";for(let i=0;i<t.rows.length;i++){let o=t.rows[i];r="";for(let c=0;c<o.length;c++)r+=this.tablecell(o[c]);a+=this.tablerow({text:r})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ar(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let a=this.parser.parseInline(r),i=Ql(t);if(i===null)return a;t=i;let o='<a href="'+t+'"';return e&&(o+=' title="'+ar(e)+'"'),o+=">"+a+"</a>",o}image({href:t,title:e,text:r,tokens:a}){a&&(r=this.parser.parseInline(a,this.parser.textRenderer));let i=Ql(t);if(i===null)return ar(r);t=i;let o=`<img src="${t}" alt="${r}"`;return e&&(o+=` title="${ar(e)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ar(t.text)}},Xo=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},Ln=class mo{constructor(e){Ye(this,"options");Ye(this,"renderer");Ye(this,"textRenderer");this.options=e||da,this.options.renderer=this.options.renderer||new ai,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Xo}static parse(e,r){return new mo(r).parse(e)}static parseInline(e,r){return new mo(r).parseInline(e)}parse(e){var a,i;let r="";for(let o=0;o<e.length;o++){let c=e[o];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[c.type]){let v=c,p=this.options.extensions.renderers[v.type].call({parser:this},v);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(v.type)){r+=p||"";continue}}let d=c;switch(d.type){case"space":{r+=this.renderer.space(d);break}case"hr":{r+=this.renderer.hr(d);break}case"heading":{r+=this.renderer.heading(d);break}case"code":{r+=this.renderer.code(d);break}case"table":{r+=this.renderer.table(d);break}case"blockquote":{r+=this.renderer.blockquote(d);break}case"list":{r+=this.renderer.list(d);break}case"checkbox":{r+=this.renderer.checkbox(d);break}case"html":{r+=this.renderer.html(d);break}case"def":{r+=this.renderer.def(d);break}case"paragraph":{r+=this.renderer.paragraph(d);break}case"text":{r+=this.renderer.text(d);break}default:{let v='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(v),"";throw new Error(v)}}}return r}parseInline(e,r=this.renderer){var i,o;let a="";for(let c=0;c<e.length;c++){let d=e[c];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[d.type]){let p=this.options.extensions.renderers[d.type].call({parser:this},d);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){a+=p||"";continue}}let v=d;switch(v.type){case"escape":{a+=r.text(v);break}case"html":{a+=r.html(v);break}case"link":{a+=r.link(v);break}case"image":{a+=r.image(v);break}case"checkbox":{a+=r.checkbox(v);break}case"strong":{a+=r.strong(v);break}case"em":{a+=r.em(v);break}case"codespan":{a+=r.codespan(v);break}case"br":{a+=r.br(v);break}case"del":{a+=r.del(v);break}case"text":{a+=r.text(v);break}default:{let p='Token with "'+v.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return a}},Gs,ts=(Gs=class{constructor(t){Ye(this,"options");Ye(this,"block");this.options=t||da}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Mn.lex:Mn.lexInline}provideParser(){return this.block?Ln.parse:Ln.parseInline}},Ye(Gs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ye(Gs,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Gs),bg=class{constructor(...t){Ye(this,"defaults",Fo());Ye(this,"options",this.setOptions);Ye(this,"parse",this.parseMarkdown(!0));Ye(this,"parseInline",this.parseMarkdown(!1));Ye(this,"Parser",Ln);Ye(this,"Renderer",ai);Ye(this,"TextRenderer",Xo);Ye(this,"Lexer",Mn);Ye(this,"Tokenizer",ri);Ye(this,"Hooks",ts);this.use(...t)}walkTokens(t,e){var a,i;let r=[];for(let o of t)switch(r=r.concat(e.call(this,o)),o.type){case"table":{let c=o;for(let d of c.header)r=r.concat(this.walkTokens(d.tokens,e));for(let d of c.rows)for(let v of d)r=r.concat(this.walkTokens(v.tokens,e));break}case"list":{let c=o;r=r.concat(this.walkTokens(c.items,e));break}default:{let c=o;(i=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&i[c.type]?this.defaults.extensions.childTokens[c.type].forEach(d=>{let v=c[d].flat(1/0);r=r.concat(this.walkTokens(v,e))}):c.tokens&&(r=r.concat(this.walkTokens(c.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let a={...r};if(a.async=this.defaults.async||a.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=e.renderers[i.name];o?e.renderers[i.name]=function(...c){let d=i.renderer.apply(this,c);return d===!1&&(d=o.apply(this,c)),d}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[i.level];o?o.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),a.extensions=e),r.renderer){let i=this.defaults.renderer||new ai(this.defaults);for(let o in r.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let c=o,d=r.renderer[c],v=i[c];i[c]=(...p)=>{let b=d.apply(i,p);return b===!1&&(b=v.apply(i,p)),b||""}}a.renderer=i}if(r.tokenizer){let i=this.defaults.tokenizer||new ri(this.defaults);for(let o in r.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let c=o,d=r.tokenizer[c],v=i[c];i[c]=(...p)=>{let b=d.apply(i,p);return b===!1&&(b=v.apply(i,p)),b}}a.tokenizer=i}if(r.hooks){let i=this.defaults.hooks||new ts;for(let o in r.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let c=o,d=r.hooks[c],v=i[c];ts.passThroughHooks.has(o)?i[c]=p=>{if(this.defaults.async&&ts.passThroughHooksRespectAsync.has(o))return(async()=>{let x=await d.call(i,p);return v.call(i,x)})();let b=d.call(i,p);return v.call(i,b)}:i[c]=(...p)=>{if(this.defaults.async)return(async()=>{let x=await d.apply(i,p);return x===!1&&(x=await v.apply(i,p)),x})();let b=d.apply(i,p);return b===!1&&(b=v.apply(i,p)),b}}a.hooks=i}if(r.walkTokens){let i=this.defaults.walkTokens,o=r.walkTokens;a.walkTokens=function(c){let d=[];return d.push(o.call(this,c)),i&&(d=d.concat(i.call(this,c))),d}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Mn.lex(t,e??this.defaults)}parser(t,e){return Ln.parse(t,e??this.defaults)}parseMarkdown(t){return(e,r)=>{let a={...r},i={...this.defaults,...a},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let c=i.hooks?await i.hooks.preprocess(e):e,d=await(i.hooks?await i.hooks.provideLexer():t?Mn.lex:Mn.lexInline)(c,i),v=i.hooks?await i.hooks.processAllTokens(d):d;i.walkTokens&&await Promise.all(this.walkTokens(v,i.walkTokens));let p=await(i.hooks?await i.hooks.provideParser():t?Ln.parse:Ln.parseInline)(v,i);return i.hooks?await i.hooks.postprocess(p):p})().catch(o);try{i.hooks&&(e=i.hooks.preprocess(e));let c=(i.hooks?i.hooks.provideLexer():t?Mn.lex:Mn.lexInline)(e,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let d=(i.hooks?i.hooks.provideParser():t?Ln.parse:Ln.parseInline)(c,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(c){return o(c)}}}onError(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+ar(r.message+"",!0)+"</pre>";return e?Promise.resolve(a):a}if(e)return Promise.reject(r);throw r}}},ca=new bg;function nt(t,e){return ca.parse(t,e)}nt.options=nt.setOptions=function(t){return ca.setOptions(t),nt.defaults=ca.defaults,Mc(nt.defaults),nt};nt.getDefaults=Fo;nt.defaults=da;nt.use=function(...t){return ca.use(...t),nt.defaults=ca.defaults,Mc(nt.defaults),nt};nt.walkTokens=function(t,e){return ca.walkTokens(t,e)};nt.parseInline=ca.parseInline;nt.Parser=Ln;nt.parser=Ln.parse;nt.Renderer=ai;nt.TextRenderer=Xo;nt.Lexer=Mn;nt.lexer=Mn.lex;nt.Tokenizer=ri;nt.Hooks=ts;nt.parse=nt;nt.options;nt.setOptions;nt.use;nt.walkTokens;nt.parseInline;Ln.parse;Mn.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Wc,setPrototypeOf:$l,isFrozen:_g,getPrototypeOf:wg,getOwnPropertyDescriptor:kg}=Object;let{freeze:Ht,seal:xn,create:yo}=Object,{apply:bo,construct:_o}=typeof Reflect<"u"&&Reflect;Ht||(Ht=function(e){return e});xn||(xn=function(e){return e});bo||(bo=function(e,r){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return e.apply(r,i)});_o||(_o=function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return new e(...a)});const Ks=Wt(Array.prototype.forEach),xg=Wt(Array.prototype.lastIndexOf),eu=Wt(Array.prototype.pop),Xa=Wt(Array.prototype.push),Sg=Wt(Array.prototype.splice),Zs=Wt(String.prototype.toLowerCase),Hi=Wt(String.prototype.toString),Wi=Wt(String.prototype.match),Qa=Wt(String.prototype.replace),Tg=Wt(String.prototype.indexOf),Eg=Wt(String.prototype.trim),On=Wt(Object.prototype.hasOwnProperty),Kt=Wt(RegExp.prototype.test),Za=Ag(TypeError);function Wt(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return bo(t,e,a)}}function Ag(t){return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return _o(t,r)}}function We(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zs;$l&&$l(t,null);let a=e.length;for(;a--;){let i=e[a];if(typeof i=="string"){const o=r(i);o!==i&&(_g(e)||(e[a]=o),i=o)}t[i]=!0}return t}function Cg(t){for(let e=0;e<t.length;e++)On(t,e)||(t[e]=null);return t}function Wn(t){const e=yo(null);for(const[r,a]of Wc(t))On(t,r)&&(Array.isArray(a)?e[r]=Cg(a):a&&typeof a=="object"&&a.constructor===Object?e[r]=Wn(a):e[r]=a);return e}function Ja(t,e){for(;t!==null;){const a=kg(t,e);if(a){if(a.get)return Wt(a.get);if(typeof a.value=="function")return Wt(a.value)}t=wg(t)}function r(){return null}return r}const tu=Ht(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Yi=Ht(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Vi=Ht(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ig=Ht(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Xi=Ht(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Rg=Ht(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nu=Ht(["#text"]),ru=Ht(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qi=Ht(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),au=Ht(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Us=Ht(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Pg=xn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Og=xn(/<%[\w\W]*|[\w\W]*%>/gm),Dg=xn(/\$\{[\w\W]*/gm),Mg=xn(/^data-[\-\w.\u00B7-\uFFFF]+$/),Lg=xn(/^aria-[\-\w]+$/),Yc=xn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ng=xn(/^(?:\w+script|data):/i),jg=xn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Vc=xn(/^html$/i),qg=xn(/^[a-z][.\w]*(-[.\w]+)+$/i);var su=Object.freeze({__proto__:null,ARIA_ATTR:Lg,ATTR_WHITESPACE:jg,CUSTOM_ELEMENT:qg,DATA_ATTR:Mg,DOCTYPE_NAME:Vc,ERB_EXPR:Og,IS_ALLOWED_URI:Yc,IS_SCRIPT_OR_DATA:Ng,MUSTACHE_EXPR:Pg,TMPLIT_EXPR:Dg});const $a={element:1,text:3,progressingInstruction:7,comment:8,document:9},Bg=function(){return typeof window>"u"?null:window},zg=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let a=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(a=r.getAttribute(i));const o="dompurify"+(a?"#"+a:"");try{return e.createPolicy(o,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},iu=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Xc(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bg();const e=je=>Xc(je);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==$a.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const a=r,i=a.currentScript,{DocumentFragment:o,HTMLTemplateElement:c,Node:d,Element:v,NodeFilter:p,NamedNodeMap:b=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:x,DOMParser:_,trustedTypes:k}=t,M=v.prototype,N=Ja(M,"cloneNode"),S=Ja(M,"remove"),F=Ja(M,"nextSibling"),ie=Ja(M,"childNodes"),Y=Ja(M,"parentNode");if(typeof c=="function"){const je=r.createElement("template");je.content&&je.content.ownerDocument&&(r=je.content.ownerDocument)}let U,$="";const{implementation:Q,createNodeIterator:H,createDocumentFragment:pe,getElementsByTagName:Ne}=r,{importNode:ye}=a;let he=iu();e.isSupported=typeof Wc=="function"&&typeof Y=="function"&&Q&&Q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:re,ERB_EXPR:le,TMPLIT_EXPR:Oe,DATA_ATTR:J,ARIA_ATTR:te,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:ne}=su;let{IS_ALLOWED_URI:be}=su,Ae=null;const W=We({},[...tu,...Yi,...Vi,...Xi,...nu]);let ee=null;const ke=We({},[...ru,...Qi,...au,...Us]);let ge=Object.seal(yo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ae=null;const De=Object.seal(yo(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ze=!0,_e=!0,ut=!1,Ke=!0,ct=!1,en=!0,At=!1,Or=!1,Dr=!1,Sn=!1,vr=!1,zn=!1,Ft=!0,Mr=!1;const Fn="user-content-";let $n=!0,tn=!1,Fe={},at=null;const nn=We({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rn=null;const Kn=We({},["audio","video","img","source","image","track"]);let Tn=null;const dn=We({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),En="http://www.w3.org/1998/Math/MathML",gr="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let Le=xt,er=!1,An=null;const pa=We({},[En,gr,xt],Hi);let Ee=We({},["mi","mo","mn","ms","mtext"]),mr=We({},["annotation-xml"]);const ys=We({},["title","style","font","a","script"]);let tr=null;const bs=["application/xhtml+xml","text/html"],Ma="text/html";let yt=null,yr=null;const br=r.createElement("form"),nr=function(A){return A instanceof RegExp||A instanceof Function},Lr=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yr&&yr===A)){if((!A||typeof A!="object")&&(A={}),A=Wn(A),tr=bs.indexOf(A.PARSER_MEDIA_TYPE)===-1?Ma:A.PARSER_MEDIA_TYPE,yt=tr==="application/xhtml+xml"?Hi:Zs,Ae=On(A,"ALLOWED_TAGS")?We({},A.ALLOWED_TAGS,yt):W,ee=On(A,"ALLOWED_ATTR")?We({},A.ALLOWED_ATTR,yt):ke,An=On(A,"ALLOWED_NAMESPACES")?We({},A.ALLOWED_NAMESPACES,Hi):pa,Tn=On(A,"ADD_URI_SAFE_ATTR")?We(Wn(dn),A.ADD_URI_SAFE_ATTR,yt):dn,rn=On(A,"ADD_DATA_URI_TAGS")?We(Wn(Kn),A.ADD_DATA_URI_TAGS,yt):Kn,at=On(A,"FORBID_CONTENTS")?We({},A.FORBID_CONTENTS,yt):nn,fe=On(A,"FORBID_TAGS")?We({},A.FORBID_TAGS,yt):Wn({}),ae=On(A,"FORBID_ATTR")?We({},A.FORBID_ATTR,yt):Wn({}),Fe=On(A,"USE_PROFILES")?A.USE_PROFILES:!1,ze=A.ALLOW_ARIA_ATTR!==!1,_e=A.ALLOW_DATA_ATTR!==!1,ut=A.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=A.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ct=A.SAFE_FOR_TEMPLATES||!1,en=A.SAFE_FOR_XML!==!1,At=A.WHOLE_DOCUMENT||!1,Sn=A.RETURN_DOM||!1,vr=A.RETURN_DOM_FRAGMENT||!1,zn=A.RETURN_TRUSTED_TYPE||!1,Dr=A.FORCE_BODY||!1,Ft=A.SANITIZE_DOM!==!1,Mr=A.SANITIZE_NAMED_PROPS||!1,$n=A.KEEP_CONTENT!==!1,tn=A.IN_PLACE||!1,be=A.ALLOWED_URI_REGEXP||Yc,Le=A.NAMESPACE||xt,Ee=A.MATHML_TEXT_INTEGRATION_POINTS||Ee,mr=A.HTML_INTEGRATION_POINTS||mr,ge=A.CUSTOM_ELEMENT_HANDLING||{},A.CUSTOM_ELEMENT_HANDLING&&nr(A.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ge.tagNameCheck=A.CUSTOM_ELEMENT_HANDLING.tagNameCheck),A.CUSTOM_ELEMENT_HANDLING&&nr(A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ge.attributeNameCheck=A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),A.CUSTOM_ELEMENT_HANDLING&&typeof A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ge.allowCustomizedBuiltInElements=A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ct&&(_e=!1),vr&&(Sn=!0),Fe&&(Ae=We({},nu),ee=[],Fe.html===!0&&(We(Ae,tu),We(ee,ru)),Fe.svg===!0&&(We(Ae,Yi),We(ee,Qi),We(ee,Us)),Fe.svgFilters===!0&&(We(Ae,Vi),We(ee,Qi),We(ee,Us)),Fe.mathMl===!0&&(We(Ae,Xi),We(ee,au),We(ee,Us))),A.ADD_TAGS&&(typeof A.ADD_TAGS=="function"?De.tagCheck=A.ADD_TAGS:(Ae===W&&(Ae=Wn(Ae)),We(Ae,A.ADD_TAGS,yt))),A.ADD_ATTR&&(typeof A.ADD_ATTR=="function"?De.attributeCheck=A.ADD_ATTR:(ee===ke&&(ee=Wn(ee)),We(ee,A.ADD_ATTR,yt))),A.ADD_URI_SAFE_ATTR&&We(Tn,A.ADD_URI_SAFE_ATTR,yt),A.FORBID_CONTENTS&&(at===nn&&(at=Wn(at)),We(at,A.FORBID_CONTENTS,yt)),A.ADD_FORBID_CONTENTS&&(at===nn&&(at=Wn(at)),We(at,A.ADD_FORBID_CONTENTS,yt)),$n&&(Ae["#text"]=!0),At&&We(Ae,["html","head","body"]),Ae.table&&(We(Ae,["tbody"]),delete fe.tbody),A.TRUSTED_TYPES_POLICY){if(typeof A.TRUSTED_TYPES_POLICY.createHTML!="function")throw Za('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof A.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Za('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=A.TRUSTED_TYPES_POLICY,$=U.createHTML("")}else U===void 0&&(U=zg(k,i)),U!==null&&typeof $=="string"&&($=U.createHTML(""));Ht&&Ht(A),yr=A}},Nr=We({},[...Yi,...Vi,...Ig]),st=We({},[...Xi,...Rg]),kt=function(A){let de=Y(A);(!de||!de.tagName)&&(de={namespaceURI:Le,tagName:"template"});const xe=Zs(A.tagName),$e=Zs(de.tagName);return An[A.namespaceURI]?A.namespaceURI===gr?de.namespaceURI===xt?xe==="svg":de.namespaceURI===En?xe==="svg"&&($e==="annotation-xml"||Ee[$e]):!!Nr[xe]:A.namespaceURI===En?de.namespaceURI===xt?xe==="math":de.namespaceURI===gr?xe==="math"&&mr[$e]:!!st[xe]:A.namespaceURI===xt?de.namespaceURI===gr&&!mr[$e]||de.namespaceURI===En&&!Ee[$e]?!1:!st[xe]&&(ys[xe]||!Nr[xe]):!!(tr==="application/xhtml+xml"&&An[A.namespaceURI]):!1},pn=function(A){Xa(e.removed,{element:A});try{Y(A).removeChild(A)}catch{S(A)}},hn=function(A,de){try{Xa(e.removed,{attribute:de.getAttributeNode(A),from:de})}catch{Xa(e.removed,{attribute:null,from:de})}if(de.removeAttribute(A),A==="is")if(Sn||vr)try{pn(de)}catch{}else try{de.setAttribute(A,"")}catch{}},jr=function(A){let de=null,xe=null;if(Dr)A="<remove></remove>"+A;else{const vt=Wi(A,/^[\r\n\t ]+/);xe=vt&&vt[0]}tr==="application/xhtml+xml"&&Le===xt&&(A='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+A+"</body></html>");const $e=U?U.createHTML(A):A;if(Le===xt)try{de=new _().parseFromString($e,tr)}catch{}if(!de||!de.documentElement){de=Q.createDocument(Le,"template",null);try{de.documentElement.innerHTML=er?$:$e}catch{}}const ot=de.body||de.documentElement;return A&&xe&&ot.insertBefore(r.createTextNode(xe),ot.childNodes[0]||null),Le===xt?Ne.call(de,At?"html":"body")[0]:At?de.documentElement:ot},qr=function(A){return H.call(A.ownerDocument||A,A,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},La=function(A){return A instanceof x&&(typeof A.nodeName!="string"||typeof A.textContent!="string"||typeof A.removeChild!="function"||!(A.attributes instanceof b)||typeof A.removeAttribute!="function"||typeof A.setAttribute!="function"||typeof A.namespaceURI!="string"||typeof A.insertBefore!="function"||typeof A.hasChildNodes!="function")},Cn=function(A){return typeof d=="function"&&A instanceof d};function jt(je,A,de){Ks(je,xe=>{xe.call(e,A,de,yr)})}const In=function(A){let de=null;if(jt(he.beforeSanitizeElements,A,null),La(A))return pn(A),!0;const xe=yt(A.nodeName);if(jt(he.uponSanitizeElement,A,{tagName:xe,allowedTags:Ae}),en&&A.hasChildNodes()&&!Cn(A.firstElementChild)&&Kt(/<[/\w!]/g,A.innerHTML)&&Kt(/<[/\w!]/g,A.textContent)||A.nodeType===$a.progressingInstruction||en&&A.nodeType===$a.comment&&Kt(/<[/\w]/g,A.data))return pn(A),!0;if(!(De.tagCheck instanceof Function&&De.tagCheck(xe))&&(!Ae[xe]||fe[xe])){if(!fe[xe]&&_s(xe)&&(ge.tagNameCheck instanceof RegExp&&Kt(ge.tagNameCheck,xe)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(xe)))return!1;if($n&&!at[xe]){const $e=Y(A)||A.parentNode,ot=ie(A)||A.childNodes;if(ot&&$e){const vt=ot.length;for(let bt=vt-1;bt>=0;--bt){const Yt=N(ot[bt],!0);Yt.__removalCount=(A.__removalCount||0)+1,$e.insertBefore(Yt,F(A))}}}return pn(A),!0}return A instanceof v&&!kt(A)||(xe==="noscript"||xe==="noembed"||xe==="noframes")&&Kt(/<\/no(script|embed|frames)/i,A.innerHTML)?(pn(A),!0):(ct&&A.nodeType===$a.text&&(de=A.textContent,Ks([re,le,Oe],$e=>{de=Qa(de,$e," ")}),A.textContent!==de&&(Xa(e.removed,{element:A.cloneNode()}),A.textContent=de)),jt(he.afterSanitizeElements,A,null),!1)},Br=function(A,de,xe){if(Ft&&(de==="id"||de==="name")&&(xe in r||xe in br))return!1;if(!(_e&&!ae[de]&&Kt(J,de))){if(!(ze&&Kt(te,de))){if(!(De.attributeCheck instanceof Function&&De.attributeCheck(de,A))){if(!ee[de]||ae[de]){if(!(_s(A)&&(ge.tagNameCheck instanceof RegExp&&Kt(ge.tagNameCheck,A)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(A))&&(ge.attributeNameCheck instanceof RegExp&&Kt(ge.attributeNameCheck,de)||ge.attributeNameCheck instanceof Function&&ge.attributeNameCheck(de,A))||de==="is"&&ge.allowCustomizedBuiltInElements&&(ge.tagNameCheck instanceof RegExp&&Kt(ge.tagNameCheck,xe)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(xe))))return!1}else if(!Tn[de]){if(!Kt(be,Qa(xe,X,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&A!=="script"&&Tg(xe,"data:")===0&&rn[A])){if(!(ut&&!Kt(oe,Qa(xe,X,"")))){if(xe)return!1}}}}}}}return!0},_s=function(A){return A!=="annotation-xml"&&Wi(A,ne)},Rn=function(A){jt(he.beforeSanitizeAttributes,A,null);const{attributes:de}=A;if(!de||La(A))return;const xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let $e=de.length;for(;$e--;){const ot=de[$e],{name:vt,namespaceURI:bt,value:Yt}=ot,Un=yt(vt),zr=Yt;let ft=vt==="value"?zr:Eg(zr);if(xe.attrName=Un,xe.attrValue=ft,xe.keepAttr=!0,xe.forceKeepAttr=void 0,jt(he.uponSanitizeAttribute,A,xe),ft=xe.attrValue,Mr&&(Un==="id"||Un==="name")&&(hn(vt,A),ft=Fn+ft),en&&Kt(/((--!?|])>)|<\/(style|title|textarea)/i,ft)){hn(vt,A);continue}if(Un==="attributename"&&Wi(ft,"href")){hn(vt,A);continue}if(xe.forceKeepAttr)continue;if(!xe.keepAttr){hn(vt,A);continue}if(!Ke&&Kt(/\/>/i,ft)){hn(vt,A);continue}ct&&Ks([re,le,Oe],Fr=>{ft=Qa(ft,Fr," ")});const Na=yt(A.nodeName);if(!Br(Na,Un,ft)){hn(vt,A);continue}if(U&&typeof k=="object"&&typeof k.getAttributeType=="function"&&!bt)switch(k.getAttributeType(Na,Un)){case"TrustedHTML":{ft=U.createHTML(ft);break}case"TrustedScriptURL":{ft=U.createScriptURL(ft);break}}if(ft!==zr)try{bt?A.setAttributeNS(bt,vt,ft):A.setAttribute(vt,ft),La(A)?pn(A):eu(e.removed)}catch{hn(vt,A)}}jt(he.afterSanitizeAttributes,A,null)},ws=function je(A){let de=null;const xe=qr(A);for(jt(he.beforeSanitizeShadowDOM,A,null);de=xe.nextNode();)jt(he.uponSanitizeShadowNode,de,null),In(de),Rn(de),de.content instanceof o&&je(de.content);jt(he.afterSanitizeShadowDOM,A,null)};return e.sanitize=function(je){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,xe=null,$e=null,ot=null;if(er=!je,er&&(je="<!-->"),typeof je!="string"&&!Cn(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw Za("dirty is not a string, aborting")}else throw Za("toString is not a function");if(!e.isSupported)return je;if(Or||Lr(A),e.removed=[],typeof je=="string"&&(tn=!1),tn){if(je.nodeName){const Yt=yt(je.nodeName);if(!Ae[Yt]||fe[Yt])throw Za("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof d)de=jr("<!---->"),xe=de.ownerDocument.importNode(je,!0),xe.nodeType===$a.element&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?de=xe:de.appendChild(xe);else{if(!Sn&&!ct&&!At&&je.indexOf("<")===-1)return U&&zn?U.createHTML(je):je;if(de=jr(je),!de)return Sn?null:zn?$:""}de&&Dr&&pn(de.firstChild);const vt=qr(tn?je:de);for(;$e=vt.nextNode();)In($e),Rn($e),$e.content instanceof o&&ws($e.content);if(tn)return je;if(Sn){if(vr)for(ot=pe.call(de.ownerDocument);de.firstChild;)ot.appendChild(de.firstChild);else ot=de;return(ee.shadowroot||ee.shadowrootmode)&&(ot=ye.call(a,ot,!0)),ot}let bt=At?de.outerHTML:de.innerHTML;return At&&Ae["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&Kt(Vc,de.ownerDocument.doctype.name)&&(bt="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+bt),ct&&Ks([re,le,Oe],Yt=>{bt=Qa(bt,Yt," ")}),U&&zn?U.createHTML(bt):bt},e.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lr(je),Or=!0},e.clearConfig=function(){yr=null,Or=!1},e.isValidAttribute=function(je,A,de){yr||Lr({});const xe=yt(je),$e=yt(A);return Br(xe,$e,de)},e.addHook=function(je,A){typeof A=="function"&&Xa(he[je],A)},e.removeHook=function(je,A){if(A!==void 0){const de=xg(he[je],A);return de===-1?void 0:Sg(he[je],de,1)[0]}return eu(he[je])},e.removeHooks=function(je){he[je]=[]},e.removeAllHooks=function(){he=iu()},e}var Fg=Xc();function Kg(t){const e=[];e.push(`# ${t.subject}`),e.push(""),e.push("| | |"),e.push("|---|---|"),e.push(`| **From** | ${ou(t.from)} |`),e.push(`| **To** | ${ou(t.to)} |`),e.push(`| **Date** | ${qo(t.date)} |`),e.push(""),e.push("---"),e.push("");const r=t.htmlBody?Ug(t.htmlBody):null;return e.push(r||t.body||"*(no body)*"),e.push(""),e.join(`
`)}function ou(t){return(t||"").replace(/\|/g,"\\|")}function Ug(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script, head"))r.remove();return wo(e.body).replace(/\n{3,}/g,`

`).trim()}catch{return null}}function Gg(t,e){if(!e||e.startsWith("data:"))return!0;const r=parseInt(t.getAttribute("width"),10),a=parseInt(t.getAttribute("height"),10);if(r>0&&r<=3||a>0&&a<=3)return!0;const i=e.toLowerCase();return i.includes("spacer")||i.includes("transparent")||i.includes("transp.gif")||i.includes("/track")&&i.includes("pixel")||/amazon\.com\/gp\/r\.html\?/.test(e)||/[?&](open|track|beacon|pixel|img)=/i.test(i)?!0:i.includes("mail.google.com/mail/u/")&&i.includes("view=fimg")?!1:!!(/ci\d+\.\w+\.com\//.test(i)||i.endsWith(".gif")&&i.includes("1x1"))}function wo(t){var i;if(t.nodeType===3)return t.textContent.replace(/[ \t]+/g," ");if(t.nodeType!==1)return"";const e=t.tagName.toLowerCase();if(e==="br")return`
`;if(e==="hr")return`

---

`;if(e==="img"){const o=t.getAttribute("src")||"",c=t.getAttribute("alt")||"";return Gg(t,o)?"":`![${c}](${o})`}const r=Array.from(t.childNodes).map(wo).join(""),a=r.trim();if(!a&&!["img","br","hr"].includes(e))return r;if(e==="p"||e==="div")return`

${a}

`;if(e==="blockquote")return`

> ${a.replace(/\n/g,`
> `)}

`;if(/^h[1-6]$/.test(e)){const o=Number(e[1]);return`

${"#".repeat(o)} ${a}

`}if(e==="ul"||e==="ol")return`

${r}

`;if(e==="li")return`${((i=t.parentElement)==null?void 0:i.tagName.toLowerCase())==="ol"?"1.":"-"} ${a}
`;if(e==="a"){const o=t.getAttribute("href")||"";return!o||o.startsWith("mailto:")?a:a===o?o:`[${a}](${o})`}if(e==="strong"||e==="b")return`**${a}**`;if(e==="em"||e==="i")return`*${a}*`;if(e==="code")return`\`${a}\``;if(e==="table")return`

${r}

`;if(e==="tr")return`| ${Array.from(t.children).map(c=>wo(c).trim()).join(" | ")} |
`;if(e==="td"||e==="th")return r;if(e==="thead"){const o=r.trim(),c=(o.match(/\|/g)||[]).length-1,d="| "+Array(Math.max(c,1)).fill("---").join(" | ")+" |";return`${o}${d}
`}return r}function Hg(t){return mc(t,"md")}function lu(t,e,r="text/markdown;charset=utf-8"){const a=new Blob([t],{type:r}),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}function Wg(t){return t.raw||null}function Yg(t){const e=Wg(t);return e?JSON.stringify(e,null,2):"null"}function Vg(t){return mc(t,"json")}var Xg=G('<button title="View as Markdown">.md</button>'),Qg=G('<div class="md-toolbar svelte-1b0rzpb"><span class="toolbar-label svelte-1b0rzpb">JSON</span> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .json file">Download</button></div> <div class="md-body svelte-1b0rzpb"><pre class="md-raw svelte-1b0rzpb"> </pre></div>',1),Zg=G('<pre class="md-raw svelte-1b0rzpb"> </pre>'),Jg=G('<div class="md-preview svelte-1b0rzpb"><!></div>'),$g=G('<div class="md-toolbar svelte-1b0rzpb"><div class="md-tabs svelte-1b0rzpb"><button>Raw</button> <button>Preview</button></div> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .md file">Download</button></div> <div class="md-body svelte-1b0rzpb"><!></div>',1),em=G('<div class="loading-state svelte-1b0rzpb"><span class="spinner svelte-1b0rzpb"></span> <span>Loading message...</span></div>'),tm=G('<iframe class="html-frame svelte-1b0rzpb" sandbox="allow-same-origin" title="Email content"></iframe>'),nm=G('<pre class="message-text svelte-1b0rzpb"> </pre>'),rm=G('<p class="empty-body svelte-1b0rzpb">Loading...</p>'),am=G('<div class="modal-meta svelte-1b0rzpb"><div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">From:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">To:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">Date:</span> <span> </span></div></div> <div class="modal-body svelte-1b0rzpb"><!></div>',1),sm=G('<div class="modal-overlay svelte-1b0rzpb" role="dialog" aria-modal="true"><div class="modal-content svelte-1b0rzpb" role="document"><div class="modal-header svelte-1b0rzpb"><h3 class="modal-subject svelte-1b0rzpb"> </h3> <div class="header-actions svelte-1b0rzpb"><button title="View as JSON">.json</button> <!> <button class="modal-close svelte-1b0rzpb">â</button></div></div> <!></div></div>');function im(t,e){dt(e,!0);let r=Ie(e,"loading",3,!1);Nt(()=>fn("MessageModal"));const a=new nt.Renderer;a.link=({href:re,title:le,text:Oe})=>{const J=le?` title="${le}"`:"";return`<a href="${re}"${J} target="_blank" rel="noopener">${Oe}</a>`},nt.setOptions({breaks:!0,gfm:!0,renderer:a});let i=Pe("email"),o=ht(()=>e.message.body?Kg(e.message):""),c=ht(()=>Yg(e.message)),d=Pe("raw");function v(re){q(i,m(i)===re?"email":re,!0),re==="markdown"&&q(d,"raw")}function p(){lu(m(o),Hg(e.message))}function b(){lu(m(c),Vg(e.message),"application/json;charset=utf-8")}function x(re){const le=nt.parse(re);return Fg.sanitize(le,{ADD_ATTR:["target"],ALLOW_TAGS:["h1","h2","h3","h4","h5","h6","p","br","hr","blockquote","pre","code","strong","b","em","i","a","img","ul","ol","li","table","thead","tbody","tr","th","td","del","s"]})}let _=Pe(null);$s(()=>{var re;if(m(_)&&e.message.htmlBody&&!r()&&m(i)==="email"){const le=m(_).contentDocument||((re=m(_).contentWindow)==null?void 0:re.document);le&&(le.open(),le.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <style>
              body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                font-size: 14px;
                line-height: 1.5;
                color: #e0e0e0;
                background: #1a1a1a;
                margin: 0;
                padding: 16px;
                word-break: break-word;
              }
              a { color: #60a5fa; }
              img { max-width: 100%; height: auto; }
              table { border-collapse: collapse; max-width: 100%; }
              td, th { padding: 4px 8px; }
            </style>
          </head>
          <body>${e.message.htmlBody}</body>
          </html>
        `),le.close())}});var k=sm();k.__click=function(...re){var le;(le=e.onclose)==null||le.apply(this,re)};var M=w(k);M.__click=re=>re.stopPropagation();var N=w(M),S=w(N),F=w(S),ie=T(S,2),Y=w(ie);let U;Y.__click=()=>v("json");var $=T(Y,2);{var Q=re=>{var le=Xg();let Oe;le.__click=()=>v("markdown"),ve(()=>Oe=Pt(le,1,"action-btn svelte-1b0rzpb",null,Oe,{active:m(i)==="markdown"})),K(re,le)};we($,re=>{e.message.body&&re(Q)})}var H=T($,2);H.__click=function(...re){var le;(le=e.onclose)==null||le.apply(this,re)};var pe=T(N,2);{var Ne=re=>{var le=Qg(),Oe=it(le),J=T(w(Oe),2);J.__click=b;var te=T(Oe,2),oe=w(te),X=w(oe);ve(()=>se(X,m(c))),K(re,le)},ye=re=>{var le=$g(),Oe=it(le),J=w(Oe),te=w(J);let oe;te.__click=()=>q(d,"raw");var X=T(te,2);let ne;X.__click=()=>q(d,"preview");var be=T(J,2);be.__click=p;var Ae=T(Oe,2),W=w(Ae);{var ee=ge=>{var fe=Zg(),ae=w(fe);ve(()=>se(ae,m(o))),K(ge,fe)},ke=ge=>{var fe=Jg(),ae=w(fe);Fd(ae,()=>x(m(o))),K(ge,fe)};we(W,ge=>{m(d)==="raw"?ge(ee):ge(ke,!1)})}ve(()=>{oe=Pt(te,1,"md-tab svelte-1b0rzpb",null,oe,{active:m(d)==="raw"}),ne=Pt(X,1,"md-tab svelte-1b0rzpb",null,ne,{active:m(d)==="preview"})}),K(re,le)},he=re=>{var le=am(),Oe=it(le),J=w(Oe),te=T(w(J),2),oe=w(te),X=T(J,2),ne=T(w(X),2),be=w(ne),Ae=T(X,2),W=T(w(Ae),2),ee=w(W),ke=T(Oe,2),ge=w(ke);{var fe=_e=>{var ut=em();K(_e,ut)},ae=_e=>{var ut=tm();lo(ut,Ke=>q(_,Ke),()=>m(_)),K(_e,ut)},De=_e=>{var ut=nm(),Ke=w(ut);ve(()=>se(Ke,e.message.body)),K(_e,ut)},ze=_e=>{var ut=rm();K(_e,ut)};we(ge,_e=>{r()?_e(fe):e.message.htmlBody?_e(ae,1):e.message.body?_e(De,2):_e(ze,!1)})}ve(_e=>{se(oe,e.message.from),se(be,e.message.to),se(ee,_e)},[()=>qo(e.message.date)]),K(re,le)};we(pe,re=>{m(i)==="json"?re(Ne):m(i)==="markdown"?re(ye,1):re(he,!1)})}ve(()=>{se(F,e.message.subject),U=Pt(Y,1,"action-btn svelte-1b0rzpb",null,U,{active:m(i)==="json"})}),K(t,k),pt()}Lt(["click"]);var om=G('<div class="load-more svelte-6ts5xm"><button class="btn svelte-6ts5xm"> </button></div>'),lm=G('<div class="list-header svelte-6ts5xm"><span class="list-count svelte-6ts5xm"> </span></div> <!> <!>',1),um=G('<div class="loading-state svelte-6ts5xm"><span class="spinner svelte-6ts5xm"></span> <span>Loading messages...</span></div>'),cm=G("<p> </p>"),fm=G('<p>No emails in local storage. Click "Sync New" to download.</p>'),dm=G('<div class="empty-state svelte-6ts5xm"><!></div>'),pm=G('<div class="empty-state svelte-6ts5xm"><p>Sync your emails to browse them locally.</p></div>'),hm=G('<div class="main-content svelte-6ts5xm"><!> <!> <!> <div class="toolbar svelte-6ts5xm"><input type="text" class="search-input svelte-6ts5xm" placeholder="Search stored emails (subject, sender, snippet)..."/> <button class="btn primary svelte-6ts5xm"> </button></div> <!></div> <!>',1);function vm(t,e){dt(e,!0),Nt(()=>fn("DashboardView"));let r=Ie(e,"error",3,null),a=Ie(e,"profile",3,null),i=Ie(e,"loadingProfile",3,!1),o=Ie(e,"emailMessages",19,()=>[]),c=Ie(e,"totalLocalMessages",3,0),d=Ie(e,"hasMoreLocal",3,!1),v=Ie(e,"loadingMessages",3,!1),p=Ie(e,"selectedMessage",3,null),b=Ie(e,"syncStatus",3,null),x=Ie(e,"syncProgress",3,null),_=Ie(e,"isSyncing",3,!1),k=Ie(e,"searchQuery",15);var M=hm(),N=it(M),S=w(N);{var F=J=>{Dc(J,{get error(){return r()},get ondismiss(){return e.ondismisserror},get onsignout(){return e.onsignout}})};we(S,J=>{r()&&J(F)})}var ie=T(S,2);hv(ie,{get profile(){return a()},get loadingProfile(){return i()},get onsignout(){return e.onsignout}});var Y=T(ie,2);Av(Y,{get syncStatus(){return b()},get syncProgress(){return x()},get isSyncing(){return _()},get onsync(){return e.onsync},get onsyncmore(){return e.onsyncmore},get onclear(){return e.oncleardata}});var U=T(Y,2),$=w(U);$.__keydown=J=>J.key==="Enter"&&e.onsearch();var Q=T($,2);Q.__click=function(...J){var te;(te=e.onsearch)==null||te.apply(this,J)};var H=w(Q),pe=T(U,2);{var Ne=J=>{var te=lm(),oe=it(te),X=w(oe),ne=w(X),be=T(oe,2);Rv(be,{get messages(){return o()},get onselect(){return e.onviewmessage}});var Ae=T(be,2);{var W=ee=>{var ke=om(),ge=w(ke);ge.__click=function(...ae){var De;(De=e.onloadmore)==null||De.apply(this,ae)};var fe=w(ge);ve(()=>{ge.disabled=v(),se(fe,v()?"Loading...":"Load More")}),K(ee,ke)};we(Ae,ee=>{d()&&ee(W)})}ve(ee=>se(ne,`Showing ${o().length??""} of ${ee??""}
        ${k()?" matching":""} emails`),[()=>c().toLocaleString()]),K(J,te)},ye=J=>{var te=um();K(J,te)},he=J=>{var te=dm(),oe=w(te);{var X=be=>{var Ae=cm(),W=w(Ae);ve(()=>se(W,`No emails match "${k()??""}".`)),K(be,Ae)},ne=be=>{var Ae=fm();K(be,Ae)};we(oe,be=>{k()?be(X):be(ne,!1)})}K(J,te)},re=J=>{var te=pm();K(J,te)};we(pe,J=>{var te;o().length>0?J(Ne):v()?J(ye,1):(te=b())!=null&&te.synced?J(he,2):J(re,!1)})}var le=T(N,2);{var Oe=J=>{im(J,{get message(){return p()},loading:!1,get onclose(){return e.onclosedetail}})};we(le,J=>{p()&&J(Oe)})}ve(()=>{Q.disabled=v(),se(H,v()?"Searching...":"Search")}),No($,k),K(t,M),pt()}Lt(["keydown","click"]);var gm=G('<div class="dashboard svelte-1q5o2lv"><!></div>');function mm(t,e){dt(e,!0);function r(ae){ae.key==="Escape"&&m(v)&&oe()}Nt(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)));let a=Pe(Rt(localStorage.getItem("googleClientId")||"")),i=Pe(Rt(localStorage.getItem("googleClientId")||"")),o=Pe(!1),c=Pe(null),d=Pe(null),v=Pe(null),p=Pe(""),b=Pe(Rt([])),x=Pe(0),_=Pe(0),k=Pe(!1),M=Pe(!1),N=Pe(!1),S=Pe(null),F=Pe(null),ie=Pe(null),Y=Pe(!1);const U=50;$s(()=>{m(c)&&(X(),le())});let $=ht(()=>!m(a)),Q=ht(()=>!!m(c)),H=ht(()=>m(b).length<m(x));$s(()=>{m(a)&&!m(o)&&Hl(m(a)).then(()=>{q(o,!0)}).catch(ae=>{q(S,`Auth init failed: ${ae.message}`)})});function pe(){const ae=m(i).trim();ae&&(localStorage.setItem("googleClientId",ae),q(a,ae,!0),q(S,null))}function Ne(){localStorage.removeItem("googleClientId"),q(a,""),q(i,""),q(o,!1),q(c,null),q(d,null),q(b,[],!0),q(x,0)}async function ye(){q(S,null),q(M,!0);try{m(o)||(await Hl(m(a)),q(o,!0));const ae=await Kh();q(c,ae.access_token,!0),await re()}catch(ae){q(S,ae.message,!0)}finally{q(M,!1)}}async function he(){if(m(c))try{await Uh(m(c))}catch{}q(c,null),q(d,null),q(b,[],!0),q(x,0),q(v,null),q(S,null)}async function re(){q(N,!0);try{const ae=await pc(m(c));if(!m(c))return;q(d,ae,!0)}catch(ae){if(!m(c))return;q(S,`Profile fetch failed: ${ae.message}`)}finally{q(N,!1)}}async function le(ae=!1){q(k,!0);try{const De=ae?m(_):0,ze=await vp({query:m(p)||void 0,limit:U,offset:De});ae?q(b,[...m(b),...ze.items],!0):q(b,ze.items,!0),q(x,ze.total,!0),q(_,m(b).length,!0)}catch(De){q(S,`Failed to load messages: ${De.message}`)}finally{q(k,!1)}}function Oe(){q(_,0),le(!1)}function J(){le(!0)}function te(ae){q(v,ae,!0)}function oe(){q(v,null)}async function X(){try{q(F,await Wh(),!0)}catch{}}async function ne(ae){if(m(Y)||!m(c))return;q(S,null),q(Y,!0),q(ie,null);const De=new AbortController;try{await Gh(m(c),{limit:ae,onProgress:ze=>{q(ie,{...ze},!0)},signal:De.signal}),await X(),await le(!1)}catch(ze){if(ze.name!=="AbortError"){if(!m(c))return;q(S,`Sync failed: ${ze.message}`)}}finally{q(Y,!1)}}async function be(ae){if(m(Y)||!m(c))return;q(S,null),q(Y,!0),q(ie,null);const De=new AbortController;try{await Hh(m(c),{limit:ae,onProgress:ze=>{q(ie,{...ze},!0)},signal:De.signal}),await X(),await le(!1)}catch(ze){if(ze.name!=="AbortError"){if(!m(c))return;q(S,`Sync more failed: ${ze.message}`)}}finally{q(Y,!1)}}async function Ae(){try{await Yh(),await X(),q(b,[],!0),q(x,0),q(_,0)}catch(ae){q(S,`Failed to clear data: ${ae.message}`)}}var W=gm(),ee=w(W);{var ke=ae=>{$h(ae,{onsave:pe,get clientIdInput(){return m(i)},set clientIdInput(De){q(i,De,!0)}})},ge=ae=>{cv(ae,{get clientId(){return m(a)},get error(){return m(S)},get loadingAuth(){return m(M)},onsignin:ye,onclear:Ne,onsignout:he})},fe=ae=>{vm(ae,{get error(){return m(S)},get profile(){return m(d)},get loadingProfile(){return m(N)},get emailMessages(){return m(b)},get totalLocalMessages(){return m(x)},get hasMoreLocal(){return m(H)},get loadingMessages(){return m(k)},get selectedMessage(){return m(v)},get syncStatus(){return m(F)},get syncProgress(){return m(ie)},get isSyncing(){return m(Y)},onsignout:he,onsearch:Oe,onloadmore:J,onviewmessage:te,onclosedetail:oe,ondismisserror:()=>q(S,null),onsync:ne,onsyncmore:be,oncleardata:Ae,get searchQuery(){return m(p)},set searchQuery(De){q(p,De,!0)}})};we(ee,ae=>{m($)?ae(ke):m(Q)?ae(fe,!1):ae(ge,1)})}K(t,W),pt()}var ym=G('<span class="spinner svelte-ois7em"></span>'),bm=Mo('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ois7em"><circle cx="11" cy="11" r="8" class="svelte-ois7em"></circle><path d="m21 21-4.35-4.35" class="svelte-ois7em"></path></svg>'),_m=G('<div class="scan-stats svelte-ois7em"><span class="stat svelte-ois7em"> </span> <span class="stat-sep svelte-ois7em">Â·</span> <span class="stat svelte-ois7em"> </span> <span class="stat-sep svelte-ois7em">Â·</span> <span class="stat svelte-ois7em"> </span></div>'),wm=G('<option class="svelte-ois7em"> </option>'),km=G('<p class="scan-hint svelte-ois7em">Load a model on the Chat page first, then come back to scan.</p>'),xm=G('<div class="scan-progress svelte-ois7em"><div class="progress-bar svelte-ois7em"><div></div></div> <span class="progress-text svelte-ois7em"> </span></div>'),Sm=G('<div class="scan-card svelte-ois7em"><div class="scan-header svelte-ois7em"><div class="scan-icon svelte-ois7em"><!></div> <div class="scan-info svelte-ois7em"><div class="scan-title-row svelte-ois7em"><span class="scan-title svelte-ois7em">Email Triage</span> <button class="inspect-btn svelte-ois7em" title="View system prompt and LLM config"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ois7em"><circle cx="12" cy="12" r="10" class="svelte-ois7em"></circle><path d="M12 16v-4" class="svelte-ois7em"></path><path d="M12 8h.01" class="svelte-ois7em"></path></svg> Prompt</button></div> <span class="scan-status svelte-ois7em"><span class="status-dot svelte-ois7em"></span> </span></div></div> <!> <div class="scan-controls svelte-ois7em"><div class="control-group svelte-ois7em"><label class="control-label svelte-ois7em" for="scan-count">Emails:</label> <select id="scan-count" class="control-select svelte-ois7em"></select></div> <div class="btn-group svelte-ois7em"><button class="btn scan-btn primary svelte-ois7em"> </button> <button class="btn scan-btn svelte-ois7em" title="Rescan all (including already classified)">Rescan All</button></div></div> <!> <!></div>');function Tm(t,e){dt(e,!0);let r=Ie(e,"engineStatus",3,"idle"),a=Ie(e,"modelName",3,""),i=Ie(e,"isScanning",3,!1),o=Ie(e,"scanProgress",3,null),c=Ie(e,"scanCount",15,20),d=Ie(e,"stats",3,null);const v=[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"},{value:500,label:"500"}];function p(){return r()==="ready"?`${a()} ready`:r()==="loading"?"Loading model...":r()==="generating"?"Model busy...":"No model loaded"}function b(){return r()==="ready"?"#34d399":r()==="loading"?"#fbbf24":"#666"}function x(){return r()==="ready"&&!i()}var _=Sm(),k=w(_),M=w(k),N=w(M);{var S=W=>{var ee=ym();K(W,ee)},F=W=>{var ee=bm();K(W,ee)};we(N,W=>{i()?W(S):W(F,!1)})}var ie=T(M,2),Y=w(ie),U=T(w(Y),2);U.__click=function(...W){var ee;(ee=e.oninspect)==null||ee.apply(this,W)};var $=T(Y,2),Q=w($);let H;var pe=T(Q),Ne=T(k,2);{var ye=W=>{var ee=_m(),ke=w(ee),ge=w(ke),fe=T(ke,4),ae=w(fe),De=T(fe,4),ze=w(De);ve(()=>{se(ge,`${d().totalEmails??""} emails in storage`),se(ae,`${d().classified??""} classified`),se(ze,`${d().unclassified??""} new`)}),K(W,ee)};we(Ne,W=>{d()&&W(ye)})}var he=T(Ne,2),re=w(he),le=T(w(re),2);Gt(le,21,()=>v,hr,(W,ee)=>{var ke=wm(),ge=w(ke),fe={};ve(()=>{se(ge,m(ee).label),fe!==(fe=m(ee).value)&&(ke.value=(ke.__value=m(ee).value)??"")}),K(W,ke)});var Oe=T(re,2),J=w(Oe);J.__click=function(...W){var ee;(ee=e.onscan)==null||ee.apply(this,W)};var te=w(J),oe=T(J,2);oe.__click=function(...W){var ee;(ee=e.onrescan)==null||ee.apply(this,W)};var X=T(he,2);{var ne=W=>{var ee=km();K(W,ee)};we(X,W=>{r()!=="ready"&&r()!=="loading"&&W(ne)})}var be=T(X,2);{var Ae=W=>{var ee=xm(),ke=w(ee),ge=w(ke);let fe,ae;var De=T(ke,2),ze=w(De);ve(()=>{fe=Pt(ge,1,"progress-fill svelte-ois7em",null,fe,{indeterminate:!o().total}),ae=$t(ge,"",ae,{width:`${o().total?o().current/o().total*100:0}%`}),se(ze,o().message||"Scanning...")}),K(W,ee)};we(be,W=>{i()&&o()&&W(Ae)})}ve((W,ee,ke,ge)=>{H=$t(Q,"",H,W),se(pe,` ${ee??""}`),le.disabled=i(),J.disabled=ke,se(te,i()?"Scanning...":"Scan New"),oe.disabled=ge},[()=>({background:b()}),p,()=>!x(),()=>!x()]),Lo(le,c),K(t,_),pt()}Lt(["click"]);var Em=G('<span class="row-date svelte-1czytqk"> </span>'),Am=G('<span class="tag svelte-1czytqk"> </span>'),Cm=G('<span class="row-tags svelte-1czytqk"></span>'),Im=G('<span class="row-reason svelte-1czytqk"> </span>'),Rm=G('<button class="icon-btn done-btn svelte-1czytqk" title="Mark handled"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg></button> <button class="icon-btn dismiss-btn svelte-1czytqk" title="Dismiss"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>',1),Pm=G('<span class="status-label svelte-1czytqk"> </span>'),Om=G('<button class="icon-btn remove-btn svelte-1czytqk" title="Remove classification"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="m19 6-.867 12.142A2 2 0 0 1 16.138 20H7.862a2 2 0 0 1-1.995-1.858L5 6"></path></svg></button>'),Dm=G('<p class="summary-reason svelte-1czytqk"> </p>'),Mm=G('<div class="summary-panel svelte-1czytqk"><p class="summary-text svelte-1czytqk"> </p> <!></div>'),Lm=G('<div><button class="row-left svelte-1czytqk"><span class="row-subject svelte-1czytqk"> </span> <span class="row-meta svelte-1czytqk"><span class="row-from svelte-1czytqk"> </span> <!></span> <!> <!></button> <div class="row-actions svelte-1czytqk"><!> <!></div></div> <!>',1);function uu(t,e){dt(e,!0);let r=Ie(e,"actionColor",3,"#666"),a=Ie(e,"dimmed",3,!1);function i(J){if(!J)return"";try{return new Date(J).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}}let o=ht(()=>e.item.status==="pending"),c=Pe(!1);var d=Lm(),v=it(d);let p;var b=w(v);b.__click=()=>q(c,!m(c));let x;var _=w(b),k=w(_),M=T(_,2),N=w(M),S=w(N),F=T(N,2);{var ie=J=>{var te=Em(),oe=w(te);ve(X=>se(oe,X),[()=>i(e.item.date)]),K(J,te)};we(F,J=>{e.item.date&&J(ie)})}var Y=T(M,2);{var U=J=>{var te=Cm();Gt(te,21,()=>e.item.tags,hr,(oe,X)=>{var ne=Am();let be;var Ae=w(ne);ve(W=>{be=$t(ne,"",be,W),se(Ae,m(X))},[()=>({background:Ac(m(X))})]),K(oe,ne)}),K(J,te)};we(Y,J=>{e.item.tags&&e.item.tags.length>0&&J(U)})}var $=T(Y,2);{var Q=J=>{var te=Im(),oe=w(te);ve(()=>se(oe,e.item.reason)),K(J,te)};we($,J=>{e.item.reason&&!m(c)&&J(Q)})}var H=T(b,2),pe=w(H);{var Ne=J=>{var te=Rm(),oe=it(te);oe.__click=()=>e.onmarkacted(e.item.emailId);var X=T(oe,2);X.__click=()=>e.ondismiss(e.item.emailId),K(J,te)},ye=J=>{var te=Pm(),oe=w(te);ve(()=>se(oe,e.item.status)),K(J,te)};we(pe,J=>{m(o)?J(Ne):J(ye,!1)})}var he=T(pe,2);{var re=J=>{var te=Om();te.__click=()=>e.onremove(e.item.emailId),K(J,te)};we(he,J=>{e.onremove&&J(re)})}var le=T(v,2);{var Oe=J=>{var te=Mm();let oe;var X=w(te),ne=w(X),be=T(X,2);{var Ae=W=>{var ee=Dm(),ke=w(ee);ve(()=>se(ke,e.item.reason)),K(W,ee)};we(be,W=>{e.item.reason&&W(Ae)})}ve(()=>{oe=$t(te,"",oe,{"border-left-color":r()}),se(ne,e.item.summary)}),K(J,te)};we(le,J=>{m(c)&&e.item.summary&&J(Oe)})}ve(()=>{p=Pt(v,1,"email-row svelte-1czytqk",null,p,{dimmed:a()}),x=$t(b,"",x,{"border-left-color":r()}),se(k,e.item.subject),se(S,e.item.from)}),K(t,d),pt()}Lt(["click"]);var Nm=G('<span class="group-acted svelte-tl1unp"> </span>'),jm=G('<p class="group-empty svelte-tl1unp">No emails in this category.</p>'),qm=G('<details class="handled-section svelte-tl1unp"><summary class="handled-summary svelte-tl1unp"> </summary> <!></details>'),Bm=G('<button class="group-action-btn svelte-tl1unp">Clear group</button>'),zm=G('<span class="confirm-row svelte-tl1unp"> <button class="group-action-btn svelte-tl1unp">Cancel</button> <button class="group-action-btn danger svelte-tl1unp">Delete</button></span>'),Fm=G('<div class="group-body svelte-tl1unp"><!> <!> <!> <div class="group-footer svelte-tl1unp"><!></div></div>'),Km=G('<div class="action-group svelte-tl1unp"><button class="group-header svelte-tl1unp"><span class="group-badge svelte-tl1unp"> </span> <span class="group-count svelte-tl1unp"> </span> <!> <span class="spacer svelte-tl1unp"></span> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div>');function Um(t,e){dt(e,!0);let r=Ie(e,"color",3,"#888");Ie(e,"count",3,0);let a=Ie(e,"items",19,()=>[]),i=Ie(e,"expanded",3,!1),o=ht(()=>a().filter(Q=>Q.status==="pending")),c=ht(()=>a().filter(Q=>Q.status!=="pending")),d=Pe(!1);function v(Q){return Q.split("_").map(H=>H.charAt(0)+H.slice(1).toLowerCase()).join(" ")}var p=Km(),b=w(p);b.__click=function(...Q){var H;(H=e.ontoggle)==null||H.apply(this,Q)};var x=w(b);let _;var k=w(x),M=T(x,2),N=w(M),S=T(M,2);{var F=Q=>{var H=Nm(),pe=w(H);ve(()=>se(pe,`${m(c).length??""} handled`)),K(Q,H)};we(S,Q=>{m(c).length>0&&Q(F)})}var ie=T(S,4);let Y;var U=T(b,2);{var $=Q=>{var H=Fm(),pe=w(H);{var Ne=oe=>{var X=jm();K(oe,X)};we(pe,oe=>{m(o).length===0&&m(c).length===0&&oe(Ne)})}var ye=T(pe,2);Gt(ye,17,()=>m(o),oe=>oe.emailId,(oe,X)=>{uu(oe,{get item(){return m(X)},get actionColor(){return r()},get onmarkacted(){return e.onmarkacted},get ondismiss(){return e.ondismiss},get onremove(){return e.onremove}})});var he=T(ye,2);{var re=oe=>{var X=qm(),ne=w(X),be=w(ne),Ae=T(ne,2);Gt(Ae,17,()=>m(c),W=>W.emailId,(W,ee)=>{uu(W,{get item(){return m(ee)},get actionColor(){return r()},get onremove(){return e.onremove},dimmed:!0})}),ve(()=>se(be,`${m(c).length??""} handled`)),K(oe,X)};we(he,oe=>{m(c).length>0&&oe(re)})}var le=T(he,2),Oe=w(le);{var J=oe=>{var X=Bm();X.__click=()=>q(d,!0),K(oe,X)},te=oe=>{var X=zm(),ne=w(X),be=T(ne);be.__click=()=>q(d,!1);var Ae=T(be,2);Ae.__click=()=>{e.oncleargroup(),q(d,!1)},ve(()=>se(ne,`Clear ${a().length??""} items? `)),K(oe,X)};we(Oe,oe=>{m(d)?oe(te,!1):oe(J)})}K(Q,H)};we(U,Q=>{i()&&Q($)})}ve(Q=>{_=$t(x,"",_,{background:r()}),se(k,Q),se(N,m(o).length),Y=Pt(ie,0,"chevron svelte-tl1unp",null,Y,{open:i()})},[()=>v(e.action)]),K(t,p),pt()}Lt(["click"]);var Gm=G(`<div class="section-desc svelte-10pcy9j">This is the system prompt sent to the LLM before each email. It instructs the model
            on how to classify emails and what JSON format to produce.</div> <pre class="code-block svelte-10pcy9j"> </pre>`,1),Hm=G(`<div class="section-desc svelte-10pcy9j">Each email is formatted into this template and sent as the user message.
            The body is truncated to 500 characters.</div> <div class="template-format svelte-10pcy9j"><div class="format-label svelte-10pcy9j">Format:</div> <pre class="code-block template svelte-10pcy9j"></pre></div> <div class="template-format svelte-10pcy9j"><div class="format-label svelte-10pcy9j">Sample:</div> <pre class="code-block sample svelte-10pcy9j"> </pre></div>`,1),Wm=G(`<div class="section-desc svelte-10pcy9j">These generation parameters control how the LLM produces its output
            for email classification.</div> <div class="config-grid svelte-10pcy9j"><div class="config-row svelte-10pcy9j"><span class="config-key svelte-10pcy9j">max_new_tokens</span> <span class="config-val svelte-10pcy9j"> </span> <span class="config-desc svelte-10pcy9j">Maximum tokens in the response (classification needs ~150)</span></div> <div class="config-row svelte-10pcy9j"><span class="config-key svelte-10pcy9j">enable_thinking</span> <span class="config-val svelte-10pcy9j"> </span> <span class="config-desc svelte-10pcy9j">Thinking mode disabled â structured JSON doesn't need reasoning</span></div> <div class="config-row svelte-10pcy9j"><span class="config-key svelte-10pcy9j">do_sample</span> <span class="config-val svelte-10pcy9j"> </span> <span class="config-desc svelte-10pcy9j">Greedy decoding â deterministic, consistent output</span></div></div> <div class="section-desc svelte-10pcy9j" style="margin-top: 1rem;">The full message array sent to the model:</div> <pre class="code-block svelte-10pcy9j"></pre>`,1),Ym=G('<div class="backdrop svelte-10pcy9j"><div class="modal svelte-10pcy9j" role="dialog" aria-label="Prompt Inspector"><div class="modal-header svelte-10pcy9j"><h2 class="svelte-10pcy9j">Prompt Inspector</h2> <button class="close-btn svelte-10pcy9j" aria-label="Close">â</button></div> <div class="tabs svelte-10pcy9j"><button>System Prompt</button> <button>Email Template</button> <button>Generation Config</button></div> <div class="modal-body svelte-10pcy9j"><!></div></div></div>');function Vm(t,e){dt(e,!0);let r=Ie(e,"open",15,!1),a=Ie(e,"sampleEmail",3,null),i=Pe("system");function o(){return a()?Ec(a()):["Subject: Your order has shipped!","From: orders@example.com","To: me","Date: Sat, Feb 15, 2026","Labels: INBOX, CATEGORY_UPDATES","","Hi! Your order #12345 has shipped via FedEx. Tracking number: 7891011..."].join(`
`)}function c(){r(!1)}function d(x){x.target===x.currentTarget&&c()}var v=la(),p=it(v);{var b=x=>{var _=Ym();_.__click=d,_.__keydown=re=>re.key==="Escape"&&c();var k=w(_),M=w(k),N=T(w(M),2);N.__click=c;var S=T(M,2),F=w(S);let ie;F.__click=()=>q(i,"system");var Y=T(F,2);let U;Y.__click=()=>q(i,"email");var $=T(Y,2);let Q;$.__click=()=>q(i,"config");var H=T(S,2),pe=w(H);{var Ne=re=>{var le=Gm(),Oe=T(it(le),2),J=w(Oe);ve(()=>se(J,kc)),K(re,le)},ye=re=>{var le=Hm(),Oe=T(it(le),2),J=T(w(Oe),2);J.textContent=`Subject: {email.subject}
From: {email.from}
To: {email.to}
Date: {formatted date}
Labels: {email.labels}

{email.body, truncated to 500 chars}`;var te=T(Oe,2),oe=T(w(te),2),X=w(oe);ve(ne=>se(X,ne),[o]),K(re,le)},he=re=>{var le=Wm(),Oe=T(it(le),2),J=w(Oe),te=T(w(J),2),oe=w(te),X=T(J,2),ne=T(w(X),2),be=w(ne),Ae=T(X,2),W=T(w(Ae),2),ee=w(W),ke=T(Oe,4);ke.textContent=`[
  { role: "system", content: SYSTEM_PROMPT },
  { role: "user",   content: formatEmailPrompt(email) }
]`,ve(()=>{se(oe,kp.maxTokens),se(be,"false"),se(ee,"false")}),K(re,le)};we(pe,re=>{m(i)==="system"?re(Ne):m(i)==="email"?re(ye,1):m(i)==="config"&&re(he,2)})}ve(()=>{ie=Pt(F,1,"tab svelte-10pcy9j",null,ie,{active:m(i)==="system"}),U=Pt(Y,1,"tab svelte-10pcy9j",null,U,{active:m(i)==="email"}),Q=Pt($,1,"tab svelte-10pcy9j",null,Q,{active:m(i)==="config"})}),K(x,_)};we(p,x=>{r()&&x(b)})}K(t,v),pt()}Lt(["click","keydown"]);var Xm=G('<div class="error-card svelte-12gkq0i"><span> </span> <button class="error-dismiss svelte-12gkq0i">â</button></div>'),Qm=G('<button class="btn-link danger svelte-12gkq0i">Clear all</button>'),Zm=G('<span class="clear-confirm svelte-12gkq0i">Clear all classifications? <button class="btn-link svelte-12gkq0i">Cancel</button> <button class="btn-link danger svelte-12gkq0i">Delete</button></span>'),Jm=G('<div class="groups-list svelte-12gkq0i"></div> <div class="actions-footer svelte-12gkq0i"><span class="footer-stat svelte-12gkq0i"> </span> <!></div>',1),$m=G('<div class="empty-state svelte-12gkq0i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path><rect x="9" y="3" width="6" height="4" rx="1"></rect><path d="m9 14 2 2 4-4"></path></svg> <h3 class="svelte-12gkq0i">No emails classified yet</h3> <p class="svelte-12gkq0i">Click <strong>Scan New</strong> to classify your recent emails. The LLM will determine action types, tags, and summaries automatically.</p></div>'),ey=G('<div class="actions-container svelte-12gkq0i"><!> <!> <!> <!></div>');function ty(t,e){dt(e,!0);let r=Ie(e,"groups",19,()=>({})),a=Ie(e,"groupOrder",19,()=>[]),i=Ie(e,"counts",19,()=>({})),o=Ie(e,"stats",3,null),c=Ie(e,"expandedGroup",3,null),d=Ie(e,"isScanning",3,!1),v=Ie(e,"scanProgress",3,null),p=Ie(e,"scanCount",15,20),b=Ie(e,"error",3,null),x=Pe(!1),_=Pe(!1),k=ht(()=>{for(const Q of a()){const H=r()[Q];if((H==null?void 0:H.length)>0)return H[0]}return null});var M=ey(),N=w(M);Tm(N,{get engineStatus(){return e.engineStatus},get modelName(){return e.modelName},get isScanning(){return d()},get scanProgress(){return v()},get stats(){return o()},get onscan(){return e.onscan},get onrescan(){return e.onrescan},oninspect:()=>q(_,!0),get scanCount(){return p()},set scanCount(Q){p(Q)}});var S=T(N,2);Vm(S,{get sampleEmail(){return m(k)},get open(){return m(_)},set open(Q){q(_,Q,!0)}});var F=T(S,2);{var ie=Q=>{var H=Xm(),pe=w(H),Ne=w(pe),ye=T(pe,2);ye.__click=function(...he){var re;(re=e.ondismisserror)==null||re.apply(this,he)},ve(()=>se(Ne,b())),K(Q,H)};we(F,Q=>{b()&&Q(ie)})}var Y=T(F,2);{var U=Q=>{var H=Jm(),pe=it(H);Gt(pe,20,a,J=>J,(J,te)=>{{let oe=ht(()=>zo(te)),X=ht(()=>{var Ae;return((Ae=r()[te])==null?void 0:Ae.length)||0}),ne=ht(()=>r()[te]||[]),be=ht(()=>c()===te);Um(J,{get action(){return te},get color(){return m(oe)},get count(){return m(X)},get items(){return m(ne)},get expanded(){return m(be)},ontoggle:()=>e.ontogglegroup(te),get onmarkacted(){return e.onmarkacted},get ondismiss(){return e.ondismiss},get onremove(){return e.onremove},oncleargroup:()=>e.oncleargroup(te)})}});var Ne=T(pe,2),ye=w(Ne),he=w(ye),re=T(ye,2);{var le=J=>{var te=Qm();te.__click=()=>q(x,!0),K(J,te)},Oe=J=>{var te=Zm(),oe=T(w(te));oe.__click=()=>q(x,!1);var X=T(oe,2);X.__click=()=>{e.onclear(),q(x,!1)},K(J,te)};we(re,J=>{m(x)?J(Oe,!1):J(le)})}ve(()=>se(he,`${i().total??""} emails classified into ${a().length??""} groups`)),K(Q,H)},$=Q=>{var H=$m();K(Q,H)};we(Y,Q=>{i().total>0?Q(U):d()||Q($,1)})}K(t,M),pt()}Lt(["click"]);var ny=G('<div class="actions-page svelte-3tch4q"><!></div>');function ry(t,e){dt(e,!0);const r=uc();let a=Pe(Rt(r.status)),i=Pe(""),o=Pe(Rt({})),c=Pe(Rt([])),d=Pe(Rt({total:0})),v=Pe(null),p=Pe(null),b=Pe(!1),x=Pe(null),_=Pe(20),k=Pe(null);Nt(()=>{const ye=r.onMessage(he=>{if(he.status==="ready"){q(a,"ready");const re=ls.find(le=>le.id===r.modelId);q(i,(re==null?void 0:re.name)||r.modelId||"",!0)}he.status==="loading"&&q(a,"loading")});if(q(a,r.status,!0),r.modelId){const he=ls.find(re=>re.id===r.modelId);q(i,(he==null?void 0:he.name)||r.modelId||"",!0)}return M(),()=>ye()});async function M(){try{const ye=await xp();q(o,ye.groups,!0),q(c,ye.order,!0),q(d,await Sp(),!0),q(v,await po(),!0)}catch(ye){q(k,`Failed to load data: ${ye.message}`)}}async function N(){await F(!1)}async function S(){await F(!0)}async function F(ye){if(!(m(b)||!r.isReady)){q(k,null),q(b,!0),q(x,null);try{await xc(r,{count:m(_),force:ye,onProgress:he=>{q(x,{...he},!0)}}),await M()}catch(he){q(k,`Scan failed: ${he.message}`)}finally{q(b,!1)}}}async function ie(ye){await ti(ye,"acted"),await M()}async function Y(ye){await ti(ye,"dismissed"),await M()}async function U(ye){await Tc(ye),await M()}async function $(ye){await Sc(ye),await M()}async function Q(){await Tp(),await M()}function H(ye){q(p,m(p)===ye?null:ye,!0)}var pe=ny(),Ne=w(pe);ty(Ne,{get engineStatus(){return m(a)},get modelName(){return m(i)},get groups(){return m(o)},get groupOrder(){return m(c)},get counts(){return m(d)},get stats(){return m(v)},get expandedGroup(){return m(p)},get isScanning(){return m(b)},get scanProgress(){return m(x)},get error(){return m(k)},onscan:N,onrescan:S,ontogglegroup:H,onmarkacted:ie,ondismiss:Y,onremove:U,oncleargroup:$,onclear:Q,ondismisserror:()=>q(k,null),get scanCount(){return m(_)},set scanCount(ye){q(_,ye,!0)}}),K(t,pe),pt()}var ay=G('<div class="app-shell svelte-1n46o8q"><nav class="top-nav svelte-1n46o8q"><a class="nav-brand svelte-1n46o8q" href="#chat">me-ai</a> <div class="nav-links svelte-1n46o8q"><a href="#chat">Chat</a> <a href="#actions">Actions</a> <a href="#dashboard">Dashboard</a></div></nav> <main class="svelte-1n46o8q"><div class="page-view svelte-1n46o8q"><!></div> <div class="page-view svelte-1n46o8q"><!></div> <div class="page-view svelte-1n46o8q"><!></div></main></div>');function sy(t,e){dt(e,!0);function r(){const H=location.hash;return H==="#dashboard"?"dashboard":H==="#actions"?"actions":"chat"}let a=Pe(Rt(r()));Nt(()=>{function H(){q(a,r(),!0)}return window.addEventListener("hashchange",H),()=>window.removeEventListener("hashchange",H)});var i=ay(),o=w(i),c=T(w(o),2),d=w(c);let v;var p=T(d,2);let b;var x=T(p,2);let _;var k=T(o,2),M=w(k);let N;var S=w(M);Bh(S,{});var F=T(M,2);let ie;var Y=w(F);ry(Y,{});var U=T(F,2);let $;var Q=w(U);mm(Q,{}),ve(()=>{v=Pt(d,1,"svelte-1n46o8q",null,v,{active:m(a)==="chat"}),b=Pt(p,1,"svelte-1n46o8q",null,b,{active:m(a)==="actions"}),_=Pt(x,1,"svelte-1n46o8q",null,_,{active:m(a)==="dashboard"}),N=$t(M,"",N,{display:m(a)==="chat"?"flex":"none"}),ie=$t(F,"",ie,{display:m(a)==="actions"?"flex":"none"}),$=$t(U,"",$,{display:m(a)==="dashboard"?"flex":"none"})}),K(t,i),pt()}Md(sy,{target:document.getElementById("app")});
