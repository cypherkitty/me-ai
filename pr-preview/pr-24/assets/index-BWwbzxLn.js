var rf=Object.defineProperty;var ml=t=>{throw TypeError(t)};var af=(t,e,r)=>e in t?rf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ke=(t,e,r)=>af(t,typeof e!="symbol"?e+"":e,r),qi=(t,e,r)=>e.has(t)||ml("Cannot "+r);var G=(t,e,r)=>(qi(t,e,"read from private field"),r?r.call(t):e.get(t)),Ue=(t,e,r)=>e.has(t)?ml("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ze=(t,e,r,s)=>(qi(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),Pt=(t,e,r)=>(qi(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();const Zi=!1;var bo=Array.isArray,sf=Array.prototype.indexOf,xa=Array.prototype.includes,ii=Array.from,of=Object.defineProperty,va=Object.getOwnPropertyDescriptor,lf=Object.getOwnPropertyDescriptors,uf=Object.prototype,cf=Array.prototype,ou=Object.getPrototypeOf,yl=Object.isExtensible;const ff=()=>{};function df(t){for(var e=0;e<t.length;e++)t[e]()}function lu(){var t,e,r=new Promise((s,i)=>{t=s,e=i});return{promise:r,resolve:t,reject:e}}const Tt=2,ss=4,oi=8,uu=1<<24,rr=16,Rn=32,na=64,cu=128,pn=512,wt=1024,At=2048,In=4096,en=8192,er=16384,ps=32768,Sa=65536,bl=1<<17,fu=1<<18,Ia=1<<19,pf=1<<20,Jn=1<<25,Qr=65536,Qi=1<<21,_o=1<<22,_r=1<<23,Vr=Symbol("$state"),hf=Symbol("legacy props"),vf=Symbol(""),Br=new class extends Error{constructor(){super(...arguments);Ke(this,"name","StaleReactionError");Ke(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function gf(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function mf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yf(t,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function bf(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _f(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function wf(t){throw new Error("https://svelte.dev/e/effect_orphan")}function kf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xf(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Sf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ef(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Tf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Af(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Cf=1,If=2,du=4,Rf=8,Pf=16,Of=1,Df=4,Mf=8,Lf=16,pu=1,Nf=2,xt=Symbol(),hu="http://www.w3.org/1999/xhtml";function qf(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function jf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function vu(t){return t===this.v}function Bf(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function gu(t){return!Bf(t,this.v)}let zf=!1,tn=null;function Ea(t){tn=t}function ut(t,e=!1,r){tn={p:tn,i:!1,c:null,e:null,s:t,x:null,l:null}}function ct(t){var e=tn,r=e.e;if(r!==null){e.e=null;for(var s of r)ju(s)}return e.i=!0,tn=e.p,{}}function mu(){return!0}let zr=[];function yu(){var t=zr;zr=[],df(t)}function wr(t){if(zr.length===0&&!ts){var e=zr;queueMicrotask(()=>{e===zr&&yu()})}zr.push(t)}function Ff(){for(;zr.length>0;)yu()}function bu(t){var e=et;if(e===null)return Ge.f|=_r,t;if((e.f&ps)===0&&(e.f&ss)===0)throw t;Ta(t,e)}function Ta(t,e){for(;e!==null;){if((e.f&cu)!==0){if((e.f&ps)===0)throw t;try{e.b.error(t);return}catch(r){t=r}}e=e.parent}throw t}const Kf=-7169;function ht(t,e){t.f=t.f&Kf|e}function wo(t){(t.f&pn)!==0||t.deps===null?ht(t,wt):ht(t,In)}function _u(t){if(t!==null)for(const e of t)(e.f&Tt)===0||(e.f&Qr)===0||(e.f^=Qr,_u(e.deps))}function wu(t,e,r){(t.f&At)!==0?e.add(t):(t.f&In)!==0&&r.add(t),_u(t.deps),ht(t,wt)}const qs=new Set;let je=null,$s=null,St=null,Ut=[],li=null,$i=!1,ts=!1;var ga,ma,Kr,ya,us,cs,Ur,Xn,ba,Kn,Ji,eo,ku;const Uo=class Uo{constructor(){Ue(this,Kn);Ke(this,"committed",!1);Ke(this,"current",new Map);Ke(this,"previous",new Map);Ue(this,ga,new Set);Ue(this,ma,new Set);Ue(this,Kr,0);Ue(this,ya,0);Ue(this,us,null);Ue(this,cs,new Set);Ue(this,Ur,new Set);Ue(this,Xn,new Map);Ke(this,"is_fork",!1);Ue(this,ba,!1)}is_deferred(){return this.is_fork||G(this,ya)>0}skip_effect(e){G(this,Xn).has(e)||G(this,Xn).set(e,{d:[],m:[]})}unskip_effect(e){var r=G(this,Xn).get(e);if(r){G(this,Xn).delete(e);for(var s of r.d)ht(s,At),An(s);for(s of r.m)ht(s,In),An(s)}}process(e){var i;Ut=[],this.apply();var r=[],s=[];for(const l of e)Pt(this,Kn,Ji).call(this,l,r,s);if(this.is_deferred()){Pt(this,Kn,eo).call(this,s),Pt(this,Kn,eo).call(this,r);for(const[l,c]of G(this,Xn))Tu(l,c)}else{for(const l of G(this,ga))l();G(this,ga).clear(),G(this,Kr)===0&&Pt(this,Kn,ku).call(this),$s=this,je=null,_l(s),_l(r),$s=null,(i=G(this,us))==null||i.resolve()}St=null}capture(e,r){r!==xt&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&_r)===0&&(this.current.set(e,e.v),St==null||St.set(e,e.v))}activate(){je=this,this.apply()}deactivate(){je===this&&(je=null,St=null)}flush(){if(this.activate(),Ut.length>0){if(xu(),je!==null&&je!==this)return}else G(this,Kr)===0&&this.process([]);this.deactivate()}discard(){for(const e of G(this,ma))e(this);G(this,ma).clear()}increment(e){ze(this,Kr,G(this,Kr)+1),e&&ze(this,ya,G(this,ya)+1)}decrement(e){ze(this,Kr,G(this,Kr)-1),e&&ze(this,ya,G(this,ya)-1),!G(this,ba)&&(ze(this,ba,!0),wr(()=>{ze(this,ba,!1),this.is_deferred()?Ut.length>0&&this.flush():this.revive()}))}revive(){for(const e of G(this,cs))G(this,Ur).delete(e),ht(e,At),An(e);for(const e of G(this,Ur))ht(e,In),An(e);this.flush()}oncommit(e){G(this,ga).add(e)}ondiscard(e){G(this,ma).add(e)}settled(){return(G(this,us)??ze(this,us,lu())).promise}static ensure(){if(je===null){const e=je=new Uo;qs.add(je),ts||wr(()=>{je===e&&e.flush()})}return je}apply(){}};ga=new WeakMap,ma=new WeakMap,Kr=new WeakMap,ya=new WeakMap,us=new WeakMap,cs=new WeakMap,Ur=new WeakMap,Xn=new WeakMap,ba=new WeakMap,Kn=new WeakSet,Ji=function(e,r,s){e.f^=wt;for(var i=e.first,l=null;i!==null;){var c=i.f,d=(c&(Rn|na))!==0,v=d&&(c&wt)!==0,h=v||(c&en)!==0||G(this,Xn).has(i);if(!h&&i.fn!==null){d?i.f^=wt:l!==null&&(c&(ss|oi|uu))!==0?l.b.defer_effect(i):(c&ss)!==0?r.push(i):vs(i)&&((c&rr)!==0&&G(this,Ur).add(i),Ca(i));var y=i.first;if(y!==null){i=y;continue}}var w=i.parent;for(i=i.next;i===null&&w!==null;)w===l&&(l=null),i=w.next,w=w.parent}},eo=function(e){for(var r=0;r<e.length;r+=1)wu(e[r],G(this,cs),G(this,Ur))},ku=function(){var i;if(qs.size>1){this.previous.clear();var e=St,r=!0;for(const l of qs){if(l===this){r=!1;continue}const c=[];for(const[v,h]of this.current){if(l.current.has(v))if(r&&h!==l.current.get(v))l.current.set(v,h);else continue;c.push(v)}if(c.length===0)continue;const d=[...l.current.keys()].filter(v=>!this.current.has(v));if(d.length>0){var s=Ut;Ut=[];const v=new Set,h=new Map;for(const y of c)Su(y,d,v,h);if(Ut.length>0){je=l,l.apply();for(const y of Ut)Pt(i=l,Kn,Ji).call(i,y,[],[]);l.deactivate()}Ut=s}}je=null,St=e}this.committed=!0,qs.delete(this)};let kr=Uo;function Uf(t){var e=ts;ts=!0;try{for(var r;;){if(Ff(),Ut.length===0&&(je==null||je.flush(),Ut.length===0))return li=null,r;xu()}}finally{ts=e}}function xu(){$i=!0;var t=null;try{for(var e=0;Ut.length>0;){var r=kr.ensure();if(e++>1e3){var s,i;Gf()}r.process(Ut),xr.clear()}}finally{Ut=[],$i=!1,li=null}}function Gf(){try{kf()}catch(t){Ta(t,li)}}let kn=null;function _l(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(er|en))===0&&vs(s)&&(kn=new Set,Ca(s),s.deps===null&&s.first===null&&s.nodes===null&&s.teardown===null&&s.ac===null&&Ku(s),(kn==null?void 0:kn.size)>0)){xr.clear();for(const i of kn){if((i.f&(er|en))!==0)continue;const l=[i];let c=i.parent;for(;c!==null;)kn.has(c)&&(kn.delete(c),l.push(c)),c=c.parent;for(let d=l.length-1;d>=0;d--){const v=l[d];(v.f&(er|en))===0&&Ca(v)}}kn.clear()}}kn=null}}function Su(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const i of t.reactions){const l=i.f;(l&Tt)!==0?Su(i,e,r,s):(l&(_o|rr))!==0&&(l&At)===0&&Eu(i,e,s)&&(ht(i,At),An(i))}}function Eu(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const i of t.deps){if(xa.call(e,i))return!0;if((i.f&Tt)!==0&&Eu(i,e,r))return r.set(i,!0),!0}return r.set(t,!1),!1}function An(t){for(var e=li=t;e.parent!==null;){e=e.parent;var r=e.f;if($i&&e===et&&(r&rr)!==0&&(r&fu)===0)return;if((r&(na|Rn))!==0){if((r&wt)===0)return;e.f^=wt}}Ut.push(e)}function Tu(t,e){if(!((t.f&Rn)!==0&&(t.f&wt)!==0)){(t.f&At)!==0?e.d.push(t):(t.f&In)!==0&&e.m.push(t),ht(t,wt);for(var r=t.first;r!==null;)Tu(r,e),r=r.next}}function Hf(t){let e=0,r=$r(0),s;return()=>{So()&&(k(r),Eo(()=>(e===0&&(s=gs(()=>t(()=>ns(r)))),e+=1,()=>{wr(()=>{e-=1,e===0&&(s==null||s(),s=void 0,ns(r))})})))}}var Wf=Sa|Ia|cu;function Yf(t,e,r){new Vf(t,e,r)}var un,yo,Nn,Gr,qn,cn,Ft,jn,Zn,yr,Hr,br,_a,Wr,wa,ka,Qn,ai,kt,Xf,Zf,to,Hs,Ws,no;class Vf{constructor(e,r,s){Ue(this,kt);Ke(this,"parent");Ke(this,"is_pending",!1);Ue(this,un);Ue(this,yo,null);Ue(this,Nn);Ue(this,Gr);Ue(this,qn);Ue(this,cn,null);Ue(this,Ft,null);Ue(this,jn,null);Ue(this,Zn,null);Ue(this,yr,null);Ue(this,Hr,0);Ue(this,br,0);Ue(this,_a,!1);Ue(this,Wr,!1);Ue(this,wa,new Set);Ue(this,ka,new Set);Ue(this,Qn,null);Ue(this,ai,Hf(()=>(ze(this,Qn,$r(G(this,Hr))),()=>{ze(this,Qn,null)})));ze(this,un,e),ze(this,Nn,r),ze(this,Gr,s),this.parent=et.b,this.is_pending=!!G(this,Nn).pending,ze(this,qn,To(()=>{et.b=this;{var i=Pt(this,kt,to).call(this);try{ze(this,cn,fn(()=>s(i)))}catch(l){this.error(l)}G(this,br)>0?Pt(this,kt,Ws).call(this):this.is_pending=!1}return()=>{var l;(l=G(this,yr))==null||l.remove()}},Wf))}defer_effect(e){wu(e,G(this,wa),G(this,ka))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!G(this,Nn).pending}update_pending_count(e){Pt(this,kt,no).call(this,e),ze(this,Hr,G(this,Hr)+e),!(!G(this,Qn)||G(this,_a))&&(ze(this,_a,!0),wr(()=>{ze(this,_a,!1),G(this,Qn)&&Aa(G(this,Qn),G(this,Hr))}))}get_effect_pending(){return G(this,ai).call(this),k(G(this,Qn))}error(e){var r=G(this,Nn).onerror;let s=G(this,Nn).failed;if(G(this,Wr)||!r&&!s)throw e;G(this,cn)&&(Yt(G(this,cn)),ze(this,cn,null)),G(this,Ft)&&(Yt(G(this,Ft)),ze(this,Ft,null)),G(this,jn)&&(Yt(G(this,jn)),ze(this,jn,null));var i=!1,l=!1;const c=()=>{if(i){jf();return}i=!0,l&&Af(),kr.ensure(),ze(this,Hr,0),G(this,jn)!==null&&Xr(G(this,jn),()=>{ze(this,jn,null)}),this.is_pending=this.has_pending_snippet(),ze(this,cn,Pt(this,kt,Hs).call(this,()=>(ze(this,Wr,!1),fn(()=>G(this,Gr).call(this,G(this,un)))))),G(this,br)>0?Pt(this,kt,Ws).call(this):this.is_pending=!1};wr(()=>{try{l=!0,r==null||r(e,c),l=!1}catch(d){Ta(d,G(this,qn)&&G(this,qn).parent)}s&&ze(this,jn,Pt(this,kt,Hs).call(this,()=>{kr.ensure(),ze(this,Wr,!0);try{return fn(()=>{s(G(this,un),()=>e,()=>c)})}catch(d){return Ta(d,G(this,qn).parent),null}finally{ze(this,Wr,!1)}}))})}}un=new WeakMap,yo=new WeakMap,Nn=new WeakMap,Gr=new WeakMap,qn=new WeakMap,cn=new WeakMap,Ft=new WeakMap,jn=new WeakMap,Zn=new WeakMap,yr=new WeakMap,Hr=new WeakMap,br=new WeakMap,_a=new WeakMap,Wr=new WeakMap,wa=new WeakMap,ka=new WeakMap,Qn=new WeakMap,ai=new WeakMap,kt=new WeakSet,Xf=function(){try{ze(this,cn,fn(()=>G(this,Gr).call(this,G(this,un))))}catch(e){this.error(e)}},Zf=function(){const e=G(this,Nn).pending;e&&(ze(this,Ft,fn(()=>e(G(this,un)))),wr(()=>{var r=Pt(this,kt,to).call(this);ze(this,cn,Pt(this,kt,Hs).call(this,()=>(kr.ensure(),fn(()=>G(this,Gr).call(this,r))))),G(this,br)>0?Pt(this,kt,Ws).call(this):(Xr(G(this,Ft),()=>{ze(this,Ft,null)}),this.is_pending=!1)}))},to=function(){var e=G(this,un);return this.is_pending&&(ze(this,yr,tr()),G(this,un).before(G(this,yr)),e=G(this,yr)),e},Hs=function(e){var r=et,s=Ge,i=tn;zn(G(this,qn)),vn(G(this,qn)),Ea(G(this,qn).ctx);try{return e()}catch(l){return bu(l),null}finally{zn(r),vn(s),Ea(i)}},Ws=function(){const e=G(this,Nn).pending;G(this,cn)!==null&&(ze(this,Zn,document.createDocumentFragment()),G(this,Zn).append(G(this,yr)),Hu(G(this,cn),G(this,Zn))),G(this,Ft)===null&&ze(this,Ft,fn(()=>e(G(this,un))))},no=function(e){var r;if(!this.has_pending_snippet()){this.parent&&Pt(r=this.parent,kt,no).call(r,e);return}if(ze(this,br,G(this,br)+e),G(this,br)===0){this.is_pending=!1;for(const s of G(this,wa))ht(s,At),An(s);for(const s of G(this,ka))ht(s,In),An(s);G(this,wa).clear(),G(this,ka).clear(),G(this,Ft)&&Xr(G(this,Ft),()=>{ze(this,Ft,null)}),G(this,Zn)&&(G(this,un).before(G(this,Zn)),ze(this,Zn,null))}};function Qf(t,e,r,s){const i=ui;var l=t.filter(b=>!b.settled);if(r.length===0&&l.length===0){s(e.map(i));return}var c=je,d=et,v=$f(),h=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(b=>b.promise)):null;function y(b){v();try{s(b)}catch(_){(d.f&er)===0&&Ta(_,d)}c==null||c.deactivate(),ro()}if(r.length===0){h.then(()=>y(e.map(i)));return}function w(){v(),Promise.all(r.map(b=>Jf(b))).then(b=>y([...e.map(i),...b])).catch(b=>Ta(b,d))}h?h.then(w):w()}function $f(){var t=et,e=Ge,r=tn,s=je;return function(l=!0){zn(t),vn(e),Ea(r),l&&(s==null||s.activate())}}function ro(){zn(null),vn(null),Ea(null)}function ui(t){var e=Tt|At,r=Ge!==null&&(Ge.f&Tt)!==0?Ge:null;return et!==null&&(et.f|=Ia),{ctx:tn,deps:null,effects:null,equals:vu,f:e,fn:t,reactions:null,rv:0,v:xt,wv:0,parent:r??et,ac:null}}function Jf(t,e,r){let s=et;s===null&&mf();var i=s.b,l=void 0,c=$r(xt),d=!Ge,v=new Map;return pd(()=>{var _;var h=lu();l=h.promise;try{Promise.resolve(t()).then(h.resolve,h.reject).then(()=>{y===je&&y.committed&&y.deactivate(),ro()})}catch(N){h.reject(N),ro()}var y=je;if(d){var w=i.is_rendered();i.update_pending_count(1),y.increment(w),(_=v.get(y))==null||_.reject(Br),v.delete(y),v.set(y,h)}const b=(N,q=void 0)=>{if(y.activate(),q)q!==Br&&(c.f|=_r,Aa(c,q));else{(c.f&_r)!==0&&(c.f^=_r),Aa(c,N);for(const[E,K]of v){if(v.delete(E),E===y)break;K.reject(Br)}}d&&(i.update_pending_count(-1),y.decrement(w))};h.promise.then(b,N=>b(null,N||"unknown"))}),qu(()=>{for(const h of v.values())h.reject(Br)}),new Promise(h=>{function y(w){function b(){w===l?h(c):y(l)}w.then(b,b)}y(l)})}function Wt(t){const e=ui(t);return Wu(e),e}function Au(t){const e=ui(t);return e.equals=gu,e}function ed(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Yt(e[r])}}function td(t){for(var e=t.parent;e!==null;){if((e.f&Tt)===0)return(e.f&er)===0?e:null;e=e.parent}return null}function ko(t){var e,r=et;zn(td(t));try{t.f&=~Qr,ed(t),e=Zu(t)}finally{zn(r)}return e}function Cu(t){var e=ko(t);if(!t.equals(e)&&(t.wv=Vu(),(!(je!=null&&je.is_fork)||t.deps===null)&&(t.v=e,t.deps===null))){ht(t,wt);return}Sr||(St!==null?(So()||je!=null&&je.is_fork)&&St.set(t,e):wo(t))}function nd(t){var e,r;if(t.effects!==null)for(const s of t.effects)(s.teardown||s.ac)&&((e=s.teardown)==null||e.call(s),(r=s.ac)==null||r.abort(Br),s.teardown=ff,s.ac=null,is(s,0),Ao(s))}function Iu(t){if(t.effects!==null)for(const e of t.effects)e.teardown&&Ca(e)}let ao=new Set;const xr=new Map;let Ru=!1;function $r(t,e){var r={f:0,v:t,reactions:null,equals:vu,rv:0,wv:0};return r}function Oe(t,e){const r=$r(t);return Wu(r),r}function rd(t,e=!1,r=!0){const s=$r(t);return e||(s.equals=gu),s}function F(t,e,r=!1){Ge!==null&&(!Cn||(Ge.f&bl)!==0)&&mu()&&(Ge.f&(Tt|rr|_o|bl))!==0&&(hn===null||!xa.call(hn,t))&&Tf();let s=r?Ot(e):e;return Aa(t,s)}function Aa(t,e){if(!t.equals(e)){var r=t.v;Sr?xr.set(t,e):xr.set(t,r),t.v=e;var s=kr.ensure();if(s.capture(t,r),(t.f&Tt)!==0){const i=t;(t.f&At)!==0&&ko(i),wo(i)}t.wv=Vu(),Pu(t,At),et!==null&&(et.f&wt)!==0&&(et.f&(Rn|na))===0&&(ln===null?vd([t]):ln.push(t)),!s.is_fork&&ao.size>0&&!Ru&&ad()}return e}function ad(){Ru=!1;for(const t of ao)(t.f&wt)!==0&&ht(t,In),vs(t)&&Ca(t);ao.clear()}function ns(t){F(t,t.v+1)}function Pu(t,e){var r=t.reactions;if(r!==null)for(var s=r.length,i=0;i<s;i++){var l=r[i],c=l.f,d=(c&At)===0;if(d&&ht(l,e),(c&Tt)!==0){var v=l;St==null||St.delete(v),(c&Qr)===0&&(c&pn&&(l.f|=Qr),Pu(v,In))}else d&&((c&rr)!==0&&kn!==null&&kn.add(l),An(l))}}function Ot(t){if(typeof t!="object"||t===null||Vr in t)return t;const e=ou(t);if(e!==uf&&e!==cf)return t;var r=new Map,s=bo(t),i=Oe(0),l=Zr,c=d=>{if(Zr===l)return d();var v=Ge,h=Zr;vn(null),El(l);var y=d();return vn(v),El(h),y};return s&&r.set("length",Oe(t.length)),new Proxy(t,{defineProperty(d,v,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&Sf();var y=r.get(v);return y===void 0?c(()=>{var w=Oe(h.value);return r.set(v,w),w}):F(y,h.value,!0),!0},deleteProperty(d,v){var h=r.get(v);if(h===void 0){if(v in d){const y=c(()=>Oe(xt));r.set(v,y),ns(i)}}else F(h,xt),ns(i);return!0},get(d,v,h){var _;if(v===Vr)return t;var y=r.get(v),w=v in d;if(y===void 0&&(!w||(_=va(d,v))!=null&&_.writable)&&(y=c(()=>{var N=Ot(w?d[v]:xt),q=Oe(N);return q}),r.set(v,y)),y!==void 0){var b=k(y);return b===xt?void 0:b}return Reflect.get(d,v,h)},getOwnPropertyDescriptor(d,v){var h=Reflect.getOwnPropertyDescriptor(d,v);if(h&&"value"in h){var y=r.get(v);y&&(h.value=k(y))}else if(h===void 0){var w=r.get(v),b=w==null?void 0:w.v;if(w!==void 0&&b!==xt)return{enumerable:!0,configurable:!0,value:b,writable:!0}}return h},has(d,v){var b;if(v===Vr)return!0;var h=r.get(v),y=h!==void 0&&h.v!==xt||Reflect.has(d,v);if(h!==void 0||et!==null&&(!y||(b=va(d,v))!=null&&b.writable)){h===void 0&&(h=c(()=>{var _=y?Ot(d[v]):xt,N=Oe(_);return N}),r.set(v,h));var w=k(h);if(w===xt)return!1}return y},set(d,v,h,y){var ee;var w=r.get(v),b=v in d;if(s&&v==="length")for(var _=h;_<w.v;_+=1){var N=r.get(_+"");N!==void 0?F(N,xt):_ in d&&(N=c(()=>Oe(xt)),r.set(_+"",N))}if(w===void 0)(!b||(ee=va(d,v))!=null&&ee.writable)&&(w=c(()=>Oe(void 0)),F(w,Ot(h)),r.set(v,w));else{b=w.v!==xt;var q=c(()=>Ot(h));F(w,q)}var E=Reflect.getOwnPropertyDescriptor(d,v);if(E!=null&&E.set&&E.set.call(y,h),!b){if(s&&typeof v=="string"){var K=r.get("length"),ae=Number(v);Number.isInteger(ae)&&ae>=K.v&&F(K,ae+1)}ns(i)}return!0},ownKeys(d){k(i);var v=Reflect.ownKeys(d).filter(w=>{var b=r.get(w);return b===void 0||b.v!==xt});for(var[h,y]of r)y.v!==xt&&!(h in d)&&v.push(h);return v},setPrototypeOf(){Ef()}})}function wl(t){try{if(t!==null&&typeof t=="object"&&Vr in t)return t[Vr]}catch{}return t}function sd(t,e){return Object.is(wl(t),wl(e))}var kl,Ou,Du,Mu;function id(){if(kl===void 0){kl=window,Ou=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Du=va(e,"firstChild").get,Mu=va(e,"nextSibling").get,yl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),yl(r)&&(r.__t=void 0)}}function tr(t=""){return document.createTextNode(t)}function Jt(t){return Du.call(t)}function hs(t){return Mu.call(t)}function x(t,e){return Jt(t)}function Dt(t,e=!1){{var r=Jt(t);return r instanceof Comment&&r.data===""?hs(r):r}}function L(t,e=1,r=!1){let s=t;for(;e--;)s=hs(s);return s}function od(t){t.textContent=""}function Lu(){return!1}function ld(t,e,r){return document.createElementNS(hu,t,void 0)}let xl=!1;function ud(){xl||(xl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function xo(t){var e=Ge,r=et;vn(null),zn(null);try{return t()}finally{vn(e),zn(r)}}function Nu(t,e,r,s=r){t.addEventListener(e,()=>xo(r));const i=t.__on_r;i?t.__on_r=()=>{i(),s(!0)}:t.__on_r=()=>s(!0),ud()}function cd(t){et===null&&(Ge===null&&wf(),_f()),Sr&&bf()}function fd(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function ar(t,e,r){var s=et;s!==null&&(s.f&en)!==0&&(t|=en);var i={ctx:tn,deps:null,nodes:null,f:t|At|pn,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Ca(i)}catch(d){throw Yt(i),d}else e!==null&&An(i);var l=i;if(r&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&Ia)===0&&(l=l.first,(t&rr)!==0&&(t&Sa)!==0&&l!==null&&(l.f|=Sa)),l!==null&&(l.parent=s,s!==null&&fd(l,s),Ge!==null&&(Ge.f&Tt)!==0&&(t&na)===0)){var c=Ge;(c.effects??(c.effects=[])).push(l)}return i}function So(){return Ge!==null&&!Cn}function qu(t){const e=ar(oi,null,!1);return ht(e,wt),e.teardown=t,e}function Js(t){cd();var e=et.f,r=!Ge&&(e&Rn)!==0&&(e&ps)===0;if(r){var s=tn;(s.e??(s.e=[])).push(t)}else return ju(t)}function ju(t){return ar(ss|pf,t,!1)}function dd(t){kr.ensure();const e=ar(na|Ia,t,!0);return(r={})=>new Promise(s=>{r.outro?Xr(e,()=>{Yt(e),s(void 0)}):(Yt(e),s(void 0))})}function Bu(t){return ar(ss,t,!1)}function pd(t){return ar(_o|Ia,t,!0)}function Eo(t,e=0){return ar(oi|e,t,!0)}function me(t,e=[],r=[],s=[]){Qf(s,e,r,i=>{ar(oi,()=>t(...i.map(k)),!0)})}function To(t,e=0){var r=ar(rr|e,t,!0);return r}function fn(t){return ar(Rn|Ia,t,!0)}function zu(t){var e=t.teardown;if(e!==null){const r=Sr,s=Ge;Sl(!0),vn(null);try{e.call(null)}finally{Sl(r),vn(s)}}}function Ao(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const i=r.ac;i!==null&&xo(()=>{i.abort(Br)});var s=r.next;(r.f&na)!==0?r.parent=null:Yt(r,e),r=s}}function hd(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Rn)===0&&Yt(e),e=r}}function Yt(t,e=!0){var r=!1;(e||(t.f&fu)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Fu(t.nodes.start,t.nodes.end),r=!0),Ao(t,e&&!r),is(t,0),ht(t,er);var s=t.nodes&&t.nodes.t;if(s!==null)for(const l of s)l.stop();zu(t);var i=t.parent;i!==null&&i.first!==null&&Ku(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Fu(t,e){for(;t!==null;){var r=t===e?null:hs(t);t.remove(),t=r}}function Ku(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Xr(t,e,r=!0){var s=[];Uu(t,s,!0);var i=()=>{r&&Yt(t),e&&e()},l=s.length;if(l>0){var c=()=>--l||i();for(var d of s)d.out(c)}else i()}function Uu(t,e,r){if((t.f&en)===0){t.f^=en;var s=t.nodes&&t.nodes.t;if(s!==null)for(const d of s)(d.is_global||r)&&e.push(d);for(var i=t.first;i!==null;){var l=i.next,c=(i.f&Sa)!==0||(i.f&Rn)!==0&&(t.f&rr)!==0;Uu(i,e,c?r:!1),i=l}}}function Co(t){Gu(t,!0)}function Gu(t,e){if((t.f&en)!==0){t.f^=en,(t.f&wt)===0&&(ht(t,At),An(t));for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Sa)!==0||(r.f&Rn)!==0;Gu(r,i?e:!1),r=s}var l=t.nodes&&t.nodes.t;if(l!==null)for(const c of l)(c.is_global||e)&&c.in()}}function Hu(t,e){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end;r!==null;){var i=r===s?null:hs(r);e.append(r),r=i}}let Ys=!1,Sr=!1;function Sl(t){Sr=t}let Ge=null,Cn=!1;function vn(t){Ge=t}let et=null;function zn(t){et=t}let hn=null;function Wu(t){Ge!==null&&(hn===null?hn=[t]:hn.push(t))}let Gt=null,Qt=0,ln=null;function vd(t){ln=t}let Yu=1,Fr=0,Zr=Fr;function El(t){Zr=t}function Vu(){return++Yu}function vs(t){var e=t.f;if((e&At)!==0)return!0;if(e&Tt&&(t.f&=~Qr),(e&In)!==0){for(var r=t.deps,s=r.length,i=0;i<s;i++){var l=r[i];if(vs(l)&&Cu(l),l.wv>t.wv)return!0}(e&pn)!==0&&St===null&&ht(t,wt)}return!1}function Xu(t,e,r=!0){var s=t.reactions;if(s!==null&&!(hn!==null&&xa.call(hn,t)))for(var i=0;i<s.length;i++){var l=s[i];(l.f&Tt)!==0?Xu(l,e,!1):e===l&&(r?ht(l,At):(l.f&wt)!==0&&ht(l,In),An(l))}}function Zu(t){var q;var e=Gt,r=Qt,s=ln,i=Ge,l=hn,c=tn,d=Cn,v=Zr,h=t.f;Gt=null,Qt=0,ln=null,Ge=(h&(Rn|na))===0?t:null,hn=null,Ea(t.ctx),Cn=!1,Zr=++Fr,t.ac!==null&&(xo(()=>{t.ac.abort(Br)}),t.ac=null);try{t.f|=Qi;var y=t.fn,w=y();t.f|=ps;var b=t.deps,_=je==null?void 0:je.is_fork;if(Gt!==null){var N;if(_||is(t,Qt),b!==null&&Qt>0)for(b.length=Qt+Gt.length,N=0;N<Gt.length;N++)b[Qt+N]=Gt[N];else t.deps=b=Gt;if(So()&&(t.f&pn)!==0)for(N=Qt;N<b.length;N++)((q=b[N]).reactions??(q.reactions=[])).push(t)}else!_&&b!==null&&Qt<b.length&&(is(t,Qt),b.length=Qt);if(mu()&&ln!==null&&!Cn&&b!==null&&(t.f&(Tt|In|At))===0)for(N=0;N<ln.length;N++)Xu(ln[N],t);if(i!==null&&i!==t){if(Fr++,i.deps!==null)for(let E=0;E<r;E+=1)i.deps[E].rv=Fr;if(e!==null)for(const E of e)E.rv=Fr;ln!==null&&(s===null?s=ln:s.push(...ln))}return(t.f&_r)!==0&&(t.f^=_r),w}catch(E){return bu(E)}finally{t.f^=Qi,Gt=e,Qt=r,ln=s,Ge=i,hn=l,Ea(c),Cn=d,Zr=v}}function gd(t,e){let r=e.reactions;if(r!==null){var s=sf.call(r,t);if(s!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[s]=r[i],r.pop())}}if(r===null&&(e.f&Tt)!==0&&(Gt===null||!xa.call(Gt,e))){var l=e;(l.f&pn)!==0&&(l.f^=pn,l.f&=~Qr),wo(l),nd(l),is(l,0)}}function is(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)gd(t,r[s])}function Ca(t){var e=t.f;if((e&er)===0){ht(t,wt);var r=et,s=Ys;et=t,Ys=!0;try{(e&(rr|uu))!==0?hd(t):Ao(t),zu(t);var i=Zu(t);t.teardown=typeof i=="function"?i:null,t.wv=Yu;var l;Zi&&zf&&(t.f&At)!==0&&t.deps}finally{Ys=s,et=r}}}async function Qu(){await Promise.resolve(),Uf()}function k(t){var e=t.f,r=(e&Tt)!==0;if(Ge!==null&&!Cn){var s=et!==null&&(et.f&er)!==0;if(!s&&(hn===null||!xa.call(hn,t))){var i=Ge.deps;if((Ge.f&Qi)!==0)t.rv<Fr&&(t.rv=Fr,Gt===null&&i!==null&&i[Qt]===t?Qt++:Gt===null?Gt=[t]:Gt.push(t));else{(Ge.deps??(Ge.deps=[])).push(t);var l=t.reactions;l===null?t.reactions=[Ge]:xa.call(l,Ge)||l.push(Ge)}}}if(Sr&&xr.has(t))return xr.get(t);if(r){var c=t;if(Sr){var d=c.v;return((c.f&wt)===0&&c.reactions!==null||Ju(c))&&(d=ko(c)),xr.set(c,d),d}var v=(c.f&pn)===0&&!Cn&&Ge!==null&&(Ys||(Ge.f&pn)!==0),h=(c.f&ps)===0;vs(c)&&(v&&(c.f|=pn),Cu(c)),v&&!h&&(Iu(c),$u(c))}if(St!=null&&St.has(t))return St.get(t);if((t.f&_r)!==0)throw t.v;return t.v}function $u(t){if(t.f|=pn,t.deps!==null)for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Tt)!==0&&(e.f&pn)===0&&(Iu(e),$u(e))}function Ju(t){if(t.v===xt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(xr.has(e)||(e.f&Tt)!==0&&Ju(e))return!0;return!1}function gs(t){var e=Cn;try{return Cn=!0,t()}finally{Cn=e}}const md=["touchstart","touchmove"];function yd(t){return md.includes(t)}const ec=new Set,so=new Set;function Vt(t){for(var e=0;e<t.length;e++)ec.add(t[e]);for(var r of so)r(t)}let Tl=null;function Al(t){var E;var e=this,r=e.ownerDocument,s=t.type,i=((E=t.composedPath)==null?void 0:E.call(t))||[],l=i[0]||t.target;Tl=t;var c=0,d=Tl===t&&t.__root;if(d){var v=i.indexOf(d);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var h=i.indexOf(e);if(h===-1)return;v<=h&&(c=v)}if(l=i[c]||t.target,l!==e){of(t,"currentTarget",{configurable:!0,get(){return l||r}});var y=Ge,w=et;vn(null),zn(null);try{for(var b,_=[];l!==null;){var N=l.assignedSlot||l.parentNode||l.host||null;try{var q=l["__"+s];q!=null&&(!l.disabled||t.target===l)&&q.call(l,t)}catch(K){b?_.push(K):b=K}if(t.cancelBubble||N===e||N===null)break;l=N}if(b){for(let K of _)queueMicrotask(()=>{throw K});throw b}}finally{t.__root=e,delete t.currentTarget,vn(y),zn(w)}}}var au,su;const ji=(su=(au=globalThis==null?void 0:globalThis.window)==null?void 0:au.trustedTypes)==null?void 0:su.createPolicy("svelte-trusted-html",{createHTML:t=>t});function bd(t){return(ji==null?void 0:ji.createHTML(t))??t}function Io(t,e=!1){var r=ld("template");return t=t.replaceAll("<!>","<!---->"),r.innerHTML=e?bd(t):t,r.content}function Jr(t,e){var r=et;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function V(t,e){var r=(e&pu)!==0,s=(e&Nf)!==0,i,l=!t.startsWith("<!>");return()=>{i===void 0&&(i=Io(l?t:"<!>"+t,!0),r||(i=Jt(i)));var c=s||Ou?document.importNode(i,!0):i.cloneNode(!0);if(r){var d=Jt(c),v=c.lastChild;Jr(d,v)}else Jr(c,c);return c}}function _d(t,e,r="svg"){var s=!t.startsWith("<!>"),i=(e&pu)!==0,l=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var d=Io(l,!0),v=Jt(d);if(i)for(c=document.createDocumentFragment();Jt(v);)c.appendChild(Jt(v));else c=Jt(v)}var h=c.cloneNode(!0);if(i){var y=Jt(h),w=h.lastChild;Jr(y,w)}else Jr(h,h);return h}}function Ro(t,e){return _d(t,e,"svg")}function Cl(t=""){{var e=tr(t+"");return Jr(e,e),e}}function tc(){var t=document.createDocumentFragment(),e=document.createComment(""),r=tr();return t.append(e,r),Jr(e,r),t}function Y(t,e){t!==null&&t.before(e)}function ue(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function wd(t,e){return kd(t,e)}const js=new Map;function kd(t,{target:e,anchor:r,props:s={},events:i,context:l,intro:c=!0}){id();var d=new Set,v=w=>{for(var b=0;b<w.length;b++){var _=w[b];if(!d.has(_)){d.add(_);var N=yd(_);for(const K of[e,document]){var q=js.get(K);q===void 0&&(q=new Map,js.set(K,q));var E=q.get(_);E===void 0?(K.addEventListener(_,Al,{passive:N}),q.set(_,1)):q.set(_,E+1)}}}};v(ii(ec)),so.add(v);var h=void 0,y=dd(()=>{var w=r??e.appendChild(tr());return Yf(w,{pending:()=>{}},b=>{ut({});var _=tn;l&&(_.c=l),i&&(s.$$events=i),h=t(b,s)||{},ct()}),()=>{var q;for(var b of d)for(const E of[e,document]){var _=js.get(E),N=_.get(b);--N==0?(E.removeEventListener(b,Al),_.delete(b),_.size===0&&js.delete(E)):_.set(b,N)}so.delete(v),w!==r&&((q=w.parentNode)==null||q.removeChild(w))}});return xd.set(h,y),h}let xd=new WeakMap;var Sn,Bn,$t,Yr,fs,ds,si;class Sd{constructor(e,r=!0){Ke(this,"anchor");Ue(this,Sn,new Map);Ue(this,Bn,new Map);Ue(this,$t,new Map);Ue(this,Yr,new Set);Ue(this,fs,!0);Ue(this,ds,()=>{var e=je;if(G(this,Sn).has(e)){var r=G(this,Sn).get(e),s=G(this,Bn).get(r);if(s)Co(s),G(this,Yr).delete(r);else{var i=G(this,$t).get(r);i&&(G(this,Bn).set(r,i.effect),G(this,$t).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[l,c]of G(this,Sn)){if(G(this,Sn).delete(l),l===e)break;const d=G(this,$t).get(c);d&&(Yt(d.effect),G(this,$t).delete(c))}for(const[l,c]of G(this,Bn)){if(l===r||G(this,Yr).has(l))continue;const d=()=>{if(Array.from(G(this,Sn).values()).includes(l)){var h=document.createDocumentFragment();Hu(c,h),h.append(tr()),G(this,$t).set(l,{effect:c,fragment:h})}else Yt(c);G(this,Yr).delete(l),G(this,Bn).delete(l)};G(this,fs)||!s?(G(this,Yr).add(l),Xr(c,d,!1)):d()}}});Ue(this,si,e=>{G(this,Sn).delete(e);const r=Array.from(G(this,Sn).values());for(const[s,i]of G(this,$t))r.includes(s)||(Yt(i.effect),G(this,$t).delete(s))});this.anchor=e,ze(this,fs,r)}ensure(e,r){var s=je,i=Lu();if(r&&!G(this,Bn).has(e)&&!G(this,$t).has(e))if(i){var l=document.createDocumentFragment(),c=tr();l.append(c),G(this,$t).set(e,{effect:fn(()=>r(c)),fragment:l})}else G(this,Bn).set(e,fn(()=>r(this.anchor)));if(G(this,Sn).set(s,e),i){for(const[d,v]of G(this,Bn))d===e?s.unskip_effect(v):s.skip_effect(v);for(const[d,v]of G(this,$t))d===e?s.unskip_effect(v.effect):s.skip_effect(v.effect);s.oncommit(G(this,ds)),s.ondiscard(G(this,si))}else G(this,ds).call(this)}}Sn=new WeakMap,Bn=new WeakMap,$t=new WeakMap,Yr=new WeakMap,fs=new WeakMap,ds=new WeakMap,si=new WeakMap;function ke(t,e,r=!1){var s=new Sd(t),i=r?Sa:0;function l(c,d){s.ensure(c,d)}To(()=>{var c=!1;e((d,v=0)=>{c=!0,l(v,d)}),c||l(!1,null)},i)}function ra(t,e){return e}function Ed(t,e,r){for(var s=[],i=e.length,l,c=e.length,d=0;d<i;d++){let w=e[d];Xr(w,()=>{if(l){if(l.pending.delete(w),l.done.add(w),l.pending.size===0){var b=t.outrogroups;io(ii(l.done)),b.delete(l),b.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=s.length===0&&r!==null;if(v){var h=r,y=h.parentNode;od(y),y.append(h),t.items.clear()}io(e,!v)}else l={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(l)}function io(t,e=!0){for(var r=0;r<t.length;r++)Yt(t[r],e)}var Il;function Fn(t,e,r,s,i,l=null){var c=t,d=new Map,v=(e&du)!==0;if(v){var h=t;c=h.appendChild(tr())}var y=null,w=Au(()=>{var K=r();return bo(K)?K:K==null?[]:ii(K)}),b,_=!0;function N(){E.fallback=y,Td(E,b,c,e,s),y!==null&&(b.length===0?(y.f&Jn)===0?Co(y):(y.f^=Jn,Ja(y,null,c)):Xr(y,()=>{y=null}))}var q=To(()=>{b=k(w);for(var K=b.length,ae=new Set,ee=je,U=Lu(),Q=0;Q<K;Q+=1){var se=b[Q],X=s(se,Q),ve=_?null:d.get(X);ve?(ve.v&&Aa(ve.v,se),ve.i&&Aa(ve.i,Q),U&&ee.unskip_effect(ve.e)):(ve=Ad(d,_?c:Il??(Il=tr()),se,X,Q,i,e,r),_||(ve.e.f|=Jn),d.set(X,ve)),ae.add(X)}if(K===0&&l&&!y&&(_?y=fn(()=>l(c)):(y=fn(()=>l(Il??(Il=tr()))),y.f|=Jn)),K>ae.size&&yf(),!_)if(U){for(const[ie,de]of d)ae.has(ie)||ee.skip_effect(de.e);ee.oncommit(N),ee.ondiscard(()=>{})}else N();k(w)}),E={effect:q,items:d,outrogroups:null,fallback:y};_=!1}function Ha(t){for(;t!==null&&(t.f&Rn)===0;)t=t.next;return t}function Td(t,e,r,s,i){var de,te,Z,$,Ee,_e,Se,we,z;var l=(s&Rf)!==0,c=e.length,d=t.items,v=Ha(t.effect.first),h,y=null,w,b=[],_=[],N,q,E,K;if(l)for(K=0;K<c;K+=1)N=e[K],q=i(N,K),E=d.get(q).e,(E.f&Jn)===0&&((te=(de=E.nodes)==null?void 0:de.a)==null||te.measure(),(w??(w=new Set)).add(E));for(K=0;K<c;K+=1){if(N=e[K],q=i(N,K),E=d.get(q).e,t.outrogroups!==null)for(const H of t.outrogroups)H.pending.delete(E),H.done.delete(E);if((E.f&Jn)!==0)if(E.f^=Jn,E===v)Ja(E,null,r);else{var ae=y?y.next:v;E===t.effect.last&&(t.effect.last=E.prev),E.prev&&(E.prev.next=E.next),E.next&&(E.next.prev=E.prev),gr(t,y,E),gr(t,E,ae),Ja(E,ae,r),y=E,b=[],_=[],v=Ha(y.next);continue}if((E.f&en)!==0&&(Co(E),l&&(($=(Z=E.nodes)==null?void 0:Z.a)==null||$.unfix(),(w??(w=new Set)).delete(E))),E!==v){if(h!==void 0&&h.has(E)){if(b.length<_.length){var ee=_[0],U;y=ee.prev;var Q=b[0],se=b[b.length-1];for(U=0;U<b.length;U+=1)Ja(b[U],ee,r);for(U=0;U<_.length;U+=1)h.delete(_[U]);gr(t,Q.prev,se.next),gr(t,y,Q),gr(t,se,ee),v=ee,y=se,K-=1,b=[],_=[]}else h.delete(E),Ja(E,v,r),gr(t,E.prev,E.next),gr(t,E,y===null?t.effect.first:y.next),gr(t,y,E),y=E;continue}for(b=[],_=[];v!==null&&v!==E;)(h??(h=new Set)).add(v),_.push(v),v=Ha(v.next);if(v===null)continue}(E.f&Jn)===0&&b.push(E),y=E,v=Ha(E.next)}if(t.outrogroups!==null){for(const H of t.outrogroups)H.pending.size===0&&(io(ii(H.done)),(Ee=t.outrogroups)==null||Ee.delete(H));t.outrogroups.size===0&&(t.outrogroups=null)}if(v!==null||h!==void 0){var X=[];if(h!==void 0)for(E of h)(E.f&en)===0&&X.push(E);for(;v!==null;)(v.f&en)===0&&v!==t.fallback&&X.push(v),v=Ha(v.next);var ve=X.length;if(ve>0){var ie=(s&du)!==0&&c===0?r:null;if(l){for(K=0;K<ve;K+=1)(Se=(_e=X[K].nodes)==null?void 0:_e.a)==null||Se.measure();for(K=0;K<ve;K+=1)(z=(we=X[K].nodes)==null?void 0:we.a)==null||z.fix()}Ed(t,X,ie)}}l&&wr(()=>{var H,J;if(w!==void 0)for(E of w)(J=(H=E.nodes)==null?void 0:H.a)==null||J.apply()})}function Ad(t,e,r,s,i,l,c,d){var v=(c&Cf)!==0?(c&Pf)===0?rd(r,!1,!1):$r(r):null,h=(c&If)!==0?$r(i):null;return{v,i:h,e:fn(()=>(l(e,v??r,h??i,d),()=>{t.delete(s)}))}}function Ja(t,e,r){if(t.nodes)for(var s=t.nodes.start,i=t.nodes.end,l=e&&(e.f&Jn)===0?e.nodes.start:r;s!==null;){var c=hs(s);if(l.before(s),s===i)return;s=c}}function gr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function Cd(t,e,r=!1,s=!1,i=!1){var l=t,c="";me(()=>{var d=et;if(c!==(c=e()??"")&&(d.nodes!==null&&(Fu(d.nodes.start,d.nodes.end),d.nodes=null),c!=="")){var v=c+"";r?v=`<svg>${v}</svg>`:s&&(v=`<math>${v}</math>`);var h=Io(v);if((r||s)&&(h=Jt(h)),Jr(Jt(h),h.lastChild),r||s)for(;Jt(h);)l.before(Jt(h));else l.before(h)}})}const Rl=[...` 	
\r\fÂ \v\uFEFF`];function Id(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var i in r)if(r[i])s=s?s+" "+i:i;else if(s.length)for(var l=i.length,c=0;(c=s.indexOf(i,c))>=0;){var d=c+l;(c===0||Rl.includes(s[c-1]))&&(d===s.length||Rl.includes(s[d]))?s=(c===0?"":s.substring(0,c))+s.substring(d+1):c=d}}return s===""?null:s}function Pl(t,e=!1){var r=e?" !important;":";",s="";for(var i in t){var l=t[i];l!=null&&l!==""&&(s+=" "+i+": "+l+r)}return s}function Bi(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Rd(t,e){if(e){var r="",s,i;if(Array.isArray(e)?(s=e[0],i=e[1]):s=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,c=0,d=!1,v=[];s&&v.push(...Object.keys(s).map(Bi)),i&&v.push(...Object.keys(i).map(Bi));var h=0,y=-1;const q=t.length;for(var w=0;w<q;w++){var b=t[w];if(d?b==="/"&&t[w-1]==="*"&&(d=!1):l?l===b&&(l=!1):b==="/"&&t[w+1]==="*"?d=!0:b==='"'||b==="'"?l=b:b==="("?c++:b===")"&&c--,!d&&l===!1&&c===0){if(b===":"&&y===-1)y=w;else if(b===";"||w===q-1){if(y!==-1){var _=Bi(t.substring(h,y).trim());if(!v.includes(_)){b!==";"&&w++;var N=t.substring(h,w).trim();r+=" "+N+";"}}h=w+1,y=-1}}}}return s&&(r+=Pl(s)),i&&(r+=Pl(i,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function dn(t,e,r,s,i,l){var c=t.__className;if(c!==r||c===void 0){var d=Id(r,s,l);d==null?t.removeAttribute("class"):e?t.className=d:t.setAttribute("class",d),t.__className=r}else if(l&&i!==l)for(var v in l){var h=!!l[v];(i==null||h!==!!i[v])&&t.classList.toggle(v,h)}return l}function zi(t,e={},r,s){for(var i in r){var l=r[i];e[i]!==l&&(r[i]==null?t.style.removeProperty(i):t.style.setProperty(i,l,s))}}function nr(t,e,r,s){var i=t.__style;if(i!==e){var l=Rd(e,s);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else s&&(Array.isArray(s)?(zi(t,r==null?void 0:r[0],s[0]),zi(t,r==null?void 0:r[1],s[1],"important")):zi(t,r,s));return s}function nc(t,e,r=!1){if(t.multiple){if(e==null)return;if(!bo(e))return qf();for(var s of t.options)s.selected=e.includes(rs(s));return}for(s of t.options){var i=rs(s);if(sd(i,e)){s.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Pd(t){var e=new MutationObserver(()=>{nc(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qu(()=>{e.disconnect()})}function Po(t,e,r=e){var s=new WeakSet,i=!0;Nu(t,"change",l=>{var c=l?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(c),rs);else{var v=t.querySelector(c)??t.querySelector("option:not([disabled])");d=v&&rs(v)}r(d),je!==null&&s.add(je)}),Bu(()=>{var l=e();if(t===document.activeElement){var c=$s??je;if(s.has(c))return}if(nc(t,l,i),i&&l===void 0){var d=t.querySelector(":checked");d!==null&&(l=rs(d),r(l))}t.__value=l,i=!1}),Pd(t)}function rs(t){return"__value"in t?t.__value:t.value}const Od=Symbol("is custom element"),Dd=Symbol("is html");function rc(t,e,r,s){var i=Md(t);i[e]!==(i[e]=r)&&(e==="loading"&&(t[vf]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ld(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Md(t){return t.__attributes??(t.__attributes={[Od]:t.nodeName.includes("-"),[Dd]:t.namespaceURI===hu})}var Ol=new Map;function Ld(t){var e=t.getAttribute("is")||t.nodeName,r=Ol.get(e);if(r)return r;Ol.set(e,r=[]);for(var s,i=t,l=Element.prototype;l!==i;){s=lf(i);for(var c in s)s[c].set&&r.push(c);i=ou(i)}return r}function Oo(t,e,r=e){var s=new WeakSet;Nu(t,"input",async i=>{var l=i?t.defaultValue:t.value;if(l=Fi(t)?Ki(l):l,r(l),je!==null&&s.add(je),await Qu(),l!==(l=e())){var c=t.selectionStart,d=t.selectionEnd,v=t.value.length;if(t.value=l??"",d!==null){var h=t.value.length;c===d&&d===v&&h>v?(t.selectionStart=h,t.selectionEnd=h):(t.selectionStart=c,t.selectionEnd=Math.min(d,h))}}}),gs(e)==null&&t.value&&(r(Fi(t)?Ki(t.value):t.value),je!==null&&s.add(je)),Eo(()=>{var i=e();if(t===document.activeElement){var l=$s??je;if(s.has(l))return}Fi(t)&&i===Ki(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Fi(t){var e=t.type;return e==="number"||e==="range"}function Ki(t){return t===""?null:+t}function Dl(t,e){return t===e||(t==null?void 0:t[Vr])===e}function ac(t={},e,r,s){return Bu(()=>{var i,l;return Eo(()=>{i=l,l=[],gs(()=>{t!==r(...l)&&(e(t,...l),i&&Dl(r(...i),t)&&e(null,...i))})}),()=>{wr(()=>{l&&Dl(r(...l),t)&&e(null,...l)})}}),t}let Bs=!1;function Nd(t){var e=Bs;try{return Bs=!1,[t(),Bs]}finally{Bs=e}}function De(t,e,r,s){var ae;var i=(r&Mf)!==0,l=(r&Lf)!==0,c=s,d=!0,v=()=>(d&&(d=!1,c=l?gs(s):s),c),h;if(i){var y=Vr in t||hf in t;h=((ae=va(t,e))==null?void 0:ae.set)??(y&&e in t?ee=>t[e]=ee:void 0)}var w,b=!1;i?[w,b]=Nd(()=>t[e]):w=t[e],w===void 0&&s!==void 0&&(w=v(),h&&(xf(),h(w)));var _;if(_=()=>{var ee=t[e];return ee===void 0?v():(d=!0,ee)},(r&Df)===0)return _;if(h){var N=t.$$legacy;return(function(ee,U){return arguments.length>0?((!U||N||b)&&h(U?_():ee),ee):_()})}var q=!1,E=((r&Of)!==0?ui:Au)(()=>(q=!1,_()));i&&k(E);var K=et;return(function(ee,U){if(arguments.length>0){const Q=U?k(E):i?Ot(ee):ee;return F(E,Q),q=!0,c!==void 0&&(c=Q),ee}return Sr&&q||(K.f&er)!==0?E.v:k(E)})}function Ct(t){tn===null&&gf(),Js(()=>{const e=gs(t);if(typeof e=="function")return e})}const qd="5";var iu;typeof window<"u"&&((iu=window.__svelte??(window.__svelte={})).v??(iu.v=new Set)).add(qd);const os=[{id:"onnx-community/Qwen3-0.6B-ONNX",name:"Qwen3 0.6B",size:"~400 MB",description:"Fastest, best for quick answers"},{id:"onnx-community/Qwen3-1.7B-ONNX",name:"Qwen3 1.7B",size:"~1.1 GB",description:"Balanced speed and quality"},{id:"onnx-community/Qwen3-4B-ONNX",name:"Qwen3 4B",size:"~2.6 GB",description:"Better reasoning, slower"},{id:"onnx-community/DeepSeek-R1-Distill-Qwen-1.5B-ONNX",name:"DeepSeek R1 1.5B",size:"~1 GB",description:"Strong reasoning, CoT focused"},{id:"onnx-community/Phi-4-mini-instruct-ONNX",name:"Phi-4 Mini",size:"~2.5 GB",description:"Microsoft, good at reasoning"},{id:"onnx-community/Phi-3-mini-128k-instruct-ONNX",name:"Phi-3 Mini 128k",size:"~2.6 GB",description:"128k context, reliable"},{id:"onnx-community/gemma-3-270m-it-ONNX",name:"Gemma 3 270M",size:"~190 MB",description:"Smallest, ultra fast"}];let Kt=null,$n="idle",Vs=null,qr=new Set;function zs(){return Kt||(Kt=new Worker(new URL(""+new URL("worker-BMpOIBP_.js",import.meta.url).href,import.meta.url),{type:"module"}),Kt.addEventListener("message",t=>{const e=t.data;e.status==="loading"&&($n="loading"),e.status==="ready"&&($n="ready"),e.status==="start"&&($n="generating"),(e.status==="complete"||e.status==="error")&&($n=Vs?"ready":"idle");for(const r of qr)try{r(e)}catch{}})),Kt}function sc(){return{check(){zs().postMessage({type:"check"})},loadModel(t){Vs=t,$n="loading",zs().postMessage({type:"load",modelId:t})},generate(t){zs().postMessage({type:"generate",data:t})},generateFull(t){return new Promise((e,r)=>{let s="";const i=c=>{switch(c.status){case"thinking":break;case"thinking-done":break;case"update":s+=c.output;break;case"complete":l(),e(s);break;case"error":l(),r(new Error(c.data));break}},l=()=>{qr.delete(i)};qr.add(i),zs().postMessage({type:"generate",data:t})})},interrupt(){Kt==null||Kt.postMessage({type:"interrupt"})},reset(){Kt==null||Kt.postMessage({type:"reset"})},onMessage(t){return qr.add(t),()=>qr.delete(t)},offMessage(t){qr.delete(t)},get status(){return $n},get isReady(){return $n==="ready"},get isGenerating(){return $n==="generating"},get modelId(){return Vs},terminate(){Kt==null||Kt.terminate(),Kt=null,$n="idle",Vs=null,qr.clear()}}}var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xs={exports:{}},zd=Xs.exports,Ml;function Fd(){return Ml||(Ml=1,(function(t,e){((r,s)=>{t.exports=s()})(zd,function(){var r=function(n,a){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(o,u){o.__proto__=u}:function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}))(n,a)},s=function(){return(s=Object.assign||function(n){for(var a,o=1,u=arguments.length;o<u;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f]);return n}).apply(this,arguments)};function i(n,a,o){for(var u,f=0,p=a.length;f<p;f++)!u&&f in a||((u=u||Array.prototype.slice.call(a,0,f))[f]=a[f]);return n.concat(u||Array.prototype.slice.call(a))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:jd,c=Object.keys,d=Array.isArray;function v(n,a){return typeof a=="object"&&c(a).forEach(function(o){n[o]=a[o]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var h=Object.getPrototypeOf,y={}.hasOwnProperty;function w(n,a){return y.call(n,a)}function b(n,a){typeof a=="function"&&(a=a(h(n))),(typeof Reflect>"u"?c:Reflect.ownKeys)(a).forEach(function(o){N(n,o,a[o])})}var _=Object.defineProperty;function N(n,a,o,u){_(n,a,v(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function q(n){return{from:function(a){return n.prototype=Object.create(a.prototype),N(n.prototype,"constructor",n),{extend:b.bind(null,n.prototype)}}}}var E=Object.getOwnPropertyDescriptor,K=[].slice;function ae(n,a,o){return K.call(n,a,o)}function ee(n,a){return a(n)}function U(n){if(!n)throw new Error("Assertion Failed")}function Q(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function se(n,a){if(typeof a=="string"&&w(n,a))return n[a];if(!a)return n;if(typeof a!="string"){for(var o=[],u=0,f=a.length;u<f;++u){var p=se(n,a[u]);o.push(p)}return o}var g,m=a.indexOf(".");return m===-1||(g=n[a.substr(0,m)])==null?void 0:se(g,a.substr(m+1))}function X(n,a,o){if(n&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof a!="string"&&"length"in a){U(typeof o!="string"&&"length"in o);for(var u=0,f=a.length;u<f;++u)X(n,a[u],o[u])}else{var p,g,m=a.indexOf(".");m!==-1?(p=a.substr(0,m),(m=a.substr(m+1))===""?o===void 0?d(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o:X(g=(g=n[p])&&w(n,p)?g:n[p]={},m,o)):o===void 0?d(n)&&!isNaN(parseInt(a))?n.splice(a,1):delete n[a]:n[a]=o}}function ve(n){var a,o={};for(a in n)w(n,a)&&(o[a]=n[a]);return o}var ie=[].concat;function de(n){return ie.apply([],n)}var Pe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(de([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(a){return a+n+"Array"})}))).filter(function(n){return l[n]}),te=new Set(Pe.map(function(n){return l[n]})),Z=null;function $(n){return Z=new WeakMap,n=(function a(o){if(!o||typeof o!="object")return o;var u=Z.get(o);if(u)return u;if(d(o)){u=[],Z.set(o,u);for(var f=0,p=o.length;f<p;++f)u.push(a(o[f]))}else if(te.has(o.constructor))u=o;else{var g,m=h(o);for(g in u=m===Object.prototype?{}:Object.create(m),Z.set(o,u),o)w(o,g)&&(u[g]=a(o[g]))}return u})(n),Z=null,n}var Ee={}.toString;function _e(n){return Ee.call(n).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof Se=="symbol"?function(n){var a;return n!=null&&(a=n[Se])&&a.apply(n)}:function(){return null};function z(n,a){a=n.indexOf(a),0<=a&&n.splice(a,1)}var H={};function J(n){var a,o,u,f;if(arguments.length===1){if(d(n))return n.slice();if(this===H&&typeof n=="string")return[n];if(f=we(n))for(o=[];!(u=f.next()).done;)o.push(u.value);else{if(n==null)return[n];if(typeof(a=n.length)!="number")return[n];for(o=new Array(a);a--;)o[a]=n[a]}}else for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var le=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pe),Le={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Me(n,a){this.name=n,this.message=a}function Ae(n,a){return n+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,u,f){return f.indexOf(o)===u}).join(`
`)}function Je(n,a,o,u){this.failures=a,this.failedKeys=u,this.successCount=o,this.message=Ae(n,a)}function Re(n,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=Ae(n,this.failures)}q(Me).from(Error).extend({toString:function(){return this.name+": "+this.message}}),q(Je).from(Me),q(Re).from(Me);var tt=gt.reduce(function(n,a){return n[a]=a+"Error",n},{}),vt=Me,ye=gt.reduce(function(n,a){var o=a+"Error";function u(f,p){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(p?`
 `+p:""),this.inner=p||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=Le[a]||o,this.inner=null)}return q(u).from(vt),n[a]=u,n},{}),Mt=(ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError,Pe.reduce(function(n,a){return n[a+"Error"]=ye[a],n},{}));Pe=gt.reduce(function(n,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(n[a+"Error"]=ye[a]),n},{});function He(){}function rn(n){return n}function sa(n,a){return n==null||n===rn?a:function(o){return a(n(o))}}function Lt(n,a){return function(){n.apply(this,arguments),a.apply(this,arguments)}}function Ra(n,a){return n===He?a:function(){var o=n.apply(this,arguments),u=(o!==void 0&&(arguments[0]=o),this.onsuccess),f=this.onerror,p=(this.onsuccess=null,this.onerror=null,a.apply(this,arguments));return u&&(this.onsuccess=this.onsuccess?Lt(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Lt(f,this.onerror):f),p!==void 0?p:o}}function Pa(n,a){return n===He?a:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Lt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Lt(u,this.onerror):u)}}function sr(n,a){return n===He?a:function(f){var u=n.apply(this,arguments),f=(v(f,u),this.onsuccess),p=this.onerror,g=(this.onsuccess=null,this.onerror=null,a.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?Lt(f,this.onsuccess):f),p&&(this.onerror=this.onerror?Lt(p,this.onerror):p),u===void 0?g===void 0?void 0:g:v(u,g)}}function ia(n,a){return n===He?a:function(){return a.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function ir(n,a){return n===He?a:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];return o.then(function(){return a.apply(u,p)})}return a.apply(this,arguments)}}Pe.ModifyError=Je,Pe.DexieError=Me,Pe.BulkError=Re;var Xt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Oa(n){Xt=n}var Er={},oa=100,mn=typeof Promise>"u"?[]:(gt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[mn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(mn),gt]:[gt,h(gt),gt]),gt=mn[0],pa=mn[1],pa=pa&&pa.then,yt=gt&&gt.constructor,Tr=!!mn[2],or=function(n,a){Gn.push([n,a]),lr&&(queueMicrotask(fr),lr=!1)},la=!0,lr=!0,Pn=[],Un=[],ur=rn,bt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},Ce=bt,Gn=[],yn=0,ua=[];function ge(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Ce;if(typeof n!="function"){if(n!==Er)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Hn(this,this._value)}else this._state=null,this._value=null,++a.ref,(function o(u,f){try{f(function(p){if(u._state===null){if(p===u)throw new TypeError("A promise cannot be resolved with itself.");var g=u._lib&&dr();p&&typeof p.then=="function"?o(u,function(m,C){p instanceof ge?p._then(m,C):p.then(m,C)}):(u._state=!0,u._value=p,bs(u)),g&&Wn()}},Hn.bind(null,u))}catch(p){Hn(u,p)}})(this,n)}var cr={get:function(){var n=Ce,a=Rr;function o(u,f){var p=this,g=!n.global&&(n!==Ce||a!==Rr),m=g&&!_n(),C=new ge(function(M,I){Da(p,new ys(T(u,n,g,m),T(f,n,g,m),M,I,n))});return this._consoleTask&&(C._consoleTask=this._consoleTask),C}return o.prototype=Er,o},set:function(n){N(this,"then",n&&n.prototype===Er?cr:{get:function(){return n},set:cr.set})}};function ys(n,a,o,u,f){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=u,this.psd=f}function Hn(n,a){var o,u;Un.push(a),n._state===null&&(o=n._lib&&dr(),a=ur(a),n._state=!1,n._value=a,u=n,Pn.some(function(f){return f._value===u._value})||Pn.push(u),bs(n),o)&&Wn()}function bs(n){var a=n._listeners;n._listeners=[];for(var o=0,u=a.length;o<u;++o)Da(n,a[o]);var f=n._PSD;--f.ref||f.finalize(),yn===0&&(++yn,or(function(){--yn==0&&Ar()},[]))}function Da(n,a){if(n._state===null)n._listeners.push(a);else{var o=n._state?a.onFulfilled:a.onRejected;if(o===null)return(n._state?a.resolve:a.reject)(n._value);++a.psd.ref,++yn,or(ft,[o,n,a])}}function ft(n,a,o){try{var u,f=a._value;!a._state&&Un.length&&(Un=[]),u=Xt&&a._consoleTask?a._consoleTask.run(function(){return n(f)}):n(f),a._state||Un.indexOf(f)!==-1||(p=>{for(var g=Pn.length;g;)if(Pn[--g]._value===p._value)return Pn.splice(g,1)})(a),o.resolve(u)}catch(p){o.reject(p)}finally{--yn==0&&Ar(),--o.psd.ref||o.psd.finalize()}}function fr(){Ie(bt,function(){dr()&&Wn()})}function dr(){var n=la;return lr=la=!1,n}function Wn(){var n,a,o;do for(;0<Gn.length;)for(n=Gn,Gn=[],o=n.length,a=0;a<o;++a){var u=n[a];u[0].apply(null,u[1])}while(0<Gn.length);lr=la=!0}function Ar(){for(var n=Pn,a=(Pn=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)}),ua.slice(0)),o=a.length;o;)a[--o]()}function Cr(n){return new ge(Er,!1,n)}function nt(n,a){var o=Ce;return function(){var u=dr(),f=Ce;try{return wn(o,!0),n.apply(this,arguments)}catch(p){a&&a(p)}finally{wn(f,!1),u&&Wn()}}}b(ge.prototype,{then:cr,_then:function(n,a){Da(this,new ys(null,null,n,a,Ce))},catch:function(n){var a,o;return arguments.length===1?this.then(null,n):(a=n,o=arguments[1],typeof a=="function"?this.then(null,function(u){return(u instanceof a?o:Cr)(u)}):this.then(null,function(u){return(u&&u.name===a?o:Cr)(u)}))},finally:function(n){return this.then(function(a){return ge.resolve(n()).then(function(){return a})},function(a){return ge.resolve(n()).then(function(){return Cr(a)})})},timeout:function(n,a){var o=this;return n<1/0?new ge(function(u,f){var p=setTimeout(function(){return f(new ye.Timeout(a))},n);o.then(u,f).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(ge.prototype,Symbol.toStringTag,"Dexie.Promise"),bt.env=ws(),b(ge,{all:function(){var n=J.apply(null,arguments).map(Pr);return new ge(function(a,o){n.length===0&&a([]);var u=n.length;n.forEach(function(f,p){return ge.resolve(f).then(function(g){n[p]=g,--u||a(n)},o)})})},resolve:function(n){return n instanceof ge?n:n&&typeof n.then=="function"?new ge(function(a,o){n.then(a,o)}):new ge(Er,!0,n)},reject:Cr,race:function(){var n=J.apply(null,arguments).map(Pr);return new ge(function(a,o){n.map(function(u){return ge.resolve(u).then(a,o)})})},PSD:{get:function(){return Ce},set:function(n){return Ce=n}},totalEchoes:{get:function(){return Rr}},newPSD:bn,usePSD:Ie,scheduler:{get:function(){return or},set:function(n){or=n}},rejectionMapper:{get:function(){return ur},set:function(n){ur=n}},follow:function(n,a){return new ge(function(o,u){return bn(function(f,p){var g=Ce;g.unhandleds=[],g.onunhandled=p,g.finalize=Lt(function(){var m,C=this;m=function(){C.unhandleds.length===0?f():p(C.unhandleds[0])},ua.push(function M(){m(),ua.splice(ua.indexOf(M),1)}),++yn,or(function(){--yn==0&&Ar()},[])},g.finalize),n()},a,o,u)})}}),yt&&(yt.allSettled&&N(ge,"allSettled",function(){var n=J.apply(null,arguments).map(Pr);return new ge(function(a){n.length===0&&a([]);var o=n.length,u=new Array(o);n.forEach(function(f,p){return ge.resolve(f).then(function(g){return u[p]={status:"fulfilled",value:g}},function(g){return u[p]={status:"rejected",reason:g}}).then(function(){return--o||a(u)})})})}),yt.any&&typeof AggregateError<"u"&&N(ge,"any",function(){var n=J.apply(null,arguments).map(Pr);return new ge(function(a,o){n.length===0&&o(new AggregateError([]));var u=n.length,f=new Array(u);n.forEach(function(p,g){return ge.resolve(p).then(function(m){return a(m)},function(m){f[g]=m,--u||o(new AggregateError(f))})})})}),yt.withResolvers)&&(ge.withResolvers=yt.withResolvers);var mt={awaits:0,echoes:0,id:0},an=0,sn=[],Ir=0,Rr=0,Ma=0;function bn(n,g,o,u){var f=Ce,p=Object.create(f),g=(p.parent=f,p.ref=0,p.global=!1,p.id=++Ma,bt.env,p.env=Tr?{Promise:ge,PromiseProp:{value:ge,configurable:!0,writable:!0},all:ge.all,race:ge.race,allSettled:ge.allSettled,any:ge.any,resolve:ge.resolve,reject:ge.reject}:{},g&&v(p,g),++f.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},Ie(p,n,o,u));return p.ref===0&&p.finalize(),g}function It(){return mt.id||(mt.id=++an),++mt.awaits,mt.echoes+=oa,mt.id}function _n(){return!!mt.awaits&&(--mt.awaits==0&&(mt.id=0),mt.echoes=mt.awaits*oa,!0)}function Pr(n){return mt.echoes&&n&&n.constructor===yt?(It(),n.then(function(a){return _n(),a},function(a){return _n(),fe(a)})):n}function _s(){var n=sn[sn.length-1];sn.pop(),wn(n,!1)}function wn(n,a){var o,u,f=Ce;(a?!mt.echoes||Ir++&&n===Ce:!Ir||--Ir&&n===Ce)||queueMicrotask(a?(function(p){++Rr,mt.echoes&&--mt.echoes!=0||(mt.echoes=mt.awaits=mt.id=0),sn.push(Ce),wn(p,!0)}).bind(null,n):_s),n!==Ce&&(Ce=n,f===bt&&(bt.env=ws()),Tr)&&(o=bt.env.Promise,u=n.env,f.global||n.global)&&(Object.defineProperty(l,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any)&&(o.any=u.any)}function ws(){var n=l.Promise;return Tr?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Ie(n,a,o,u,f){var p=Ce;try{return wn(n,!0),a(o,u,f)}finally{wn(p,!1)}}function T(n,a,o,u){return typeof n!="function"?n:function(){var f=Ce;o&&It(),wn(a,!0);try{return n.apply(this,arguments)}finally{wn(f,!1),u&&queueMicrotask(_n)}}}function oe(n){Promise===yt&&mt.echoes===0?Ir===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+pa).indexOf("[native code]")===-1&&(It=_n=He);var fe=ge.reject,Xe="ï¿¿",rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",it="String expected.",dt=[],zt="__dbnames",On="readonly",Or="readwrite";function st(n,a){return n?a?function(){return n.apply(this,arguments)&&a.apply(this,arguments)}:n:a}var La={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dr(n){return typeof n!="string"||/\./.test(n)?function(a){return a}:function(a){return a[n]===void 0&&n in a&&delete(a=$(a))[n],a}}function Go(){throw ye.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function We(n,a){try{var o=Ho(n),u=Ho(a);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<n?1:n<a?-1:0;case"binary":for(var f=Wo(n),p=Wo(a),g=f.length,m=p.length,C=g<m?g:m,M=0;M<C;++M)if(f[M]!==p[M])return f[M]<p[M]?-1:1;return g===m?0:g<m?-1:1;case"Array":for(var I=n,S=a,P=I.length,O=S.length,R=P<O?P:O,A=0;A<R;++A){var j=We(I[A],S[A]);if(j!==0)return j}return P===O?0:P<O?-1:1}}catch{}return NaN}function Ho(n){var a=typeof n;return a=="object"&&(ArrayBuffer.isView(n)||(a=_e(n))==="ArrayBuffer")?"binary":a}function Wo(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function ks(n,a,o){var u=n.schema.yProps;return u?(a&&0<o.numFailures&&(a=a.filter(function(f,p){return!o.failures[p]})),Promise.all(u.map(function(f){return f=f.updatesTable,a?n.db.table(f).where("k").anyOf(a).delete():n.db.table(f).clear()})).then(function(){return o})):o}Yo.prototype.execute=function(n){var a=this["@@propmod"];if(a.add!==void 0){var o=a.add;if(d(o))return i(i([],d(n)?n:[],!0),o).sort();if(typeof o=="number")return(Number(n)||0)+o;if(typeof o=="bigint")try{return BigInt(n)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(a.remove!==void 0){var u=a.remove;if(d(u))return d(n)?n.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(n)-u;if(typeof u=="bigint")try{return BigInt(n)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return o=(o=a.replacePrefix)==null?void 0:o[0],o&&typeof n=="string"&&n.startsWith(o)?a.replacePrefix[1]+n.substring(o.length):n};var Na=Yo;function Yo(n){this["@@propmod"]=n}function Vo(n,a){for(var o=c(a),u=o.length,f=!1,p=0;p<u;++p){var g=o[p],m=a[g],C=se(n,g);m instanceof Na?(X(n,g,m.execute(C)),f=!0):C!==m&&(X(n,g,m),f=!0)}return f}at.prototype._trans=function(n,a,o){var u=this._tx||Ce.trans,f=this.name,p=Xt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function g(M,I,S){if(S.schema[f])return a(S.idbtrans,S);throw new ye.NotFound("Table "+f+" not part of transaction")}var m=dr();try{var C=u&&u.db._novip===this.db._novip?u===Ce.trans?u._promise(n,g,o):bn(function(){return u._promise(n,g,o)},{trans:u,transless:Ce.transless||Ce}):(function M(I,S,P,O){if(I.idbdb&&(I._state.openComplete||Ce.letThrough||I._vip)){var R=I._createTransaction(S,P,I._dbSchema);try{R.create(),I._state.PR1398_maxLoop=3}catch(A){return A.name===tt.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return M(I,S,P,O)})):fe(A)}return R._promise(S,function(A,j){return bn(function(){return Ce.trans=R,O(A,j,R)})}).then(function(A){if(S==="readwrite")try{R.idbtrans.commit()}catch{}return S==="readonly"?A:R._completion.then(function(){return A})})}if(I._state.openComplete)return fe(new ye.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return fe(new ye.DatabaseClosed);I.open().catch(He)}return I._state.dbReadyPromise.then(function(){return M(I,S,P,O)})})(this.db,n,[this.name],g);return p&&(C._consoleTask=p,C=C.catch(function(M){return console.trace(M),fe(M)})),C}finally{m&&Wn()}},at.prototype.get=function(n,a){var o=this;return n&&n.constructor===Object?this.where(n).first(a):n==null?fe(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},at.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(d(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var a=c(n);if(a.length===1)return this.where(a[0]).equals(n[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&a.every(function(M){return 0<=m.keyPath.indexOf(M)})){for(var C=0;C<a.length;++C)if(a.indexOf(m.keyPath[C])===-1)return!1;return!0}return!1}).sort(function(m,C){return m.keyPath.length-C.keyPath.length})[0];if(o&&this.db._maxKey!==Xe)return g=o.keyPath.slice(0,a.length),this.where(g).equals(g.map(function(m){return n[m]}));!o&&Xt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var u=this.schema.idxByName;function f(m,C){return We(m,C)===0}var g=a.reduce(function(I,C){var M=I[0],I=I[1],S=u[C],P=n[C];return[M||S,M||!S?st(I,S&&S.multi?function(O){return O=se(O,C),d(O)&&O.some(function(R){return f(P,R)})}:function(O){return f(P,se(O,C))}):I]},[null,null]),p=g[0],g=g[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(g):o?this.filter(g):this.where(a).equals("")},at.prototype.filter=function(n){return this.toCollection().and(n)},at.prototype.count=function(n){return this.toCollection().count(n)},at.prototype.offset=function(n){return this.toCollection().offset(n)},at.prototype.limit=function(n){return this.toCollection().limit(n)},at.prototype.each=function(n){return this.toCollection().each(n)},at.prototype.toArray=function(n){return this.toCollection().toArray(n)},at.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},at.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,d(n)?"[".concat(n.join("+"),"]"):n))},at.prototype.reverse=function(){return this.toCollection().reverse()},at.prototype.mapToClass=function(n){for(var a=this.db,o=this.name,u=((this.schema.mappedClass=n).prototype instanceof Go&&(n=(g=>{var m=I,C=g;if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function M(){this.constructor=m}function I(){return g!==null&&g.apply(this,arguments)||this}return r(m,C),m.prototype=C===null?Object.create(C):(M.prototype=C.prototype,new M),Object.defineProperty(I.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),I.prototype.table=function(){return o},I})(n)),new Set),f=n.prototype;f;f=h(f))Object.getOwnPropertyNames(f).forEach(function(g){return u.add(g)});function p(g){if(!g)return g;var m,C=Object.create(n.prototype);for(m in g)if(!u.has(m))try{C[m]=g[m]}catch{}return C}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),n},at.prototype.defineClass=function(){return this.mapToClass(function(n){v(this,n)})},at.prototype.add=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,p=u.keyPath,g=n;return p&&f&&(g=Dr(p)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"add",keys:a!=null?[a]:null,values:[g]})}).then(function(m){return m.numFailures?ge.reject(m.failures[0]):m.lastResult}).then(function(m){if(p)try{X(n,p,m)}catch{}return m})},at.prototype.upsert=function(n,a){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return o.core.get({trans:f,key:n}).then(function(p){var g=p??{};return Vo(g,a),u&&X(g,u,n),o.core.mutate({trans:f,type:"put",values:[g],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[a]}}).then(function(m){return m.numFailures?ge.reject(m.failures[0]):!!p})})})},at.prototype.update=function(n,a){return typeof n!="object"||d(n)?this.where(":id").equals(n).modify(a):(n=se(n,this.schema.primKey.keyPath))===void 0?fe(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(a)},at.prototype.put=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,p=u.keyPath,g=n;return p&&f&&(g=Dr(p)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"put",values:[g],keys:a!=null?[a]:null})}).then(function(m){return m.numFailures?ge.reject(m.failures[0]):m.lastResult}).then(function(m){if(p)try{X(n,p,m)}catch{}return m})},at.prototype.delete=function(n){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return ks(a,[n],u)}).then(function(u){return u.numFailures?ge.reject(u.failures[0]):void 0})})},at.prototype.clear=function(){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"deleteRange",range:La}).then(function(o){return ks(n,null,o)})}).then(function(a){return a.numFailures?ge.reject(a.failures[0]):void 0})},at.prototype.bulkGet=function(n){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(f){return a.hook.reading.fire(f)})})})},at.prototype.bulkAdd=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0,p=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(g){var m=u.schema.primKey,M=m.auto,m=m.keyPath;if(m&&f)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var C=n.length,M=m&&M?n.map(Dr(m)):n;return u.core.mutate({trans:g,type:"add",keys:f,values:M,wantResults:p}).then(function(I){var S=I.numFailures,P=I.failures;if(S===0)return p?I.results:I.lastResult;throw new Re("".concat(u.name,".bulkAdd(): ").concat(S," of ").concat(C," operations failed"),P)})})},at.prototype.bulkPut=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0,p=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(g){var m=u.schema.primKey,M=m.auto,m=m.keyPath;if(m&&f)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var C=n.length,M=m&&M?n.map(Dr(m)):n;return u.core.mutate({trans:g,type:"put",keys:f,values:M,wantResults:p}).then(function(I){var S=I.numFailures,P=I.failures;if(S===0)return p?I.results:I.lastResult;throw new Re("".concat(u.name,".bulkPut(): ").concat(S," of ").concat(C," operations failed"),P)})})},at.prototype.bulkUpdate=function(n){var a=this,o=this.core,u=n.map(function(g){return g.key}),f=n.map(function(g){return g.changes}),p=[];return this._trans("readwrite",function(g){return o.getMany({trans:g,keys:u,cache:"clone"}).then(function(m){var C=[],M=[],I=(n.forEach(function(S,P){var O=S.key,R=S.changes,A=m[P];if(A){for(var j=0,B=Object.keys(R);j<B.length;j++){var D=B[j],W=R[D];if(D===a.schema.primKey.keyPath){if(We(W,O)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else X(A,D,W)}p.push(P),C.push(O),M.push(A)}}),C.length);return o.mutate({trans:g,type:"put",keys:C,values:M,updates:{keys:u,changeSpecs:f}}).then(function(S){var P=S.numFailures,O=S.failures;if(P===0)return I;for(var R=0,A=Object.keys(O);R<A.length;R++){var j,B=A[R],D=p[Number(B)];D!=null&&(j=O[B],delete O[B],O[D]=j)}throw new Re("".concat(a.name,".bulkUpdate(): ").concat(P," of ").concat(I," operations failed"),O)})})})},at.prototype.bulkDelete=function(n){var a=this,o=n.length;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:n}).then(function(f){return ks(a,n,f)})}).then(function(u){var f=u.numFailures,p=u.failures;if(f===0)return u.lastResult;throw new Re("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),p)})};var Xo=at;function at(){}function qa(n){function a(g,m){if(m){for(var C=arguments.length,M=new Array(C-1);--C;)M[C-1]=arguments[C];return o[g].subscribe.apply(null,M),n}if(typeof g=="string")return o[g]}var o={};a.addEventType=p;for(var u=1,f=arguments.length;u<f;++u)p(arguments[u]);return a;function p(g,m,C){var M,I;if(typeof g!="object")return m=m||ia,I={subscribers:[],fire:C=C||He,subscribe:function(S){I.subscribers.indexOf(S)===-1&&(I.subscribers.push(S),I.fire=m(I.fire,S))},unsubscribe:function(S){I.subscribers=I.subscribers.filter(function(P){return P!==S}),I.fire=I.subscribers.reduce(m,C)}},o[g]=a[g]=I;c(M=g).forEach(function(S){var P=M[S];if(d(P))p(S,M[S][0],M[S][1]);else{if(P!=="asap")throw new ye.InvalidArgument("Invalid event config");var O=p(S,rn,function(){for(var R=arguments.length,A=new Array(R);R--;)A[R]=arguments[R];O.subscribers.forEach(function(j){Q(function(){j.apply(null,A)})})})}})}}function ja(n,a){return q(a).from({prototype:n}),a}function ca(n,a){return!(n.filter||n.algorithm||n.or)&&(a?n.justLimit:!n.replayFilter)}function pi(n,a){n.filter=st(n.filter,a)}function hi(n,a,o){var u=n.replayFilter;n.replayFilter=u?function(){return st(u(),a())}:a,n.justLimit=o&&!u}function xs(n,a){if(n.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(n.index);if(o)return o;throw new ye.Schema("KeyPath "+n.index+" on object store "+a.name+" is not indexed")}function Zo(n,a,o){var u=xs(n,a.schema);return a.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function Ss(n,a,o,u){var f,p,g=n.replayFilter?st(n.filter,n.replayFilter()):n.filter;return n.or?(f={},p=function(m,C,M){var I,S;g&&!g(C,M,function(P){return C.stop(P)},function(P){return C.fail(P)})||((S=""+(I=C.primaryKey))=="[object ArrayBuffer]"&&(S=""+new Uint8Array(I)),w(f,S))||(f[S]=!0,a(m,C,M))},Promise.all([n.or._iterate(p,o),Qo(Zo(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])):Qo(Zo(n,u,o),st(n.algorithm,g),a,!n.keysOnly&&n.valueMapper)}function Qo(n,a,o,u){var f=nt(u?function(p,g,m){return o(u(p),g,m)}:o);return n.then(function(p){if(p)return p.start(function(){var g=function(){return p.continue()};a&&!a(p,function(m){return g=m},function(m){p.stop(m),g=He},function(m){p.fail(m),g=He})||f(p.value,p,function(m){return g=m}),g()})})}Ze.prototype._read=function(n,a){var o=this._ctx;return o.error?o.table._trans(null,fe.bind(null,o.error)):o.table._trans("readonly",n).then(a)},Ze.prototype._write=function(n){var a=this._ctx;return a.error?a.table._trans(null,fe.bind(null,a.error)):a.table._trans("readwrite",n,"locked")},Ze.prototype._addAlgorithm=function(n){var a=this._ctx;a.algorithm=st(a.algorithm,n)},Ze.prototype._iterate=function(n,a){return Ss(this._ctx,n,a,this._ctx.table.core)},Ze.prototype.clone=function(n){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&v(o,n),a._ctx=o,a},Ze.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ze.prototype.each=function(n){var a=this._ctx;return this._read(function(o){return Ss(a,n,o,a.table.core)})},Ze.prototype.count=function(n){var a=this;return this._read(function(o){var u,f=a._ctx,p=f.table.core;return ca(f,!0)?p.count({trans:o,query:{index:xs(f,p.schema),range:f.range}}).then(function(g){return Math.min(g,f.limit)}):(u=0,Ss(f,function(){return++u,!1},o,p).then(function(){return u}))}).then(n)},Ze.prototype.sortBy=function(n,a){var o=n.split(".").reverse(),u=o[0],f=o.length-1;function p(C,M){return M?p(C[o[M]],M-1):C[u]}var g=this._ctx.dir==="next"?1:-1;function m(C,M){return We(p(C,f),p(M,f))*g}return this.toArray(function(C){return C.sort(m)}).then(a)},Ze.prototype.toArray=function(n){var a=this;return this._read(function(o){var u,f,p,g=a._ctx;return g.dir==="next"&&ca(g,!0)&&0<g.limit?(u=g.valueMapper,f=xs(g,g.table.core.schema),g.table.core.query({trans:o,limit:g.limit,values:!0,query:{index:f,range:g.range}}).then(function(m){return m=m.result,u?m.map(u):m})):(p=[],Ss(g,function(m){return p.push(m)},o,g.table.core).then(function(){return p}))},n)},Ze.prototype.offset=function(n){var a=this._ctx;return n<=0||(a.offset+=n,ca(a)?hi(a,function(){var o=n;return function(u,f){return o===0||(o===1?--o:f(function(){u.advance(o),o=0}),!1)}}):hi(a,function(){var o=n;return function(){return--o<0}})),this},Ze.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),hi(this._ctx,function(){var a=n;return function(o,u,f){return--a<=0&&u(f),0<=a}},!0),this},Ze.prototype.until=function(n,a){return pi(this._ctx,function(o,u,f){return!n(o.value)||(u(f),a)}),this},Ze.prototype.first=function(n){return this.limit(1).toArray(function(a){return a[0]}).then(n)},Ze.prototype.last=function(n){return this.reverse().first(n)},Ze.prototype.filter=function(n){var a;return pi(this._ctx,function(o){return n(o.value)}),(a=this._ctx).isMatch=st(a.isMatch,n),this},Ze.prototype.and=function(n){return this.filter(n)},Ze.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},Ze.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ze.prototype.desc=function(){return this.reverse()},Ze.prototype.eachKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.key,u)})},Ze.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},Ze.prototype.eachPrimaryKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},Ze.prototype.keys=function(n){var a=this._ctx,o=(a.keysOnly=!a.isMatch,[]);return this.each(function(u,f){o.push(f.key)}).then(function(){return o}).then(n)},Ze.prototype.primaryKeys=function(n){var a=this._ctx;if(a.dir==="next"&&ca(a,!0)&&0<a.limit)return this._read(function(u){var f=xs(a,a.table.core.schema);return a.table.core.query({trans:u,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(u){return u.result}).then(n);a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.primaryKey)}).then(function(){return o}).then(n)},Ze.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},Ze.prototype.firstKey=function(n){return this.limit(1).keys(function(a){return a[0]}).then(n)},Ze.prototype.lastKey=function(n){return this.reverse().firstKey(n)},Ze.prototype.distinct=function(){var n,a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];return a&&a.multi&&(n={},pi(this._ctx,function(u){var u=u.primaryKey.toString(),f=w(n,u);return n[u]=!0,!f})),this},Ze.prototype.modify=function(n){var a=this,o=this._ctx;return this._write(function(u){function f(A,j){var B=j.failures;P+=A-j.numFailures;for(var D=0,W=c(B);D<W.length;D++){var ne=W[D];S.push(B[ne])}}var p=typeof n=="function"?n:function(A){return Vo(A,n)},g=o.table.core,I=g.schema.primaryKey,m=I.outbound,C=I.extractKey,M=200,I=a.db._options.modifyChunkSize,S=(I&&(M=typeof I=="object"?I[g.name]||I["*"]||200:I),[]),P=0,O=[],R=n===$o;return a.clone().primaryKeys().then(function(A){function j(D){var W=Math.min(M,A.length-D),ne=A.slice(D,D+W);return(R?Promise.resolve([]):g.getMany({trans:u,keys:ne,cache:"immutable"})).then(function(pe){var he=[],re=[],xe=m?[]:null,be=R?ne:[];if(!R)for(var ce=0;ce<W;++ce){var Te=pe[ce],Ye={value:$(Te),primKey:A[D+ce]};p.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?be.push(A[D+ce]):m||We(C(Te),C(Ye.value))===0?(re.push(Ye.value),m&&xe.push(A[D+ce])):(be.push(A[D+ce]),he.push(Ye.value)))}return Promise.resolve(0<he.length&&g.mutate({trans:u,type:"add",values:he}).then(function(Qe){for(var Ne in Qe.failures)be.splice(parseInt(Ne),1);f(he.length,Qe)})).then(function(){return(0<re.length||B&&typeof n=="object")&&g.mutate({trans:u,type:"put",keys:xe,values:re,criteria:B,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<D}).then(function(Qe){return f(re.length,Qe)})}).then(function(){return(0<be.length||B&&R)&&g.mutate({trans:u,type:"delete",keys:be,criteria:B,isAdditionalChunk:0<D}).then(function(Qe){return ks(o.table,be,Qe)}).then(function(Qe){return f(be.length,Qe)})}).then(function(){return A.length>D+W&&j(D+M)})})}var B=ca(o)&&o.limit===1/0&&(typeof n!="function"||R)&&{index:o.index,range:o.range};return j(0).then(function(){if(0<S.length)throw new Je("Error modifying one or more objects",S,P,O);return A.length})})})},Ze.prototype.delete=function(){var n=this._ctx,a=n.range;return!ca(n)||n.table.schema.yProps||!n.isPrimKey&&a.type!==3?this.modify($o):this._write(function(o){var u=n.table.core.schema.primaryKey,f=a;return n.table.core.count({trans:o,query:{index:u,range:f}}).then(function(p){return n.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(C){var m=C.failures,C=C.numFailures;if(C)throw new Je("Could not delete some values",Object.keys(m).map(function(M){return m[M]}),p-C);return p-C})})})};var qc=Ze;function Ze(){}var $o=function(n,a){return a.value=null};function jc(n,a){return n<a?-1:n===a?0:1}function Bc(n,a){return a<n?-1:n===a?0:1}function Zt(n,a,o){return n=n instanceof el?new n.Collection(n):n,n._ctx.error=new(o||TypeError)(a),n}function fa(n){return new n.Collection(n,function(){return Jo("")}).limit(0)}function Es(O,a,o,u){var f,p,g,m,C,M,I,S=o.length;if(!o.every(function(A){return typeof A=="string"}))return Zt(O,it);function P(A){f=A==="next"?function(B){return B.toUpperCase()}:function(B){return B.toLowerCase()},p=A==="next"?function(B){return B.toLowerCase()}:function(B){return B.toUpperCase()},g=A==="next"?jc:Bc;var j=o.map(function(B){return{lower:p(B),upper:f(B)}}).sort(function(B,D){return g(B.lower,D.lower)});m=j.map(function(B){return B.upper}),C=j.map(function(B){return B.lower}),I=(M=A)==="next"?"":u}P("next");var O=new O.Collection(O,function(){return pr(m[0],C[S-1]+u)}),R=(O._ondirectionchange=function(A){P(A)},0);return O._addAlgorithm(function(A,j,B){var D=A.key;if(typeof D=="string"){var W=p(D);if(a(W,C,R))return!0;for(var ne=null,pe=R;pe<S;++pe){var he=((re,xe,be,ce,Te,Ye)=>{for(var Qe=Math.min(re.length,ce.length),Ne=-1,Be=0;Be<Qe;++Be){var ot=xe[Be];if(ot!==ce[Be])return Te(re[Be],be[Be])<0?re.substr(0,Be)+be[Be]+be.substr(Be+1):Te(re[Be],ce[Be])<0?re.substr(0,Be)+ce[Be]+be.substr(Be+1):0<=Ne?re.substr(0,Ne)+xe[Ne]+be.substr(Ne+1):null;Te(re[Be],ot)<0&&(Ne=Be)}return Qe<ce.length&&Ye==="next"?re+be.substr(re.length):Qe<re.length&&Ye==="prev"?re.substr(0,be.length):Ne<0?null:re.substr(0,Ne)+ce[Ne]+be.substr(Ne+1)})(D,W,m[pe],C[pe],g,M);he===null&&ne===null?R=pe+1:(ne===null||0<g(ne,he))&&(ne=he)}j(ne!==null?function(){A.continue(ne+I)}:B)}return!1}),O}function pr(n,a,o,u){return{type:2,lower:n,upper:a,lowerOpen:o,upperOpen:u}}function Jo(n){return{type:1,lower:n,upper:n}}Object.defineProperty(_t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_t.prototype.between=function(n,a,o,u){o=o!==!1,u=u===!0;try{return 0<this._cmp(n,a)||this._cmp(n,a)===0&&(o||u)&&(!o||!u)?fa(this):new this.Collection(this,function(){return pr(n,a,!o,!u)})}catch{return Zt(this,rt)}},_t.prototype.equals=function(n){return n==null?Zt(this,rt):new this.Collection(this,function(){return Jo(n)})},_t.prototype.above=function(n){return n==null?Zt(this,rt):new this.Collection(this,function(){return pr(n,void 0,!0)})},_t.prototype.aboveOrEqual=function(n){return n==null?Zt(this,rt):new this.Collection(this,function(){return pr(n,void 0,!1)})},_t.prototype.below=function(n){return n==null?Zt(this,rt):new this.Collection(this,function(){return pr(void 0,n,!1,!0)})},_t.prototype.belowOrEqual=function(n){return n==null?Zt(this,rt):new this.Collection(this,function(){return pr(void 0,n)})},_t.prototype.startsWith=function(n){return typeof n!="string"?Zt(this,it):this.between(n,n+Xe,!0,!0)},_t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Es(this,function(a,o){return a.indexOf(o[0])===0},[n],Xe)},_t.prototype.equalsIgnoreCase=function(n){return Es(this,function(a,o){return a===o[0]},[n],"")},_t.prototype.anyOfIgnoreCase=function(){var n=J.apply(H,arguments);return n.length===0?fa(this):Es(this,function(a,o){return o.indexOf(a)!==-1},n,"")},_t.prototype.startsWithAnyOfIgnoreCase=function(){var n=J.apply(H,arguments);return n.length===0?fa(this):Es(this,function(a,o){return o.some(function(u){return a.indexOf(u)===0})},n,Xe)},_t.prototype.anyOf=function(){var n,a,o=this,u=J.apply(H,arguments),f=this._cmp;try{u.sort(f)}catch{return Zt(this,rt)}return u.length===0?fa(this):((n=new this.Collection(this,function(){return pr(u[0],u[u.length-1])}))._ondirectionchange=function(p){f=p==="next"?o._ascending:o._descending,u.sort(f)},a=0,n._addAlgorithm(function(p,g,m){for(var C=p.key;0<f(C,u[a]);)if(++a===u.length)return g(m),!1;return f(C,u[a])===0||(g(function(){p.continue(u[a])}),!1)}),n)},_t.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_t.prototype.noneOf=function(){var n=J.apply(H,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Zt(this,rt)}var a=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[-1/0,u]]},null);return a.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},_t.prototype.inAnyRange=function(n,B){var o=this,u=this._cmp,f=this._ascending,p=this._descending,g=this._min,m=this._max;if(n.length===0)return fa(this);if(!n.every(function(D){return D[0]!==void 0&&D[1]!==void 0&&f(D[0],D[1])<=0}))return Zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var C=!B||B.includeLowers!==!1,M=B&&B.includeUppers===!0,I,S=f;function P(D,W){return S(D[0],W[0])}try{(I=n.reduce(function(D,W){for(var ne=0,pe=D.length;ne<pe;++ne){var he=D[ne];if(u(W[0],he[1])<0&&0<u(W[1],he[0])){he[0]=g(he[0],W[0]),he[1]=m(he[1],W[1]);break}}return ne===pe&&D.push(W),D},[])).sort(P)}catch{return Zt(this,rt)}var O=0,R=M?function(D){return 0<f(D,I[O][1])}:function(D){return 0<=f(D,I[O][1])},A=C?function(D){return 0<p(D,I[O][0])}:function(D){return 0<=p(D,I[O][0])},j=R,B=new this.Collection(this,function(){return pr(I[0][0],I[I.length-1][1],!C,!M)});return B._ondirectionchange=function(D){S=D==="next"?(j=R,f):(j=A,p),I.sort(P)},B._addAlgorithm(function(D,W,ne){for(var pe,he=D.key;j(he);)if(++O===I.length)return W(ne),!1;return!R(pe=he)&&!A(pe)||(o._cmp(he,I[O][1])===0||o._cmp(he,I[O][0])===0||W(function(){S===f?D.continue(I[O][0]):D.continue(I[O][1])}),!1)}),B},_t.prototype.startsWithAnyOf=function(){var n=J.apply(H,arguments);return n.every(function(a){return typeof a=="string"})?n.length===0?fa(this):this.inAnyRange(n.map(function(a){return[a,a+Xe]})):Zt(this,"startsWithAnyOf() only works with strings")};var el=_t;function _t(){}function Dn(n){return nt(function(a){return Ba(a),n(a.target.error),!1})}function Ba(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var za="storagemutated",vi="x-storagemutated-1",hr=qa(null,za),zc=(Mn.prototype._lock=function(){return U(!Ce.global),++this._reculock,this._reculock!==1||Ce.global||(Ce.lockOwnerFor=this),this},Mn.prototype._unlock=function(){if(U(!Ce.global),--this._reculock==0)for(Ce.global||(Ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{Ie(n[1],n[0])}catch{}}return this},Mn.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},Mn.prototype.create=function(n){var a=this;if(this.mode){var o=this.db.idbdb,u=this.db._state.dbOpenError;if(U(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(u);case"MissingAPIError":throw new ye.MissingAPI(u.message,u);default:throw new ye.OpenFailed(u)}if(!this.active)throw new ye.TransactionInactive;U(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=nt(function(f){Ba(f),a._reject(n.error)}),n.onabort=nt(function(f){Ba(f),a.active&&a._reject(new ye.Abort(n.error)),a.active=!1,a.on("abort").fire(f)}),n.oncomplete=nt(function(){a.active=!1,a._resolve(),"mutatedParts"in n&&hr.storagemutated.fire(n.mutatedParts)})}return this},Mn.prototype._promise=function(n,a,o){var u,f=this;return n==="readwrite"&&this.mode!=="readwrite"?fe(new ye.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ge(function(p,g){f._blockedFuncs.push([function(){f._promise(n,a,o).then(p,g)},Ce])}):o?bn(function(){var p=new ge(function(g,m){f._lock();var C=a(g,m,f);C&&C.then&&C.then(g,m)});return p.finally(function(){return f._unlock()}),p._lib=!0,p}):((u=new ge(function(p,g){var m=a(p,g,f);m&&m.then&&m.then(p,g)}))._lib=!0,u):fe(new ye.TransactionInactive)},Mn.prototype._root=function(){return this.parent?this.parent._root():this},Mn.prototype.waitFor=function(n){var a,o=this._root(),u=ge.resolve(n),f=(o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return u}):(o._waitingFor=u,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=p)})()),o._waitingFor);return new ge(function(p,g){u.then(function(m){return o._waitingQueue.push(nt(p.bind(null,m)))},function(m){return o._waitingQueue.push(nt(g.bind(null,m)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},Mn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},Mn.prototype.table=function(n){var a=this._memoizedTables||(this._memoizedTables={});if(w(a,n))return a[n];var o=this.schema[n];if(o)return(o=new this.db.Table(n,o,this)).core=this.db.core.table(n),a[n]=o;throw new ye.NotFound("Table "+n+" not part of transaction")},Mn);function Mn(){}function gi(n,a,o,u,f,p,g,m){return{name:n,keyPath:a,unique:o,multi:u,auto:f,compound:p,src:(o&&!g?"&":"")+(u?"*":"")+(f?"++":"")+tl(a),type:m}}function tl(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function mi(n,a,o){return{name:n,primKey:a,indexes:o,mappedClass:null,idxByName:(u=function(f){return[f.name,f]},o.reduce(function(f,p,g){return p=u(p,g),p&&(f[p[0]]=p[1]),f},{}))};var u}var Fa=function(n){try{return n.only([[]]),Fa=function(){return[[]]},[[]]}catch{return Fa=function(){return Xe},Xe}};function yi(n){return n==null?function(){}:typeof n=="string"?(a=n).split(".").length===1?function(o){return o[a]}:function(o){return se(o,a)}:function(o){return se(o,n)};var a}function nl(n){return[].slice.call(n)}var Fc=0;function Ka(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Kc(n,a,C){function u(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=R.lower,P=R.upper,O=R.lowerOpen,R=R.upperOpen;return S===void 0?P===void 0?null:a.upperBound(P,!!R):P===void 0?a.lowerBound(S,!!O):a.bound(S,P,!!O,!!R)}function f(I){var S,P=I.name;return{name:P,schema:I,mutate:function(O){var R=O.trans,A=O.type,j=O.keys,B=O.values,D=O.range;return new Promise(function(W,ne){W=nt(W);var pe=R.objectStore(P),he=pe.keyPath==null,re=A==="put"||A==="add";if(!re&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var xe,be=(j||B||{length:1}).length;if(j&&B&&j.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(be===0)return W({numFailures:0,failures:{},results:[],lastResult:void 0});function ce(lt){++Qe,Ba(lt)}var Te=[],Ye=[],Qe=0;if(A==="deleteRange"){if(D.type===4)return W({numFailures:Qe,failures:Ye,results:[],lastResult:void 0});D.type===3?Te.push(xe=pe.clear()):Te.push(xe=pe.delete(u(D)))}else{var he=re?he?[B,j]:[B,null]:[j,null],Ne=he[0],Be=he[1];if(re)for(var ot=0;ot<be;++ot)Te.push(xe=Be&&Be[ot]!==void 0?pe[A](Ne[ot],Be[ot]):pe[A](Ne[ot])),xe.onerror=ce;else for(ot=0;ot<be;++ot)Te.push(xe=pe[A](Ne[ot])),xe.onerror=ce}function on(lt){lt=lt.target.result,Te.forEach(function(Nr,Ni){return Nr.error!=null&&(Ye[Ni]=Nr.error)}),W({numFailures:Qe,failures:Ye,results:A==="delete"?j:Te.map(function(Nr){return Nr.result}),lastResult:lt})}xe.onerror=function(lt){ce(lt),on(lt)},xe.onsuccess=on})},getMany:function(O){var R=O.trans,A=O.keys;return new Promise(function(j,B){j=nt(j);for(var D,W=R.objectStore(P),ne=A.length,pe=new Array(ne),he=0,re=0,xe=function(Te){Te=Te.target,pe[Te._pos]=Te.result,++re===he&&j(pe)},be=Dn(B),ce=0;ce<ne;++ce)A[ce]!=null&&((D=W.get(A[ce]))._pos=ce,D.onsuccess=xe,D.onerror=be,++he);he===0&&j(pe)})},get:function(O){var R=O.trans,A=O.key;return new Promise(function(j,B){j=nt(j);var D=R.objectStore(P).get(A);D.onsuccess=function(W){return j(W.target.result)},D.onerror=Dn(B)})},query:(S=m,function(O){return new Promise(function(R,A){R=nt(R);var j,B,D,re=O.trans,W=O.values,ne=O.limit,he=O.query,pe=ne===1/0?void 0:ne,xe=he.index,he=he.range,re=re.objectStore(P),re=xe.isPrimaryKey?re:re.index(xe.name),xe=u(he);if(ne===0)return R({result:[]});S?((he=W?re.getAll(xe,pe):re.getAllKeys(xe,pe)).onsuccess=function(be){return R({result:be.target.result})},he.onerror=Dn(A)):(j=0,B=!W&&"openKeyCursor"in re?re.openKeyCursor(xe):re.openCursor(xe),D=[],B.onsuccess=function(be){var ce=B.result;return!ce||(D.push(W?ce.value:ce.primaryKey),++j===ne)?R({result:D}):void ce.continue()},B.onerror=Dn(A))})}),openCursor:function(O){var R=O.trans,A=O.values,j=O.query,B=O.reverse,D=O.unique;return new Promise(function(W,ne){W=nt(W);var re=j.index,pe=j.range,he=R.objectStore(P),he=re.isPrimaryKey?he:he.index(re.name),re=B?D?"prevunique":"prev":D?"nextunique":"next",xe=!A&&"openKeyCursor"in he?he.openKeyCursor(u(pe),re):he.openCursor(u(pe),re);xe.onerror=Dn(ne),xe.onsuccess=nt(function(be){var ce,Te,Ye,Qe,Ne=xe.result;Ne?(Ne.___id=++Fc,Ne.done=!1,ce=Ne.continue.bind(Ne),Te=(Te=Ne.continuePrimaryKey)&&Te.bind(Ne),Ye=Ne.advance.bind(Ne),Qe=function(){throw new Error("Cursor not stopped")},Ne.trans=R,Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=function(){throw new Error("Cursor not started")},Ne.fail=nt(ne),Ne.next=function(){var Be=this,ot=1;return this.start(function(){return ot--?Be.continue():Be.stop()}).then(function(){return Be})},Ne.start=function(Be){function ot(){if(xe.result)try{Be()}catch(lt){Ne.fail(lt)}else Ne.done=!0,Ne.start=function(){throw new Error("Cursor behind last entry")},Ne.stop()}var on=new Promise(function(lt,Nr){lt=nt(lt),xe.onerror=Dn(Nr),Ne.fail=Nr,Ne.stop=function(Ni){Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=Qe,lt(Ni)}});return xe.onsuccess=nt(function(lt){xe.onsuccess=ot,ot()}),Ne.continue=ce,Ne.continuePrimaryKey=Te,Ne.advance=Ye,ot(),on},W(Ne)):W(null)},ne)})},count:function(O){var R=O.query,A=O.trans,j=R.index,B=R.range;return new Promise(function(D,W){var ne=A.objectStore(P),ne=j.isPrimaryKey?ne:ne.index(j.name),pe=u(B),pe=pe?ne.count(pe):ne.count();pe.onsuccess=nt(function(he){return D(he.target.result)}),pe.onerror=Dn(W)})}}}p=C,g=nl((C=n).objectStoreNames);var p,C={schema:{name:C.name,tables:g.map(function(I){return p.objectStore(I)}).map(function(I){var S=I.keyPath,P=I.autoIncrement,R=d(S),O={},R={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:R,keyPath:S,autoIncrement:P,unique:!0,extractKey:yi(S)},indexes:nl(I.indexNames).map(function(A){return I.index(A)}).map(function(D){var W=D.name,j=D.unique,B=D.multiEntry,D=D.keyPath,W={name:W,compound:d(D),keyPath:D,unique:j,multiEntry:B,extractKey:yi(D)};return O[Ka(D)]=W}),getIndexByKeyPath:function(A){return O[Ka(A)]}};return O[":id"]=R.primaryKey,S!=null&&(O[Ka(S)]=R.primaryKey),R})},hasGetAll:0<g.length&&"getAll"in p.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},g=C.schema,m=C.hasGetAll,C=g.tables.map(f),M={};return C.forEach(function(I){return M[I.name]=I}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(I){if(M[I])return M[I];throw new Error("Table '".concat(I,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Fa(a),schema:g}}function Uc(n,a,o,u){return o=o.IDBKeyRange,a=Kc(a,o,u),{dbcore:n.dbcore.reduce(function(f,p){return p=p.create,s(s({},f),p(f))},a)}}function Ts(n,a){var o=a.db,o=Uc(n._middlewares,o,n._deps,a);n.core=o.dbcore,n.tables.forEach(function(u){var f=u.name;n.core.schema.tables.some(function(p){return p.name===f})&&(u.core=n.core.table(f),n[f]instanceof n.Table)&&(n[f].core=u.core)})}function As(n,a,o,u){o.forEach(function(f){var p=u[f];a.forEach(function(g){var m=(function C(M,I){return E(M,I)||(M=h(M))&&C(M,I)})(g,f);(!m||"value"in m&&m.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?N(g,f,{get:function(){return this.table(f)},set:function(C){_(this,f,{value:C,writable:!0,configurable:!0,enumerable:!0})}}):g[f]=new n.Table(f,p))})})}function bi(n,a){a.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function Gc(n,a){return n._cfg.version-a._cfg.version}function Hc(n,a,o,u){var f=n._dbSchema,p=(o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=mi("$meta",al("")[0],[]),n._storeNames.push("$meta")),n._createTransaction("readwrite",n._storeNames,f)),g=(p.create(o),p._completion.catch(u),p._reject.bind(p)),m=Ce.transless||Ce;bn(function(){if(Ce.trans=p,Ce.transless=m,a!==0)return Ts(n,o),M=a,((C=p).storeNames.includes("$meta")?C.table("$meta").get("version").then(function(I){return I??M}):ge.resolve(M)).then(function(j){var S=n,P=j,O=p,R=o,A=[],j=S._versions,B=S._dbSchema=Is(0,S.idbdb,R);return(j=j.filter(function(D){return D._cfg.version>=P})).length===0?ge.resolve():(j.forEach(function(D){A.push(function(){var W,ne,pe,he=B,re=D._cfg.dbschema,xe=(Rs(S,he,R),Rs(S,re,R),B=S._dbSchema=re,_i(he,re)),be=(xe.add.forEach(function(ce){wi(R,ce[0],ce[1].primKey,ce[1].indexes)}),xe.change.forEach(function(ce){if(ce.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var Te=R.objectStore(ce.name);ce.add.forEach(function(Ye){return Cs(Te,Ye)}),ce.change.forEach(function(Ye){Te.deleteIndex(Ye.name),Cs(Te,Ye)}),ce.del.forEach(function(Ye){return Te.deleteIndex(Ye)})}),D._cfg.contentUpgrade);if(be&&D._cfg.version>P)return Ts(S,R),O._memoizedTables={},W=ve(re),xe.del.forEach(function(ce){W[ce]=he[ce]}),bi(S,[S.Transaction.prototype]),As(S,[S.Transaction.prototype],c(W),W),O.schema=W,(ne=le(be))&&It(),re=ge.follow(function(){var ce;(pe=be(O))&&ne&&(ce=_n.bind(null,null),pe.then(ce,ce))}),pe&&typeof pe.then=="function"?ge.resolve(pe):re.then(function(){return pe})}),A.push(function(W){var ne,pe,he=D._cfg.dbschema;ne=he,pe=W,[].slice.call(pe.db.objectStoreNames).forEach(function(re){return ne[re]==null&&pe.db.deleteObjectStore(re)}),bi(S,[S.Transaction.prototype]),As(S,[S.Transaction.prototype],S._storeNames,S._dbSchema),O.schema=S._dbSchema}),A.push(function(W){S.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(S.idbdb.version/10)===D._cfg.version?(S.idbdb.deleteObjectStore("$meta"),delete S._dbSchema.$meta,S._storeNames=S._storeNames.filter(function(ne){return ne!=="$meta"})):W.objectStore("$meta").put(D._cfg.version,"version"))})}),(function D(){return A.length?ge.resolve(A.shift()(O.idbtrans)).then(D):ge.resolve()})().then(function(){rl(B,R)}))}).catch(g);var C,M;c(f).forEach(function(I){wi(o,I,f[I].primKey,f[I].indexes)}),Ts(n,o),ge.follow(function(){return n.on.populate.fire(p)}).catch(g)})}function Wc(n,a){rl(n._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=Is(0,n.idbdb,a);Rs(n,n._dbSchema,a);for(var u=0,f=_i(o,n._dbSchema).change;u<f.length;u++){var p=(g=>{if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=a.objectStore(g.name);g.add.forEach(function(C){Xt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(C.src)),Cs(m,C)})})(f[u]);if(typeof p=="object")return p.value}}function _i(n,a){var o,u={del:[],add:[],change:[]};for(o in n)a[o]||u.del.push(o);for(o in a){var f=n[o],p=a[o];if(f){var g={name:o,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||f.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var m=f.idxByName,C=p.idxByName,M=void 0;for(M in m)C[M]||g.del.push(M);for(M in C){var I=m[M],S=C[M];I?I.src!==S.src&&g.change.push(S):g.add.push(S)}(0<g.del.length||0<g.add.length||0<g.change.length)&&u.change.push(g)}}else u.add.push([o,p])}return u}function wi(n,a,o,u){var f=n.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});u.forEach(function(p){return Cs(f,p)})}function rl(n,a){c(n).forEach(function(o){a.db.objectStoreNames.contains(o)||(Xt&&console.debug("Dexie: Creating missing table",o),wi(a,o,n[o].primKey,n[o].indexes))})}function Cs(n,a){n.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function Is(n,a,o){var u={};return ae(a.objectStoreNames,0).forEach(function(f){for(var p=o.objectStore(f),g=gi(tl(M=p.keyPath),M||"",!0,!1,!!p.autoIncrement,M&&typeof M!="string",!0),m=[],C=0;C<p.indexNames.length;++C){var I=p.index(p.indexNames[C]),M=I.keyPath,I=gi(I.name,M,!!I.unique,!!I.multiEntry,!1,M&&typeof M!="string",!1);m.push(I)}u[f]=mi(f,g,m)}),u}function Rs(n,a,o){for(var u=o.db.objectStoreNames,f=0;f<u.length;++f){var p=u[f],g=o.objectStore(p);n._hasGetAll="getAll"in g;for(var m=0;m<g.indexNames.length;++m){var C,M=g.indexNames[m],I=g.index(M).keyPath,I=typeof I=="string"?I:"["+ae(I).join("+")+"]";a[p]&&(C=a[p].idxByName[I])&&(C.name=M,delete a[p].idxByName[I],a[p].idxByName[M]=C)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function al(n){return n.split(",").map(function(a,o){var f=a.split(":"),u=(u=f[1])==null?void 0:u.trim(),f=(a=f[0].trim()).replace(/([&*]|\+\+)/g,""),p=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return gi(f,p||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),d(p),o===0,u)})}da.prototype._createTableSchema=mi,da.prototype._parseIndexSyntax=al,da.prototype._parseStoresSpec=function(n,a){var o=this;c(n).forEach(function(u){if(n[u]!==null){var f=o._parseIndexSyntax(n[u]),p=f.shift();if(!p)throw new ye.Schema("Invalid schema for table "+u+": "+n[u]);if(p.unique=!0,p.multi)throw new ye.Schema("Primary key cannot be multiEntry*");f.forEach(function(g){if(g.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),p=o._createTableSchema(u,p,f),a[u]=p}})},da.prototype.stores=function(o){var a=this.db,o=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,o):o,a._versions),u={},f={};return o.forEach(function(p){v(u,p._cfg.storesSource),f=p._cfg.dbschema={},p._parseStoresSpec(u,f)}),a._dbSchema=f,bi(a,[a._allTables,a,a.Transaction.prototype]),As(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],c(f),f),a._storeNames=c(f),this},da.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ir(this._cfg.contentUpgrade||He,n),this};var Yc=da;function da(){}function ki(n,a){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Yn(zt,{addons:[],indexedDB:n,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function xi(n){return n&&typeof n.databases=="function"}function Si(n){return bn(function(){return Ce.letThrough=!0,n()})}function Ei(n){return!("from"in n)}var Rt=function(n,a){var o;if(!this)return o=new Rt,n&&"d"in n&&v(o,n),o;v(this,arguments.length?{d:1,from:n,to:1<arguments.length?a:n}:{d:0})};function Ua(n,a,o){var u=We(a,o);if(!isNaN(u)){if(0<u)throw RangeError();if(Ei(n))return v(n,{from:a,to:o,d:1});var u=n.l,f=n.r;if(We(o,n.from)<0)return u?Ua(u,a,o):n.l={from:a,to:o,d:1,l:null,r:null},il(n);if(0<We(a,n.to))return f?Ua(f,a,o):n.r={from:a,to:o,d:1,l:null,r:null},il(n);We(a,n.from)<0&&(n.from=a,n.l=null,n.d=f?f.d+1:1),0<We(o,n.to)&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1),a=!n.r,u&&!n.l&&Ga(n,u),f&&a&&Ga(n,f)}}function Ga(n,a){Ei(a)||(function o(u,f){var p=f.from,g=f.l,m=f.r;Ua(u,p,f.to),g&&o(u,g),m&&o(u,m)})(n,a)}function sl(n,a){var o=Ps(a),u=o.next();if(!u.done)for(var f=u.value,p=Ps(n),g=p.next(f.from),m=g.value;!u.done&&!g.done;){if(We(m.from,f.to)<=0&&0<=We(m.to,f.from))return!0;We(f.from,m.from)<0?f=(u=o.next(m.from)).value:m=(g=p.next(f.from)).value}return!1}function Ps(n){var a=Ei(n)?null:{s:0,n};return{next:function(o){for(var u=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,u)for(;a.n.l&&We(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!u||We(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function il(n){var a,o,u,f=(((f=n.r)==null?void 0:f.d)||0)-(((f=n.l)==null?void 0:f.d)||0),f=1<f?"r":f<-1?"l":"";f&&(a=f=="r"?"l":"r",o=s({},n),u=n[f],n.from=u.from,n.to=u.to,n[f]=u[f],o[f]=u[a],(n[a]=o).d=ol(o)),n.d=ol(n)}function ol(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Os(n,a){return c(a).forEach(function(o){n[o]?Ga(n[o],a[o]):n[o]=(function u(f){var p,g,m={};for(p in f)w(f,p)&&(g=f[p],m[p]=!g||typeof g!="object"||te.has(g.constructor)?g:u(g));return m})(a[o])}),n}function Ti(n,a){return n.all||a.all||Object.keys(n).some(function(o){return a[o]&&sl(a[o],n[o])})}b(Rt.prototype,((gt={add:function(n){return Ga(this,n),this},addKey:function(n){return Ua(this,n,n),this},addKeys:function(n){var a=this;return n.forEach(function(o){return Ua(a,o,o)}),this},hasKey:function(n){var a=Ps(this).next(n).value;return a&&We(a.from,n)<=0&&0<=We(a.to,n)}})[Se]=function(){return Ps(this)},gt));var Mr={},Ai={},Ci=!1;function Ds(n){Os(Ai,n),Ci||(Ci=!0,setTimeout(function(){Ci=!1,Ii(Ai,!(Ai={}))},0))}function Ii(n,a){a===void 0&&(a=!1);var o=new Set;if(n.all)for(var u=0,f=Object.values(Mr);u<f.length;u++)ll(m=f[u],n,o,a);else for(var p in n){var g,m,p=/^idb\:\/\/(.*)\/(.*)\//.exec(p);p&&(g=p[1],p=p[2],m=Mr["idb://".concat(g,"/").concat(p)])&&ll(m,n,o,a)}o.forEach(function(C){return C()})}function ll(n,a,o,u){for(var f=[],p=0,g=Object.entries(n.queries.query);p<g.length;p++){for(var m=g[p],C=m[0],M=[],I=0,S=m[1];I<S.length;I++){var P=S[I];Ti(a,P.obsSet)?P.subscribers.forEach(function(j){return o.add(j)}):u&&M.push(P)}u&&f.push([C,M])}if(u)for(var O=0,R=f;O<R.length;O++){var A=R[O],C=A[0],M=A[1];n.queries.query[C]=M}}function Vc(n){var a=n._state,o=n._deps.indexedDB;if(a.isBeingOpened||n.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?fe(a.dbOpenError):n});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var u=a.openCanceller,f=Math.round(10*n.verno),p=!1;function g(){if(a.openCanceller!==u)throw new ye.DatabaseClosed("db.open() was cancelled")}function m(){return new ge(function(P,O){if(g(),!o)throw new ye.MissingAPI;var R=n.name,A=a.autoSchema||!f?o.open(R):o.open(R,f);if(!A)throw new ye.MissingAPI;A.onerror=Dn(O),A.onblocked=nt(n._fireOnBlocked),A.onupgradeneeded=nt(function(j){var B;I=A.transaction,a.autoSchema&&!n._options.allowEmptyDB?(A.onerror=Ba,I.abort(),A.result.close(),(B=o.deleteDatabase(R)).onsuccess=B.onerror=nt(function(){O(new ye.NoSuchDatabase("Database ".concat(R," doesnt exist")))})):(I.onerror=Dn(O),B=j.oldVersion>Math.pow(2,62)?0:j.oldVersion,S=B<1,n.idbdb=A.result,p&&Wc(n,I),Hc(n,B/10,I,O))},O),A.onsuccess=nt(function(){I=null;var j,B,D,W,ne,pe,he=n.idbdb=A.result,re=ae(he.objectStoreNames);if(0<re.length)try{var xe=he.transaction((ne=re).length===1?ne[0]:ne,"readonly");if(a.autoSchema)pe=he,W=xe,(D=n).verno=pe.version/10,W=D._dbSchema=Is(0,pe,W),D._storeNames=ae(pe.objectStoreNames,0),As(D,[D._allTables],c(W),W);else if(Rs(n,n._dbSchema,xe),B=xe,((B=_i(Is(0,(j=n).idbdb,B),j._dbSchema)).add.length||B.change.some(function(be){return be.add.length||be.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),he.close(),f=he.version+1,p=!0,P(m());Ts(n,xe)}catch{}dt.push(n),he.onversionchange=nt(function(be){a.vcFired=!0,n.on("versionchange").fire(be)}),he.onclose=nt(function(){n.close({disableAutoOpen:!1})}),S&&(re=n._deps,ne=R,xi(pe=re.indexedDB)||ne===zt||ki(pe,re.IDBKeyRange).put({name:ne}).catch(He)),P()},O)}).catch(function(P){switch(P==null?void 0:P.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<f)return f=0,m()}return ge.reject(P)})}var C,M=a.dbReadyResolve,I=null,S=!1;return ge.race([u,(typeof navigator>"u"?ge.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function O(){return indexedDB.databases().finally(P)}C=setInterval(O,100),O()}).finally(function(){return clearInterval(C)}):Promise.resolve()).then(m)]).then(function(){return g(),a.onReadyBeingFired=[],ge.resolve(Si(function(){return n.on.ready.fire(n.vip)})).then(function P(){var O;if(0<a.onReadyBeingFired.length)return O=a.onReadyBeingFired.reduce(ir,He),a.onReadyBeingFired=[],ge.resolve(Si(function(){return O(n.vip)})).then(P)})}).finally(function(){a.openCanceller===u&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(P){a.dbOpenError=P;try{I&&I.abort()}catch{}return u===a.openCanceller&&n._close(),fe(P)}).finally(function(){a.openComplete=!0,M()}).then(function(){var P;return S&&(P={},n.tables.forEach(function(O){O.schema.indexes.forEach(function(R){R.name&&(P["idb://".concat(n.name,"/").concat(O.name,"/").concat(R.name)]=new Rt(-1/0,[[[]]]))}),P["idb://".concat(n.name,"/").concat(O.name,"/")]=P["idb://".concat(n.name,"/").concat(O.name,"/:dels")]=new Rt(-1/0,[[[]]])}),hr(za).fire(P),Ii(P,!0)),n})}function Ri(n){function a(p){return n.next(p)}var o=f(a),u=f(function(p){return n.throw(p)});function f(p){return function(m){var m=p(m),C=m.value;return m.done?C:C&&typeof C.then=="function"?C.then(o,u):d(C)?Promise.all(C).then(o,u):o(C)}}return f(a)()}function Ms(n,a,o){for(var u=d(n)?n.slice():[n],f=0;f<o;++f)u.push(a);return u}var Xc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return s(s({},n),{table:function(u){var o=n.table(u),u=o.schema,f={},p=[];function g(P,O,R){var D=Ka(P),A=f[D]=f[D]||[],j=P==null?0:typeof P=="string"?1:P.length,B=0<O,D=s(s({},R),{name:B?"".concat(D,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:B,keyTail:O,keyLength:j,extractKey:yi(P),unique:!B&&R.unique});return A.push(D),D.isPrimaryKey||p.push(D),1<j&&g(j===2?P[0]:P.slice(0,j-1),O+1,R),A.sort(function(W,ne){return W.keyTail-ne.keyTail}),D}var m=g(u.primaryKey.keyPath,0,u.primaryKey);f[":id"]=[m];for(var C=0,M=u.indexes;C<M.length;C++){var I=M[C];g(I.keyPath,0,I)}function S(P){var O,R=P.query.index;return R.isVirtual?s(s({},P),{query:{index:R.lowLevelIndex,range:(O=P.query.range,R=R.keyTail,{type:O.type===1?2:O.type,lower:Ms(O.lower,O.lowerOpen?n.MAX_KEY:n.MIN_KEY,R),lowerOpen:!0,upper:Ms(O.upper,O.upperOpen?n.MIN_KEY:n.MAX_KEY,R),upperOpen:!0})}}):P}return s(s({},o),{schema:s(s({},u),{primaryKey:m,indexes:p,getIndexByKeyPath:function(P){return(P=f[Ka(P)])&&P[0]}}),count:function(P){return o.count(S(P))},query:function(P){return o.query(S(P))},openCursor:function(P){var O=P.query.index,R=O.keyTail,A=O.keyLength;return O.isVirtual?o.openCursor(S(P)).then(function(B){return B&&j(B)}):o.openCursor(P);function j(B){return Object.create(B,{continue:{value:function(D){D!=null?B.continue(Ms(D,P.reverse?n.MAX_KEY:n.MIN_KEY,R)):P.unique?B.continue(B.key.slice(0,A).concat(P.reverse?n.MIN_KEY:n.MAX_KEY,R)):B.continue()}},continuePrimaryKey:{value:function(D,W){B.continuePrimaryKey(Ms(D,n.MAX_KEY,R),W)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var D=B.key;return A===1?D[0]:D.slice(0,A)}},value:{get:function(){return B.value}}})}}})}})}};function Pi(n,a,o,u){return o=o||{},u=u||"",c(n).forEach(function(f){var p,g,m;w(a,f)?(p=n[f],g=a[f],typeof p=="object"&&typeof g=="object"&&p&&g?(m=_e(p))!==_e(g)?o[u+f]=a[f]:m==="Object"?Pi(p,g,o,u+f+"."):p!==g&&(o[u+f]=a[f]):p!==g&&(o[u+f]=a[f])):o[u+f]=void 0}),c(a).forEach(function(f){w(n,f)||(o[u+f]=a[f])}),o}function Oi(n,a){return a.type==="delete"?a.keys:a.keys||a.values.map(n.extractKey)}var Zc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(a){var o=n.table(a),u=o.schema.primaryKey;return s(s({},o),{mutate:function(f){var p=Ce.trans,g=p.table(a).hook,m=g.deleting,C=g.creating,M=g.updating;switch(f.type){case"add":if(C.fire===He)break;return p._promise("readwrite",function(){return I(f)},!0);case"put":if(C.fire===He&&M.fire===He)break;return p._promise("readwrite",function(){return I(f)},!0);case"delete":if(m.fire===He)break;return p._promise("readwrite",function(){return I(f)},!0);case"deleteRange":if(m.fire===He)break;return p._promise("readwrite",function(){return(function S(P,O,R){return o.query({trans:P,values:!1,query:{index:u,range:O},limit:R}).then(function(A){var j=A.result;return I({type:"delete",keys:j,trans:P}).then(function(B){return 0<B.numFailures?Promise.reject(B.failures[0]):j.length<R?{failures:[],numFailures:0,lastResult:void 0}:S(P,s(s({},O),{lower:j[j.length-1],lowerOpen:!0}),R)})})})(f.trans,f.range,1e4)},!0)}return o.mutate(f);function I(S){var P,O,R,A=Ce.trans,j=S.keys||Oi(u,S);if(j)return(S=S.type==="add"||S.type==="put"?s(s({},S),{keys:j}):s({},S)).type!=="delete"&&(S.values=i([],S.values)),S.keys&&(S.keys=i([],S.keys)),P=o,R=j,((O=S).type==="add"?Promise.resolve([]):P.getMany({trans:O.trans,keys:R,cache:"immutable"})).then(function(B){var D=j.map(function(W,ne){var pe,he,re,xe=B[ne],be={onerror:null,onsuccess:null};return S.type==="delete"?m.fire.call(be,W,xe,A):S.type==="add"||xe===void 0?(pe=C.fire.call(be,W,S.values[ne],A),W==null&&pe!=null&&(S.keys[ne]=W=pe,u.outbound||X(S.values[ne],u.keyPath,W))):(pe=Pi(xe,S.values[ne]),(he=M.fire.call(be,pe,W,xe,A))&&(re=S.values[ne],Object.keys(he).forEach(function(ce){w(re,ce)?re[ce]=he[ce]:X(re,ce,he[ce])}))),be});return o.mutate(S).then(function(W){for(var ne=W.failures,pe=W.results,he=W.numFailures,W=W.lastResult,re=0;re<j.length;++re){var xe=(pe||j)[re],be=D[re];xe==null?be.onerror&&be.onerror(ne[re]):be.onsuccess&&be.onsuccess(S.type==="put"&&B[re]?S.values[re]:xe)}return{failures:ne,results:pe,numFailures:he,lastResult:W}}).catch(function(W){return D.forEach(function(ne){return ne.onerror&&ne.onerror(W)}),Promise.reject(W)})});throw new Error("Keys missing")}}})}})}};function ul(n,a,o){try{if(!a||a.keys.length<n.length)return null;for(var u=[],f=0,p=0;f<a.keys.length&&p<n.length;++f)We(a.keys[f],n[p])===0&&(u.push(o?$(a.values[f]):a.values[f]),++p);return u.length===n.length?u:null}catch{return null}}var Qc={stack:"dbcore",level:-1,create:function(n){return{table:function(a){var o=n.table(a);return s(s({},o),{getMany:function(u){var f;return u.cache?(f=ul(u.keys,u.trans._cache,u.cache==="clone"))?ge.resolve(f):o.getMany(u).then(function(p){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?$(p):p},p}):o.getMany(u)},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function cl(n,a){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function fl(n,a){switch(n){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $c={stack:"dbcore",level:0,name:"Observability",create:function(n){var a=n.schema.name,o=new Rt(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(u,f,p){if(Ce.subscr&&f!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return n.transaction(u,f,p)},table:function(u){function f(j){var A,j=j.query;return[A=j.index,new Rt((A=(j=j.range).lower)!=null?A:n.MIN_KEY,(A=j.upper)!=null?A:n.MAX_KEY)]}var p=n.table(u),g=p.schema,m=g.primaryKey,C=g.indexes,M=m.extractKey,I=m.outbound,S=m.autoIncrement&&C.filter(function(R){return R.compound&&R.keyPath.includes(m.keyPath)}),P=s(s({},p),{mutate:function(R){function A(Te){return Te="idb://".concat(a,"/").concat(u,"/").concat(Te),ne[Te]||(ne[Te]=new Rt)}var j,B,D,W=R.trans,ne=R.mutatedParts||(R.mutatedParts={}),pe=A(""),he=A(":dels"),re=R.type,be=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[Oi(m,R).filter(function(Te){return Te}),R.values]:[],xe=be[0],be=be[1],ce=R.trans._cache;return d(xe)?(pe.addKeys(xe),(re=re==="delete"||xe.length===be.length?ul(xe,ce):null)||he.addKeys(xe),(re||be)&&(j=A,B=re,D=be,g.indexes.forEach(function(Te){var Ye=j(Te.name||"");function Qe(Be){return Be!=null?Te.extractKey(Be):null}function Ne(Be){Te.multiEntry&&d(Be)?Be.forEach(function(ot){return Ye.addKey(ot)}):Ye.addKey(Be)}(B||D).forEach(function(Be,lt){var on=B&&Qe(B[lt]),lt=D&&Qe(D[lt]);We(on,lt)!==0&&(on!=null&&Ne(on),lt!=null)&&Ne(lt)})}))):xe?(be={from:(ce=xe.lower)!=null?ce:n.MIN_KEY,to:(re=xe.upper)!=null?re:n.MAX_KEY},he.add(be),pe.add(be)):(pe.add(o),he.add(o),g.indexes.forEach(function(Te){return A(Te.name).add(o)})),p.mutate(R).then(function(Te){return!xe||R.type!=="add"&&R.type!=="put"||(pe.addKeys(Te.results),S&&S.forEach(function(Ye){for(var Qe=R.values.map(function(on){return Ye.extractKey(on)}),Ne=Ye.keyPath.findIndex(function(on){return on===m.keyPath}),Be=0,ot=Te.results.length;Be<ot;++Be)Qe[Be][Ne]=Te.results[Be];A(Ye.name).addKeys(Qe)})),W.mutatedParts=Os(W.mutatedParts||{},ne),Te})}}),O={get:function(R){return[m,new Rt(R.key)]},getMany:function(R){return[m,new Rt().addKeys(R.keys)]},count:f,query:f,openCursor:f};return c(O).forEach(function(R){P[R]=function(A){var j=Ce.subscr,B=!!j,D=cl(Ce,p)&&fl(R,A)?A.obsSet={}:j;if(B){var W,j=function(be){return be="idb://".concat(a,"/").concat(u,"/").concat(be),D[be]||(D[be]=new Rt)},ne=j(""),pe=j(":dels"),B=O[R](A),he=B[0],B=B[1];if((R==="query"&&he.isPrimaryKey&&!A.values?pe:j(he.name||"")).add(B),!he.isPrimaryKey){if(R!=="count")return W=R==="query"&&I&&A.values&&p.query(s(s({},A),{values:!1})),p[R].apply(this,arguments).then(function(be){if(R==="query"){if(I&&A.values)return W.then(function(Qe){return Qe=Qe.result,ne.addKeys(Qe),be});var ce=A.values?be.result.map(M):be.result;(A.values?ne:pe).addKeys(ce)}else{var Te,Ye;if(R==="openCursor")return Ye=A.values,(Te=be)&&Object.create(Te,{key:{get:function(){return pe.addKey(Te.primaryKey),Te.key}},primaryKey:{get:function(){var Qe=Te.primaryKey;return pe.addKey(Qe),Qe}},value:{get:function(){return Ye&&ne.addKey(Te.primaryKey),Te.value}}})}return be});pe.add(o)}}return p[R].apply(this,arguments)}}),P}})}};function dl(n,a,o){var u;return o.numFailures===0?a:a.type==="deleteRange"||(u=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1,o.numFailures===u)?null:(u=s({},a),d(u.keys)&&(u.keys=u.keys.filter(function(f,p){return!(p in o.failures)})),"values"in u&&d(u.values)&&(u.values=u.values.filter(function(f,p){return!(p in o.failures)})),u)}function Di(n,a){return o=n,((u=a).lower===void 0||(u.lowerOpen?0<We(o,u.lower):0<=We(o,u.lower)))&&(o=n,(u=a).upper===void 0||(u.upperOpen?We(o,u.upper)<0:We(o,u.upper)<=0));var o,u}function pl(n,a,o,u,f,p){var g,m,C,M,I,S;return!o||o.length===0||(g=a.query.index,m=g.multiEntry,C=a.query.range,M=u.schema.primaryKey.extractKey,I=g.extractKey,S=(g.lowLevelIndex||g).extractKey,(u=o.reduce(function(P,O){var R=P,A=[];if(O.type==="add"||O.type==="put")for(var j=new Rt,B=O.values.length-1;0<=B;--B){var D,W=O.values[B],ne=M(W);!j.hasKey(ne)&&(D=I(W),m&&d(D)?D.some(function(be){return Di(be,C)}):Di(D,C))&&(j.addKey(ne),A.push(W))}switch(O.type){case"add":var pe=new Rt().addKeys(a.values?P.map(function(ce){return M(ce)}):P),R=P.concat(a.values?A.filter(function(ce){return ce=M(ce),!pe.hasKey(ce)&&(pe.addKey(ce),!0)}):A.map(function(ce){return M(ce)}).filter(function(ce){return!pe.hasKey(ce)&&(pe.addKey(ce),!0)}));break;case"put":var he=new Rt().addKeys(O.values.map(function(ce){return M(ce)}));R=P.filter(function(ce){return!he.hasKey(a.values?M(ce):ce)}).concat(a.values?A:A.map(function(ce){return M(ce)}));break;case"delete":var re=new Rt().addKeys(O.keys);R=P.filter(function(ce){return!re.hasKey(a.values?M(ce):ce)});break;case"deleteRange":var xe=O.range;R=P.filter(function(ce){return!Di(M(ce),xe)})}return R},n))===n)?n:(u.sort(function(P,O){return We(S(P),S(O))||We(M(P),M(O))}),a.limit&&a.limit<1/0&&(u.length>a.limit?u.length=a.limit:n.length===a.limit&&u.length<a.limit&&(f.dirty=!0)),p?Object.freeze(u):u)}function hl(n,a){return We(n.lower,a.lower)===0&&We(n.upper,a.upper)===0&&!!n.lowerOpen==!!a.lowerOpen&&!!n.upperOpen==!!a.upperOpen}function Jc(n,a){return((o,u,f,p)=>{if(o===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((o=We(o,u))===0){if(f&&p)return 0;if(f)return 1;if(p)return-1}return o})(n.lower,a.lower,n.lowerOpen,a.lowerOpen)<=0&&0<=((o,u,f,p)=>{if(o===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((o=We(o,u))===0){if(f&&p)return 0;if(f)return-1;if(p)return 1}return o})(n.upper,a.upper,n.upperOpen,a.upperOpen)}function ef(n,a,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){var f,p;n.subscribers.delete(o),n.subscribers.size===0&&(f=n,p=a,setTimeout(function(){f.subscribers.size===0&&z(p,f)},3e3))})}var tf={stack:"dbcore",level:0,name:"Cache",create:function(n){var a=n.schema.name;return s(s({},n),{transaction:function(o,u,f){var p,g,m=n.transaction(o,u,f);return u==="readwrite"&&(f=(p=new AbortController).signal,m.addEventListener("abort",(g=function(C){return function(){if(p.abort(),u==="readwrite"){for(var M=new Set,I=0,S=o;I<S.length;I++){var P=S[I],O=Mr["idb://".concat(a,"/").concat(P)];if(O){var R=n.table(P),A=O.optimisticOps.filter(function(Te){return Te.trans===m});if(m._explicit&&C&&m.mutatedParts)for(var j=0,B=Object.values(O.queries.query);j<B.length;j++)for(var D=0,W=(he=B[j]).slice();D<W.length;D++)Ti((re=W[D]).obsSet,m.mutatedParts)&&(z(he,re),re.subscribers.forEach(function(Te){return M.add(Te)}));else if(0<A.length){O.optimisticOps=O.optimisticOps.filter(function(Te){return Te.trans!==m});for(var ne=0,pe=Object.values(O.queries.query);ne<pe.length;ne++)for(var he,re,xe,be=0,ce=(he=pe[ne]).slice();be<ce.length;be++)(re=ce[be]).res!=null&&m.mutatedParts&&(C&&!re.dirty?(xe=Object.isFrozen(re.res),xe=pl(re.res,re.req,A,R,re,xe),re.dirty?(z(he,re),re.subscribers.forEach(function(Te){return M.add(Te)})):xe!==re.res&&(re.res=xe,re.promise=ge.resolve({result:xe}))):(re.dirty&&z(he,re),re.subscribers.forEach(function(Te){return M.add(Te)})))}}}M.forEach(function(Te){return Te()})}}})(!1),{signal:f}),m.addEventListener("error",g(!1),{signal:f}),m.addEventListener("complete",g(!0),{signal:f})),m},table:function(o){var u=n.table(o),f=u.schema.primaryKey;return s(s({},u),{mutate:function(p){var g,m=Ce.trans;return!f.outbound&&m.db._options.cache!=="disabled"&&!m.explicit&&m.idbtrans.mode==="readwrite"&&(g=Mr["idb://".concat(a,"/").concat(o)])?(m=u.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Oi(f,p).some(function(C){return C==null}))?(g.optimisticOps.push(p),p.mutatedParts&&Ds(p.mutatedParts),m.then(function(C){0<C.numFailures&&(z(g.optimisticOps,p),(C=dl(0,p,C))&&g.optimisticOps.push(C),p.mutatedParts)&&Ds(p.mutatedParts)}),m.catch(function(){z(g.optimisticOps,p),p.mutatedParts&&Ds(p.mutatedParts)})):m.then(function(C){var M=dl(0,s(s({},p),{values:p.values.map(function(I,S){var P;return C.failures[S]?I:(X(P=(P=f.keyPath)!=null&&P.includes(".")?$(I):s({},I),f.keyPath,C.results[S]),P)})}),C);g.optimisticOps.push(M),queueMicrotask(function(){return p.mutatedParts&&Ds(p.mutatedParts)})}),m):u.mutate(p)},query:function(p){var g,m,C,M,I,S,P;return cl(Ce,u)&&fl("query",p)?(g=((C=Ce.trans)==null?void 0:C.db._options.cache)==="immutable",m=(C=Ce).requery,C=C.signal,S=((O,R,A,j)=>{var B=Mr["idb://".concat(O,"/").concat(R)];if(!B)return[];if(!(O=B.queries[A]))return[null,!1,B,null];var D=O[(j.query?j.query.index.name:null)||""];if(!D)return[null,!1,B,null];switch(A){case"query":var W=D.find(function(ne){return ne.req.limit===j.limit&&ne.req.values===j.values&&hl(ne.req.query.range,j.query.range)});return W?[W,!0,B,D]:[D.find(function(ne){return("limit"in ne.req?ne.req.limit:1/0)>=j.limit&&(!j.values||ne.req.values)&&Jc(ne.req.query.range,j.query.range)}),!1,B,D];case"count":return W=D.find(function(ne){return hl(ne.req.query.range,j.query.range)}),[W,!!W,B,D]}})(a,o,"query",p),P=S[0],M=S[2],I=S[3],P&&S[1]?P.obsSet=p.obsSet:(S=u.query(p).then(function(O){var R=O.result;if(P&&(P.res=R),g){for(var A=0,j=R.length;A<j;++A)Object.freeze(R[A]);Object.freeze(R)}else O.result=$(R);return O}).catch(function(O){return I&&P&&z(I,P),Promise.reject(O)}),P={obsSet:p.obsSet,promise:S,subscribers:new Set,type:"query",req:p,dirty:!1},I?I.push(P):(I=[P],(M=M||(Mr["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=I)),ef(P,I,m,C),P.promise.then(function(O){return{result:pl(O.result,p,M==null?void 0:M.optimisticOps,u,P,g)}})):u.query(p)}})}})}};function Ls(n,a){return new Proxy(n,{get:function(o,u,f){return u==="db"?a:Reflect.get(o,u,f)}})}pt.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ye.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var a=this._versions,o=a.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),a.push(o),a.sort(Gc),o.stores({}),this._state.autoSchema=!1),o},pt.prototype._whenReady=function(n){var a=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?n():new ge(function(o,u){if(a._state.openComplete)return u(new ye.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void u(new ye.DatabaseClosed);a.open().catch(He)}a._state.dbReadyPromise.then(o,u)}).then(n)},pt.prototype.use=function(f){var a=f.stack,o=f.create,u=f.level,f=f.name,p=(f&&this.unuse({stack:a,name:f}),this._middlewares[a]||(this._middlewares[a]=[]));return p.push({stack:a,create:o,level:u??10,name:f}),p.sort(function(g,m){return g.level-m.level}),this},pt.prototype.unuse=function(n){var a=n.stack,o=n.name,u=n.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return u?f.create!==u:!!o&&f.name!==o})),this},pt.prototype.open=function(){var n=this;return Ie(bt,function(){return Vc(n)})},pt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,a=dt.indexOf(this);if(0<=a&&dt.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new ge(function(o){n.dbReadyResolve=o}),n.openCanceller=new ge(function(o,u){n.cancelOpen=u}))},pt.prototype.close=function(a){var a=(a===void 0?{disableAutoOpen:!0}:a).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new ye.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new ye.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},pt.prototype.delete=function(n){var a=this,o=(n===void 0&&(n={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),u=this._state;return new ge(function(f,p){function g(){a.close(n);var m=a._deps.indexedDB.deleteDatabase(a.name);m.onsuccess=nt(function(){var C,M,I;C=a._deps,M=a.name,xi(I=C.indexedDB)||M===zt||ki(I,C.IDBKeyRange).delete(M).catch(He),f()}),m.onerror=Dn(p),m.onblocked=a._fireOnBlocked}if(o)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(g):g()})},pt.prototype.backendDB=function(){return this.idbdb},pt.prototype.isOpen=function(){return this.idbdb!==null},pt.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pt.prototype,"tables",{get:function(){var n=this;return c(this._allTables).map(function(a){return n._allTables[a]})},enumerable:!1,configurable:!0}),pt.prototype.transaction=function(){var n=(function(a,o,u){var f=arguments.length;if(f<2)throw new ye.InvalidArgument("Too few arguments");for(var p=new Array(f-1);--f;)p[f-1]=arguments[f];return u=p.pop(),[a,de(p),u]}).apply(this,arguments);return this._transaction.apply(this,n)},pt.prototype._transaction=function(n,a,o){var u,f,p=this,g=Ce.trans,m=(g&&g.db===this&&n.indexOf("!")===-1||(g=null),n.indexOf("?")!==-1);n=n.replace("!","").replace("?","");try{if(f=a.map(function(M){if(M=M instanceof p.Table?M.name:M,typeof M!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return M}),n=="r"||n===On)u=On;else{if(n!="rw"&&n!=Or)throw new ye.InvalidArgument("Invalid transaction mode: "+n);u=Or}if(g){if(g.mode===On&&u===Or){if(!m)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&f.forEach(function(M){if(g&&g.storeNames.indexOf(M)===-1){if(!m)throw new ye.SubTransaction("Table "+M+" not included in parent transaction.");g=null}}),m&&g&&!g.active&&(g=null)}}catch(M){return g?g._promise(null,function(I,S){S(M)}):fe(M)}var C=(function M(I,S,P,O,R){return ge.resolve().then(function(){var D=Ce.transless||Ce,A=I._createTransaction(S,P,I._dbSchema,O),D=(A.explicit=!0,{trans:A,transless:D});if(O)A.idbtrans=O.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,I._state.PR1398_maxLoop=3}catch(W){return W.name===tt.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return M(I,S,P,null,R)})):fe(W)}var j,B=le(R),D=(B&&It(),ge.follow(function(){var W;(j=R.call(A,A))&&(B?(W=_n.bind(null,null),j.then(W,W)):typeof j.next=="function"&&typeof j.throw=="function"&&(j=Ri(j)))},D));return(j&&typeof j.then=="function"?ge.resolve(j).then(function(W){return A.active?W:fe(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return j})).then(function(W){return O&&A._resolve(),A._completion.then(function(){return W})}).catch(function(W){return A._reject(W),fe(W)})})}).bind(null,this,u,f,g,o);return g?g._promise(u,C,"lock"):Ce.trans?Ie(Ce.transless,function(){return p._whenReady(C)}):this._whenReady(C)},pt.prototype.table=function(n){if(w(this._allTables,n))return this._allTables[n];throw new ye.InvalidTable("Table ".concat(n," does not exist"))};var Yn=pt;function pt(n,a){var o,u,f,p,g,m=this,C=(this._middlewares={},this.verno=0,pt.dependencies),C=(this._options=a=s({addons:pt.addons,autoOpen:!0,indexedDB:C.indexedDB,IDBKeyRange:C.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},a.addons),M=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen}),I=(M.dbReadyPromise=new ge(function(S){M.dbReadyResolve=S}),M.openCanceller=new ge(function(S,P){M.cancelOpen=P}),this._state=M,this.name=n,this.on=qa(this,"populate","blocked","versionchange","close",{ready:[ir,He]}),this.once=function(S,P){var O=function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];m.on(S).unsubscribe(O),P.apply(m,R)};return m.on(S,O)},this.on.ready.subscribe=ee(this.on.ready.subscribe,function(S){return function(P,O){pt.vip(function(){var R,A=m._state;A.openComplete?(A.dbOpenError||ge.resolve().then(P),O&&S(P)):A.onReadyBeingFired?(A.onReadyBeingFired.push(P),O&&S(P)):(S(P),R=m,O||S(function j(){R.on.ready.unsubscribe(P),R.on.ready.unsubscribe(j)}))})}}),this.Collection=(o=this,ja(qc.prototype,function(j,A){this.db=o;var O=La,R=null;if(A)try{O=A()}catch(D){R=D}var A=j._ctx,j=A.table,B=j.hook.reading.fire;this._ctx={table:j,index:A.index,isPrimKey:!A.index||j.schema.primKey.keyPath&&A.index===j.schema.primKey.name,range:O,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:R,or:A.or,valueMapper:B!==rn?B:null}})),this.Table=(u=this,ja(Xo.prototype,function(S,P,O){this.db=u,this._tx=O,this.name=S,this.schema=P,this.hook=u._allTables[S]?u._allTables[S].hook:qa(null,{creating:[Ra,He],reading:[sa,rn],updating:[sr,He],deleting:[Pa,He]})})),this.Transaction=(f=this,ja(zc.prototype,function(S,P,O,R,A){var j=this;S!=="readonly"&&P.forEach(function(B){B=(B=O[B])==null?void 0:B.yProps,B&&(P=P.concat(B.map(function(D){return D.updatesTable})))}),this.db=f,this.mode=S,this.storeNames=P,this.schema=O,this.chromeTransactionDurability=R,this.idbtrans=null,this.on=qa(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ge(function(B,D){j._resolve=B,j._reject=D}),this._completion.then(function(){j.active=!1,j.on.complete.fire()},function(B){var D=j.active;return j.active=!1,j.on.error.fire(B),j.parent?j.parent._reject(B):D&&j.idbtrans&&j.idbtrans.abort(),fe(B)})})),this.Version=(p=this,ja(Yc.prototype,function(S){this.db=p,this._cfg={version:S,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,ja(el.prototype,function(S,P,O){if(this.db=g,this._ctx={table:S,index:P===":id"?null:P,or:O},this._cmp=this._ascending=We,this._descending=function(R,A){return We(A,R)},this._max=function(R,A){return 0<We(R,A)?R:A},this._min=function(R,A){return We(R,A)<0?R:A},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(S){0<S.newVersion?console.warn("Another connection wants to upgrade database '".concat(m.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(m.name,"'. Closing db now to resume the delete request.")),m.close({disableAutoOpen:!1})}),this.on("blocked",function(S){!S.newVersion||S.newVersion<S.oldVersion?console.warn("Dexie.delete('".concat(m.name,"') was blocked")):console.warn("Upgrade '".concat(m.name,"' blocked by other connection holding version ").concat(S.oldVersion/10))}),this._maxKey=Fa(a.IDBKeyRange),this._createTransaction=function(S,P,O,R){return new m.Transaction(S,P,O,m._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(S){m.on("blocked").fire(S),dt.filter(function(P){return P.name===m.name&&P!==m&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(S)})},this.use(Qc),this.use(tf),this.use($c),this.use(Xc),this.use(Zc),new Proxy(this,{get:function(S,P,O){var R;return P==="_vip"||(P==="table"?function(A){return Ls(m.table(A),I)}:(R=Reflect.get(S,P,O))instanceof Xo?Ls(R,I):P==="tables"?R.map(function(A){return Ls(A,I)}):P==="_createTransaction"?function(){return Ls(R.apply(this,arguments),I)}:R)}}));this.vip=I,C.forEach(function(S){return S(m)})}var Ns,pa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",nf=(Mi.prototype.subscribe=function(n,a,o){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:a,complete:o})},Mi.prototype[pa]=function(){return this},Mi);function Mi(n){this._subscribe=n}try{Ns={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Ns={indexedDB:null,IDBKeyRange:null}}function vl(n){var a,o=!1,u=new nf(function(f){var p=le(n),g,m=!1,C={},M={},I={get closed(){return m},unsubscribe:function(){m||(m=!0,g&&g.abort(),S&&hr.storagemutated.unsubscribe(O))}},S=(f.start&&f.start(I),!1),P=function(){return oe(R)},O=function(A){Os(C,A),Ti(M,C)&&P()},R=function(){var A,j,B;!m&&Ns.indexedDB&&(C={},A={},g&&g.abort(),g=new AbortController,B=(D=>{var W=dr();try{p&&It();var ne=bn(n,D);return ne=p?ne.finally(_n):ne}finally{W&&Wn()}})(j={subscr:A,signal:g.signal,requery:P,querier:n,trans:null}),Promise.resolve(B).then(function(D){o=!0,a=D,m||j.signal.aborted||(C={},(W=>{for(var ne in W)if(w(W,ne))return;return 1})(M=A)||S||(hr(za,O),S=!0),oe(function(){return!m&&f.next&&f.next(D)}))},function(D){o=!1,["DatabaseClosedError","AbortError"].includes(D==null?void 0:D.name)||m||oe(function(){m||f.error&&f.error(D)})}))};return setTimeout(P,0),I});return u.hasValue=function(){return o},u.getValue=function(){return a},u}var Lr=Yn;function Li(n){var a=vr;try{vr=!0,hr.storagemutated.fire(n),Ii(n,!0)}finally{vr=a}}b(Lr,s(s({},Pe),{delete:function(n){return new Lr(n,{addons:[]}).delete()},exists:function(n){return new Lr(n,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return a=Lr.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(xi(o)?Promise.resolve(o.databases()).then(function(u){return u.map(function(f){return f.name}).filter(function(f){return f!==zt})}):ki(o,a).toCollection().primaryKeys()).then(n)}catch{return fe(new ye.MissingAPI)}var a,o},defineClass:function(){return function(n){v(this,n)}},ignoreTransaction:function(n){return Ce.trans?Ie(Ce.transless,n):n()},vip:Si,async:function(n){return function(){try{var a=Ri(n.apply(this,arguments));return a&&typeof a.then=="function"?a:ge.resolve(a)}catch(o){return fe(o)}}},spawn:function(n,a,o){try{var u=Ri(n.apply(o,a||[]));return u&&typeof u.then=="function"?u:ge.resolve(u)}catch(f){return fe(f)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(n,a){return n=ge.resolve(typeof n=="function"?Lr.ignoreTransaction(n):n).timeout(a||6e4),Ce.trans?Ce.trans.waitFor(n):n},Promise:ge,debug:{get:function(){return Xt},set:function(n){Oa(n)}},derive:q,extend:v,props:b,override:ee,Events:qa,on:hr,liveQuery:vl,extendObservabilitySet:Os,getByKeyPath:se,setByKeyPath:X,delByKeyPath:function(n,a){typeof a=="string"?X(n,a,void 0):"length"in a&&[].map.call(a,function(o){X(n,o,void 0)})},shallowClone:ve,deepClone:$,getObjectDiff:Pi,cmp:We,asap:Q,minKey:-1/0,addons:[],connections:dt,errnames:tt,dependencies:Ns,cache:Mr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(n){return parseInt(n)}).reduce(function(n,a,o){return n+a/Math.pow(10,2*o)})})),Lr.maxKey=Fa(Lr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(hr(za,function(n){vr||(n=new CustomEvent(vi,{detail:n}),vr=!0,dispatchEvent(n),vr=!1)}),addEventListener(vi,function(n){n=n.detail,vr||Li(n)}));var ha,vr=!1,gl=function(){};return typeof BroadcastChannel<"u"&&((gl=function(){(ha=new BroadcastChannel(vi)).onmessage=function(n){return n.data&&Li(n.data)}})(),typeof ha.unref=="function"&&ha.unref(),hr(za,function(n){vr||ha.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Yn.disableBfCache&&n.persisted){Xt&&console.debug("Dexie: handling persisted pagehide"),ha!=null&&ha.close();for(var a=0,o=dt;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Yn.disableBfCache&&n.persisted&&(Xt&&console.debug("Dexie: handling persisted pageshow"),gl(),Li({all:new Rt(-1/0,[[]])}))})),ge.rejectionMapper=function(n,a){return!n||n instanceof Me||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Mt[n.name]?n:(a=new Mt[n.name](a||n.message,n),"stack"in n&&N(a,"stack",{get:function(){return this.inner.stack}}),a)},Oa(Xt),s(Yn,Object.freeze({__proto__:null,Dexie:Yn,Entity:Go,PropModification:Na,RangeSet:Rt,add:function(n){return new Na({add:n})},cmp:We,default:Yn,liveQuery:vl,mergeRanges:Ga,rangesOverlap:sl,remove:function(n){return new Na({remove:n})},replacePrefix:function(n,a){return new Na({replacePrefix:[n,a]})}}),{default:Yn}),Yn})})(Xs)),Xs.exports}var Kd=Fd();const oo=Bd(Kd),Ll=Symbol.for("Dexie"),Ht=globalThis[Ll]||(globalThis[Ll]=oo);if(oo.semVer!==Ht.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${oo.semVer} and ${Ht.semVer}`);const{liveQuery:Im,mergeRanges:Rm,rangesOverlap:Pm,RangeSet:Om,cmp:Dm,Entity:Mm,PropModification:Lm,replacePrefix:Nm,add:qm,remove:jm,DexieYProvider:Bm}=Ht,qe=new Ht("me-ai-store");qe.version(1).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType"});qe.version(2).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType",actionItems:"++id, type, status, sourceItemId, createdAt, dueDate, [type+status]"});qe.version(3).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType",emailClassifications:"emailId, action, date, scannedAt, status, [action+status]",actionItems:null});function ic(t,e){return`${t}:${e}`}async function Ud(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.contacts.count();if(t===0)return null;const r=[`Stored data: ${t} emails, ${e} contacts.`],s=await qe.items.where("[sourceType+date]").between(["gmail",Ht.minKey],["gmail",Ht.maxKey]).first(),i=await qe.items.where("[sourceType+date]").between(["gmail",Ht.minKey],["gmail",Ht.maxKey]).last();if(s&&i){const c=new Date(s.date).toLocaleDateString(),d=new Date(i.date).toLocaleDateString();r.push(`Date range: ${c} to ${d}.`)}const l=await oc(5);return l.length>0&&r.push("Top senders: "+l.map(([c,d])=>`${Qd(c)} (${d})`).join(", ")+"."),r.join(" ")}async function Gd(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.contacts.count();if(t===0)return"No emails stored locally.";const r=await oc(10),s=await Xd(10),i=["## Data Summary",`- **Emails:** ${t}`,`- **Contacts:** ${e}`],l=await qe.items.where("sourceType").equals("gmail").sortBy("date");if(l.length>0){const c=new Date(l[0].date).toLocaleDateString(),d=new Date(l[l.length-1].date).toLocaleDateString();i.push(`- **Date range:** ${c} â ${d}`)}if(r.length>0){i.push("","### Top Senders");for(const[c,d]of r)i.push(`- ${c}: ${d}`)}if(s.length>0){i.push("","### Labels");for(const[c,d]of s)i.push(`- ${c}: ${d}`)}return i.join(`
`)}async function Hd(t=10){const e=await qe.items.where("[sourceType+date]").between(["gmail",Ht.minKey],["gmail",Ht.maxKey]).reverse().limit(t).toArray();return e.length===0?"No emails stored locally.":e.map(lc).join(`

---

`)}async function Wd(t,e=10){if(!t)return"No search query provided.";const r=t.toLowerCase(),i=(await qe.items.toArray()).map(l=>{var d,v,h,y,w;let c=0;return(d=l.subject)!=null&&d.toLowerCase().includes(r)&&(c+=3),(v=l.from)!=null&&v.toLowerCase().includes(r)&&(c+=2),(h=l.to)!=null&&h.toLowerCase().includes(r)&&(c+=2),(y=l.snippet)!=null&&y.toLowerCase().includes(r)&&(c+=1),(w=l.body)!=null&&w.toLowerCase().includes(r)&&(c+=1),{item:l,score:c}}).filter(({score:l})=>l>0).sort((l,c)=>c.score-l.score).slice(0,e);return i.length===0?`No results found for "${t}".`:i.map(({item:l})=>lc(l)).join(`

---

`)}async function Yd(){const t=await Ud();return t?["You have access to the user's locally stored data.",t,"The user can ask you about their emails. If they do, you can see recent emails and search results that will be provided."].join(" "):null}async function Vd(t){const e=[],r=await Gd();if(e.push(r),t){const s=await Wd(t,5);e.push("","## Relevant Emails",s)}else{const s=await Hd(5);e.push("","## Recent Emails",s)}return e.join(`
`)}async function oc(t){const e=await qe.items.where("sourceType").equals("gmail").toArray(),r={};for(const s of e){const i=s.from||"Unknown";r[i]=(r[i]||0)+1}return Object.entries(r).sort((s,i)=>i[1]-s[1]).slice(0,t)}async function Xd(t){const e=await qe.items.where("sourceType").equals("gmail").toArray(),r={};for(const s of e)for(const i of s.labels||[])r[i]=(r[i]||0)+1;return Object.entries(r).sort((s,i)=>i[1]-s[1]).slice(0,t)}function lc(t){const e=t.date?new Date(t.date).toLocaleString():"Unknown date",r=Zd(t.body||t.snippet||"",500);switch(t.type){case"email":return[`**Subject:** ${t.subject}`,`**From:** ${t.from}`,`**To:** ${t.to}`,t.cc?`**CC:** ${t.cc}`:"",`**Date:** ${e}`,`**Labels:** ${(t.labels||[]).join(", ")}`,"",r].filter(Boolean).join(`
`);default:return[`**From:** ${t.from}`,`**Date:** ${e}`,"",r].join(`
`)}}function Zd(t,e){return t?t.length<=e?t:t.slice(0,e)+"...":""}function Qd(t){if(!t)return"Unknown";const e=t.match(/^"?([^"<]+)"?\s*</);return e?e[1].trim():t.split("@")[0]}async function $d({query:t,limit:e=50,offset:r=0}={}){if(t){const l=t.toLowerCase(),c=await qe.items.where("sourceType").equals("gmail").filter(d=>{var v,h,y,w;return((v=d.subject)==null?void 0:v.toLowerCase().includes(l))||((h=d.from)==null?void 0:h.toLowerCase().includes(l))||((y=d.to)==null?void 0:y.toLowerCase().includes(l))||((w=d.snippet)==null?void 0:w.toLowerCase().includes(l))}).toArray();return c.sort((d,v)=>(v.date||0)-(d.date||0)),{items:c.slice(r,r+e),total:c.length}}const s=await qe.items.where("sourceType").equals("gmail").count();return{items:await qe.items.where("[sourceType+date]").between(["gmail",Ht.minKey],["gmail",Ht.maxKey]).reverse().offset(r).limit(e).toArray(),total:s}}function lo(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,s)).toFixed(1)+" "+r[s]}function Ui(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e)),i=t/Math.pow(e,s),l=s>=2?2:s>=1?1:0;return i.toFixed(l)+" "+r[s]}function Jd(t,e){return!e||e<=0?null:Math.min(100,t/e*100)}const ep=typeof localStorage<"u"&&localStorage.getItem("debug")==="true";function Nl(...t){ep&&console.log("[debug]",...t)}function nn(t){return Nl(`[MOUNT] ${t}`),()=>Nl(`[DESTROY] ${t}`)}var tp=V("<option> </option>"),np=V('<p class="model-description svelte-1p89qnn"> </p>'),rp=V('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Device</span><span class="svelte-1p89qnn"> </span></div>'),ap=V('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Description</span><span class="svelte-1p89qnn"> </span></div>'),sp=V('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Max buffer</span><span class="svelte-1p89qnn"> </span></div>'),ip=V('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Features</span><span class="svelte-1p89qnn"> </span></div>'),op=V('<div class="gpu-card svelte-1p89qnn"><div class="gpu-card-header svelte-1p89qnn"><span class="gpu-dot svelte-1p89qnn"></span> <span>WebGPU Active</span></div> <div class="gpu-card-body svelte-1p89qnn"><div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Vendor</span><span class="svelte-1p89qnn"> </span></div> <div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Architecture</span><span class="svelte-1p89qnn"> </span></div> <!> <!> <!> <!></div></div>'),lp=V('<p class="error svelte-1p89qnn"> </p>'),up=V('<div class="container center svelte-1p89qnn"><p class="subtitle svelte-1p89qnn">A private AI chat that runs <strong>entirely in your browser</strong> using WebGPU.</p> <div class="model-selector svelte-1p89qnn"><label for="model-select" class="svelte-1p89qnn">Choose Model:</label> <select id="model-select" class="svelte-1p89qnn"></select> <!></div> <!> <!> <button class="btn primary svelte-1p89qnn">Load Model</button></div>');function cp(t,e){ut(e,!0);let r=De(e,"selectedModel",15),s=De(e,"gpuInfo",3,null),i=De(e,"error",3,null);Ct(()=>nn("ModelSelector"));var l=up(),c=L(x(l),2),d=L(x(c),2);Fn(d,21,()=>os,ra,(q,E)=>{var K=tp(),ae=x(K),ee={};me(()=>{ue(ae,`${k(E).name??""} â ${k(E).size??""}`),ee!==(ee=k(E).id)&&(K.value=(K.__value=k(E).id)??"")}),Y(q,K)});var v=L(d,2);{var h=q=>{const E=Wt(()=>os.find(U=>U.id===r()));var K=tc(),ae=Dt(K);{var ee=U=>{var Q=np(),se=x(Q);me(()=>ue(se,k(E).description)),Y(U,Q)};ke(ae,U=>{k(E)&&U(ee)})}Y(q,K)};ke(v,q=>{r()&&q(h)})}var y=L(c,2);{var w=q=>{var E=op(),K=L(x(E),2),ae=x(K),ee=L(x(ae)),U=x(ee),Q=L(ae,2),se=L(x(Q)),X=x(se),ve=L(Q,2);{var ie=Se=>{var we=rp(),z=L(x(we)),H=x(z);me(()=>ue(H,s().device)),Y(Se,we)};ke(ve,Se=>{s().device&&s().device!=="unknown"&&Se(ie)})}var de=L(ve,2);{var te=Se=>{var we=ap(),z=L(x(we)),H=x(z);me(()=>ue(H,s().description)),Y(Se,we)};ke(de,Se=>{s().description&&s().description!=="unknown"&&Se(te)})}var Z=L(de,2);{var $=Se=>{var we=sp(),z=L(x(we)),H=x(z);me(J=>ue(H,J),[()=>lo(s().limits.maxBufferSize)]),Y(Se,we)};ke(Z,Se=>{var we;(we=s().limits)!=null&&we.maxBufferSize&&Se($)})}var Ee=L(Z,2);{var _e=Se=>{var we=ip(),z=L(x(we)),H=x(z);me(()=>ue(H,`${s().features.length??""} supported`)),Y(Se,we)};ke(Ee,Se=>{var we;(we=s().features)!=null&&we.length&&Se(_e)})}me(()=>{ue(U,s().vendor),ue(X,s().architecture)}),Y(q,E)};ke(y,q=>{s()&&q(w)})}var b=L(y,2);{var _=q=>{var E=lp(),K=x(E);me(()=>ue(K,i())),Y(q,E)};ke(b,q=>{i()&&q(_)})}var N=L(b,2);N.__click=function(...q){var E;(E=e.onload)==null||E.apply(this,q)},me(()=>N.disabled=i()),Po(d,r),Y(t,l),ct()}Vt(["click"]);var fp=V('<span class="progress-percent svelte-r5fnze"> </span>'),dp=V('<div class="progress-bar svelte-r5fnze"><div class="progress-fill svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-sep svelte-r5fnze">/</span> <span class="progress-total svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span></div>',1),pp=V('<span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span>',1),hp=V('<span class="progress-indeterminate svelte-r5fnze">downloadingâ¦</span>'),vp=V('<div class="progress-bar svelte-r5fnze"><div class="progress-fill indeterminate svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><!></div>',1),gp=V('<div class="progress-card svelte-r5fnze"><div class="progress-header svelte-r5fnze"><span class="progress-file svelte-r5fnze"> </span> <!></div> <!></div>'),mp=V('<div class="container center loading-container svelte-r5fnze"><p class="loading-msg svelte-r5fnze"> </p> <!></div>');function yp(t,e){ut(e,!0);let r=De(e,"message",3,""),s=De(e,"items",19,()=>[]);Ct(()=>nn("LoadingProgress"));var i=mp(),l=x(i),c=x(l),d=L(l,2);Fn(d,17,s,ra,(v,h)=>{const y=Wt(()=>k(h).total?Jd(k(h).loaded||0,k(h).total):null);var w=gp(),b=x(w),_=x(b),N=x(_),q=L(_,2);{var E=U=>{var Q=fp(),se=x(Q);me(X=>ue(se,`${X??""}%`),[()=>k(y).toFixed(1)]),Y(U,Q)};ke(q,U=>{k(y)!==null&&U(E)})}var K=L(b,2);{var ae=U=>{var Q=dp(),se=Dt(Q),X=x(se),ve=L(se,2),ie=x(ve),de=x(ie),te=L(ie,4),Z=x(te),$=L(te,2),Ee=x($);me((_e,Se,we,z,H)=>{nr(X,`width: ${_e??""}%`),ue(de,Se),ue(Z,we),ue(Ee,`(${z??""} / ${H??""} B)`)},[()=>Math.max(k(h).progress??0,.5).toFixed(1),()=>Ui(k(h).loaded||0),()=>Ui(k(h).total),()=>(k(h).loaded||0).toLocaleString(),()=>k(h).total.toLocaleString()]),Y(U,Q)},ee=U=>{var Q=vp(),se=L(Dt(Q),2),X=x(se);{var ve=de=>{var te=pp(),Z=Dt(te),$=x(Z),Ee=L(Z,2),_e=x(Ee);me((Se,we)=>{ue($,Se),ue(_e,`(${we??""} B)`)},[()=>Ui(k(h).loaded),()=>k(h).loaded.toLocaleString()]),Y(de,te)},ie=de=>{var te=hp();Y(de,te)};ke(X,de=>{k(h).loaded?de(ve):de(ie,!1)})}Y(U,Q)};ke(K,U=>{k(h).total?U(ae):U(ee,!1)})}me(()=>{rc(_,"title",k(h).file),ue(N,k(h).file)}),Y(v,w)}),me(()=>ue(c,r())),Y(t,i),ct()}var bp=V('<span class="thinking-tokens svelte-11gjw00"> </span>'),_p=V('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Thinking...</span> <!></div>'),wp=V('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Preparing...</span></div>'),kp=V('<details class="thinking-details svelte-11gjw00"><summary class="thinking-summary svelte-11gjw00"><span class="thinking-icon svelte-11gjw00">ð­</span> Thinking <span class="thinking-token-count svelte-11gjw00"> </span></summary> <div class="thinking-content svelte-11gjw00"> </div></details>'),xp=V('<div class="gen-status svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> Generating...</div>'),Sp=V('<span class="cursor svelte-11gjw00">|</span>'),Ep=V(" <!>",1),Tp=V('<!> <!> <div class="content svelte-11gjw00"><!></div>',1),Ap=V('<div class="content svelte-11gjw00"> </div>'),Cp=V('<div><div class="role svelte-11gjw00"> </div> <!></div>');function Ip(t,e){ut(e,!0);let r=De(e,"isLast",3,!1),s=De(e,"isRunning",3,!1),i=De(e,"generationPhase",3,null),l=De(e,"numTokens",3,null);Ct(()=>nn(`MessageBubble[${e.msg.role}]`));var c=Cp(),d=x(c),v=x(d),h=L(d,2);{var y=b=>{var _=Tp(),N=Dt(_);{var q=X=>{var ve=_p(),ie=L(x(ve),4);{var de=te=>{var Z=bp(),$=x(Z);me(()=>ue($,`${l()??""} tokens`)),Y(te,Z)};ke(ie,te=>{l()&&te(de)})}Y(X,ve)},E=X=>{var ve=wp();Y(X,ve)};ke(N,X=>{s()&&r()&&i()==="thinking"?X(q):s()&&r()&&i()==="preparing"&&X(E,1)})}var K=L(N,2);{var ae=X=>{var ve=kp(),ie=x(ve),de=L(x(ie),2),te=x(de),Z=L(ie,2),$=x(Z);me(Ee=>{ue(te,`${Ee??""} words`),ue($,e.msg.thinking)},[()=>e.msg.thinking.split(/\s+/).length]),Y(X,ve)};ke(K,X=>{e.msg.thinking&&X(ae)})}var ee=L(K,2),U=x(ee);{var Q=X=>{var ve=xp();Y(X,ve)},se=X=>{var ve=Ep(),ie=Dt(ve,!0),de=L(ie);{var te=Z=>{var $=Sp();Y(Z,$)};ke(de,Z=>{s()&&r()&&Z(te)})}me(()=>ue(ie,e.msg.content)),Y(X,ve)};ke(U,X=>{s()&&r()&&!e.msg.content&&i()!=="thinking"?X(Q):X(se,!1)})}Y(b,_)},w=b=>{var _=Ap(),N=x(_);me(()=>ue(N,e.msg.content)),Y(b,_)};ke(h,b=>{e.msg.role==="assistant"?b(y):b(w,!1)})}me(()=>{dn(c,1,`bubble ${e.msg.role??""}`,"svelte-11gjw00"),ue(v,e.msg.role==="user"?"You":"AI")}),Y(t,c),ct()}var Rp=V('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Device</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Pp=V('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Buffer</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Op=V('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Compute Invocations</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Dp=V('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Workgroup Storage</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Mp=V('<span class="gpu-feature-tag svelte-1qmgokn"> </span>'),Lp=V('<div class="gpu-panel-item full svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn"> </div> <div class="gpu-panel-features svelte-1qmgokn"></div></div>'),Np=V('<div class="gpu-panel svelte-1qmgokn"><div class="gpu-panel-grid svelte-1qmgokn"><div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Status</div> <div class="gpu-panel-value ok svelte-1qmgokn">Active</div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Vendor</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Architecture</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <!> <!> <!> <!> <!></div></div>');function qp(t,e){ut(e,!0),Ct(()=>nn("GpuPanel"));var r=Np(),s=x(r),i=L(x(s),2),l=L(x(i),2),c=x(l),d=L(i,2),v=L(x(d),2),h=x(v),y=L(d,2);{var w=U=>{var Q=Rp(),se=L(x(Q),2),X=x(se);me(()=>ue(X,e.gpuInfo.device)),Y(U,Q)};ke(y,U=>{e.gpuInfo.device&&e.gpuInfo.device!=="unknown"&&U(w)})}var b=L(y,2);{var _=U=>{var Q=Pp(),se=L(x(Q),2),X=x(se);me(ve=>ue(X,ve),[()=>lo(e.gpuInfo.limits.maxBufferSize)]),Y(U,Q)};ke(b,U=>{var Q;(Q=e.gpuInfo.limits)!=null&&Q.maxBufferSize&&U(_)})}var N=L(b,2);{var q=U=>{var Q=Op(),se=L(x(Q),2),X=x(se);me(()=>ue(X,e.gpuInfo.limits.maxComputeInvocationsPerWorkgroup)),Y(U,Q)};ke(N,U=>{var Q;(Q=e.gpuInfo.limits)!=null&&Q.maxComputeInvocationsPerWorkgroup&&U(q)})}var E=L(N,2);{var K=U=>{var Q=Dp(),se=L(x(Q),2),X=x(se);me(ve=>ue(X,ve),[()=>lo(e.gpuInfo.limits.maxComputeWorkgroupStorageSize)]),Y(U,Q)};ke(E,U=>{var Q;(Q=e.gpuInfo.limits)!=null&&Q.maxComputeWorkgroupStorageSize&&U(K)})}var ae=L(E,2);{var ee=U=>{var Q=Lp(),se=x(Q),X=x(se),ve=L(se,2);Fn(ve,21,()=>e.gpuInfo.features,ra,(ie,de)=>{var te=Mp(),Z=x(te);me(()=>ue(Z,k(de))),Y(ie,te)}),me(()=>ue(X,`Features (${e.gpuInfo.features.length??""})`)),Y(U,Q)};ke(ae,U=>{var Q;(Q=e.gpuInfo.features)!=null&&Q.length&&U(ee)})}me(()=>{ue(c,e.gpuInfo.vendor),ue(h,e.gpuInfo.architecture)}),Y(t,r),ct()}var jp=V('<button class="gpu-badge svelte-1ktw27c"> </button>'),Bp=V('<span class="stats svelte-1ktw27c"> </span>'),zp=V('<span class="stats preparing svelte-1ktw27c">preparing...</span>'),Fp=V('<span class="stats preparing svelte-1ktw27c"> </span>'),Kp=V('<span class="stats svelte-1ktw27c"> </span>'),Up=V('<div class="empty svelte-1ktw27c">Send a message to start chatting.</div>'),Gp=V('<button class="btn svelte-1ktw27c">Stop</button>'),Hp=V('<button class="btn primary svelte-1ktw27c">Send</button>'),Wp=V('<div class="chat-wrapper svelte-1ktw27c"><header class="svelte-1ktw27c"><!> <!> <span class="spacer svelte-1ktw27c"></span> <button class="btn small svelte-1ktw27c">Reset</button></header> <!> <div class="messages svelte-1ktw27c"><!> <!></div> <div class="input-row svelte-1ktw27c"><textarea rows="1" placeholder="Type a message..." class="svelte-1ktw27c"></textarea> <!></div></div>');function Yp(t,e){ut(e,!0),Ct(()=>nn("ChatView"));let r=De(e,"messages",19,()=>[]),s=De(e,"isRunning",3,!1),i=De(e,"tps",3,null),l=De(e,"numTokens",3,null),c=De(e,"generationPhase",3,null),d=De(e,"gpuInfo",3,null),v=De(e,"chatContainer",15),h=Oe(""),y=Oe(!1);function w(z){z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),b())}function b(){const z=k(h).trim();!z||s()||(F(h,""),e.onsend(z))}var _=Wp(),N=x(_),q=x(N);{var E=z=>{var H=jp();H.__click=()=>F(y,!k(y));var J=x(H);me(()=>ue(J,`WebGPU ${k(y)?"â²":"â¼"}`)),Y(z,H)};ke(q,z=>{d()&&z(E)})}var K=L(q,2);{var ae=z=>{var H=Bp(),J=x(H);me((le,Pe)=>ue(J,`${l()??""} tokens in ${le??""}s
        (${Pe??""} tok/s)`),[()=>(l()/i()).toFixed(1),()=>i().toFixed(1)]),Y(z,H)},ee=z=>{var H=zp();Y(z,H)},U=z=>{var H=Fp(),J=x(H);me(le=>ue(J,`thinking... ${le??""}`),[()=>i()?`${i().toFixed(0)} tok/s`:""]),Y(z,H)},Q=z=>{var H=Kp(),J=x(H);me(le=>ue(J,`${le??""} tok/s`),[()=>i().toFixed(1)]),Y(z,H)};ke(K,z=>{i()&&!s()?z(ae):s()&&c()==="preparing"?z(ee,1):s()&&c()==="thinking"?z(U,2):i()&&s()&&z(Q,3)})}var se=L(K,4);se.__click=function(...z){var H;(H=e.onreset)==null||H.apply(this,z)};var X=L(N,2);{var ve=z=>{qp(z,{get gpuInfo(){return d()}})};ke(X,z=>{k(y)&&d()&&z(ve)})}var ie=L(X,2),de=x(ie);{var te=z=>{var H=Up();Y(z,H)};ke(de,z=>{r().length===0&&z(te)})}var Z=L(de,2);Fn(Z,17,r,ra,(z,H,J)=>{{let le=Wt(()=>J===r().length-1);Ip(z,{get msg(){return k(H)},get isLast(){return k(le)},get isRunning(){return s()},get generationPhase(){return c()},get numTokens(){return l()}})}}),ac(ie,z=>v(z),()=>v());var $=L(ie,2),Ee=x($);Ee.__keydown=w;var _e=L(Ee,2);{var Se=z=>{var H=Gp();H.__click=function(...J){var le;(le=e.onstop)==null||le.apply(this,J)},Y(z,H)},we=z=>{var H=Hp();H.__click=b,me(J=>H.disabled=J,[()=>!k(h).trim()]),Y(z,H)};ke(_e,z=>{s()?z(Se):z(we,!1)})}me(()=>{se.disabled=s(),Ee.disabled=s()}),Oo(Ee,()=>k(h),z=>F(h,z)),Y(t,_),ct()}Vt(["click","keydown"]);var Vp=V('<div class="container center svelte-1bi93vx"><h1 class="svelte-1bi93vx">WebGPU Not Available</h1> <p>Your browser does not support WebGPU. Please try Chrome 113+ or Edge 113+.</p></div>');function Xp(t,e){ut(e,!0);const r=!!navigator.gpu,s=sc();let i=Oe(Ot(localStorage.getItem("selectedModel")||os[0].id)),l=Oe(null),c=Oe(null),d=Oe(""),v=Oe(Ot([])),h=Oe(Ot([])),y=Oe(!1),w=Oe(null),b=Oe(null),_=Oe(null),N=Oe(null),q=Oe(null);Ct(()=>{s.check();const te=s.onMessage(Z=>{switch(Z.status){case"webgpu-info":F(N,Z.data,!0);break;case"loading":F(l,"loading"),F(d,Z.data,!0);break;case"initiate":F(v,[...k(v),Z],!0);break;case"progress":F(v,k(v).map($=>$.file===Z.file?{...$,...Z}:$),!0);break;case"done":F(v,k(v).filter($=>$.file!==Z.file),!0);break;case"ready":F(l,"ready");break;case"start":if(!k(y))break;F(q,Z.phase||"preparing",!0),F(h,[...k(h),{role:"assistant",content:"",thinking:""}],!0);break;case"phase":if(!k(y))break;F(q,Z.phase,!0);break;case"thinking":{if(!k(y))break;F(w,Z.tps,!0),F(b,Z.numTokens,!0);const $=k(h)[k(h).length-1];F(h,[...k(h).slice(0,-1),{...$,thinking:($.thinking||"")+Z.content}],!0),E();break}case"thinking-done":{if(!k(y))break;F(w,Z.tps,!0),F(b,Z.numTokens,!0);const $=k(h)[k(h).length-1];F(h,[...k(h).slice(0,-1),{...$,thinking:Z.content}],!0);break}case"update":{if(!k(y))break;F(w,Z.tps,!0),F(b,Z.numTokens,!0);const $=k(h)[k(h).length-1];F(h,[...k(h).slice(0,-1),{...$,content:$.content+Z.output}],!0),E();break}case"complete":if(!k(y))break;F(y,!1),F(q,null);break;case"error":if(!k(y))break;F(c,Z.data,!0),F(y,!1),F(q,null);break}});return()=>te()});function E(){Qu().then(()=>{k(_)&&(k(_).scrollTop=k(_).scrollHeight)})}function K(){F(l,"loading"),localStorage.setItem("selectedModel",k(i)),s.loadModel(k(i))}async function ae(te){if(!te||k(y))return;F(h,[...k(h),{role:"user",content:te}],!0),F(w,null),F(y,!0);let Z=[];try{const Ee=/\b(email|mail|inbox|message|sent|sender|from|subject|unread|gmail)\b/i;let _e;Ee.test(te)?_e=await Vd(te):_e=await Yd(),_e&&(Z=[{role:"system",content:_e}])}catch{}const $=k(h).map(Ee=>({role:Ee.role,content:Ee.content}));s.generate([...Z,...$]),E()}function ee(){s.interrupt()}function U(){s.reset(),F(h,[],!0),F(w,null),F(b,null)}var Q=tc(),se=Dt(Q);{var X=te=>{var Z=Vp();Y(te,Z)},ve=te=>{cp(te,{get gpuInfo(){return k(N)},get error(){return k(c)},onload:K,get selectedModel(){return k(i)},set selectedModel(Z){F(i,Z,!0)}})},ie=te=>{yp(te,{get message(){return k(d)},get items(){return k(v)}})},de=te=>{Yp(te,{get messages(){return k(h)},get isRunning(){return k(y)},get tps(){return k(w)},get numTokens(){return k(b)},get generationPhase(){return k(q)},get gpuInfo(){return k(N)},onsend:ae,onstop:ee,onreset:U,get chatContainer(){return k(_)},set chatContainer(Z){F(_,Z,!0)}})};ke(se,te=>{r?k(l)===null?te(ve,1):k(l)==="loading"?te(ie,2):te(de,!1):te(X)})}Y(t,Q),ct()}const ql="https://accounts.google.com/gsi/client",Zp="https://www.googleapis.com/auth/gmail.readonly";let uo=null,Zs=null;function Qp(){return new Promise((t,e)=>{var i,l;if((l=(i=window.google)==null?void 0:i.accounts)!=null&&l.oauth2){t();return}const r=document.querySelector(`script[src="${ql}"]`);if(r){r.addEventListener("load",()=>t()),r.addEventListener("error",()=>e(new Error("Failed to load Google Identity Services")));return}const s=document.createElement("script");s.src=ql,s.async=!0,s.defer=!0,s.onload=()=>t(),s.onerror=()=>e(new Error("Failed to load Google Identity Services")),document.head.appendChild(s)})}async function jl(t){await Qp(),uo=google.accounts.oauth2.initTokenClient({client_id:t,scope:Zp,callback:e=>{Zs&&(Zs(e),Zs=null)}})}function $p(){return new Promise((t,e)=>{if(!uo){e(new Error("Google Auth not initialized. Call initGoogleAuth first."));return}Zs=r=>{r.error?e(new Error(r.error_description||r.error)):t({access_token:r.access_token,expires_in:r.expires_in})},uo.requestAccessToken()})}function Jp(t){return new Promise(e=>{var r,s;(s=(r=window.google)==null?void 0:r.accounts)!=null&&s.oauth2?google.accounts.oauth2.revoke(t,()=>e()):e()})}const eh="https://gmail.googleapis.com/gmail/v1/users/me";function th(t){return{Authorization:`Bearer ${t}`}}async function ci(t,e){var s;const r=await fetch(`${eh}${e}`,{headers:th(t)});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(((s=i.error)==null?void 0:s.message)||`Gmail API error: ${r.status}`)}return r.json()}function uc(t){return ci(t,"/profile")}function cc(t,{maxResults:e=20,pageToken:r,q:s}={}){const i=new URLSearchParams;return i.set("maxResults",String(e)),r&&i.set("pageToken",r),s&&i.set("q",s),ci(t,`/messages?${i}`)}function fc(t,e,r="full"){return ci(t,`/messages/${e}?format=${r}`)}function nh(t,{startHistoryId:e,pageToken:r,maxResults:s=500}={}){const i=new URLSearchParams;return i.set("startHistoryId",e),i.set("maxResults",String(s)),i.append("historyTypes","messageAdded"),i.append("historyTypes","messageDeleted"),r&&i.set("pageToken",r),ci(t,`/history?${i}`)}function mr(t,e){var l;const r=((l=t==null?void 0:t.payload)==null?void 0:l.headers)||[],s=e.toLowerCase(),i=r.find(c=>c.name.toLowerCase()===s);return(i==null?void 0:i.value)||""}function as(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;r&&(e+="=".repeat(4-r));const s=atob(e),i=Uint8Array.from(s,l=>l.charCodeAt(0));return new TextDecoder().decode(i)}function rh(t){var l,c,d;const e=t==null?void 0:t.payload;if(!e)return"";if((l=e.body)!=null&&l.data)return as(e.body.data);const r=e.parts||[],s=ei(r,"text/plain");if((c=s==null?void 0:s.body)!=null&&c.data)return as(s.body.data);const i=ei(r,"text/html");if((d=i==null?void 0:i.body)!=null&&d.data){const v=as(i.body.data);return sh(v)}return"(no body)"}function ah(t){var i,l;const e=t==null?void 0:t.payload;if(!e)return null;if(e.mimeType==="text/html"&&((i=e.body)!=null&&i.data))return as(e.body.data);const r=e.parts||[],s=ei(r,"text/html");return(l=s==null?void 0:s.body)!=null&&l.data?as(s.body.data):null}function ei(t,e){for(const r of t){if(r.mimeType===e)return r;if(r.parts){const s=ei(r.parts,e);if(s)return s}}return null}function sh(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script"))r.remove();return(e.body.textContent||"").replace(/\s+/g," ").trim()}catch{return t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&#x([0-9a-f]+);/gi,(e,r)=>String.fromCodePoint(parseInt(r,16))).replace(/&#(\d+);/g,(e,r)=>String.fromCodePoint(Number(r))).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/\s+/g," ").trim()}}const Et="gmail",Bl=8,dc=50,pc=100;async function ih(t,{limit:e=dc,onProgress:r=()=>{},signal:s}={}){var c,d,v,h;const i=await qe.syncState.get(Et);if(i!=null&&i.historyId)try{return await dh(t,i,r,s)}catch(y){if((c=y.message)!=null&&c.includes("404")||(d=y.message)!=null&&d.includes("notFound")||(v=y.message)!=null&&v.includes("Start history id")||(h=y.message)!=null&&h.includes("history_types"))r({phase:"info",message:"History expired, performing full re-sync..."}),await qe.syncState.delete(Et);else throw y}return await ch(t,e===0?1/0:e,r,s)}async function oh(t,{limit:e=dc,onProgress:r=()=>{},signal:s}={}){const i=await qe.syncState.get(Et);return i!=null&&i.oldestPageToken?await fh(t,i,e===0?1/0:e,r,s):(r({phase:"done",message:"All messages already synced"}),{added:0,errors:0})}async function lh(){const t=await qe.syncState.get(Et);return t?{synced:!0,totalItems:t.totalItems||0,lastSyncAt:t.lastSyncAt,historyId:t.historyId,hasMore:!!t.oldestPageToken}:{synced:!1,totalItems:0,lastSyncAt:null,hasMore:!1}}async function uh(){await qe.transaction("rw",[qe.items,qe.syncState],async()=>{await qe.items.where("sourceType").equals(Et).delete(),await qe.syncState.delete(Et)})}async function ch(t,e,r,s){r({phase:"counting",message:"Getting mailbox info..."}),ea(s);const i=await uc(t);r({phase:"listing",message:"Listing messages...",current:0,total:Math.min(i.messagesTotal||e,e)});const l=[];let c,d=null;for(;l.length<e;){ea(s);const w=e-l.length,b=await cc(t,{maxResults:Math.min(pc,w),pageToken:c}),_=(b.messages||[]).map(N=>N.id);if(l.push(..._),r({phase:"listing",message:`Listed ${l.length} messages...`,current:l.length,total:Math.min(i.messagesTotal||e,e)}),c=b.nextPageToken,!c||_.length===0)break}if(d=c||null,l.length===0)return await qe.syncState.put({sourceType:Et,historyId:i.historyId,lastSyncAt:Date.now(),totalItems:0,oldestPageToken:null}),{added:0,deleted:0,errors:0};const{added:v,errors:h}=await hc(t,l,r,s),y=await qe.items.where("sourceType").equals(Et).count();return await qe.syncState.put({sourceType:Et,historyId:i.historyId,lastSyncAt:Date.now(),totalItems:y,oldestPageToken:d}),r({phase:"done",message:`Synced ${v} messages`,current:v,total:v}),{added:v,deleted:0,errors:h}}async function fh(t,e,r,s,i){s({phase:"listing",message:"Loading more messages...",current:0}),ea(i);const l=[];let c=e.oldestPageToken,d=null;for(;l.length<r;){ea(i);const w=r-l.length,b=await cc(t,{maxResults:Math.min(pc,w),pageToken:c}),_=(b.messages||[]).map(N=>N.id);if(l.push(..._),s({phase:"listing",message:`Listed ${l.length} more messages...`,current:l.length}),c=b.nextPageToken,!c||_.length===0)break}if(d=c||null,l.length===0)return await qe.syncState.update(Et,{oldestPageToken:null,lastSyncAt:Date.now()}),s({phase:"done",message:"All messages synced"}),{added:0,errors:0};const{added:v,errors:h}=await hc(t,l,s,i),y=await qe.items.where("sourceType").equals(Et).count();return await qe.syncState.update(Et,{totalItems:y,lastSyncAt:Date.now(),oldestPageToken:d}),s({phase:"done",message:d?`Downloaded ${v} more (more available)`:`Downloaded ${v} more (all synced)`,current:y,total:y}),{added:v,errors:h}}async function dh(t,e,r,s){r({phase:"syncing",message:"Checking for changes..."}),ea(s);let i=0,l=0,c=0,d,v=e.historyId;do{ea(s);const y=await nh(t,{startHistoryId:e.historyId,pageToken:d});if(v=y.historyId||v,d=y.nextPageToken,!!y.history){for(const w of y.history){if(w.messagesAdded){const b=w.messagesAdded.map(N=>N.message.id),_=[...new Set(b.filter(N=>N))];if(_.length>0){const N=await Promise.allSettled(_.map(E=>fc(t,E))),q=[];for(const E of N)E.status==="fulfilled"?q.push(vc(E.value)):c++;q.length>0&&(await qe.items.bulkPut(q),await gc(q),i+=q.length)}}if(w.messagesDeleted){const b=w.messagesDeleted.map(_=>ic(Et,_.message.id)).filter(_=>_);b.length>0&&(await qe.items.bulkDelete(b),l+=b.length)}}r({phase:"syncing",message:`Changes: +${i} -${l}`,current:i+l})}}while(d);const h=await qe.items.where("sourceType").equals(Et).count();return await qe.syncState.put({sourceType:Et,historyId:v,lastSyncAt:Date.now(),totalItems:h,oldestPageToken:e.oldestPageToken}),r({phase:"done",message:i===0&&l===0?"Already up to date":`Synced: +${i} -${l}`,current:h,total:h}),{added:i,deleted:l,errors:c}}async function hc(t,e,r,s){r({phase:"downloading",message:"Downloading messages...",current:0,total:e.length});let i=0,l=0;for(let c=0;c<e.length;c+=Bl){ea(s);const d=e.slice(c,c+Bl),v=await Promise.allSettled(d.map(y=>fc(t,y))),h=[];for(const y of v)y.status==="fulfilled"?h.push(vc(y.value)):l++;h.length>0&&(await qe.items.bulkPut(h),await gc(h)),i+=h.length,r({phase:"downloading",message:`Downloaded ${i} of ${e.length} messages`,current:i,total:e.length})}return{added:i,errors:l}}function vc(t){const e=mr(t,"From"),r=mr(t,"To"),s=mr(t,"Cc"),i=mr(t,"Subject")||"(no subject)",l=mr(t,"Date"),c=mr(t,"Message-ID"),d=mr(t,"In-Reply-To"),v=mr(t,"References");let h;try{h=l?new Date(l).getTime():t.internalDate?Number(t.internalDate):Date.now()}catch{h=Date.now()}return{id:ic(Et,t.id),sourceType:Et,sourceId:t.id,threadKey:`gmail:${t.threadId}`,type:"email",from:e,to:r,cc:s,subject:i,snippet:t.snippet||"",body:rh(t),htmlBody:ah(t),date:h,labels:t.labelIds||[],messageId:c,inReplyTo:d,references:v,raw:t,syncedAt:Date.now()}}async function gc(t){const e=new Map;for(const r of t)for(const s of[r.from,r.to,r.cc]){if(!s)continue;const i=s.split(",").map(l=>l.trim()).filter(Boolean);for(const l of i){const c=ph(l);c&&!e.has(c.email)&&e.set(c.email,{...c,date:r.date})}}for(const[r,{name:s,date:i}]of e)try{const l=await qe.contacts.where("email").equals(r).first();if(l){const c={};s&&!l.name&&(c.name=s),i>(l.lastSeen||0)&&(c.lastSeen=i),Object.keys(c).length>0&&await qe.contacts.update(l.id,c)}else await qe.contacts.add({email:r,name:s||"",firstSeen:i,lastSeen:i})}catch{}}function ph(t){if(!t)return null;const e=t.match(/<([^>]+)>/);if(e){const s=e[1].toLowerCase().trim(),i=t.slice(0,t.indexOf("<")).replace(/"/g,"").trim();return{email:s,name:i}}const r=t.toLowerCase().trim();return r.includes("@")?{email:r,name:""}:null}function ea(t){if(t!=null&&t.aborted)throw new DOMException("Sync was cancelled","AbortError")}var hh=V(`<div class="setup-container svelte-1mdd5r2"><div class="setup-card svelte-1mdd5r2"><h2 class="svelte-1mdd5r2">Connect Gmail</h2> <p class="setup-intro svelte-1mdd5r2">To access Gmail from the browser, you need a Google Cloud OAuth Client ID.
      This stays in your browser â no data is sent to any server.</p> <div class="setup-steps svelte-1mdd5r2"><div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">1</span> <div><a href="https://console.cloud.google.com/projectcreate" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create a Google Cloud project</a> (or use an existing one)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">2</span> <div><a href="https://console.cloud.google.com/apis/library/gmail.googleapis.com" target="_blank" rel="noopener" class="svelte-1mdd5r2">Enable the Gmail API</a> for your project</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">3</span> <div><a href="https://console.cloud.google.com/apis/credentials/oauthclient" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create an OAuth 2.0 Client ID</a> (type: <strong>Web application</strong>)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">4</span> <div><p class="step-label svelte-1mdd5r2">Add these URLs to your OAuth client. Click to copy:</p> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized JavaScript origins (no trailing slash):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized redirect URIs (add all three):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <p class="step-hint svelte-1mdd5r2">Both localhost (dev) and GitHub Pages (prod) are needed. The /me-ai/ path
            is required because the app is deployed at a subpath. Changes may take a
            few minutes to propagate after saving.</p></div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">5</span> <div>Copy the <strong>Client ID</strong> and paste it below</div></div></div> <div class="client-id-form svelte-1mdd5r2"><input type="text" placeholder="xxxx.apps.googleusercontent.com" class="svelte-1mdd5r2"/> <button class="btn primary svelte-1mdd5r2">Save</button></div></div></div>`);function vh(t,e){ut(e,!0);let r=De(e,"clientIdInput",15);Ct(()=>nn("SetupGuide"));let s=Oe(null);async function i(Me){try{await navigator.clipboard.writeText(Me),F(s,Me,!0),setTimeout(()=>{F(s,null)},1500)}catch{const Ae=document.createElement("input");Ae.value=Me,document.body.appendChild(Ae),Ae.select(),document.execCommand("copy"),document.body.removeChild(Ae),F(s,Me,!0),setTimeout(()=>{F(s,null)},1500)}}const l="http://localhost:5173",c="https://cypherkitty.github.io",d="https://cypherkitty.github.io/me-ai/";var v=hh(),h=x(v),y=L(x(h),4),w=L(x(y),6),b=L(x(w),2),_=L(x(b),2),N=L(x(_),2),q=x(N);q.__click=()=>i(l);var E=x(q);E.textContent="http://localhost:5173";var K=L(E,2),ae=x(K),ee=L(q,2);ee.__click=()=>i(c);var U=x(ee);U.textContent="https://cypherkitty.github.io";var Q=L(U,2),se=x(Q),X=L(_,2),ve=L(x(X),2),ie=x(ve);ie.__click=()=>i(l);var de=x(ie);de.textContent="http://localhost:5173";var te=L(de,2),Z=x(te),$=L(ie,2);$.__click=()=>i(c);var Ee=x($);Ee.textContent="https://cypherkitty.github.io";var _e=L(Ee,2),Se=x(_e),we=L($,2);we.__click=()=>i(d);var z=x(we);z.textContent="https://cypherkitty.github.io/me-ai/";var H=L(z,2),J=x(H),le=L(y,2),Pe=x(le);Pe.__keydown=Me=>Me.key==="Enter"&&e.onsave();var Le=L(Pe,2);Le.__click=function(...Me){var Ae;(Ae=e.onsave)==null||Ae.apply(this,Me)},me(Me=>{ue(ae,k(s)===l?"â":"â§"),ue(se,k(s)===c?"â":"â§"),ue(Z,k(s)===l?"â":"â§"),ue(Se,k(s)===c?"â":"â§"),ue(J,k(s)===d?"â":"â§"),Le.disabled=Me},[()=>!r().trim()]),Oo(Pe,r),Y(t,v),ct()}Vt(["click","keydown"]);function gh(t){const e=t||"";if(e.includes("has not been used in project")||e.includes("is disabled")){const r=e.match(/project\s+(\d+)/),s=r==null?void 0:r[1];return{title:"Gmail API not enabled",description:"The Gmail API needs to be enabled in your Google Cloud project before it can be used.",fix:"Click the link below to enable it, then wait ~30 seconds and retry.",link:{url:s?`https://console.developers.google.com/apis/api/gmail.googleapis.com/overview?project=${s}`:"https://console.cloud.google.com/apis/library/gmail.googleapis.com",label:"Enable Gmail API"}}}return e.includes("Invalid Credentials")||e.includes("401")||e.includes("invalid_token")?{title:"Session expired",description:"Your access token has expired or is invalid.",fix:"Sign out and sign in again to get a fresh token.",action:"signout"}:e.includes("insufficient")&&e.includes("scope")?{title:"Insufficient permissions",description:"The app doesn't have the required permissions to access Gmail.",fix:"Sign out, sign in again, and make sure to grant the Gmail read permission in the consent screen.",action:"signout"}:e.includes("access_denied")||e.includes("user_denied")?{title:"Access denied",description:"You declined the Gmail permission request.",fix:"Click 'Sign in with Google' again and grant the Gmail read-only permission when prompted."}:e.includes("popup")||e.includes("blocked")?{title:"Popup blocked",description:"The sign-in popup was blocked by your browser.",fix:"Allow popups for localhost:5173 in your browser settings, then try again."}:e.includes("Rate Limit")||e.includes("429")||e.includes("quota")?{title:"Rate limit exceeded",description:"Too many requests to the Gmail API.",fix:"Wait a minute and try again."}:e.includes("Failed to fetch")||e.includes("NetworkError")||e.includes("network")?{title:"Network error",description:"Could not reach the Gmail API.",fix:"Check your internet connection and try again."}:{title:"Something went wrong",description:e,fix:null}}var mh=V('<div class="error-card-header svelte-14buhqq"><div class="error-card-title svelte-14buhqq"> </div> <button class="error-dismiss svelte-14buhqq">â</button></div>'),yh=V('<div class="error-card-title svelte-14buhqq"> </div>'),bh=V('<p class="error-card-fix svelte-14buhqq"> </p>'),_h=V('<a class="error-card-link svelte-14buhqq" target="_blank" rel="noopener"> </a>'),wh=V('<button class="btn small error-action svelte-14buhqq">Sign Out & Retry</button>'),kh=V('<div class="error-card svelte-14buhqq"><!> <p class="error-card-desc svelte-14buhqq"> </p> <!> <!> <!></div>');function mc(t,e){ut(e,!0);let r=De(e,"ondismiss",3,null),s=De(e,"onsignout",3,null),i=Wt(()=>gh(e.error));Ct(()=>nn("ErrorCard"));var l=kh(),c=x(l);{var d=K=>{var ae=mh(),ee=x(ae),U=x(ee),Q=L(ee,2);Q.__click=function(...se){var X;(X=r())==null||X.apply(this,se)},me(()=>ue(U,k(i).title)),Y(K,ae)},v=K=>{var ae=yh(),ee=x(ae);me(()=>ue(ee,k(i).title)),Y(K,ae)};ke(c,K=>{r()?K(d):K(v,!1)})}var h=L(c,2),y=x(h),w=L(h,2);{var b=K=>{var ae=bh(),ee=x(ae);me(()=>ue(ee,k(i).fix)),Y(K,ae)};ke(w,K=>{k(i).fix&&K(b)})}var _=L(w,2);{var N=K=>{var ae=_h(),ee=x(ae);me(()=>{rc(ae,"href",k(i).link.url),ue(ee,`${k(i).link.label??""} â`)}),Y(K,ae)};ke(_,K=>{k(i).link&&K(N)})}var q=L(_,2);{var E=K=>{var ae=wh();ae.__click=function(...ee){var U;(U=s())==null||U.apply(this,ee)},Y(K,ae)};ke(q,K=>{k(i).action==="signout"&&s()&&K(E)})}me(()=>ue(y,k(i).description)),Y(t,l),ct()}Vt(["click"]);var xh=V('<span class="spinner svelte-nyqevv"></span> Signing in...',1),Sh=Ro('<svg viewBox="0 0 24 24" width="18" height="18" class="google-icon svelte-nyqevv"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg> Sign in with Google',1),Eh=V(`<div class="auth-container svelte-nyqevv"><div class="auth-card svelte-nyqevv"><h2 class="svelte-nyqevv">Gmail Dashboard</h2> <p class="auth-desc svelte-nyqevv">Sign in with your Google account to browse your Gmail messages.
      Read-only access â nothing is modified.</p> <!> <button class="btn google-btn svelte-nyqevv"><!></button> <div class="client-id-info svelte-nyqevv"><span class="client-id-label">Client ID:</span> <span class="client-id-value svelte-nyqevv"> </span> <button class="btn-link svelte-nyqevv">Change</button></div></div></div>`);function Th(t,e){ut(e,!0);let r=De(e,"error",3,null),s=De(e,"loadingAuth",3,!1);Ct(()=>nn("AuthCard"));var i=Eh(),l=x(i),c=L(x(l),4);{var d=E=>{mc(E,{get error(){return r()},get onsignout(){return e.onsignout}})};ke(c,E=>{r()&&E(d)})}var v=L(c,2);v.__click=function(...E){var K;(K=e.onsignin)==null||K.apply(this,E)};var h=x(v);{var y=E=>{var K=xh();Y(E,K)},w=E=>{var K=Sh();Y(E,K)};ke(h,E=>{s()?E(y):E(w,!1)})}var b=L(v,2),_=L(x(b),2),N=x(_),q=L(_,2);q.__click=function(...E){var K;(K=e.onclear)==null||K.apply(this,E)},me(E=>{v.disabled=s(),ue(N,`${E??""}...`)},[()=>e.clientId.slice(0,20)]),Y(t,i),ct()}Vt(["click"]);function Do(t){if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}catch{return t}}function yc(t){if(!t)return"Unknown";const e=t.match(/^"?([^"<]+)"?\s*</);return e?e[1].trim():t.split("@")[0]}function bc(t){return yc(t).charAt(0).toUpperCase()}var Ah=V('<span class="profile-email svelte-1w180uc">Loading profile...</span>'),Ch=V('<span class="profile-email svelte-1w180uc"> </span> <span class="profile-stats svelte-1w180uc"> </span>',1),Ih=V('<div class="profile-card svelte-1w180uc"><div class="profile-avatar svelte-1w180uc"> </div> <div class="profile-info svelte-1w180uc"><!></div> <button class="btn small svelte-1w180uc">Sign Out</button></div>');function Rh(t,e){ut(e,!0);let r=De(e,"profile",3,null),s=De(e,"loadingProfile",3,!1);Ct(()=>nn("ProfileCard"));var i=Ih(),l=x(i),c=x(l),d=L(l,2),v=x(d);{var h=b=>{var _=Ah();Y(b,_)},y=b=>{var _=Ch(),N=Dt(_),q=x(N),E=L(N,2),K=x(E);me((ae,ee)=>{ue(q,r().emailAddress),ue(K,`${ae??""} messages
        Â· ${ee??""} threads`)},[()=>{var ae;return((ae=r().messagesTotal)==null?void 0:ae.toLocaleString())||"?"},()=>{var ae;return((ae=r().threadsTotal)==null?void 0:ae.toLocaleString())||"?"}]),Y(b,_)};ke(v,b=>{s()?b(h):r()&&b(y,1)})}var w=L(d,2);w.__click=function(...b){var _;(_=e.onsignout)==null||_.apply(this,b)},me(b=>ue(c,b),[()=>r()?bc(r().emailAddress):"?"]),Y(t,i),ct()}Vt(["click"]);var Ph=V('<span class="spinner svelte-1ds3j4k"></span>'),Oh=Ro('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m0 0a9 9 0 0 1 9-9m-9 9a9 9 0 0 0 9 9" class="svelte-1ds3j4k"></path></svg>'),Dh=V('<span class="sync-meta svelte-1ds3j4k"> <!></span>'),Mh=V('<span class="sync-meta svelte-1ds3j4k">Not synced yet</span>'),Lh=V('<button class="btn-icon svelte-1ds3j4k" title="Clear local data"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M3 6h18M8 6V4h8v2m1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z" class="svelte-1ds3j4k"></path></svg></button>'),Nh=V('<option class="svelte-1ds3j4k"> </option>'),qh=V('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),jh=V('<button class="btn sync-btn svelte-1ds3j4k"> </button> <!>',1),Bh=V('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),zh=V('<div class="sync-progress svelte-1ds3j4k"><div class="progress-bar svelte-1ds3j4k"><div></div></div> <span class="progress-text svelte-1ds3j4k"> </span></div>'),Fh=V('<div class="clear-confirm svelte-1ds3j4k"><span class="svelte-1ds3j4k">Delete all locally stored emails?</span> <div class="clear-actions svelte-1ds3j4k"><button class="btn small svelte-1ds3j4k">Cancel</button> <button class="btn small danger svelte-1ds3j4k">Delete</button></div></div>'),Kh=V('<div class="sync-card svelte-1ds3j4k"><div class="sync-header svelte-1ds3j4k"><div class="sync-icon svelte-1ds3j4k"><!></div> <div class="sync-info svelte-1ds3j4k"><span class="sync-title svelte-1ds3j4k">Local Storage</span> <!></div> <div class="sync-actions svelte-1ds3j4k"><!></div></div> <div class="sync-controls svelte-1ds3j4k"><div class="limit-group svelte-1ds3j4k"><label class="limit-label svelte-1ds3j4k" for="sync-limit">Batch:</label> <select id="sync-limit" class="limit-select svelte-1ds3j4k"></select></div> <div class="sync-buttons svelte-1ds3j4k"><!></div></div> <!> <!></div>');function Uh(t,e){ut(e,!0),Ct(()=>nn("SyncStatus"));let r=De(e,"syncStatus",3,null),s=De(e,"syncProgress",3,null),i=De(e,"isSyncing",3,!1),l=Oe(!1),c=Oe(50);const d=[{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:0,label:"All"}];function v(z){if(!z)return"never";const H=Math.floor((Date.now()-z)/1e3);if(H<60)return"just now";const J=Math.floor(H/60);if(J<60)return`${J}m ago`;const le=Math.floor(J/60);return le<24?`${le}h ago`:`${Math.floor(le/24)}d ago`}function h(){var z,H;return!((z=s())!=null&&z.total)||!((H=s())!=null&&H.current)?0:Math.round(s().current/s().total*100)}var y=Kh(),w=x(y),b=x(w),_=x(b);{var N=z=>{var H=Ph();Y(z,H)},q=z=>{var H=Oh();Y(z,H)};ke(_,z=>{i()?z(N):z(q,!1)})}var E=L(b,2),K=L(x(E),2);{var ae=z=>{var H=Dh(),J=x(H),le=L(J);{var Pe=Me=>{var Ae=Cl("Â· more available");Y(Me,Ae)},Le=Me=>{var Ae=Cl("Â· all synced");Y(Me,Ae)};ke(le,Me=>{r().hasMore?Me(Pe):Me(Le,!1)})}me((Me,Ae)=>ue(J,`${Me??""} emails stored
          Â· synced ${Ae??""} `),[()=>r().totalItems.toLocaleString(),()=>v(r().lastSyncAt)]),Y(z,H)},ee=z=>{var H=Mh();Y(z,H)};ke(K,z=>{var H;(H=r())!=null&&H.synced?z(ae):z(ee,!1)})}var U=L(E,2),Q=x(U);{var se=z=>{var H=Lh();H.__click=()=>F(l,!k(l)),Y(z,H)};ke(Q,z=>{var H;(H=r())!=null&&H.synced&&!i()&&z(se)})}var X=L(w,2),ve=x(X),ie=L(x(ve),2);Fn(ie,21,()=>d,ra,(z,H)=>{var J=Nh(),le=x(J),Pe={};me(()=>{ue(le,k(H).label),Pe!==(Pe=k(H).value)&&(J.value=(J.__value=k(H).value)??"")}),Y(z,J)});var de=L(ve,2),te=x(de);{var Z=z=>{var H=jh(),J=Dt(H);J.__click=()=>e.onsync(k(c));var le=x(J),Pe=L(J,2);{var Le=Me=>{var Ae=qh();Ae.__click=()=>e.onsyncmore(k(c));var Je=x(Ae);me(()=>{Ae.disabled=i(),ue(Je,i()?"Loading...":"Sync More")}),Y(Me,Ae)};ke(Pe,Me=>{r().hasMore&&Me(Le)})}me(()=>{J.disabled=i(),ue(le,i()?"Syncing...":"Sync New")}),Y(z,H)},$=z=>{var H=Bh();H.__click=()=>e.onsync(k(c));var J=x(H);me(()=>{H.disabled=i(),ue(J,i()?"Syncing...":"Download Emails")}),Y(z,H)};ke(te,z=>{var H;(H=r())!=null&&H.synced?z(Z):z($,!1)})}var Ee=L(X,2);{var _e=z=>{var H=zh(),J=x(H),le=x(J);let Pe,Le;var Me=L(J,2),Ae=x(Me);me(Je=>{Pe=dn(le,1,"progress-fill svelte-1ds3j4k",null,Pe,{indeterminate:!s().total}),Le=nr(le,"",Le,Je),ue(Ae,s().message||"Syncing...")},[()=>({width:`${h()??""}%`})]),Y(z,H)};ke(Ee,z=>{i()&&s()&&z(_e)})}var Se=L(Ee,2);{var we=z=>{var H=Fh(),J=L(x(H),2),le=x(J);le.__click=()=>F(l,!1);var Pe=L(le,2);Pe.__click=()=>{e.onclear(),F(l,!1)},Y(z,H)};ke(Se,z=>{k(l)&&z(we)})}me(()=>ie.disabled=i()),Po(ie,()=>k(c),z=>F(c,z)),Y(t,y),ct()}Vt(["click"]);var Gh=V('<button class="message-row svelte-y2uamw"><div class="msg-avatar svelte-y2uamw"> </div> <div class="msg-body svelte-y2uamw"><div class="msg-top svelte-y2uamw"><span class="msg-from svelte-y2uamw"> </span> <span class="msg-date svelte-y2uamw"> </span></div> <div class="msg-subject svelte-y2uamw"> </div> <div class="msg-snippet svelte-y2uamw"> </div></div></button>'),Hh=V('<div class="message-list svelte-y2uamw"></div>');function Wh(t,e){ut(e,!0);let r=De(e,"messages",19,()=>[]);Ct(()=>nn("MessageList"));var s=Hh();Fn(s,21,r,ra,(i,l)=>{var c=Gh();c.__click=()=>e.onselect(k(l));var d=x(c),v=x(d),h=L(d,2),y=x(h),w=x(y),b=x(w),_=L(w,2),N=x(_),q=L(y,2),E=x(q),K=L(q,2),ae=x(K);me((ee,U,Q)=>{ue(v,ee),ue(b,U),ue(N,Q),ue(E,k(l).subject),ue(ae,k(l).snippet)},[()=>bc(k(l).from),()=>yc(k(l).from),()=>Do(k(l).date)]),Y(i,c)}),Y(t,s),ct()}Vt(["click"]);function Mo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var aa=Mo();function _c(t){aa=t}var jr={exec:()=>null};function Ve(t,e=""){let r=typeof t=="string"?t:t.source,s={replace:(i,l)=>{let c=typeof l=="string"?l:l.source;return c=c.replace(qt.caret,"$1"),r=r.replace(i,c),s},getRegex:()=>new RegExp(r,e)};return s}var Yh=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),qt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}>`)},Vh=/^(?:[ \t]*(?:\n|$))+/,Xh=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Zh=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ms=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Qh=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Lo=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,wc=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,kc=Ve(wc).replace(/bull/g,Lo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),$h=Ve(wc).replace(/bull/g,Lo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),No=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Jh=/^[^\n]+/,qo=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ev=Ve(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",qo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),tv=Ve(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Lo).getRegex(),fi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nv=Ve("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",jo).replace("tag",fi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xc=Ve(No).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex(),rv=Ve(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",xc).getRegex(),Bo={blockquote:rv,code:Xh,def:ev,fences:Zh,heading:Qh,hr:ms,html:nv,lheading:kc,list:tv,newline:Vh,paragraph:xc,table:jr,text:Jh},zl=Ve("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex(),av={...Bo,lheading:$h,table:zl,paragraph:Ve(No).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex()},sv={...Bo,html:Ve(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:jr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ve(No).replace("hr",ms).replace("heading",` *#{1,6} *[^
]`).replace("lheading",kc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},iv=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ov=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Sc=/^( {2,}|\\)\n(?!\s*$)/,lv=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,di=/[\p{P}\p{S}]/u,zo=/[\s\p{P}\p{S}]/u,Ec=/[^\s\p{P}\p{S}]/u,uv=Ve(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,zo).getRegex(),Tc=/(?!~)[\p{P}\p{S}]/u,cv=/(?!~)[\s\p{P}\p{S}]/u,fv=/(?:[^\s\p{P}\p{S}]|~)/u,Ac=/(?![*_])[\p{P}\p{S}]/u,dv=/(?![*_])[\s\p{P}\p{S}]/u,pv=/(?:[^\s\p{P}\p{S}]|[*_])/u,hv=Ve(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Yh?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Cc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,vv=Ve(Cc,"u").replace(/punct/g,di).getRegex(),gv=Ve(Cc,"u").replace(/punct/g,Tc).getRegex(),Ic="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",mv=Ve(Ic,"gu").replace(/notPunctSpace/g,Ec).replace(/punctSpace/g,zo).replace(/punct/g,di).getRegex(),yv=Ve(Ic,"gu").replace(/notPunctSpace/g,fv).replace(/punctSpace/g,cv).replace(/punct/g,Tc).getRegex(),bv=Ve("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ec).replace(/punctSpace/g,zo).replace(/punct/g,di).getRegex(),_v=Ve(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,Ac).getRegex(),wv="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",kv=Ve(wv,"gu").replace(/notPunctSpace/g,pv).replace(/punctSpace/g,dv).replace(/punct/g,Ac).getRegex(),xv=Ve(/\\(punct)/,"gu").replace(/punct/g,di).getRegex(),Sv=Ve(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ev=Ve(jo).replace("(?:-->|$)","-->").getRegex(),Tv=Ve("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ev).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ti=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Av=Ve(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ti).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Rc=Ve(/^!?\[(label)\]\[(ref)\]/).replace("label",ti).replace("ref",qo).getRegex(),Pc=Ve(/^!?\[(ref)\](?:\[\])?/).replace("ref",qo).getRegex(),Cv=Ve("reflink|nolink(?!\\()","g").replace("reflink",Rc).replace("nolink",Pc).getRegex(),Fl=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Fo={_backpedal:jr,anyPunctuation:xv,autolink:Sv,blockSkip:hv,br:Sc,code:ov,del:jr,delLDelim:jr,delRDelim:jr,emStrongLDelim:vv,emStrongRDelimAst:mv,emStrongRDelimUnd:bv,escape:iv,link:Av,nolink:Pc,punctuation:uv,reflink:Rc,reflinkSearch:Cv,tag:Tv,text:lv,url:jr},Iv={...Fo,link:Ve(/^!?\[(label)\]\((.*?)\)/).replace("label",ti).getRegex(),reflink:Ve(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ti).getRegex()},co={...Fo,emStrongRDelimAst:yv,emStrongLDelim:gv,delLDelim:_v,delRDelim:kv,url:Ve(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Fl).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ve(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Fl).getRegex()},Rv={...co,br:Ve(Sc).replace("{2,}","*").getRegex(),text:Ve(co.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fs={normal:Bo,gfm:av,pedantic:sv},Wa={normal:Fo,gfm:co,breaks:Rv,pedantic:Iv},Pv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kl=t=>Pv[t];function Vn(t,e){if(e){if(qt.escapeTest.test(t))return t.replace(qt.escapeReplace,Kl)}else if(qt.escapeTestNoEncode.test(t))return t.replace(qt.escapeReplaceNoEncode,Kl);return t}function Ul(t){try{t=encodeURI(t).replace(qt.percentDecode,"%")}catch{return null}return t}function Gl(t,e){var l;let r=t.replace(qt.findPipe,(c,d,v)=>{let h=!1,y=d;for(;--y>=0&&v[y]==="\\";)h=!h;return h?"|":" |"}),s=r.split(qt.splitPipe),i=0;if(s[0].trim()||s.shift(),s.length>0&&!((l=s.at(-1))!=null&&l.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(qt.slashPipe,"|");return s}function Ya(t,e,r){let s=t.length;if(s===0)return"";let i=0;for(;i<s&&t.charAt(s-i-1)===e;)i++;return t.slice(0,s-i)}function Ov(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let s=0;s<t.length;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return r>0?-2:-1}function Dv(t,e=0){let r=e,s="";for(let i of t)if(i==="	"){let l=4-r%4;s+=" ".repeat(l),r+=l}else s+=i,r++;return s}function Hl(t,e,r,s,i){let l=e.href,c=e.title||null,d=t[1].replace(i.other.outputLinkReplace,"$1");s.state.inLink=!0;let v={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:l,title:c,text:d,tokens:s.inlineTokens(d)};return s.state.inLink=!1,v}function Mv(t,e,r){let s=t.match(r.other.indentCodeCompensation);if(s===null)return e;let i=s[1];return e.split(`
`).map(l=>{let c=l.match(r.other.beginningSpace);if(c===null)return l;let[d]=c;return d.length>=i.length?l.slice(i.length):l}).join(`
`)}var ni=class{constructor(t){Ke(this,"options");Ke(this,"rules");Ke(this,"lexer");this.options=t||aa}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ya(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],s=Mv(r,e[3]||"",this.rules);return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(this.rules.other.endingHash.test(r)){let s=Ya(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ya(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=Ya(e[0],`
`).split(`
`),s="",i="",l=[];for(;r.length>0;){let c=!1,d=[],v;for(v=0;v<r.length;v++)if(this.rules.other.blockquoteStart.test(r[v]))d.push(r[v]),c=!0;else if(!c)d.push(r[v]);else break;r=r.slice(v);let h=d.join(`
`),y=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${h}`:h,i=i?`${i}
${y}`:y;let w=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(y,l,!0),this.lexer.state.top=w,r.length===0)break;let b=l.at(-1);if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){let _=b,N=_.raw+`
`+r.join(`
`),q=this.blockquote(N);l[l.length-1]=q,s=s.substring(0,s.length-_.raw.length)+q.raw,i=i.substring(0,i.length-_.text.length)+q.text;break}else if((b==null?void 0:b.type)==="list"){let _=b,N=_.raw+`
`+r.join(`
`),q=this.list(N);l[l.length-1]=q,s=s.substring(0,s.length-b.raw.length)+q.raw,i=i.substring(0,i.length-_.raw.length)+q.raw,r=N.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:i}}}list(t){var r,s;let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim(),l=i.length>1,c={type:"list",raw:"",ordered:l,start:l?+i.slice(0,-1):"",loose:!1,items:[]};i=l?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=l?i:"[*+-]");let d=this.rules.other.listItemRegex(i),v=!1;for(;t;){let y=!1,w="",b="";if(!(e=d.exec(t))||this.rules.block.hr.test(t))break;w=e[0],t=t.substring(w.length);let _=Dv(e[2].split(`
`,1)[0],e[1].length),N=t.split(`
`,1)[0],q=!_.trim(),E=0;if(this.options.pedantic?(E=2,b=_.trimStart()):q?E=e[1].length+1:(E=_.search(this.rules.other.nonSpaceChar),E=E>4?1:E,b=_.slice(E),E+=e[1].length),q&&this.rules.other.blankLine.test(N)&&(w+=N+`
`,t=t.substring(N.length+1),y=!0),!y){let K=this.rules.other.nextBulletRegex(E),ae=this.rules.other.hrRegex(E),ee=this.rules.other.fencesBeginRegex(E),U=this.rules.other.headingBeginRegex(E),Q=this.rules.other.htmlBeginRegex(E),se=this.rules.other.blockquoteBeginRegex(E);for(;t;){let X=t.split(`
`,1)[0],ve;if(N=X,this.options.pedantic?(N=N.replace(this.rules.other.listReplaceNesting,"  "),ve=N):ve=N.replace(this.rules.other.tabCharGlobal,"    "),ee.test(N)||U.test(N)||Q.test(N)||se.test(N)||K.test(N)||ae.test(N))break;if(ve.search(this.rules.other.nonSpaceChar)>=E||!N.trim())b+=`
`+ve.slice(E);else{if(q||_.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ee.test(_)||U.test(_)||ae.test(_))break;b+=`
`+N}q=!N.trim(),w+=X+`
`,t=t.substring(X.length+1),_=ve.slice(E)}}c.loose||(v?c.loose=!0:this.rules.other.doubleBlankLine.test(w)&&(v=!0)),c.items.push({type:"list_item",raw:w,task:!!this.options.gfm&&this.rules.other.listIsTask.test(b),loose:!1,text:b,tokens:[]}),c.raw+=w}let h=c.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;c.raw=c.raw.trimEnd();for(let y of c.items){if(this.lexer.state.top=!1,y.tokens=this.lexer.blockTokens(y.text,[]),y.task){if(y.text=y.text.replace(this.rules.other.listReplaceTask,""),((r=y.tokens[0])==null?void 0:r.type)==="text"||((s=y.tokens[0])==null?void 0:s.type)==="paragraph"){y.tokens[0].raw=y.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),y.tokens[0].text=y.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let b=this.lexer.inlineQueue.length-1;b>=0;b--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[b].src)){this.lexer.inlineQueue[b].src=this.lexer.inlineQueue[b].src.replace(this.rules.other.listReplaceTask,"");break}}let w=this.rules.other.listTaskCheckbox.exec(y.raw);if(w){let b={type:"checkbox",raw:w[0]+" ",checked:w[0]!=="[ ]"};y.checked=b.checked,c.loose?y.tokens[0]&&["paragraph","text"].includes(y.tokens[0].type)&&"tokens"in y.tokens[0]&&y.tokens[0].tokens?(y.tokens[0].raw=b.raw+y.tokens[0].raw,y.tokens[0].text=b.raw+y.tokens[0].text,y.tokens[0].tokens.unshift(b)):y.tokens.unshift({type:"paragraph",raw:b.raw,text:b.raw,tokens:[b]}):y.tokens.unshift(b)}}if(!c.loose){let w=y.tokens.filter(_=>_.type==="space"),b=w.length>0&&w.some(_=>this.rules.other.anyLine.test(_.raw));c.loose=b}}if(c.loose)for(let y of c.items){y.loose=!0;for(let w of y.tokens)w.type==="text"&&(w.type="paragraph")}return c}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:s,title:i}}}table(t){var c;let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=Gl(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===s.length){for(let d of s)this.rules.other.tableAlignRight.test(d)?l.align.push("right"):this.rules.other.tableAlignCenter.test(d)?l.align.push("center"):this.rules.other.tableAlignLeft.test(d)?l.align.push("left"):l.align.push(null);for(let d=0;d<r.length;d++)l.header.push({text:r[d],tokens:this.lexer.inline(r[d]),header:!0,align:l.align[d]});for(let d of i)l.rows.push(Gl(d,l.header.length).map((v,h)=>({text:v,tokens:this.lexer.inline(v),header:!1,align:l.align[h]})));return l}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let l=Ya(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{let l=Ov(e[2],"()");if(l===-2)return;if(l>-1){let c=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let s=e[2],i="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(s);l&&(s=l[1],i=l[3])}else i=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),Hl(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[s.toLowerCase()];if(!i){let l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return Hl(r,i,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!r||this.rules.inline.punctuation.exec(r))){let i=[...s[0]].length-1,l,c,d=i,v=0,h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*t.length+i);(s=h.exec(e))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=[...l].length,s[3]||s[4]){d+=c;continue}else if((s[5]||s[6])&&i%3&&!((i+c)%3)){v+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d+v);let y=[...s[0]][0].length,w=t.slice(0,i+s.index+y+c);if(Math.min(i,c)%2){let _=w.slice(1,-1);return{type:"em",raw:w,text:_,tokens:this.lexer.inlineTokens(_)}}let b=w.slice(2,-2);return{type:"strong",raw:w,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(r),i=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&i&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t,e,r=""){let s=this.rules.inline.delLDelim.exec(t);if(s&&(!s[1]||!r||this.rules.inline.punctuation.exec(r))){let i=[...s[0]].length-1,l,c,d=i,v=this.rules.inline.delRDelim;for(v.lastIndex=0,e=e.slice(-1*t.length+i);(s=v.exec(e))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l||(c=[...l].length,c!==i))continue;if(s[3]||s[4]){d+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d);let h=[...s[0]][0].length,y=t.slice(0,i+s.index+h+c),w=y.slice(i,-i);return{type:"del",raw:y,text:w,tokens:this.lexer.inlineTokens(w)}}}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,s;return e[2]==="@"?(r=e[1],s="mailto:"+r):(r=e[1],s=r),{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let e;if(e=this.rules.inline.url.exec(t)){let s,i;if(e[2]==="@")s=e[0],i="mailto:"+s;else{let l;do l=e[0],e[0]=((r=this.rules.inline._backpedal.exec(e[0]))==null?void 0:r[0])??"";while(l!==e[0]);s=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:r}}}},En=class fo{constructor(e){Ke(this,"tokens");Ke(this,"options");Ke(this,"state");Ke(this,"inlineQueue");Ke(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||aa,this.options.tokenizer=this.options.tokenizer||new ni,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:qt,block:Fs.normal,inline:Wa.normal};this.options.pedantic?(r.block=Fs.pedantic,r.inline=Wa.pedantic):this.options.gfm&&(r.block=Fs.gfm,this.options.breaks?r.inline=Wa.breaks:r.inline=Wa.gfm),this.tokenizer.rules=r}static get rules(){return{block:Fs,inline:Wa}}static lex(e,r){return new fo(r).lex(e)}static lexInline(e,r){return new fo(r).inlineTokens(e)}lex(e){e=e.replace(qt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let s=this.inlineQueue[r];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],s=!1){var i,l,c;for(this.options.pedantic&&(e=e.replace(qt.tabCharGlobal,"    ").replace(qt.spaceLine,""));e;){let d;if((l=(i=this.options.extensions)==null?void 0:i.block)!=null&&l.some(h=>(d=h.call({lexer:this},e,r))?(e=e.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.space(e)){e=e.substring(d.raw.length);let h=r.at(-1);d.raw.length===1&&h!==void 0?h.raw+=`
`:r.push(d);continue}if(d=this.tokenizer.code(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.at(-1).src=h.text):r.push(d);continue}if(d=this.tokenizer.fences(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.heading(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.hr(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.blockquote(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.list(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.html(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.def(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.raw,this.inlineQueue.at(-1).src=h.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title},r.push(d));continue}if(d=this.tokenizer.table(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.lheading(e)){e=e.substring(d.raw.length),r.push(d);continue}let v=e;if((c=this.options.extensions)!=null&&c.startBlock){let h=1/0,y=e.slice(1),w;this.options.extensions.startBlock.forEach(b=>{w=b.call({lexer:this},y),typeof w=="number"&&w>=0&&(h=Math.min(h,w))}),h<1/0&&h>=0&&(v=e.substring(0,h+1))}if(this.state.top&&(d=this.tokenizer.paragraph(v))){let h=r.at(-1);s&&(h==null?void 0:h.type)==="paragraph"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):r.push(d),s=v.length!==e.length,e=e.substring(d.raw.length);continue}if(d=this.tokenizer.text(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):r.push(d);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){var v,h,y,w,b;let s=e,i=null;if(this.tokens.links){let _=Object.keys(this.tokens.links);if(_.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)_.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)l=i[2]?i[2].length:0,s=s.slice(0,i.index+l)+"["+"a".repeat(i[0].length-l-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((h=(v=this.options.hooks)==null?void 0:v.emStrongMask)==null?void 0:h.call({lexer:this},s))??s;let c=!1,d="";for(;e;){c||(d=""),c=!1;let _;if((w=(y=this.options.extensions)==null?void 0:y.inline)!=null&&w.some(q=>(_=q.call({lexer:this},e,r))?(e=e.substring(_.raw.length),r.push(_),!0):!1))continue;if(_=this.tokenizer.escape(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.tag(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.link(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(_.raw.length);let q=r.at(-1);_.type==="text"&&(q==null?void 0:q.type)==="text"?(q.raw+=_.raw,q.text+=_.text):r.push(_);continue}if(_=this.tokenizer.emStrong(e,s,d)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.codespan(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.br(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.del(e,s,d)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.autolink(e)){e=e.substring(_.raw.length),r.push(_);continue}if(!this.state.inLink&&(_=this.tokenizer.url(e))){e=e.substring(_.raw.length),r.push(_);continue}let N=e;if((b=this.options.extensions)!=null&&b.startInline){let q=1/0,E=e.slice(1),K;this.options.extensions.startInline.forEach(ae=>{K=ae.call({lexer:this},E),typeof K=="number"&&K>=0&&(q=Math.min(q,K))}),q<1/0&&q>=0&&(N=e.substring(0,q+1))}if(_=this.tokenizer.inlineText(N)){e=e.substring(_.raw.length),_.raw.slice(-1)!=="_"&&(d=_.raw.slice(-1)),c=!0;let q=r.at(-1);(q==null?void 0:q.type)==="text"?(q.raw+=_.raw,q.text+=_.text):r.push(_);continue}if(e){let q="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(q);break}else throw new Error(q)}}return r}},ri=class{constructor(t){Ke(this,"options");Ke(this,"parser");this.options=t||aa}space(t){return""}code({text:t,lang:e,escaped:r}){var l;let s=(l=(e||"").match(qt.notSpaceStart))==null?void 0:l[0],i=t.replace(qt.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Vn(s)+'">'+(r?i:Vn(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:Vn(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,r=t.start,s="";for(let c=0;c<t.items.length;c++){let d=t.items[c];s+=this.listitem(d)}let i=e?"ol":"ul",l=e&&r!==1?' start="'+r+'"':"";return"<"+i+l+`>
`+s+"</"+i+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",r="";for(let i=0;i<t.header.length;i++)r+=this.tablecell(t.header[i]);e+=this.tablerow({text:r});let s="";for(let i=0;i<t.rows.length;i++){let l=t.rows[i];r="";for(let c=0;c<l.length;c++)r+=this.tablecell(l[c]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Vn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let s=this.parser.parseInline(r),i=Ul(t);if(i===null)return s;t=i;let l='<a href="'+t+'"';return e&&(l+=' title="'+Vn(e)+'"'),l+=">"+s+"</a>",l}image({href:t,title:e,text:r,tokens:s}){s&&(r=this.parser.parseInline(s,this.parser.textRenderer));let i=Ul(t);if(i===null)return Vn(r);t=i;let l=`<img src="${t}" alt="${r}"`;return e&&(l+=` title="${Vn(e)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Vn(t.text)}},Ko=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},Tn=class po{constructor(e){Ke(this,"options");Ke(this,"renderer");Ke(this,"textRenderer");this.options=e||aa,this.options.renderer=this.options.renderer||new ri,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ko}static parse(e,r){return new po(r).parse(e)}static parseInline(e,r){return new po(r).parseInline(e)}parse(e){var s,i;let r="";for(let l=0;l<e.length;l++){let c=e[l];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[c.type]){let v=c,h=this.options.extensions.renderers[v.type].call({parser:this},v);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(v.type)){r+=h||"";continue}}let d=c;switch(d.type){case"space":{r+=this.renderer.space(d);break}case"hr":{r+=this.renderer.hr(d);break}case"heading":{r+=this.renderer.heading(d);break}case"code":{r+=this.renderer.code(d);break}case"table":{r+=this.renderer.table(d);break}case"blockquote":{r+=this.renderer.blockquote(d);break}case"list":{r+=this.renderer.list(d);break}case"checkbox":{r+=this.renderer.checkbox(d);break}case"html":{r+=this.renderer.html(d);break}case"def":{r+=this.renderer.def(d);break}case"paragraph":{r+=this.renderer.paragraph(d);break}case"text":{r+=this.renderer.text(d);break}default:{let v='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(v),"";throw new Error(v)}}}return r}parseInline(e,r=this.renderer){var i,l;let s="";for(let c=0;c<e.length;c++){let d=e[c];if((l=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&l[d.type]){let h=this.options.extensions.renderers[d.type].call({parser:this},d);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){s+=h||"";continue}}let v=d;switch(v.type){case"escape":{s+=r.text(v);break}case"html":{s+=r.html(v);break}case"link":{s+=r.link(v);break}case"image":{s+=r.image(v);break}case"checkbox":{s+=r.checkbox(v);break}case"strong":{s+=r.strong(v);break}case"em":{s+=r.em(v);break}case"codespan":{s+=r.codespan(v);break}case"br":{s+=r.br(v);break}case"del":{s+=r.del(v);break}case"text":{s+=r.text(v);break}default:{let h='Token with "'+v.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}},Gs,es=(Gs=class{constructor(t){Ke(this,"options");Ke(this,"block");this.options=t||aa}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?En.lex:En.lexInline}provideParser(){return this.block?Tn.parse:Tn.parseInline}},Ke(Gs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ke(Gs,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Gs),Lv=class{constructor(...t){Ke(this,"defaults",Mo());Ke(this,"options",this.setOptions);Ke(this,"parse",this.parseMarkdown(!0));Ke(this,"parseInline",this.parseMarkdown(!1));Ke(this,"Parser",Tn);Ke(this,"Renderer",ri);Ke(this,"TextRenderer",Ko);Ke(this,"Lexer",En);Ke(this,"Tokenizer",ni);Ke(this,"Hooks",es);this.use(...t)}walkTokens(t,e){var s,i;let r=[];for(let l of t)switch(r=r.concat(e.call(this,l)),l.type){case"table":{let c=l;for(let d of c.header)r=r.concat(this.walkTokens(d.tokens,e));for(let d of c.rows)for(let v of d)r=r.concat(this.walkTokens(v.tokens,e));break}case"list":{let c=l;r=r.concat(this.walkTokens(c.items,e));break}default:{let c=l;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[c.type]?this.defaults.extensions.childTokens[c.type].forEach(d=>{let v=c[d].flat(1/0);r=r.concat(this.walkTokens(v,e))}):c.tokens&&(r=r.concat(this.walkTokens(c.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let l=e.renderers[i.name];l?e.renderers[i.name]=function(...c){let d=i.renderer.apply(this,c);return d===!1&&(d=l.apply(this,c)),d}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[i.level];l?l.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),s.extensions=e),r.renderer){let i=this.defaults.renderer||new ri(this.defaults);for(let l in r.renderer){if(!(l in i))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let c=l,d=r.renderer[c],v=i[c];i[c]=(...h)=>{let y=d.apply(i,h);return y===!1&&(y=v.apply(i,h)),y||""}}s.renderer=i}if(r.tokenizer){let i=this.defaults.tokenizer||new ni(this.defaults);for(let l in r.tokenizer){if(!(l in i))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let c=l,d=r.tokenizer[c],v=i[c];i[c]=(...h)=>{let y=d.apply(i,h);return y===!1&&(y=v.apply(i,h)),y}}s.tokenizer=i}if(r.hooks){let i=this.defaults.hooks||new es;for(let l in r.hooks){if(!(l in i))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let c=l,d=r.hooks[c],v=i[c];es.passThroughHooks.has(l)?i[c]=h=>{if(this.defaults.async&&es.passThroughHooksRespectAsync.has(l))return(async()=>{let w=await d.call(i,h);return v.call(i,w)})();let y=d.call(i,h);return v.call(i,y)}:i[c]=(...h)=>{if(this.defaults.async)return(async()=>{let w=await d.apply(i,h);return w===!1&&(w=await v.apply(i,h)),w})();let y=d.apply(i,h);return y===!1&&(y=v.apply(i,h)),y}}s.hooks=i}if(r.walkTokens){let i=this.defaults.walkTokens,l=r.walkTokens;s.walkTokens=function(c){let d=[];return d.push(l.call(this,c)),i&&(d=d.concat(i.call(this,c))),d}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return En.lex(t,e??this.defaults)}parser(t,e){return Tn.parse(t,e??this.defaults)}parseMarkdown(t){return(e,r)=>{let s={...r},i={...this.defaults,...s},l=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let c=i.hooks?await i.hooks.preprocess(e):e,d=await(i.hooks?await i.hooks.provideLexer():t?En.lex:En.lexInline)(c,i),v=i.hooks?await i.hooks.processAllTokens(d):d;i.walkTokens&&await Promise.all(this.walkTokens(v,i.walkTokens));let h=await(i.hooks?await i.hooks.provideParser():t?Tn.parse:Tn.parseInline)(v,i);return i.hooks?await i.hooks.postprocess(h):h})().catch(l);try{i.hooks&&(e=i.hooks.preprocess(e));let c=(i.hooks?i.hooks.provideLexer():t?En.lex:En.lexInline)(e,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let d=(i.hooks?i.hooks.provideParser():t?Tn.parse:Tn.parseInline)(c,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(c){return l(c)}}}onError(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+Vn(r.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(r);throw r}}},ta=new Lv;function $e(t,e){return ta.parse(t,e)}$e.options=$e.setOptions=function(t){return ta.setOptions(t),$e.defaults=ta.defaults,_c($e.defaults),$e};$e.getDefaults=Mo;$e.defaults=aa;$e.use=function(...t){return ta.use(...t),$e.defaults=ta.defaults,_c($e.defaults),$e};$e.walkTokens=function(t,e){return ta.walkTokens(t,e)};$e.parseInline=ta.parseInline;$e.Parser=Tn;$e.parser=Tn.parse;$e.Renderer=ri;$e.TextRenderer=Ko;$e.Lexer=En;$e.lexer=En.lex;$e.Tokenizer=ni;$e.Hooks=es;$e.parse=$e;$e.options;$e.setOptions;$e.use;$e.walkTokens;$e.parseInline;Tn.parse;En.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Oc,setPrototypeOf:Wl,isFrozen:Nv,getPrototypeOf:qv,getOwnPropertyDescriptor:jv}=Object;let{freeze:jt,seal:gn,create:ho}=Object,{apply:vo,construct:go}=typeof Reflect<"u"&&Reflect;jt||(jt=function(e){return e});gn||(gn=function(e){return e});vo||(vo=function(e,r){for(var s=arguments.length,i=new Array(s>2?s-2:0),l=2;l<s;l++)i[l-2]=arguments[l];return e.apply(r,i)});go||(go=function(e){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return new e(...s)});const Ks=Bt(Array.prototype.forEach),Bv=Bt(Array.prototype.lastIndexOf),Yl=Bt(Array.prototype.pop),Va=Bt(Array.prototype.push),zv=Bt(Array.prototype.splice),Qs=Bt(String.prototype.toLowerCase),Gi=Bt(String.prototype.toString),Hi=Bt(String.prototype.match),Xa=Bt(String.prototype.replace),Fv=Bt(String.prototype.indexOf),Kv=Bt(String.prototype.trim),xn=Bt(Object.prototype.hasOwnProperty),Nt=Bt(RegExp.prototype.test),Za=Uv(TypeError);function Bt(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return vo(t,e,s)}}function Uv(t){return function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return go(t,r)}}function Fe(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qs;Wl&&Wl(t,null);let s=e.length;for(;s--;){let i=e[s];if(typeof i=="string"){const l=r(i);l!==i&&(Nv(e)||(e[s]=l),i=l)}t[i]=!0}return t}function Gv(t){for(let e=0;e<t.length;e++)xn(t,e)||(t[e]=null);return t}function Ln(t){const e=ho(null);for(const[r,s]of Oc(t))xn(t,r)&&(Array.isArray(s)?e[r]=Gv(s):s&&typeof s=="object"&&s.constructor===Object?e[r]=Ln(s):e[r]=s);return e}function Qa(t,e){for(;t!==null;){const s=jv(t,e);if(s){if(s.get)return Bt(s.get);if(typeof s.value=="function")return Bt(s.value)}t=qv(t)}function r(){return null}return r}const Vl=jt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wi=jt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Yi=jt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Hv=jt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vi=jt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wv=jt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xl=jt(["#text"]),Zl=jt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Xi=jt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ql=jt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Us=jt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Yv=gn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Vv=gn(/<%[\w\W]*|[\w\W]*%>/gm),Xv=gn(/\$\{[\w\W]*/gm),Zv=gn(/^data-[\-\w.\u00B7-\uFFFF]+$/),Qv=gn(/^aria-[\-\w]+$/),Dc=gn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$v=gn(/^(?:\w+script|data):/i),Jv=gn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mc=gn(/^html$/i),eg=gn(/^[a-z][.\w]*(-[.\w]+)+$/i);var $l=Object.freeze({__proto__:null,ARIA_ATTR:Qv,ATTR_WHITESPACE:Jv,CUSTOM_ELEMENT:eg,DATA_ATTR:Zv,DOCTYPE_NAME:Mc,ERB_EXPR:Vv,IS_ALLOWED_URI:Dc,IS_SCRIPT_OR_DATA:$v,MUSTACHE_EXPR:Yv,TMPLIT_EXPR:Xv});const $a={element:1,text:3,progressingInstruction:7,comment:8,document:9},tg=function(){return typeof window>"u"?null:window},ng=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(s=r.getAttribute(i));const l="dompurify"+(s?"#"+s:"");try{return e.createPolicy(l,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Jl=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Lc(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tg();const e=Ie=>Lc(Ie);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==$a.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const s=r,i=s.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:d,Element:v,NodeFilter:h,NamedNodeMap:y=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:w,DOMParser:b,trustedTypes:_}=t,N=v.prototype,q=Qa(N,"cloneNode"),E=Qa(N,"remove"),K=Qa(N,"nextSibling"),ae=Qa(N,"childNodes"),ee=Qa(N,"parentNode");if(typeof c=="function"){const Ie=r.createElement("template");Ie.content&&Ie.content.ownerDocument&&(r=Ie.content.ownerDocument)}let U,Q="";const{implementation:se,createNodeIterator:X,createDocumentFragment:ve,getElementsByTagName:ie}=r,{importNode:de}=s;let te=Jl();e.isSupported=typeof Oc=="function"&&typeof ee=="function"&&se&&se.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Z,ERB_EXPR:$,TMPLIT_EXPR:Ee,DATA_ATTR:_e,ARIA_ATTR:Se,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:H}=$l;let{IS_ALLOWED_URI:J}=$l,le=null;const Pe=Fe({},[...Vl,...Wi,...Yi,...Vi,...Xl]);let Le=null;const Me=Fe({},[...Zl,...Xi,...Ql,...Us]);let Ae=Object.seal(ho(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Je=null,Re=null;const tt=Object.seal(ho(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let vt=!0,ye=!0,Mt=!1,He=!0,rn=!1,sa=!0,Lt=!1,Ra=!1,Pa=!1,sr=!1,ia=!1,ir=!1,Xt=!0,Oa=!1;const Er="user-content-";let oa=!0,mn=!1,gt={},yt=null;const Tr=Fe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let or=null;const la=Fe({},["audio","video","img","source","image","track"]);let lr=null;const Pn=Fe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Un="http://www.w3.org/1998/Math/MathML",ur="http://www.w3.org/2000/svg",bt="http://www.w3.org/1999/xhtml";let Ce=bt,Gn=!1,yn=null;const ua=Fe({},[Un,ur,bt],Gi);let ge=Fe({},["mi","mo","mn","ms","mtext"]),cr=Fe({},["annotation-xml"]);const ys=Fe({},["title","style","font","a","script"]);let Hn=null;const bs=["application/xhtml+xml","text/html"],Da="text/html";let ft=null,fr=null;const dr=r.createElement("form"),Wn=function(T){return T instanceof RegExp||T instanceof Function},Ar=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fr&&fr===T)){if((!T||typeof T!="object")&&(T={}),T=Ln(T),Hn=bs.indexOf(T.PARSER_MEDIA_TYPE)===-1?Da:T.PARSER_MEDIA_TYPE,ft=Hn==="application/xhtml+xml"?Gi:Qs,le=xn(T,"ALLOWED_TAGS")?Fe({},T.ALLOWED_TAGS,ft):Pe,Le=xn(T,"ALLOWED_ATTR")?Fe({},T.ALLOWED_ATTR,ft):Me,yn=xn(T,"ALLOWED_NAMESPACES")?Fe({},T.ALLOWED_NAMESPACES,Gi):ua,lr=xn(T,"ADD_URI_SAFE_ATTR")?Fe(Ln(Pn),T.ADD_URI_SAFE_ATTR,ft):Pn,or=xn(T,"ADD_DATA_URI_TAGS")?Fe(Ln(la),T.ADD_DATA_URI_TAGS,ft):la,yt=xn(T,"FORBID_CONTENTS")?Fe({},T.FORBID_CONTENTS,ft):Tr,Je=xn(T,"FORBID_TAGS")?Fe({},T.FORBID_TAGS,ft):Ln({}),Re=xn(T,"FORBID_ATTR")?Fe({},T.FORBID_ATTR,ft):Ln({}),gt=xn(T,"USE_PROFILES")?T.USE_PROFILES:!1,vt=T.ALLOW_ARIA_ATTR!==!1,ye=T.ALLOW_DATA_ATTR!==!1,Mt=T.ALLOW_UNKNOWN_PROTOCOLS||!1,He=T.ALLOW_SELF_CLOSE_IN_ATTR!==!1,rn=T.SAFE_FOR_TEMPLATES||!1,sa=T.SAFE_FOR_XML!==!1,Lt=T.WHOLE_DOCUMENT||!1,sr=T.RETURN_DOM||!1,ia=T.RETURN_DOM_FRAGMENT||!1,ir=T.RETURN_TRUSTED_TYPE||!1,Pa=T.FORCE_BODY||!1,Xt=T.SANITIZE_DOM!==!1,Oa=T.SANITIZE_NAMED_PROPS||!1,oa=T.KEEP_CONTENT!==!1,mn=T.IN_PLACE||!1,J=T.ALLOWED_URI_REGEXP||Dc,Ce=T.NAMESPACE||bt,ge=T.MATHML_TEXT_INTEGRATION_POINTS||ge,cr=T.HTML_INTEGRATION_POINTS||cr,Ae=T.CUSTOM_ELEMENT_HANDLING||{},T.CUSTOM_ELEMENT_HANDLING&&Wn(T.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=T.CUSTOM_ELEMENT_HANDLING.tagNameCheck),T.CUSTOM_ELEMENT_HANDLING&&Wn(T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),T.CUSTOM_ELEMENT_HANDLING&&typeof T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ae.allowCustomizedBuiltInElements=T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rn&&(ye=!1),ia&&(sr=!0),gt&&(le=Fe({},Xl),Le=[],gt.html===!0&&(Fe(le,Vl),Fe(Le,Zl)),gt.svg===!0&&(Fe(le,Wi),Fe(Le,Xi),Fe(Le,Us)),gt.svgFilters===!0&&(Fe(le,Yi),Fe(Le,Xi),Fe(Le,Us)),gt.mathMl===!0&&(Fe(le,Vi),Fe(Le,Ql),Fe(Le,Us))),T.ADD_TAGS&&(typeof T.ADD_TAGS=="function"?tt.tagCheck=T.ADD_TAGS:(le===Pe&&(le=Ln(le)),Fe(le,T.ADD_TAGS,ft))),T.ADD_ATTR&&(typeof T.ADD_ATTR=="function"?tt.attributeCheck=T.ADD_ATTR:(Le===Me&&(Le=Ln(Le)),Fe(Le,T.ADD_ATTR,ft))),T.ADD_URI_SAFE_ATTR&&Fe(lr,T.ADD_URI_SAFE_ATTR,ft),T.FORBID_CONTENTS&&(yt===Tr&&(yt=Ln(yt)),Fe(yt,T.FORBID_CONTENTS,ft)),T.ADD_FORBID_CONTENTS&&(yt===Tr&&(yt=Ln(yt)),Fe(yt,T.ADD_FORBID_CONTENTS,ft)),oa&&(le["#text"]=!0),Lt&&Fe(le,["html","head","body"]),le.table&&(Fe(le,["tbody"]),delete Je.tbody),T.TRUSTED_TYPES_POLICY){if(typeof T.TRUSTED_TYPES_POLICY.createHTML!="function")throw Za('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof T.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Za('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=T.TRUSTED_TYPES_POLICY,Q=U.createHTML("")}else U===void 0&&(U=ng(_,i)),U!==null&&typeof Q=="string"&&(Q=U.createHTML(""));jt&&jt(T),fr=T}},Cr=Fe({},[...Wi,...Yi,...Hv]),nt=Fe({},[...Vi,...Wv]),mt=function(T){let oe=ee(T);(!oe||!oe.tagName)&&(oe={namespaceURI:Ce,tagName:"template"});const fe=Qs(T.tagName),Xe=Qs(oe.tagName);return yn[T.namespaceURI]?T.namespaceURI===ur?oe.namespaceURI===bt?fe==="svg":oe.namespaceURI===Un?fe==="svg"&&(Xe==="annotation-xml"||ge[Xe]):!!Cr[fe]:T.namespaceURI===Un?oe.namespaceURI===bt?fe==="math":oe.namespaceURI===ur?fe==="math"&&cr[Xe]:!!nt[fe]:T.namespaceURI===bt?oe.namespaceURI===ur&&!cr[Xe]||oe.namespaceURI===Un&&!ge[Xe]?!1:!nt[fe]&&(ys[fe]||!Cr[fe]):!!(Hn==="application/xhtml+xml"&&yn[T.namespaceURI]):!1},an=function(T){Va(e.removed,{element:T});try{ee(T).removeChild(T)}catch{E(T)}},sn=function(T,oe){try{Va(e.removed,{attribute:oe.getAttributeNode(T),from:oe})}catch{Va(e.removed,{attribute:null,from:oe})}if(oe.removeAttribute(T),T==="is")if(sr||ia)try{an(oe)}catch{}else try{oe.setAttribute(T,"")}catch{}},Ir=function(T){let oe=null,fe=null;if(Pa)T="<remove></remove>"+T;else{const it=Hi(T,/^[\r\n\t ]+/);fe=it&&it[0]}Hn==="application/xhtml+xml"&&Ce===bt&&(T='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+T+"</body></html>");const Xe=U?U.createHTML(T):T;if(Ce===bt)try{oe=new b().parseFromString(Xe,Hn)}catch{}if(!oe||!oe.documentElement){oe=se.createDocument(Ce,"template",null);try{oe.documentElement.innerHTML=Gn?Q:Xe}catch{}}const rt=oe.body||oe.documentElement;return T&&fe&&rt.insertBefore(r.createTextNode(fe),rt.childNodes[0]||null),Ce===bt?ie.call(oe,Lt?"html":"body")[0]:Lt?oe.documentElement:rt},Rr=function(T){return X.call(T.ownerDocument||T,T,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Ma=function(T){return T instanceof w&&(typeof T.nodeName!="string"||typeof T.textContent!="string"||typeof T.removeChild!="function"||!(T.attributes instanceof y)||typeof T.removeAttribute!="function"||typeof T.setAttribute!="function"||typeof T.namespaceURI!="string"||typeof T.insertBefore!="function"||typeof T.hasChildNodes!="function")},bn=function(T){return typeof d=="function"&&T instanceof d};function It(Ie,T,oe){Ks(Ie,fe=>{fe.call(e,T,oe,fr)})}const _n=function(T){let oe=null;if(It(te.beforeSanitizeElements,T,null),Ma(T))return an(T),!0;const fe=ft(T.nodeName);if(It(te.uponSanitizeElement,T,{tagName:fe,allowedTags:le}),sa&&T.hasChildNodes()&&!bn(T.firstElementChild)&&Nt(/<[/\w!]/g,T.innerHTML)&&Nt(/<[/\w!]/g,T.textContent)||T.nodeType===$a.progressingInstruction||sa&&T.nodeType===$a.comment&&Nt(/<[/\w]/g,T.data))return an(T),!0;if(!(tt.tagCheck instanceof Function&&tt.tagCheck(fe))&&(!le[fe]||Je[fe])){if(!Je[fe]&&_s(fe)&&(Ae.tagNameCheck instanceof RegExp&&Nt(Ae.tagNameCheck,fe)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(fe)))return!1;if(oa&&!yt[fe]){const Xe=ee(T)||T.parentNode,rt=ae(T)||T.childNodes;if(rt&&Xe){const it=rt.length;for(let dt=it-1;dt>=0;--dt){const zt=q(rt[dt],!0);zt.__removalCount=(T.__removalCount||0)+1,Xe.insertBefore(zt,K(T))}}}return an(T),!0}return T instanceof v&&!mt(T)||(fe==="noscript"||fe==="noembed"||fe==="noframes")&&Nt(/<\/no(script|embed|frames)/i,T.innerHTML)?(an(T),!0):(rn&&T.nodeType===$a.text&&(oe=T.textContent,Ks([Z,$,Ee],Xe=>{oe=Xa(oe,Xe," ")}),T.textContent!==oe&&(Va(e.removed,{element:T.cloneNode()}),T.textContent=oe)),It(te.afterSanitizeElements,T,null),!1)},Pr=function(T,oe,fe){if(Xt&&(oe==="id"||oe==="name")&&(fe in r||fe in dr))return!1;if(!(ye&&!Re[oe]&&Nt(_e,oe))){if(!(vt&&Nt(Se,oe))){if(!(tt.attributeCheck instanceof Function&&tt.attributeCheck(oe,T))){if(!Le[oe]||Re[oe]){if(!(_s(T)&&(Ae.tagNameCheck instanceof RegExp&&Nt(Ae.tagNameCheck,T)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(T))&&(Ae.attributeNameCheck instanceof RegExp&&Nt(Ae.attributeNameCheck,oe)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(oe,T))||oe==="is"&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&Nt(Ae.tagNameCheck,fe)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(fe))))return!1}else if(!lr[oe]){if(!Nt(J,Xa(fe,z,""))){if(!((oe==="src"||oe==="xlink:href"||oe==="href")&&T!=="script"&&Fv(fe,"data:")===0&&or[T])){if(!(Mt&&!Nt(we,Xa(fe,z,"")))){if(fe)return!1}}}}}}}return!0},_s=function(T){return T!=="annotation-xml"&&Hi(T,H)},wn=function(T){It(te.beforeSanitizeAttributes,T,null);const{attributes:oe}=T;if(!oe||Ma(T))return;const fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le,forceKeepAttr:void 0};let Xe=oe.length;for(;Xe--;){const rt=oe[Xe],{name:it,namespaceURI:dt,value:zt}=rt,On=ft(it),Or=zt;let st=it==="value"?Or:Kv(Or);if(fe.attrName=On,fe.attrValue=st,fe.keepAttr=!0,fe.forceKeepAttr=void 0,It(te.uponSanitizeAttribute,T,fe),st=fe.attrValue,Oa&&(On==="id"||On==="name")&&(sn(it,T),st=Er+st),sa&&Nt(/((--!?|])>)|<\/(style|title|textarea)/i,st)){sn(it,T);continue}if(On==="attributename"&&Hi(st,"href")){sn(it,T);continue}if(fe.forceKeepAttr)continue;if(!fe.keepAttr){sn(it,T);continue}if(!He&&Nt(/\/>/i,st)){sn(it,T);continue}rn&&Ks([Z,$,Ee],Dr=>{st=Xa(st,Dr," ")});const La=ft(T.nodeName);if(!Pr(La,On,st)){sn(it,T);continue}if(U&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!dt)switch(_.getAttributeType(La,On)){case"TrustedHTML":{st=U.createHTML(st);break}case"TrustedScriptURL":{st=U.createScriptURL(st);break}}if(st!==Or)try{dt?T.setAttributeNS(dt,it,st):T.setAttribute(it,st),Ma(T)?an(T):Yl(e.removed)}catch{sn(it,T)}}It(te.afterSanitizeAttributes,T,null)},ws=function Ie(T){let oe=null;const fe=Rr(T);for(It(te.beforeSanitizeShadowDOM,T,null);oe=fe.nextNode();)It(te.uponSanitizeShadowNode,oe,null),_n(oe),wn(oe),oe.content instanceof l&&Ie(oe.content);It(te.afterSanitizeShadowDOM,T,null)};return e.sanitize=function(Ie){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=null,fe=null,Xe=null,rt=null;if(Gn=!Ie,Gn&&(Ie="<!-->"),typeof Ie!="string"&&!bn(Ie))if(typeof Ie.toString=="function"){if(Ie=Ie.toString(),typeof Ie!="string")throw Za("dirty is not a string, aborting")}else throw Za("toString is not a function");if(!e.isSupported)return Ie;if(Ra||Ar(T),e.removed=[],typeof Ie=="string"&&(mn=!1),mn){if(Ie.nodeName){const zt=ft(Ie.nodeName);if(!le[zt]||Je[zt])throw Za("root node is forbidden and cannot be sanitized in-place")}}else if(Ie instanceof d)oe=Ir("<!---->"),fe=oe.ownerDocument.importNode(Ie,!0),fe.nodeType===$a.element&&fe.nodeName==="BODY"||fe.nodeName==="HTML"?oe=fe:oe.appendChild(fe);else{if(!sr&&!rn&&!Lt&&Ie.indexOf("<")===-1)return U&&ir?U.createHTML(Ie):Ie;if(oe=Ir(Ie),!oe)return sr?null:ir?Q:""}oe&&Pa&&an(oe.firstChild);const it=Rr(mn?Ie:oe);for(;Xe=it.nextNode();)_n(Xe),wn(Xe),Xe.content instanceof l&&ws(Xe.content);if(mn)return Ie;if(sr){if(ia)for(rt=ve.call(oe.ownerDocument);oe.firstChild;)rt.appendChild(oe.firstChild);else rt=oe;return(Le.shadowroot||Le.shadowrootmode)&&(rt=de.call(s,rt,!0)),rt}let dt=Lt?oe.outerHTML:oe.innerHTML;return Lt&&le["!doctype"]&&oe.ownerDocument&&oe.ownerDocument.doctype&&oe.ownerDocument.doctype.name&&Nt(Mc,oe.ownerDocument.doctype.name)&&(dt="<!DOCTYPE "+oe.ownerDocument.doctype.name+`>
`+dt),rn&&Ks([Z,$,Ee],zt=>{dt=Xa(dt,zt," ")}),U&&ir?U.createHTML(dt):dt},e.setConfig=function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ar(Ie),Ra=!0},e.clearConfig=function(){fr=null,Ra=!1},e.isValidAttribute=function(Ie,T,oe){fr||Ar({});const fe=ft(Ie),Xe=ft(T);return Pr(fe,Xe,oe)},e.addHook=function(Ie,T){typeof T=="function"&&Va(te[Ie],T)},e.removeHook=function(Ie,T){if(T!==void 0){const oe=Bv(te[Ie],T);return oe===-1?void 0:zv(te[Ie],oe,1)[0]}return Yl(te[Ie])},e.removeHooks=function(Ie){te[Ie]=[]},e.removeAllHooks=function(){te=Jl()},e}var rg=Lc();function ag(t){const e=[];e.push(`# ${t.subject}`),e.push(""),e.push("| | |"),e.push("|---|---|"),e.push(`| **From** | ${eu(t.from)} |`),e.push(`| **To** | ${eu(t.to)} |`),e.push(`| **Date** | ${Do(t.date)} |`),e.push(""),e.push("---"),e.push("");const r=t.htmlBody?sg(t.htmlBody):null;return e.push(r||t.body||"*(no body)*"),e.push(""),e.join(`
`)}function eu(t){return(t||"").replace(/\|/g,"\\|")}function sg(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script, head"))r.remove();return mo(e.body).replace(/\n{3,}/g,`

`).trim()}catch{return null}}function ig(t,e){if(!e||e.startsWith("data:"))return!0;const r=parseInt(t.getAttribute("width"),10),s=parseInt(t.getAttribute("height"),10);if(r>0&&r<=3||s>0&&s<=3)return!0;const i=e.toLowerCase();return i.includes("spacer")||i.includes("transparent")||i.includes("transp.gif")||i.includes("/track")&&i.includes("pixel")||/amazon\.com\/gp\/r\.html\?/.test(e)||/[?&](open|track|beacon|pixel|img)=/i.test(i)?!0:i.includes("mail.google.com/mail/u/")&&i.includes("view=fimg")?!1:!!(/ci\d+\.\w+\.com\//.test(i)||i.endsWith(".gif")&&i.includes("1x1"))}function mo(t){var i;if(t.nodeType===3)return t.textContent.replace(/[ \t]+/g," ");if(t.nodeType!==1)return"";const e=t.tagName.toLowerCase();if(e==="br")return`
`;if(e==="hr")return`

---

`;if(e==="img"){const l=t.getAttribute("src")||"",c=t.getAttribute("alt")||"";return ig(t,l)?"":`![${c}](${l})`}const r=Array.from(t.childNodes).map(mo).join(""),s=r.trim();if(!s&&!["img","br","hr"].includes(e))return r;if(e==="p"||e==="div")return`

${s}

`;if(e==="blockquote")return`

> ${s.replace(/\n/g,`
> `)}

`;if(/^h[1-6]$/.test(e)){const l=Number(e[1]);return`

${"#".repeat(l)} ${s}

`}if(e==="ul"||e==="ol")return`

${r}

`;if(e==="li")return`${((i=t.parentElement)==null?void 0:i.tagName.toLowerCase())==="ol"?"1.":"-"} ${s}
`;if(e==="a"){const l=t.getAttribute("href")||"";return!l||l.startsWith("mailto:")?s:s===l?l:`[${s}](${l})`}if(e==="strong"||e==="b")return`**${s}**`;if(e==="em"||e==="i")return`*${s}*`;if(e==="code")return`\`${s}\``;if(e==="table")return`

${r}

`;if(e==="tr")return`| ${Array.from(t.children).map(c=>mo(c).trim()).join(" | ")} |
`;if(e==="td"||e==="th")return r;if(e==="thead"){const l=r.trim(),c=(l.match(/\|/g)||[]).length-1,d="| "+Array(Math.max(c,1)).fill("---").join(" | ")+" |";return`${l}${d}
`}return r}function og(t){const e=lg(t.date),r=(t.subject||"email").replace(/[^a-zA-Z0-9 _-]/g,"").replace(/\s+/g,"-").slice(0,60).replace(/-+$/,"");return`${e}_${r}.md`}function lg(t){try{const e=new Date(t),r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${i}`}catch{return"email"}}function tu(t,e,r="text/markdown;charset=utf-8"){const s=new Blob([t],{type:r}),i=URL.createObjectURL(s),l=document.createElement("a");l.href=i,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}function ug(t){return t.raw||null}function cg(t){const e=ug(t);return e?JSON.stringify(e,null,2):"null"}function fg(t){const e=dg(t.date),r=(t.subject||"email").replace(/[^a-zA-Z0-9 _-]/g,"").replace(/\s+/g,"-").slice(0,60).replace(/-+$/,"");return`${e}_${r}.json`}function dg(t){try{const e=new Date(t),r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${i}`}catch{return"email"}}var pg=V('<button title="View as Markdown">.md</button>'),hg=V('<div class="md-toolbar svelte-1b0rzpb"><span class="toolbar-label svelte-1b0rzpb">JSON</span> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .json file">Download</button></div> <div class="md-body svelte-1b0rzpb"><pre class="md-raw svelte-1b0rzpb"> </pre></div>',1),vg=V('<pre class="md-raw svelte-1b0rzpb"> </pre>'),gg=V('<div class="md-preview svelte-1b0rzpb"><!></div>'),mg=V('<div class="md-toolbar svelte-1b0rzpb"><div class="md-tabs svelte-1b0rzpb"><button>Raw</button> <button>Preview</button></div> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .md file">Download</button></div> <div class="md-body svelte-1b0rzpb"><!></div>',1),yg=V('<div class="loading-state svelte-1b0rzpb"><span class="spinner svelte-1b0rzpb"></span> <span>Loading message...</span></div>'),bg=V('<iframe class="html-frame svelte-1b0rzpb" sandbox="allow-same-origin" title="Email content"></iframe>'),_g=V('<pre class="message-text svelte-1b0rzpb"> </pre>'),wg=V('<p class="empty-body svelte-1b0rzpb">Loading...</p>'),kg=V('<div class="modal-meta svelte-1b0rzpb"><div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">From:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">To:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">Date:</span> <span> </span></div></div> <div class="modal-body svelte-1b0rzpb"><!></div>',1),xg=V('<div class="modal-overlay svelte-1b0rzpb" role="dialog" aria-modal="true"><div class="modal-content svelte-1b0rzpb" role="document"><div class="modal-header svelte-1b0rzpb"><h3 class="modal-subject svelte-1b0rzpb"> </h3> <div class="header-actions svelte-1b0rzpb"><button title="View as JSON">.json</button> <!> <button class="modal-close svelte-1b0rzpb">â</button></div></div> <!></div></div>');function Sg(t,e){ut(e,!0);let r=De(e,"loading",3,!1);Ct(()=>nn("MessageModal"));const s=new $e.Renderer;s.link=({href:Z,title:$,text:Ee})=>{const _e=$?` title="${$}"`:"";return`<a href="${Z}"${_e} target="_blank" rel="noopener">${Ee}</a>`},$e.setOptions({breaks:!0,gfm:!0,renderer:s});let i=Oe("email"),l=Wt(()=>e.message.body?ag(e.message):""),c=Wt(()=>cg(e.message)),d=Oe("raw");function v(Z){F(i,k(i)===Z?"email":Z,!0),Z==="markdown"&&F(d,"raw")}function h(){tu(k(l),og(e.message))}function y(){tu(k(c),fg(e.message),"application/json;charset=utf-8")}function w(Z){const $=$e.parse(Z);return rg.sanitize($,{ADD_ATTR:["target"],ALLOW_TAGS:["h1","h2","h3","h4","h5","h6","p","br","hr","blockquote","pre","code","strong","b","em","i","a","img","ul","ol","li","table","thead","tbody","tr","th","td","del","s"]})}let b=Oe(null);Js(()=>{var Z;if(k(b)&&e.message.htmlBody&&!r()&&k(i)==="email"){const $=k(b).contentDocument||((Z=k(b).contentWindow)==null?void 0:Z.document);$&&($.open(),$.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <style>
              body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                font-size: 14px;
                line-height: 1.5;
                color: #e0e0e0;
                background: #1a1a1a;
                margin: 0;
                padding: 16px;
                word-break: break-word;
              }
              a { color: #60a5fa; }
              img { max-width: 100%; height: auto; }
              table { border-collapse: collapse; max-width: 100%; }
              td, th { padding: 4px 8px; }
            </style>
          </head>
          <body>${e.message.htmlBody}</body>
          </html>
        `),$.close())}});var _=xg();_.__click=function(...Z){var $;($=e.onclose)==null||$.apply(this,Z)};var N=x(_);N.__click=Z=>Z.stopPropagation();var q=x(N),E=x(q),K=x(E),ae=L(E,2),ee=x(ae);let U;ee.__click=()=>v("json");var Q=L(ee,2);{var se=Z=>{var $=pg();let Ee;$.__click=()=>v("markdown"),me(()=>Ee=dn($,1,"action-btn svelte-1b0rzpb",null,Ee,{active:k(i)==="markdown"})),Y(Z,$)};ke(Q,Z=>{e.message.body&&Z(se)})}var X=L(Q,2);X.__click=function(...Z){var $;($=e.onclose)==null||$.apply(this,Z)};var ve=L(q,2);{var ie=Z=>{var $=hg(),Ee=Dt($),_e=L(x(Ee),2);_e.__click=y;var Se=L(Ee,2),we=x(Se),z=x(we);me(()=>ue(z,k(c))),Y(Z,$)},de=Z=>{var $=mg(),Ee=Dt($),_e=x(Ee),Se=x(_e);let we;Se.__click=()=>F(d,"raw");var z=L(Se,2);let H;z.__click=()=>F(d,"preview");var J=L(_e,2);J.__click=h;var le=L(Ee,2),Pe=x(le);{var Le=Ae=>{var Je=vg(),Re=x(Je);me(()=>ue(Re,k(l))),Y(Ae,Je)},Me=Ae=>{var Je=gg(),Re=x(Je);Cd(Re,()=>w(k(l))),Y(Ae,Je)};ke(Pe,Ae=>{k(d)==="raw"?Ae(Le):Ae(Me,!1)})}me(()=>{we=dn(Se,1,"md-tab svelte-1b0rzpb",null,we,{active:k(d)==="raw"}),H=dn(z,1,"md-tab svelte-1b0rzpb",null,H,{active:k(d)==="preview"})}),Y(Z,$)},te=Z=>{var $=kg(),Ee=Dt($),_e=x(Ee),Se=L(x(_e),2),we=x(Se),z=L(_e,2),H=L(x(z),2),J=x(H),le=L(z,2),Pe=L(x(le),2),Le=x(Pe),Me=L(Ee,2),Ae=x(Me);{var Je=ye=>{var Mt=yg();Y(ye,Mt)},Re=ye=>{var Mt=bg();ac(Mt,He=>F(b,He),()=>k(b)),Y(ye,Mt)},tt=ye=>{var Mt=_g(),He=x(Mt);me(()=>ue(He,e.message.body)),Y(ye,Mt)},vt=ye=>{var Mt=wg();Y(ye,Mt)};ke(Ae,ye=>{r()?ye(Je):e.message.htmlBody?ye(Re,1):e.message.body?ye(tt,2):ye(vt,!1)})}me(ye=>{ue(we,e.message.from),ue(J,e.message.to),ue(Le,ye)},[()=>Do(e.message.date)]),Y(Z,$)};ke(ve,Z=>{k(i)==="json"?Z(ie):k(i)==="markdown"?Z(de,1):Z(te,!1)})}me(()=>{ue(K,e.message.subject),U=dn(ee,1,"action-btn svelte-1b0rzpb",null,U,{active:k(i)==="json"})}),Y(t,_),ct()}Vt(["click"]);var Eg=V('<div class="load-more svelte-6ts5xm"><button class="btn svelte-6ts5xm"> </button></div>'),Tg=V('<div class="list-header svelte-6ts5xm"><span class="list-count svelte-6ts5xm"> </span></div> <!> <!>',1),Ag=V('<div class="loading-state svelte-6ts5xm"><span class="spinner svelte-6ts5xm"></span> <span>Loading messages...</span></div>'),Cg=V("<p> </p>"),Ig=V('<p>No emails in local storage. Click "Sync New" to download.</p>'),Rg=V('<div class="empty-state svelte-6ts5xm"><!></div>'),Pg=V('<div class="empty-state svelte-6ts5xm"><p>Sync your emails to browse them locally.</p></div>'),Og=V('<div class="main-content svelte-6ts5xm"><!> <!> <!> <div class="toolbar svelte-6ts5xm"><input type="text" class="search-input svelte-6ts5xm" placeholder="Search stored emails (subject, sender, snippet)..."/> <button class="btn primary svelte-6ts5xm"> </button></div> <!></div> <!>',1);function Dg(t,e){ut(e,!0),Ct(()=>nn("DashboardView"));let r=De(e,"error",3,null),s=De(e,"profile",3,null),i=De(e,"loadingProfile",3,!1),l=De(e,"emailMessages",19,()=>[]),c=De(e,"totalLocalMessages",3,0),d=De(e,"hasMoreLocal",3,!1),v=De(e,"loadingMessages",3,!1),h=De(e,"selectedMessage",3,null),y=De(e,"syncStatus",3,null),w=De(e,"syncProgress",3,null),b=De(e,"isSyncing",3,!1),_=De(e,"searchQuery",15);var N=Og(),q=Dt(N),E=x(q);{var K=_e=>{mc(_e,{get error(){return r()},get ondismiss(){return e.ondismisserror},get onsignout(){return e.onsignout}})};ke(E,_e=>{r()&&_e(K)})}var ae=L(E,2);Rh(ae,{get profile(){return s()},get loadingProfile(){return i()},get onsignout(){return e.onsignout}});var ee=L(ae,2);Uh(ee,{get syncStatus(){return y()},get syncProgress(){return w()},get isSyncing(){return b()},get onsync(){return e.onsync},get onsyncmore(){return e.onsyncmore},get onclear(){return e.oncleardata}});var U=L(ee,2),Q=x(U);Q.__keydown=_e=>_e.key==="Enter"&&e.onsearch();var se=L(Q,2);se.__click=function(..._e){var Se;(Se=e.onsearch)==null||Se.apply(this,_e)};var X=x(se),ve=L(U,2);{var ie=_e=>{var Se=Tg(),we=Dt(Se),z=x(we),H=x(z),J=L(we,2);Wh(J,{get messages(){return l()},get onselect(){return e.onviewmessage}});var le=L(J,2);{var Pe=Le=>{var Me=Eg(),Ae=x(Me);Ae.__click=function(...Re){var tt;(tt=e.onloadmore)==null||tt.apply(this,Re)};var Je=x(Ae);me(()=>{Ae.disabled=v(),ue(Je,v()?"Loading...":"Load More")}),Y(Le,Me)};ke(le,Le=>{d()&&Le(Pe)})}me(Le=>ue(H,`Showing ${l().length??""} of ${Le??""}
        ${_()?" matching":""} emails`),[()=>c().toLocaleString()]),Y(_e,Se)},de=_e=>{var Se=Ag();Y(_e,Se)},te=_e=>{var Se=Rg(),we=x(Se);{var z=J=>{var le=Cg(),Pe=x(le);me(()=>ue(Pe,`No emails match "${_()??""}".`)),Y(J,le)},H=J=>{var le=Ig();Y(J,le)};ke(we,J=>{_()?J(z):J(H,!1)})}Y(_e,Se)},Z=_e=>{var Se=Pg();Y(_e,Se)};ke(ve,_e=>{var Se;l().length>0?_e(ie):v()?_e(de,1):(Se=y())!=null&&Se.synced?_e(te,2):_e(Z,!1)})}var $=L(q,2);{var Ee=_e=>{Sg(_e,{get message(){return h()},loading:!1,get onclose(){return e.onclosedetail}})};ke($,_e=>{h()&&_e(Ee)})}me(()=>{se.disabled=v(),ue(X,v()?"Searching...":"Search")}),Oo(Q,_),Y(t,N),ct()}Vt(["keydown","click"]);var Mg=V('<div class="dashboard svelte-1q5o2lv"><!></div>');function Lg(t,e){ut(e,!0);function r(Re){Re.key==="Escape"&&k(v)&&we()}Ct(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)));let s=Oe(Ot(localStorage.getItem("googleClientId")||"")),i=Oe(Ot(localStorage.getItem("googleClientId")||"")),l=Oe(!1),c=Oe(null),d=Oe(null),v=Oe(null),h=Oe(""),y=Oe(Ot([])),w=Oe(0),b=Oe(0),_=Oe(!1),N=Oe(!1),q=Oe(!1),E=Oe(null),K=Oe(null),ae=Oe(null),ee=Oe(!1);const U=50;Js(()=>{k(c)&&(z(),$())});let Q=Wt(()=>!k(s)),se=Wt(()=>!!k(c)),X=Wt(()=>k(y).length<k(w));Js(()=>{k(s)&&!k(l)&&jl(k(s)).then(()=>{F(l,!0)}).catch(Re=>{F(E,`Auth init failed: ${Re.message}`)})});function ve(){const Re=k(i).trim();Re&&(localStorage.setItem("googleClientId",Re),F(s,Re,!0),F(E,null))}function ie(){localStorage.removeItem("googleClientId"),F(s,""),F(i,""),F(l,!1),F(c,null),F(d,null),F(y,[],!0),F(w,0)}async function de(){F(E,null),F(N,!0);try{k(l)||(await jl(k(s)),F(l,!0));const Re=await $p();F(c,Re.access_token,!0),await Z()}catch(Re){F(E,Re.message,!0)}finally{F(N,!1)}}async function te(){if(k(c))try{await Jp(k(c))}catch{}F(c,null),F(d,null),F(y,[],!0),F(w,0),F(v,null),F(E,null)}async function Z(){F(q,!0);try{const Re=await uc(k(c));if(!k(c))return;F(d,Re,!0)}catch(Re){if(!k(c))return;F(E,`Profile fetch failed: ${Re.message}`)}finally{F(q,!1)}}async function $(Re=!1){F(_,!0);try{const tt=Re?k(b):0,vt=await $d({query:k(h)||void 0,limit:U,offset:tt});Re?F(y,[...k(y),...vt.items],!0):F(y,vt.items,!0),F(w,vt.total,!0),F(b,k(y).length,!0)}catch(tt){F(E,`Failed to load messages: ${tt.message}`)}finally{F(_,!1)}}function Ee(){F(b,0),$(!1)}function _e(){$(!0)}function Se(Re){F(v,Re,!0)}function we(){F(v,null)}async function z(){try{F(K,await lh(),!0)}catch{}}async function H(Re){if(k(ee)||!k(c))return;F(E,null),F(ee,!0),F(ae,null);const tt=new AbortController;try{await ih(k(c),{limit:Re,onProgress:vt=>{F(ae,{...vt},!0)},signal:tt.signal}),await z(),await $(!1)}catch(vt){if(vt.name!=="AbortError"){if(!k(c))return;F(E,`Sync failed: ${vt.message}`)}}finally{F(ee,!1)}}async function J(Re){if(k(ee)||!k(c))return;F(E,null),F(ee,!0),F(ae,null);const tt=new AbortController;try{await oh(k(c),{limit:Re,onProgress:vt=>{F(ae,{...vt},!0)},signal:tt.signal}),await z(),await $(!1)}catch(vt){if(vt.name!=="AbortError"){if(!k(c))return;F(E,`Sync more failed: ${vt.message}`)}}finally{F(ee,!1)}}async function le(){try{await uh(),await z(),F(y,[],!0),F(w,0),F(b,0)}catch(Re){F(E,`Failed to clear data: ${Re.message}`)}}var Pe=Mg(),Le=x(Pe);{var Me=Re=>{vh(Re,{onsave:ve,get clientIdInput(){return k(i)},set clientIdInput(tt){F(i,tt,!0)}})},Ae=Re=>{Th(Re,{get clientId(){return k(s)},get error(){return k(E)},get loadingAuth(){return k(N)},onsignin:de,onclear:ie,onsignout:te})},Je=Re=>{Dg(Re,{get error(){return k(E)},get profile(){return k(d)},get loadingProfile(){return k(q)},get emailMessages(){return k(y)},get totalLocalMessages(){return k(w)},get hasMoreLocal(){return k(X)},get loadingMessages(){return k(_)},get selectedMessage(){return k(v)},get syncStatus(){return k(K)},get syncProgress(){return k(ae)},get isSyncing(){return k(ee)},onsignout:te,onsearch:Ee,onloadmore:_e,onviewmessage:Se,onclosedetail:we,ondismisserror:()=>F(E,null),onsync:H,onsyncmore:J,oncleardata:le,get searchQuery(){return k(h)},set searchQuery(tt){F(h,tt,!0)}})};ke(Le,Re=>{k(Q)?Re(Me):k(se)?Re(Je,!1):Re(Ae,1)})}Y(t,Pe),ct()}const Ng=20,Nc={DELETE:{id:"DELETE",label:"Delete",color:"#f87171",icon:"trash",description:"Ad, spam, or useless notification â safe to delete"},NOTIFY:{id:"NOTIFY",label:"Notify Me",color:"#fbbf24",icon:"bell",description:"Important event happened â delivery, payment, etc."},READ_SUMMARIZE:{id:"READ_SUMMARIZE",label:"Read & Summarize",color:"#3b82f6",icon:"book",description:"Newsletter or digest â LLM should read and highlight key info"},REPLY_NEEDED:{id:"REPLY_NEEDED",label:"Reply Needed",color:"#a78bfa",icon:"reply",description:"Requires a response from you"},REVIEW:{id:"REVIEW",label:"Review",color:"#f59e0b",icon:"eye",description:"Needs your attention â billing, account changes, decisions"},NO_ACTION:{id:"NO_ACTION",label:"No Action",color:"#666",icon:"check",description:"Informational only, no action needed"}},ls=Object.keys(Nc),qg=`You are an email classifier. Classify this email into exactly ONE action type.

Output ONLY a valid JSON object â no markdown, no explanation, no extra text.

Format:
{
  "action": "DELETE",
  "reason": "Promotional email from a store"
}

Action types:
- "DELETE" â Ads, promotions, spam, useless status notifications (e.g. "shipped" without tracking info). Safe to delete.
- "NOTIFY" â Something important happened that the user should know about: package delivered, payment confirmed, account alert. User needs a short notification.
- "READ_SUMMARIZE" â Newsletter, digest, or content-heavy email (e.g. Rust Weekly, tech news). Worth reading â summarize the key points.
- "REPLY_NEEDED" â Someone is asking a question, requesting a meeting, or waiting for a response. The user needs to reply.
- "REVIEW" â Needs human attention: billing issues, subscription changes, legal notices, account security. Not urgent enough to notify, but should be reviewed.
- "NO_ACTION" â Purely informational, already handled, or auto-generated confirmation. No action needed.

Rules:
- Pick exactly ONE action type
- "reason" should be a brief (1 sentence) explanation of why
- Output ONLY the JSON object, nothing else`;async function jg(t,{count:e=Ng,force:r=!1,onProgress:s=()=>{}}={}){if(!t.isReady)throw new Error("Model not loaded. Please load a model first.");s({phase:"loading",message:"Loading recent emails..."});const i=await qe.items.where("[sourceType+date]").between(["gmail",Ht.minKey],["gmail",Ht.maxKey]).reverse().limit(e).toArray();if(i.length===0)return s({phase:"done",message:"No emails to scan."}),{scanned:0,classified:0,skipped:0,errors:0};let l=i,c=0;if(!r){const y=new Set((await qe.emailClassifications.toArray()).map(w=>w.emailId));l=i.filter(w=>!y.has(w.id)),c=i.length-l.length}if(l.length===0)return s({phase:"done",message:`All ${i.length} emails already classified. Use "Rescan All" to reclassify.`,classified:0}),{scanned:0,classified:0,skipped:c,errors:0};const d=Date.now();let v=0,h=0;for(let y=0;y<l.length;y++){const w=l[y];s({phase:"scanning",message:`Classifying email ${y+1} of ${l.length}${c?` (${c} skipped)`:""}...`,current:y+1,total:l.length,classified:v});try{const b=Hg(w),_=[{role:"system",content:qg},{role:"user",content:b}],N=await t.generateFull(_),q=Yg(N);q&&(await qe.emailClassifications.put({emailId:w.id,action:q.action,reason:String(q.reason||"").slice(0,300),subject:w.subject||"(no subject)",from:w.from||"",date:w.date,scannedAt:d,status:"pending"}),v++)}catch(b){console.error(`Triage email ${y+1} failed:`,b),h++}}return s({phase:"done",message:`Classified ${v} of ${l.length} emails${c?`, ${c} already done`:""}.`,classified:v}),{scanned:l.length,classified:v,skipped:c,errors:h}}async function Bg(){const t=await qe.emailClassifications.toArray(),e={};for(const r of ls)e[r]=[];for(const r of t){const s=ls.includes(r.action)?r.action:"NO_ACTION";e[s].push(r)}for(const r of Object.keys(e))e[r].sort((s,i)=>(i.date||0)-(s.date||0));return e}async function zg(){const t=await qe.emailClassifications.toArray(),e={total:t.length};for(const r of ls)e[r]=0;for(const r of t){const s=ls.includes(r.action)?r.action:"NO_ACTION";e[s]++}return e}async function nu(t,e){await qe.emailClassifications.update(t,{status:e})}async function Fg(){await qe.emailClassifications.clear()}async function Kg(t){await qe.emailClassifications.where("action").equals(t).delete()}async function Ug(t){await qe.emailClassifications.delete(t)}async function Gg(){const t=await qe.items.where("sourceType").equals("gmail").count(),e=await qe.emailClassifications.count();return{totalEmails:t,classified:e,unclassified:Math.max(0,t-e)}}function Hg(t){const e=t.date?new Date(t.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown date",r=Wg(t.body||t.snippet||"",500);return[`Subject: ${t.subject}`,`From: ${t.from}`,`To: ${t.to||"me"}`,`Date: ${e}`,`Labels: ${(t.labels||[]).join(", ")}`,"",r].join(`
`)}function Wg(t,e){return!t||t.length<=e?t:t.slice(0,e)+"..."}function Yg(t){if(!t||!t.trim())return null;let e=t.trim();e=e.replace(/^```(?:json)?\s*\n?/i,"").replace(/\n?```\s*$/i,""),e=e.trim();const r=e.indexOf("{"),s=e.lastIndexOf("}");if(r===-1||s===-1||s<=r)return console.warn("Triage: no JSON object found in response"),null;const i=e.indexOf("[");if(i!==-1&&i<r)return console.warn("Triage: expected JSON object, got array"),null;const l=e.slice(r,s+1);try{const c=JSON.parse(l);if(!c||typeof c!="object"||Array.isArray(c))return null;const d=String(c.action||"").toUpperCase();return ls.includes(d)?{action:d,reason:c.reason||""}:(console.warn("Triage: unknown action type:",c.action),null)}catch(c){return console.warn("Triage: failed to parse JSON response:",c.message),null}}var Vg=V('<span class="spinner svelte-ois7em"></span>'),Xg=Ro('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ois7em"><circle cx="11" cy="11" r="8" class="svelte-ois7em"></circle><path d="m21 21-4.35-4.35" class="svelte-ois7em"></path></svg>'),Zg=V('<div class="scan-stats svelte-ois7em"><span class="stat svelte-ois7em"> </span> <span class="stat-sep svelte-ois7em">Â·</span> <span class="stat svelte-ois7em"> </span> <span class="stat-sep svelte-ois7em">Â·</span> <span class="stat svelte-ois7em"> </span></div>'),Qg=V('<option class="svelte-ois7em"> </option>'),$g=V('<p class="scan-hint svelte-ois7em">Load a model on the Chat page first, then come back to scan.</p>'),Jg=V('<div class="scan-progress svelte-ois7em"><div class="progress-bar svelte-ois7em"><div></div></div> <span class="progress-text svelte-ois7em"> </span></div>'),em=V('<div class="scan-card svelte-ois7em"><div class="scan-header svelte-ois7em"><div class="scan-icon svelte-ois7em"><!></div> <div class="scan-info svelte-ois7em"><span class="scan-title svelte-ois7em">Email Triage</span> <span class="scan-status svelte-ois7em"><span class="status-dot svelte-ois7em"></span> </span></div></div> <!> <div class="scan-controls svelte-ois7em"><div class="control-group svelte-ois7em"><label class="control-label svelte-ois7em" for="scan-count">Emails:</label> <select id="scan-count" class="control-select svelte-ois7em"></select></div> <div class="btn-group svelte-ois7em"><button class="btn scan-btn primary svelte-ois7em"> </button> <button class="btn scan-btn svelte-ois7em" title="Rescan all (including already classified)">Rescan All</button></div></div> <!> <!></div>');function tm(t,e){ut(e,!0);let r=De(e,"engineStatus",3,"idle"),s=De(e,"modelName",3,""),i=De(e,"isScanning",3,!1),l=De(e,"scanProgress",3,null),c=De(e,"scanCount",15,20),d=De(e,"stats",3,null);const v=[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"},{value:500,label:"500"}];function h(){return r()==="ready"?`${s()} ready`:r()==="loading"?"Loading model...":r()==="generating"?"Model busy...":"No model loaded"}function y(){return r()==="ready"?"#34d399":r()==="loading"?"#fbbf24":"#666"}function w(){return r()==="ready"&&!i()}var b=em(),_=x(b),N=x(_),q=x(N);{var E=J=>{var le=Vg();Y(J,le)},K=J=>{var le=Xg();Y(J,le)};ke(q,J=>{i()?J(E):J(K,!1)})}var ae=L(N,2),ee=L(x(ae),2),U=x(ee);let Q;var se=L(U),X=L(_,2);{var ve=J=>{var le=Zg(),Pe=x(le),Le=x(Pe),Me=L(Pe,4),Ae=x(Me),Je=L(Me,4),Re=x(Je);me(()=>{ue(Le,`${d().totalEmails??""} emails in storage`),ue(Ae,`${d().classified??""} classified`),ue(Re,`${d().unclassified??""} new`)}),Y(J,le)};ke(X,J=>{d()&&J(ve)})}var ie=L(X,2),de=x(ie),te=L(x(de),2);Fn(te,21,()=>v,ra,(J,le)=>{var Pe=Qg(),Le=x(Pe),Me={};me(()=>{ue(Le,k(le).label),Me!==(Me=k(le).value)&&(Pe.value=(Pe.__value=k(le).value)??"")}),Y(J,Pe)});var Z=L(de,2),$=x(Z);$.__click=function(...J){var le;(le=e.onscan)==null||le.apply(this,J)};var Ee=x($),_e=L($,2);_e.__click=function(...J){var le;(le=e.onrescan)==null||le.apply(this,J)};var Se=L(ie,2);{var we=J=>{var le=$g();Y(J,le)};ke(Se,J=>{r()!=="ready"&&r()!=="loading"&&J(we)})}var z=L(Se,2);{var H=J=>{var le=Jg(),Pe=x(le),Le=x(Pe);let Me,Ae;var Je=L(Pe,2),Re=x(Je);me(()=>{Me=dn(Le,1,"progress-fill svelte-ois7em",null,Me,{indeterminate:!l().total}),Ae=nr(Le,"",Ae,{width:`${l().total?l().current/l().total*100:0}%`}),ue(Re,l().message||"Scanning...")}),Y(J,le)};ke(z,J=>{i()&&l()&&J(H)})}me((J,le,Pe,Le)=>{Q=nr(U,"",Q,J),ue(se,` ${le??""}`),te.disabled=i(),$.disabled=Pe,ue(Ee,i()?"Scanning...":"Scan New"),_e.disabled=Le},[()=>({background:y()}),h,()=>!w(),()=>!w()]),Po(te,c),Y(t,b),ct()}Vt(["click"]);var nm=V('<span class="row-date svelte-1czytqk"> </span>'),rm=V('<span class="row-reason svelte-1czytqk"> </span>'),am=V('<button class="icon-btn done-btn svelte-1czytqk" title="Mark handled"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg></button> <button class="icon-btn dismiss-btn svelte-1czytqk" title="Dismiss"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>',1),sm=V('<span class="status-label svelte-1czytqk"> </span>'),im=V('<button class="icon-btn remove-btn svelte-1czytqk" title="Remove classification"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="m19 6-.867 12.142A2 2 0 0 1 16.138 20H7.862a2 2 0 0 1-1.995-1.858L5 6"></path></svg></button>'),om=V('<div><div class="row-left svelte-1czytqk"><span class="row-subject svelte-1czytqk"> </span> <span class="row-meta svelte-1czytqk"><span class="row-from svelte-1czytqk"> </span> <!></span> <!></div> <div class="row-actions svelte-1czytqk"><!> <!></div></div>');function ru(t,e){ut(e,!0);let r=De(e,"actionColor",3,"#666"),s=De(e,"dimmed",3,!1);function i(ie){if(!ie)return"";try{return new Date(ie).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}}let l=Wt(()=>e.item.status==="pending");var c=om();let d;var v=x(c);let h;var y=x(v),w=x(y),b=L(y,2),_=x(b),N=x(_),q=L(_,2);{var E=ie=>{var de=nm(),te=x(de);me(Z=>ue(te,Z),[()=>i(e.item.date)]),Y(ie,de)};ke(q,ie=>{e.item.date&&ie(E)})}var K=L(b,2);{var ae=ie=>{var de=rm(),te=x(de);me(()=>ue(te,e.item.reason)),Y(ie,de)};ke(K,ie=>{e.item.reason&&ie(ae)})}var ee=L(v,2),U=x(ee);{var Q=ie=>{var de=am(),te=Dt(de);te.__click=()=>e.onmarkacted(e.item.emailId);var Z=L(te,2);Z.__click=()=>e.ondismiss(e.item.emailId),Y(ie,de)},se=ie=>{var de=sm(),te=x(de);me(()=>ue(te,e.item.status)),Y(ie,de)};ke(U,ie=>{k(l)?ie(Q):ie(se,!1)})}var X=L(U,2);{var ve=ie=>{var de=im();de.__click=()=>e.onremove(e.item.emailId),Y(ie,de)};ke(X,ie=>{e.onremove&&ie(ve)})}me(()=>{d=dn(c,1,"email-row svelte-1czytqk",null,d,{dimmed:s()}),h=nr(v,"",h,{"border-left-color":r()}),ue(w,e.item.subject),ue(N,e.item.from)}),Y(t,c),ct()}Vt(["click"]);var lm=V('<span class="group-acted svelte-tl1unp"> </span>'),um=V('<p class="group-empty svelte-tl1unp">No emails in this category.</p>'),cm=V('<details class="handled-section svelte-tl1unp"><summary class="handled-summary svelte-tl1unp"> </summary> <!></details>'),fm=V('<button class="group-action-btn svelte-tl1unp">Clear group</button>'),dm=V('<span class="confirm-row svelte-tl1unp"> <button class="group-action-btn svelte-tl1unp">Cancel</button> <button class="group-action-btn danger svelte-tl1unp">Delete</button></span>'),pm=V('<div class="group-body svelte-tl1unp"><!> <!> <!> <div class="group-footer svelte-tl1unp"><!></div></div>'),hm=V('<div class="action-group svelte-tl1unp"><button class="group-header svelte-tl1unp"><span class="group-badge svelte-tl1unp"> </span> <span class="group-count svelte-tl1unp"> </span> <!> <span class="spacer svelte-tl1unp"></span> <span class="group-description svelte-tl1unp"> </span> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div>');function vm(t,e){ut(e,!0);let r=De(e,"items",19,()=>[]),s=De(e,"expanded",3,!1),i=Wt(()=>r().filter(se=>se.status==="pending")),l=Wt(()=>r().filter(se=>se.status!=="pending")),c=Oe(!1);var d=hm(),v=x(d);v.__click=function(...se){var X;(X=e.ontoggle)==null||X.apply(this,se)};var h=x(v);let y;var w=x(h),b=L(h,2),_=x(b),N=L(b,2);{var q=se=>{var X=lm(),ve=x(X);me(()=>ue(ve,`${k(l).length??""} handled`)),Y(se,X)};ke(N,se=>{k(l).length>0&&se(q)})}var E=L(N,4),K=x(E),ae=L(E,2);let ee;var U=L(v,2);{var Q=se=>{var X=pm(),ve=x(X);{var ie=we=>{var z=um();Y(we,z)};ke(ve,we=>{k(i).length===0&&k(l).length===0&&we(ie)})}var de=L(ve,2);Fn(de,17,()=>k(i),we=>we.emailId,(we,z)=>{ru(we,{get item(){return k(z)},get actionColor(){return e.action.color},get onmarkacted(){return e.onmarkacted},get ondismiss(){return e.ondismiss},get onremove(){return e.onremove}})});var te=L(de,2);{var Z=we=>{var z=cm(),H=x(z),J=x(H),le=L(H,2);Fn(le,17,()=>k(l),Pe=>Pe.emailId,(Pe,Le)=>{ru(Pe,{get item(){return k(Le)},get actionColor(){return e.action.color},get onremove(){return e.onremove},dimmed:!0})}),me(()=>ue(J,`${k(l).length??""} handled`)),Y(we,z)};ke(te,we=>{k(l).length>0&&we(Z)})}var $=L(te,2),Ee=x($);{var _e=we=>{var z=fm();z.__click=()=>F(c,!0),Y(we,z)},Se=we=>{var z=dm(),H=x(z),J=L(H);J.__click=()=>F(c,!1);var le=L(J,2);le.__click=()=>{e.oncleargroup(),F(c,!1)},me(()=>ue(H,`Clear ${r().length??""} items? `)),Y(we,z)};ke(Ee,we=>{k(c)?we(Se,!1):we(_e)})}Y(se,X)};ke(U,se=>{s()&&se(Q)})}me(()=>{y=nr(h,"",y,{background:e.action.color}),ue(w,e.action.label),ue(_,k(i).length),ue(K,e.action.description),ee=dn(ae,0,"chevron svelte-tl1unp",null,ee,{open:s()})}),Y(t,d),ct()}Vt(["click"]);var gm=V('<div class="error-card svelte-12gkq0i"><span> </span> <button class="error-dismiss svelte-12gkq0i">â</button></div>'),mm=V('<button class="btn-link danger svelte-12gkq0i">Clear all</button>'),ym=V('<span class="clear-confirm svelte-12gkq0i">Clear all classifications? <button class="btn-link svelte-12gkq0i">Cancel</button> <button class="btn-link danger svelte-12gkq0i">Delete</button></span>'),bm=V('<div class="groups-list svelte-12gkq0i"></div> <div class="actions-footer svelte-12gkq0i"><span class="footer-stat svelte-12gkq0i"> </span> <!></div>',1),_m=V('<div class="empty-state svelte-12gkq0i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path><rect x="9" y="3" width="6" height="4" rx="1"></rect><path d="m9 14 2 2 4-4"></path></svg> <h3 class="svelte-12gkq0i">No emails classified yet</h3> <p class="svelte-12gkq0i">Click <strong>Scan Emails</strong> to classify your recent emails by action type â delete, notify, summarize, reply, review, or no action.</p></div>'),wm=V('<div class="actions-container svelte-12gkq0i"><!> <!> <!></div>');function km(t,e){ut(e,!0);let r=De(e,"groups",19,()=>({})),s=De(e,"counts",19,()=>({})),i=De(e,"stats",3,null),l=De(e,"expandedGroup",3,null),c=De(e,"isScanning",3,!1),d=De(e,"scanProgress",3,null),v=De(e,"scanCount",15,20),h=De(e,"error",3,null),y=Oe(!1);const w=["DELETE","NOTIFY","READ_SUMMARIZE","REPLY_NEEDED","REVIEW","NO_ACTION"];let b=Wt(()=>w.filter(U=>r()[U]&&r()[U].length>0));var _=wm(),N=x(_);tm(N,{get engineStatus(){return e.engineStatus},get modelName(){return e.modelName},get isScanning(){return c()},get scanProgress(){return d()},get stats(){return i()},get onscan(){return e.onscan},get onrescan(){return e.onrescan},get scanCount(){return v()},set scanCount(U){v(U)}});var q=L(N,2);{var E=U=>{var Q=gm(),se=x(Q),X=x(se),ve=L(se,2);ve.__click=function(...ie){var de;(de=e.ondismisserror)==null||de.apply(this,ie)},me(()=>ue(X,h())),Y(U,Q)};ke(q,U=>{h()&&U(E)})}var K=L(q,2);{var ae=U=>{var Q=bm(),se=Dt(Q);Fn(se,20,()=>k(b),$=>$,($,Ee)=>{{let _e=Wt(()=>l()===Ee);vm($,{get action(){return Nc[Ee]},get items(){return r()[Ee]},get expanded(){return k(_e)},ontoggle:()=>e.ontogglegroup(Ee),get onmarkacted(){return e.onmarkacted},get ondismiss(){return e.ondismiss},get onremove(){return e.onremove},oncleargroup:()=>e.oncleargroup(Ee)})}});var X=L(se,2),ve=x(X),ie=x(ve),de=L(ve,2);{var te=$=>{var Ee=mm();Ee.__click=()=>F(y,!0),Y($,Ee)},Z=$=>{var Ee=ym(),_e=L(x(Ee));_e.__click=()=>F(y,!1);var Se=L(_e,2);Se.__click=()=>{e.onclear(),F(y,!1)},Y($,Ee)};ke(de,$=>{k(y)?$(Z,!1):$(te)})}me(()=>ue(ie,`${s().total??""} emails classified`)),Y(U,Q)},ee=U=>{var Q=_m();Y(U,Q)};ke(K,U=>{s().total>0?U(ae):c()||U(ee,1)})}Y(t,_),ct()}Vt(["click"]);var xm=V('<div class="actions-page svelte-3tch4q"><!></div>');function Sm(t,e){ut(e,!0);const r=sc();let s=Oe(Ot(r.status)),i=Oe(""),l=Oe(Ot({})),c=Oe(Ot({total:0})),d=Oe(null),v=Oe(null),h=Oe(!1),y=Oe(null),w=Oe(20),b=Oe(null);Ct(()=>{const ie=r.onMessage(de=>{if(de.status==="ready"){F(s,"ready");const te=os.find(Z=>Z.id===r.modelId);F(i,(te==null?void 0:te.name)||r.modelId||"",!0)}de.status==="loading"&&F(s,"loading")});if(F(s,r.status,!0),r.modelId){const de=os.find(te=>te.id===r.modelId);F(i,(de==null?void 0:de.name)||r.modelId||"",!0)}return _(),()=>ie()});async function _(){try{F(l,await Bg(),!0),F(c,await zg(),!0),F(d,await Gg(),!0)}catch(ie){F(b,`Failed to load data: ${ie.message}`)}}async function N(){await E(!1)}async function q(){await E(!0)}async function E(ie){if(!(k(h)||!r.isReady)){F(b,null),F(h,!0),F(y,null);try{await jg(r,{count:k(w),force:ie,onProgress:de=>{F(y,{...de},!0)}}),await _()}catch(de){F(b,`Scan failed: ${de.message}`)}finally{F(h,!1)}}}async function K(ie){await nu(ie,"acted"),await _()}async function ae(ie){await nu(ie,"dismissed"),await _()}async function ee(ie){await Ug(ie),await _()}async function U(ie){await Kg(ie),await _()}async function Q(){await Fg(),await _()}function se(ie){F(v,k(v)===ie?null:ie,!0)}var X=xm(),ve=x(X);km(ve,{get engineStatus(){return k(s)},get modelName(){return k(i)},get groups(){return k(l)},get counts(){return k(c)},get stats(){return k(d)},get expandedGroup(){return k(v)},get isScanning(){return k(h)},get scanProgress(){return k(y)},get error(){return k(b)},onscan:N,onrescan:q,ontogglegroup:se,onmarkacted:K,ondismiss:ae,onremove:ee,oncleargroup:U,onclear:Q,ondismisserror:()=>F(b,null),get scanCount(){return k(w)},set scanCount(ie){F(w,ie,!0)}}),Y(t,X),ct()}var Em=V('<div class="app-shell svelte-1n46o8q"><nav class="top-nav svelte-1n46o8q"><a class="nav-brand svelte-1n46o8q" href="#chat">me-ai</a> <div class="nav-links svelte-1n46o8q"><a href="#chat">Chat</a> <a href="#actions">Actions</a> <a href="#dashboard">Dashboard</a></div></nav> <main class="svelte-1n46o8q"><div class="page-view svelte-1n46o8q"><!></div> <div class="page-view svelte-1n46o8q"><!></div> <div class="page-view svelte-1n46o8q"><!></div></main></div>');function Tm(t,e){ut(e,!0);function r(){const X=location.hash;return X==="#dashboard"?"dashboard":X==="#actions"?"actions":"chat"}let s=Oe(Ot(r()));Ct(()=>{function X(){F(s,r(),!0)}return window.addEventListener("hashchange",X),()=>window.removeEventListener("hashchange",X)});var i=Em(),l=x(i),c=L(x(l),2),d=x(c);let v;var h=L(d,2);let y;var w=L(h,2);let b;var _=L(l,2),N=x(_);let q;var E=x(N);Xp(E,{});var K=L(N,2);let ae;var ee=x(K);Sm(ee,{});var U=L(K,2);let Q;var se=x(U);Lg(se,{}),me(()=>{v=dn(d,1,"svelte-1n46o8q",null,v,{active:k(s)==="chat"}),y=dn(h,1,"svelte-1n46o8q",null,y,{active:k(s)==="actions"}),b=dn(w,1,"svelte-1n46o8q",null,b,{active:k(s)==="dashboard"}),q=nr(N,"",q,{display:k(s)==="chat"?"flex":"none"}),ae=nr(K,"",ae,{display:k(s)==="actions"?"flex":"none"}),Q=nr(U,"",Q,{display:k(s)==="dashboard"?"flex":"none"})}),Y(t,i),ct()}wd(Tm,{target:document.getElementById("app")});
