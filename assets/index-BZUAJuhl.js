var $c=Object.defineProperty;var ul=t=>{throw TypeError(t)};var Yc=(t,e,r)=>e in t?$c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ke=(t,e,r)=>Yc(t,typeof e!="symbol"?e+"":e,r),Ps=(t,e,r)=>e.has(t)||ul("Cannot "+r);var z=(t,e,r)=>(Ps(t,e,"read from private field"),r?r.call(t):e.get(t)),Ue=(t,e,r)=>e.has(t)?ul("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Be=(t,e,r,i)=>(Ps(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),Pt=(t,e,r)=>(Ps(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();const Us=!1;var po=Array.isArray,Vc=Array.prototype.indexOf,ma=Array.prototype.includes,Ji=Array.from,Xc=Object.defineProperty,ua=Object.getOwnPropertyDescriptor,Qc=Object.getOwnPropertyDescriptors,Zc=Object.prototype,Jc=Array.prototype,Ql=Object.getPrototypeOf,cl=Object.isExtensible;const ef=()=>{};function tf(t){for(var e=0;e<t.length;e++)t[e]()}function Zl(){var t,e,r=new Promise((i,s)=>{t=i,e=s});return{promise:r,resolve:t,reject:e}}const St=2,ti=4,es=8,Jl=1<<24,Zn=16,En=32,Qr=64,eu=128,un=512,bt=1024,Tt=2048,Tn=4096,Xt=8192,Vn=16384,oi=32768,ya=65536,fl=1<<17,tu=1<<18,xa=1<<19,nf=1<<20,Yn=1<<25,Wr=65536,Gs=1<<21,ho=1<<22,gr=1<<23,Ur=Symbol("$state"),rf=Symbol("legacy props"),af=Symbol(""),Mr=new class extends Error{constructor(){super(...arguments);Ke(this,"name","StaleReactionError");Ke(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function sf(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function of(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function lf(t,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function uf(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function cf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ff(t){throw new Error("https://svelte.dev/e/effect_orphan")}function df(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pf(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function hf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function gf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function mf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yf=1,bf=2,nu=4,_f=8,wf=16,kf=1,xf=4,Sf=8,Tf=16,ru=1,Ef=2,wt=Symbol(),au="http://www.w3.org/1999/xhtml";function Af(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function If(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function iu(t){return t===this.v}function Cf(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function su(t){return!Cf(t,this.v)}let Pf=!1,Qt=null;function ba(t){Qt=t}function Et(t,e=!1,r){Qt={p:Qt,i:!1,c:null,e:null,s:t,x:null,l:null}}function At(t){var e=Qt,r=e.e;if(r!==null){e.e=null;for(var i of r)Iu(i)}return e.i=!0,Qt=e.p,{}}function ou(){return!0}let Lr=[];function lu(){var t=Lr;Lr=[],tf(t)}function mr(t){if(Lr.length===0&&!Qa){var e=Lr;queueMicrotask(()=>{e===Lr&&lu()})}Lr.push(t)}function Rf(){for(;Lr.length>0;)lu()}function uu(t){var e=Je;if(e===null)return Ge.f|=gr,t;if((e.f&oi)===0&&(e.f&ti)===0)throw t;_a(t,e)}function _a(t,e){for(;e!==null;){if((e.f&eu)!==0){if((e.f&oi)===0)throw t;try{e.b.error(t);return}catch(r){t=r}}e=e.parent}throw t}const Of=-7169;function dt(t,e){t.f=t.f&Of|e}function vo(t){(t.f&un)!==0||t.deps===null?dt(t,bt):dt(t,Tn)}function cu(t){if(t!==null)for(const e of t)(e.f&St)===0||(e.f&Wr)===0||(e.f^=Wr,cu(e.deps))}function fu(t,e,r){(t.f&Tt)!==0?e.add(t):(t.f&Tn)!==0&&r.add(t),cu(t.deps),dt(t,bt)}const Ri=new Set;let Ne=null,Gi=null,kt=null,zt=[],ts=null,Hs=!1,Qa=!1;var ca,fa,qr,da,ri,ai,jr,Hn,pa,qn,Ws,$s,du;const Lo=class Lo{constructor(){Ue(this,qn);Ke(this,"committed",!1);Ke(this,"current",new Map);Ke(this,"previous",new Map);Ue(this,ca,new Set);Ue(this,fa,new Set);Ue(this,qr,0);Ue(this,da,0);Ue(this,ri,null);Ue(this,ai,new Set);Ue(this,jr,new Set);Ue(this,Hn,new Map);Ke(this,"is_fork",!1);Ue(this,pa,!1)}is_deferred(){return this.is_fork||z(this,da)>0}skip_effect(e){z(this,Hn).has(e)||z(this,Hn).set(e,{d:[],m:[]})}unskip_effect(e){var r=z(this,Hn).get(e);if(r){z(this,Hn).delete(e);for(var i of r.d)dt(i,Tt),xn(i);for(i of r.m)dt(i,Tn),xn(i)}}process(e){var s;zt=[],this.apply();var r=[],i=[];for(const l of e)Pt(this,qn,Ws).call(this,l,r,i);if(this.is_deferred()){Pt(this,qn,$s).call(this,i),Pt(this,qn,$s).call(this,r);for(const[l,f]of z(this,Hn))gu(l,f)}else{for(const l of z(this,ca))l();z(this,ca).clear(),z(this,qr)===0&&Pt(this,qn,du).call(this),Gi=this,Ne=null,dl(i),dl(r),Gi=null,(s=z(this,ri))==null||s.resolve()}kt=null}capture(e,r){r!==wt&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&gr)===0&&(this.current.set(e,e.v),kt==null||kt.set(e,e.v))}activate(){Ne=this,this.apply()}deactivate(){Ne===this&&(Ne=null,kt=null)}flush(){if(this.activate(),zt.length>0){if(pu(),Ne!==null&&Ne!==this)return}else z(this,qr)===0&&this.process([]);this.deactivate()}discard(){for(const e of z(this,fa))e(this);z(this,fa).clear()}increment(e){Be(this,qr,z(this,qr)+1),e&&Be(this,da,z(this,da)+1)}decrement(e){Be(this,qr,z(this,qr)-1),e&&Be(this,da,z(this,da)-1),!z(this,pa)&&(Be(this,pa,!0),mr(()=>{Be(this,pa,!1),this.is_deferred()?zt.length>0&&this.flush():this.revive()}))}revive(){for(const e of z(this,ai))z(this,jr).delete(e),dt(e,Tt),xn(e);for(const e of z(this,jr))dt(e,Tn),xn(e);this.flush()}oncommit(e){z(this,ca).add(e)}ondiscard(e){z(this,fa).add(e)}settled(){return(z(this,ri)??Be(this,ri,Zl())).promise}static ensure(){if(Ne===null){const e=Ne=new Lo;Ri.add(Ne),Qa||mr(()=>{Ne===e&&e.flush()})}return Ne}apply(){}};ca=new WeakMap,fa=new WeakMap,qr=new WeakMap,da=new WeakMap,ri=new WeakMap,ai=new WeakMap,jr=new WeakMap,Hn=new WeakMap,pa=new WeakMap,qn=new WeakSet,Ws=function(e,r,i){e.f^=bt;for(var s=e.first,l=null;s!==null;){var f=s.f,d=(f&(En|Qr))!==0,v=d&&(f&bt)!==0,h=v||(f&Xt)!==0||z(this,Hn).has(s);if(!h&&s.fn!==null){d?s.f^=bt:l!==null&&(f&(ti|es|Jl))!==0?l.b.defer_effect(s):(f&ti)!==0?r.push(s):ui(s)&&((f&Zn)!==0&&z(this,jr).add(s),ka(s));var y=s.first;if(y!==null){s=y;continue}}var x=s.parent;for(s=s.next;s===null&&x!==null;)x===l&&(l=null),s=x.next,x=x.parent}},$s=function(e){for(var r=0;r<e.length;r+=1)fu(e[r],z(this,ai),z(this,jr))},du=function(){var s;if(Ri.size>1){this.previous.clear();var e=kt,r=!0;for(const l of Ri){if(l===this){r=!1;continue}const f=[];for(const[v,h]of this.current){if(l.current.has(v))if(r&&h!==l.current.get(v))l.current.set(v,h);else continue;f.push(v)}if(f.length===0)continue;const d=[...l.current.keys()].filter(v=>!this.current.has(v));if(d.length>0){var i=zt;zt=[];const v=new Set,h=new Map;for(const y of f)hu(y,d,v,h);if(zt.length>0){Ne=l,l.apply();for(const y of zt)Pt(s=l,qn,Ws).call(s,y,[],[]);l.deactivate()}zt=i}}Ne=null,kt=e}this.committed=!0,Ri.delete(this)};let yr=Lo;function Df(t){var e=Qa;Qa=!0;try{for(var r;;){if(Rf(),zt.length===0&&(Ne==null||Ne.flush(),zt.length===0))return ts=null,r;pu()}}finally{Qa=e}}function pu(){Hs=!0;var t=null;try{for(var e=0;zt.length>0;){var r=yr.ensure();if(e++>1e3){var i,s;Mf()}r.process(zt),br.clear()}}finally{zt=[],Hs=!1,ts=null}}function Mf(){try{df()}catch(t){_a(t,ts)}}let yn=null;function dl(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var i=t[r++];if((i.f&(Vn|Xt))===0&&ui(i)&&(yn=new Set,ka(i),i.deps===null&&i.first===null&&i.nodes===null&&i.teardown===null&&i.ac===null&&Ou(i),(yn==null?void 0:yn.size)>0)){br.clear();for(const s of yn){if((s.f&(Vn|Xt))!==0)continue;const l=[s];let f=s.parent;for(;f!==null;)yn.has(f)&&(yn.delete(f),l.push(f)),f=f.parent;for(let d=l.length-1;d>=0;d--){const v=l[d];(v.f&(Vn|Xt))===0&&ka(v)}}yn.clear()}}yn=null}}function hu(t,e,r,i){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&St)!==0?hu(s,e,r,i):(l&(ho|Zn))!==0&&(l&Tt)===0&&vu(s,e,i)&&(dt(s,Tt),xn(s))}}function vu(t,e,r){const i=r.get(t);if(i!==void 0)return i;if(t.deps!==null)for(const s of t.deps){if(ma.call(e,s))return!0;if((s.f&St)!==0&&vu(s,e,r))return r.set(s,!0),!0}return r.set(t,!1),!1}function xn(t){for(var e=ts=t;e.parent!==null;){e=e.parent;var r=e.f;if(Hs&&e===Je&&(r&Zn)!==0&&(r&tu)===0)return;if((r&(Qr|En))!==0){if((r&bt)===0)return;e.f^=bt}}zt.push(e)}function gu(t,e){if(!((t.f&En)!==0&&(t.f&bt)!==0)){(t.f&Tt)!==0?e.d.push(t):(t.f&Tn)!==0&&e.m.push(t),dt(t,bt);for(var r=t.first;r!==null;)gu(r,e),r=r.next}}function Lf(t){let e=0,r=$r(0),i;return()=>{yo()&&(R(r),bo(()=>(e===0&&(i=ci(()=>t(()=>Za(r)))),e+=1,()=>{mr(()=>{e-=1,e===0&&(i==null||i(),i=void 0,Za(r))})})))}}var Nf=ya|xa|eu;function qf(t,e,r){new jf(t,e,r)}var an,fo,On,Br,Dn,sn,Bt,Mn,Wn,pr,zr,hr,ha,Fr,va,ga,$n,Qi,_t,Bf,zf,Ys,ji,Bi,Vs;class jf{constructor(e,r,i){Ue(this,_t);Ke(this,"parent");Ke(this,"is_pending",!1);Ue(this,an);Ue(this,fo,null);Ue(this,On);Ue(this,Br);Ue(this,Dn);Ue(this,sn,null);Ue(this,Bt,null);Ue(this,Mn,null);Ue(this,Wn,null);Ue(this,pr,null);Ue(this,zr,0);Ue(this,hr,0);Ue(this,ha,!1);Ue(this,Fr,!1);Ue(this,va,new Set);Ue(this,ga,new Set);Ue(this,$n,null);Ue(this,Qi,Lf(()=>(Be(this,$n,$r(z(this,zr))),()=>{Be(this,$n,null)})));Be(this,an,e),Be(this,On,r),Be(this,Br,i),this.parent=Je.b,this.is_pending=!!z(this,On).pending,Be(this,Dn,_o(()=>{Je.b=this;{var s=Pt(this,_t,Ys).call(this);try{Be(this,sn,on(()=>i(s)))}catch(l){this.error(l)}z(this,hr)>0?Pt(this,_t,Bi).call(this):this.is_pending=!1}return()=>{var l;(l=z(this,pr))==null||l.remove()}},Nf))}defer_effect(e){fu(e,z(this,va),z(this,ga))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!z(this,On).pending}update_pending_count(e){Pt(this,_t,Vs).call(this,e),Be(this,zr,z(this,zr)+e),!(!z(this,$n)||z(this,ha))&&(Be(this,ha,!0),mr(()=>{Be(this,ha,!1),z(this,$n)&&wa(z(this,$n),z(this,zr))}))}get_effect_pending(){return z(this,Qi).call(this),R(z(this,$n))}error(e){var r=z(this,On).onerror;let i=z(this,On).failed;if(z(this,Fr)||!r&&!i)throw e;z(this,sn)&&(Ut(z(this,sn)),Be(this,sn,null)),z(this,Bt)&&(Ut(z(this,Bt)),Be(this,Bt,null)),z(this,Mn)&&(Ut(z(this,Mn)),Be(this,Mn,null));var s=!1,l=!1;const f=()=>{if(s){If();return}s=!0,l&&mf(),yr.ensure(),Be(this,zr,0),z(this,Mn)!==null&&Gr(z(this,Mn),()=>{Be(this,Mn,null)}),this.is_pending=this.has_pending_snippet(),Be(this,sn,Pt(this,_t,ji).call(this,()=>(Be(this,Fr,!1),on(()=>z(this,Br).call(this,z(this,an)))))),z(this,hr)>0?Pt(this,_t,Bi).call(this):this.is_pending=!1};mr(()=>{try{l=!0,r==null||r(e,f),l=!1}catch(d){_a(d,z(this,Dn)&&z(this,Dn).parent)}i&&Be(this,Mn,Pt(this,_t,ji).call(this,()=>{yr.ensure(),Be(this,Fr,!0);try{return on(()=>{i(z(this,an),()=>e,()=>f)})}catch(d){return _a(d,z(this,Dn).parent),null}finally{Be(this,Fr,!1)}}))})}}an=new WeakMap,fo=new WeakMap,On=new WeakMap,Br=new WeakMap,Dn=new WeakMap,sn=new WeakMap,Bt=new WeakMap,Mn=new WeakMap,Wn=new WeakMap,pr=new WeakMap,zr=new WeakMap,hr=new WeakMap,ha=new WeakMap,Fr=new WeakMap,va=new WeakMap,ga=new WeakMap,$n=new WeakMap,Qi=new WeakMap,_t=new WeakSet,Bf=function(){try{Be(this,sn,on(()=>z(this,Br).call(this,z(this,an))))}catch(e){this.error(e)}},zf=function(){const e=z(this,On).pending;e&&(Be(this,Bt,on(()=>e(z(this,an)))),mr(()=>{var r=Pt(this,_t,Ys).call(this);Be(this,sn,Pt(this,_t,ji).call(this,()=>(yr.ensure(),on(()=>z(this,Br).call(this,r))))),z(this,hr)>0?Pt(this,_t,Bi).call(this):(Gr(z(this,Bt),()=>{Be(this,Bt,null)}),this.is_pending=!1)}))},Ys=function(){var e=z(this,an);return this.is_pending&&(Be(this,pr,Qn()),z(this,an).before(z(this,pr)),e=z(this,pr)),e},ji=function(e){var r=Je,i=Ge,s=Qt;Nn(z(this,Dn)),fn(z(this,Dn)),ba(z(this,Dn).ctx);try{return e()}catch(l){return uu(l),null}finally{Nn(r),fn(i),ba(s)}},Bi=function(){const e=z(this,On).pending;z(this,sn)!==null&&(Be(this,Wn,document.createDocumentFragment()),z(this,Wn).append(z(this,pr)),Lu(z(this,sn),z(this,Wn))),z(this,Bt)===null&&Be(this,Bt,on(()=>e(z(this,an))))},Vs=function(e){var r;if(!this.has_pending_snippet()){this.parent&&Pt(r=this.parent,_t,Vs).call(r,e);return}if(Be(this,hr,z(this,hr)+e),z(this,hr)===0){this.is_pending=!1;for(const i of z(this,va))dt(i,Tt),xn(i);for(const i of z(this,ga))dt(i,Tn),xn(i);z(this,va).clear(),z(this,ga).clear(),z(this,Bt)&&Gr(z(this,Bt),()=>{Be(this,Bt,null)}),z(this,Wn)&&(z(this,an).before(z(this,Wn)),Be(this,Wn,null))}};function Ff(t,e,r,i){const s=ns;var l=t.filter(b=>!b.settled);if(r.length===0&&l.length===0){i(e.map(s));return}var f=Ne,d=Je,v=Kf(),h=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(b=>b.promise)):null;function y(b){v();try{i(b)}catch(_){(d.f&Vn)===0&&_a(_,d)}f==null||f.deactivate(),Xs()}if(r.length===0){h.then(()=>y(e.map(s)));return}function x(){v(),Promise.all(r.map(b=>Uf(b))).then(b=>y([...e.map(s),...b])).catch(b=>_a(b,d))}h?h.then(x):x()}function Kf(){var t=Je,e=Ge,r=Qt,i=Ne;return function(l=!0){Nn(t),fn(e),ba(r),l&&(i==null||i.activate())}}function Xs(){Nn(null),fn(null),ba(null)}function ns(t){var e=St|Tt,r=Ge!==null&&(Ge.f&St)!==0?Ge:null;return Je!==null&&(Je.f|=xa),{ctx:Qt,deps:null,effects:null,equals:iu,f:e,fn:t,reactions:null,rv:0,v:wt,wv:0,parent:r??Je,ac:null}}function Uf(t,e,r){let i=Je;i===null&&of();var s=i.b,l=void 0,f=$r(wt),d=!Ge,v=new Map;return rd(()=>{var _;var h=Zl();l=h.promise;try{Promise.resolve(t()).then(h.resolve,h.reject).then(()=>{y===Ne&&y.committed&&y.deactivate(),Xs()})}catch(j){h.reject(j),Xs()}var y=Ne;if(d){var x=s.is_rendered();s.update_pending_count(1),y.increment(x),(_=v.get(y))==null||_.reject(Mr),v.delete(y),v.set(y,h)}const b=(j,q=void 0)=>{if(y.activate(),q)q!==Mr&&(f.f|=gr,wa(f,q));else{(f.f&gr)!==0&&(f.f^=gr),wa(f,j);for(const[P,K]of v){if(v.delete(P),P===y)break;K.reject(Mr)}}d&&(s.update_pending_count(-1),y.decrement(x))};h.promise.then(b,j=>b(null,j||"unknown"))}),Au(()=>{for(const h of v.values())h.reject(Mr)}),new Promise(h=>{function y(x){function b(){x===l?h(f):y(l)}x.then(b,b)}y(l)})}function Xn(t){const e=ns(t);return Nu(e),e}function mu(t){const e=ns(t);return e.equals=su,e}function Gf(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Ut(e[r])}}function Hf(t){for(var e=t.parent;e!==null;){if((e.f&St)===0)return(e.f&Vn)===0?e:null;e=e.parent}return null}function go(t){var e,r=Je;Nn(Hf(t));try{t.f&=~Wr,Gf(t),e=zu(t)}finally{Nn(r)}return e}function yu(t){var e=go(t);if(!t.equals(e)&&(t.wv=ju(),(!(Ne!=null&&Ne.is_fork)||t.deps===null)&&(t.v=e,t.deps===null))){dt(t,bt);return}_r||(kt!==null?(yo()||Ne!=null&&Ne.is_fork)&&kt.set(t,e):vo(t))}function Wf(t){var e,r;if(t.effects!==null)for(const i of t.effects)(i.teardown||i.ac)&&((e=i.teardown)==null||e.call(i),(r=i.ac)==null||r.abort(Mr),i.teardown=ef,i.ac=null,ni(i,0),wo(i))}function bu(t){if(t.effects!==null)for(const e of t.effects)e.teardown&&ka(e)}let Qs=new Set;const br=new Map;let _u=!1;function $r(t,e){var r={f:0,v:t,reactions:null,equals:iu,rv:0,wv:0};return r}function Pe(t,e){const r=$r(t);return Nu(r),r}function $f(t,e=!1,r=!0){const i=$r(t);return e||(i.equals=su),i}function G(t,e,r=!1){Ge!==null&&(!Sn||(Ge.f&fl)!==0)&&ou()&&(Ge.f&(St|Zn|ho|fl))!==0&&(cn===null||!ma.call(cn,t))&&gf();let i=r?Vt(e):e;return wa(t,i)}function wa(t,e){if(!t.equals(e)){var r=t.v;_r?br.set(t,e):br.set(t,r),t.v=e;var i=yr.ensure();if(i.capture(t,r),(t.f&St)!==0){const s=t;(t.f&Tt)!==0&&go(s),vo(s)}t.wv=ju(),wu(t,Tt),Je!==null&&(Je.f&bt)!==0&&(Je.f&(En|Qr))===0&&(rn===null?id([t]):rn.push(t)),!i.is_fork&&Qs.size>0&&!_u&&Yf()}return e}function Yf(){_u=!1;for(const t of Qs)(t.f&bt)!==0&&dt(t,Tn),ui(t)&&ka(t);Qs.clear()}function Za(t){G(t,t.v+1)}function wu(t,e){var r=t.reactions;if(r!==null)for(var i=r.length,s=0;s<i;s++){var l=r[s],f=l.f,d=(f&Tt)===0;if(d&&dt(l,e),(f&St)!==0){var v=l;kt==null||kt.delete(v),(f&Wr)===0&&(f&un&&(l.f|=Wr),wu(v,Tn))}else d&&((f&Zn)!==0&&yn!==null&&yn.add(l),xn(l))}}function Vt(t){if(typeof t!="object"||t===null||Ur in t)return t;const e=Ql(t);if(e!==Zc&&e!==Jc)return t;var r=new Map,i=po(t),s=Pe(0),l=Hr,f=d=>{if(Hr===l)return d();var v=Ge,h=Hr;fn(null),ml(l);var y=d();return fn(v),ml(h),y};return i&&r.set("length",Pe(t.length)),new Proxy(t,{defineProperty(d,v,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&hf();var y=r.get(v);return y===void 0?f(()=>{var x=Pe(h.value);return r.set(v,x),x}):G(y,h.value,!0),!0},deleteProperty(d,v){var h=r.get(v);if(h===void 0){if(v in d){const y=f(()=>Pe(wt));r.set(v,y),Za(s)}}else G(h,wt),Za(s);return!0},get(d,v,h){var _;if(v===Ur)return t;var y=r.get(v),x=v in d;if(y===void 0&&(!x||(_=ua(d,v))!=null&&_.writable)&&(y=f(()=>{var j=Vt(x?d[v]:wt),q=Pe(j);return q}),r.set(v,y)),y!==void 0){var b=R(y);return b===wt?void 0:b}return Reflect.get(d,v,h)},getOwnPropertyDescriptor(d,v){var h=Reflect.getOwnPropertyDescriptor(d,v);if(h&&"value"in h){var y=r.get(v);y&&(h.value=R(y))}else if(h===void 0){var x=r.get(v),b=x==null?void 0:x.v;if(x!==void 0&&b!==wt)return{enumerable:!0,configurable:!0,value:b,writable:!0}}return h},has(d,v){var b;if(v===Ur)return!0;var h=r.get(v),y=h!==void 0&&h.v!==wt||Reflect.has(d,v);if(h!==void 0||Je!==null&&(!y||(b=ua(d,v))!=null&&b.writable)){h===void 0&&(h=f(()=>{var _=y?Vt(d[v]):wt,j=Pe(_);return j}),r.set(v,h));var x=R(h);if(x===wt)return!1}return y},set(d,v,h,y){var te;var x=r.get(v),b=v in d;if(i&&v==="length")for(var _=h;_<x.v;_+=1){var j=r.get(_+"");j!==void 0?G(j,wt):_ in d&&(j=f(()=>Pe(wt)),r.set(_+"",j))}if(x===void 0)(!b||(te=ua(d,v))!=null&&te.writable)&&(x=f(()=>Pe(void 0)),G(x,Vt(h)),r.set(v,x));else{b=x.v!==wt;var q=f(()=>Vt(h));G(x,q)}var P=Reflect.getOwnPropertyDescriptor(d,v);if(P!=null&&P.set&&P.set.call(y,h),!b){if(i&&typeof v=="string"){var K=r.get("length"),ae=Number(v);Number.isInteger(ae)&&ae>=K.v&&G(K,ae+1)}Za(s)}return!0},ownKeys(d){R(s);var v=Reflect.ownKeys(d).filter(x=>{var b=r.get(x);return b===void 0||b.v!==wt});for(var[h,y]of r)y.v!==wt&&!(h in d)&&v.push(h);return v},setPrototypeOf(){vf()}})}function pl(t){try{if(t!==null&&typeof t=="object"&&Ur in t)return t[Ur]}catch{}return t}function Vf(t,e){return Object.is(pl(t),pl(e))}var hl,ku,xu,Su;function Xf(){if(hl===void 0){hl=window,ku=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;xu=ua(e,"firstChild").get,Su=ua(e,"nextSibling").get,cl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),cl(r)&&(r.__t=void 0)}}function Qn(t=""){return document.createTextNode(t)}function Yt(t){return xu.call(t)}function li(t){return Su.call(t)}function D(t,e){return Yt(t)}function Kt(t,e=!1){{var r=Yt(t);return r instanceof Comment&&r.data===""?li(r):r}}function F(t,e=1,r=!1){let i=t;for(;e--;)i=li(i);return i}function Qf(t){t.textContent=""}function Tu(){return!1}function Zf(t,e,r){return document.createElementNS(au,t,void 0)}let vl=!1;function Jf(){vl||(vl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function mo(t){var e=Ge,r=Je;fn(null),Nn(null);try{return t()}finally{fn(e),Nn(r)}}function Eu(t,e,r,i=r){t.addEventListener(e,()=>mo(r));const s=t.__on_r;s?t.__on_r=()=>{s(),i(!0)}:t.__on_r=()=>i(!0),Jf()}function ed(t){Je===null&&(Ge===null&&ff(),cf()),_r&&uf()}function td(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Jn(t,e,r){var i=Je;i!==null&&(i.f&Xt)!==0&&(t|=Xt);var s={ctx:Qt,deps:null,nodes:null,f:t|Tt|un,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{ka(s)}catch(d){throw Ut(s),d}else e!==null&&xn(s);var l=s;if(r&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&xa)===0&&(l=l.first,(t&Zn)!==0&&(t&ya)!==0&&l!==null&&(l.f|=ya)),l!==null&&(l.parent=i,i!==null&&td(l,i),Ge!==null&&(Ge.f&St)!==0&&(t&Qr)===0)){var f=Ge;(f.effects??(f.effects=[])).push(l)}return s}function yo(){return Ge!==null&&!Sn}function Au(t){const e=Jn(es,null,!1);return dt(e,bt),e.teardown=t,e}function Hi(t){ed();var e=Je.f,r=!Ge&&(e&En)!==0&&(e&oi)===0;if(r){var i=Qt;(i.e??(i.e=[])).push(t)}else return Iu(t)}function Iu(t){return Jn(ti|nf,t,!1)}function nd(t){yr.ensure();const e=Jn(Qr|xa,t,!0);return(r={})=>new Promise(i=>{r.outro?Gr(e,()=>{Ut(e),i(void 0)}):(Ut(e),i(void 0))})}function Cu(t){return Jn(ti,t,!1)}function rd(t){return Jn(ho|xa,t,!0)}function bo(t,e=0){return Jn(es|e,t,!0)}function ke(t,e=[],r=[],i=[]){Ff(i,e,r,s=>{Jn(es,()=>t(...s.map(R)),!0)})}function _o(t,e=0){var r=Jn(Zn|e,t,!0);return r}function on(t){return Jn(En|xa,t,!0)}function Pu(t){var e=t.teardown;if(e!==null){const r=_r,i=Ge;gl(!0),fn(null);try{e.call(null)}finally{gl(r),fn(i)}}}function wo(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const s=r.ac;s!==null&&mo(()=>{s.abort(Mr)});var i=r.next;(r.f&Qr)!==0?r.parent=null:Ut(r,e),r=i}}function ad(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&En)===0&&Ut(e),e=r}}function Ut(t,e=!0){var r=!1;(e||(t.f&tu)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Ru(t.nodes.start,t.nodes.end),r=!0),wo(t,e&&!r),ni(t,0),dt(t,Vn);var i=t.nodes&&t.nodes.t;if(i!==null)for(const l of i)l.stop();Pu(t);var s=t.parent;s!==null&&s.first!==null&&Ou(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Ru(t,e){for(;t!==null;){var r=t===e?null:li(t);t.remove(),t=r}}function Ou(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function Gr(t,e,r=!0){var i=[];Du(t,i,!0);var s=()=>{r&&Ut(t),e&&e()},l=i.length;if(l>0){var f=()=>--l||s();for(var d of i)d.out(f)}else s()}function Du(t,e,r){if((t.f&Xt)===0){t.f^=Xt;var i=t.nodes&&t.nodes.t;if(i!==null)for(const d of i)(d.is_global||r)&&e.push(d);for(var s=t.first;s!==null;){var l=s.next,f=(s.f&ya)!==0||(s.f&En)!==0&&(t.f&Zn)!==0;Du(s,e,f?r:!1),s=l}}}function ko(t){Mu(t,!0)}function Mu(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&bt)===0&&(dt(t,Tt),xn(t));for(var r=t.first;r!==null;){var i=r.next,s=(r.f&ya)!==0||(r.f&En)!==0;Mu(r,s?e:!1),r=i}var l=t.nodes&&t.nodes.t;if(l!==null)for(const f of l)(f.is_global||e)&&f.in()}}function Lu(t,e){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end;r!==null;){var s=r===i?null:li(r);e.append(r),r=s}}let zi=!1,_r=!1;function gl(t){_r=t}let Ge=null,Sn=!1;function fn(t){Ge=t}let Je=null;function Nn(t){Je=t}let cn=null;function Nu(t){Ge!==null&&(cn===null?cn=[t]:cn.push(t))}let Ft=null,Wt=0,rn=null;function id(t){rn=t}let qu=1,Nr=0,Hr=Nr;function ml(t){Hr=t}function ju(){return++qu}function ui(t){var e=t.f;if((e&Tt)!==0)return!0;if(e&St&&(t.f&=~Wr),(e&Tn)!==0){for(var r=t.deps,i=r.length,s=0;s<i;s++){var l=r[s];if(ui(l)&&yu(l),l.wv>t.wv)return!0}(e&un)!==0&&kt===null&&dt(t,bt)}return!1}function Bu(t,e,r=!0){var i=t.reactions;if(i!==null&&!(cn!==null&&ma.call(cn,t)))for(var s=0;s<i.length;s++){var l=i[s];(l.f&St)!==0?Bu(l,e,!1):e===l&&(r?dt(l,Tt):(l.f&bt)!==0&&dt(l,Tn),xn(l))}}function zu(t){var q;var e=Ft,r=Wt,i=rn,s=Ge,l=cn,f=Qt,d=Sn,v=Hr,h=t.f;Ft=null,Wt=0,rn=null,Ge=(h&(En|Qr))===0?t:null,cn=null,ba(t.ctx),Sn=!1,Hr=++Nr,t.ac!==null&&(mo(()=>{t.ac.abort(Mr)}),t.ac=null);try{t.f|=Gs;var y=t.fn,x=y();t.f|=oi;var b=t.deps,_=Ne==null?void 0:Ne.is_fork;if(Ft!==null){var j;if(_||ni(t,Wt),b!==null&&Wt>0)for(b.length=Wt+Ft.length,j=0;j<Ft.length;j++)b[Wt+j]=Ft[j];else t.deps=b=Ft;if(yo()&&(t.f&un)!==0)for(j=Wt;j<b.length;j++)((q=b[j]).reactions??(q.reactions=[])).push(t)}else!_&&b!==null&&Wt<b.length&&(ni(t,Wt),b.length=Wt);if(ou()&&rn!==null&&!Sn&&b!==null&&(t.f&(St|Tn|Tt))===0)for(j=0;j<rn.length;j++)Bu(rn[j],t);if(s!==null&&s!==t){if(Nr++,s.deps!==null)for(let P=0;P<r;P+=1)s.deps[P].rv=Nr;if(e!==null)for(const P of e)P.rv=Nr;rn!==null&&(i===null?i=rn:i.push(...rn))}return(t.f&gr)!==0&&(t.f^=gr),x}catch(P){return uu(P)}finally{t.f^=Gs,Ft=e,Wt=r,rn=i,Ge=s,cn=l,ba(f),Sn=d,Hr=v}}function sd(t,e){let r=e.reactions;if(r!==null){var i=Vc.call(r,t);if(i!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[i]=r[s],r.pop())}}if(r===null&&(e.f&St)!==0&&(Ft===null||!ma.call(Ft,e))){var l=e;(l.f&un)!==0&&(l.f^=un,l.f&=~Wr),vo(l),Wf(l),ni(l,0)}}function ni(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)sd(t,r[i])}function ka(t){var e=t.f;if((e&Vn)===0){dt(t,bt);var r=Je,i=zi;Je=t,zi=!0;try{(e&(Zn|Jl))!==0?ad(t):wo(t),Pu(t);var s=zu(t);t.teardown=typeof s=="function"?s:null,t.wv=qu;var l;Us&&Pf&&(t.f&Tt)!==0&&t.deps}finally{zi=i,Je=r}}}async function Fu(){await Promise.resolve(),Df()}function R(t){var e=t.f,r=(e&St)!==0;if(Ge!==null&&!Sn){var i=Je!==null&&(Je.f&Vn)!==0;if(!i&&(cn===null||!ma.call(cn,t))){var s=Ge.deps;if((Ge.f&Gs)!==0)t.rv<Nr&&(t.rv=Nr,Ft===null&&s!==null&&s[Wt]===t?Wt++:Ft===null?Ft=[t]:Ft.push(t));else{(Ge.deps??(Ge.deps=[])).push(t);var l=t.reactions;l===null?t.reactions=[Ge]:ma.call(l,Ge)||l.push(Ge)}}}if(_r&&br.has(t))return br.get(t);if(r){var f=t;if(_r){var d=f.v;return((f.f&bt)===0&&f.reactions!==null||Uu(f))&&(d=go(f)),br.set(f,d),d}var v=(f.f&un)===0&&!Sn&&Ge!==null&&(zi||(Ge.f&un)!==0),h=(f.f&oi)===0;ui(f)&&(v&&(f.f|=un),yu(f)),v&&!h&&(bu(f),Ku(f))}if(kt!=null&&kt.has(t))return kt.get(t);if((t.f&gr)!==0)throw t.v;return t.v}function Ku(t){if(t.f|=un,t.deps!==null)for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&St)!==0&&(e.f&un)===0&&(bu(e),Ku(e))}function Uu(t){if(t.v===wt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(br.has(e)||(e.f&St)!==0&&Uu(e))return!0;return!1}function ci(t){var e=Sn;try{return Sn=!0,t()}finally{Sn=e}}const od=["touchstart","touchmove"];function ld(t){return od.includes(t)}const Gu=new Set,Zs=new Set;function jn(t){for(var e=0;e<t.length;e++)Gu.add(t[e]);for(var r of Zs)r(t)}let yl=null;function bl(t){var P;var e=this,r=e.ownerDocument,i=t.type,s=((P=t.composedPath)==null?void 0:P.call(t))||[],l=s[0]||t.target;yl=t;var f=0,d=yl===t&&t.__root;if(d){var v=s.indexOf(d);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var h=s.indexOf(e);if(h===-1)return;v<=h&&(f=v)}if(l=s[f]||t.target,l!==e){Xc(t,"currentTarget",{configurable:!0,get(){return l||r}});var y=Ge,x=Je;fn(null),Nn(null);try{for(var b,_=[];l!==null;){var j=l.assignedSlot||l.parentNode||l.host||null;try{var q=l["__"+i];q!=null&&(!l.disabled||t.target===l)&&q.call(l,t)}catch(K){b?_.push(K):b=K}if(t.cancelBubble||j===e||j===null)break;l=j}if(b){for(let K of _)queueMicrotask(()=>{throw K});throw b}}finally{t.__root=e,delete t.currentTarget,fn(y),Nn(x)}}}var Yl,Vl;const Rs=(Vl=(Yl=globalThis==null?void 0:globalThis.window)==null?void 0:Yl.trustedTypes)==null?void 0:Vl.createPolicy("svelte-trusted-html",{createHTML:t=>t});function ud(t){return(Rs==null?void 0:Rs.createHTML(t))??t}function xo(t,e=!1){var r=Zf("template");return t=t.replaceAll("<!>","<!---->"),r.innerHTML=e?ud(t):t,r.content}function Yr(t,e){var r=Je;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function J(t,e){var r=(e&ru)!==0,i=(e&Ef)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=xo(l?t:"<!>"+t,!0),r||(s=Yt(s)));var f=i||ku?document.importNode(s,!0):s.cloneNode(!0);if(r){var d=Yt(f),v=f.lastChild;Yr(d,v)}else Yr(f,f);return f}}function cd(t,e,r="svg"){var i=!t.startsWith("<!>"),s=(e&ru)!==0,l=`<${r}>${i?t:"<!>"+t}</${r}>`,f;return()=>{if(!f){var d=xo(l,!0),v=Yt(d);if(s)for(f=document.createDocumentFragment();Yt(v);)f.appendChild(Yt(v));else f=Yt(v)}var h=f.cloneNode(!0);if(s){var y=Yt(h),x=h.lastChild;Yr(y,x)}else Yr(h,h);return h}}function Hu(t,e){return cd(t,e,"svg")}function _l(t=""){{var e=Qn(t+"");return Yr(e,e),e}}function Wu(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Qn();return t.append(e,r),Yr(e,r),t}function X(t,e){t!==null&&t.before(e)}function pe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function fd(t,e){return dd(t,e)}const Oi=new Map;function dd(t,{target:e,anchor:r,props:i={},events:s,context:l,intro:f=!0}){Xf();var d=new Set,v=x=>{for(var b=0;b<x.length;b++){var _=x[b];if(!d.has(_)){d.add(_);var j=ld(_);for(const K of[e,document]){var q=Oi.get(K);q===void 0&&(q=new Map,Oi.set(K,q));var P=q.get(_);P===void 0?(K.addEventListener(_,bl,{passive:j}),q.set(_,1)):q.set(_,P+1)}}}};v(Ji(Gu)),Zs.add(v);var h=void 0,y=nd(()=>{var x=r??e.appendChild(Qn());return qf(x,{pending:()=>{}},b=>{Et({});var _=Qt;l&&(_.c=l),s&&(i.$$events=s),h=t(b,i)||{},At()}),()=>{var q;for(var b of d)for(const P of[e,document]){var _=Oi.get(P),j=_.get(b);--j==0?(P.removeEventListener(b,bl),_.delete(b),_.size===0&&Oi.delete(P)):_.set(b,j)}Zs.delete(v),x!==r&&((q=x.parentNode)==null||q.removeChild(x))}});return pd.set(h,y),h}let pd=new WeakMap;var _n,Ln,$t,Kr,ii,si,Zi;class hd{constructor(e,r=!0){Ke(this,"anchor");Ue(this,_n,new Map);Ue(this,Ln,new Map);Ue(this,$t,new Map);Ue(this,Kr,new Set);Ue(this,ii,!0);Ue(this,si,()=>{var e=Ne;if(z(this,_n).has(e)){var r=z(this,_n).get(e),i=z(this,Ln).get(r);if(i)ko(i),z(this,Kr).delete(r);else{var s=z(this,$t).get(r);s&&(z(this,Ln).set(r,s.effect),z(this,$t).delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),i=s.effect)}for(const[l,f]of z(this,_n)){if(z(this,_n).delete(l),l===e)break;const d=z(this,$t).get(f);d&&(Ut(d.effect),z(this,$t).delete(f))}for(const[l,f]of z(this,Ln)){if(l===r||z(this,Kr).has(l))continue;const d=()=>{if(Array.from(z(this,_n).values()).includes(l)){var h=document.createDocumentFragment();Lu(f,h),h.append(Qn()),z(this,$t).set(l,{effect:f,fragment:h})}else Ut(f);z(this,Kr).delete(l),z(this,Ln).delete(l)};z(this,ii)||!i?(z(this,Kr).add(l),Gr(f,d,!1)):d()}}});Ue(this,Zi,e=>{z(this,_n).delete(e);const r=Array.from(z(this,_n).values());for(const[i,s]of z(this,$t))r.includes(i)||(Ut(s.effect),z(this,$t).delete(i))});this.anchor=e,Be(this,ii,r)}ensure(e,r){var i=Ne,s=Tu();if(r&&!z(this,Ln).has(e)&&!z(this,$t).has(e))if(s){var l=document.createDocumentFragment(),f=Qn();l.append(f),z(this,$t).set(e,{effect:on(()=>r(f)),fragment:l})}else z(this,Ln).set(e,on(()=>r(this.anchor)));if(z(this,_n).set(i,e),s){for(const[d,v]of z(this,Ln))d===e?i.unskip_effect(v):i.skip_effect(v);for(const[d,v]of z(this,$t))d===e?i.unskip_effect(v.effect):i.skip_effect(v.effect);i.oncommit(z(this,si)),i.ondiscard(z(this,Zi))}else z(this,si).call(this)}}_n=new WeakMap,Ln=new WeakMap,$t=new WeakMap,Kr=new WeakMap,ii=new WeakMap,si=new WeakMap,Zi=new WeakMap;function Ee(t,e,r=!1){var i=new hd(t),s=r?ya:0;function l(f,d){i.ensure(f,d)}_o(()=>{var f=!1;e((d,v=0)=>{f=!0,l(v,d)}),f||l(!1,null)},s)}function Sa(t,e){return e}function vd(t,e,r){for(var i=[],s=e.length,l,f=e.length,d=0;d<s;d++){let x=e[d];Gr(x,()=>{if(l){if(l.pending.delete(x),l.done.add(x),l.pending.size===0){var b=t.outrogroups;Js(Ji(l.done)),b.delete(l),b.size===0&&(t.outrogroups=null)}}else f-=1},!1)}if(f===0){var v=i.length===0&&r!==null;if(v){var h=r,y=h.parentNode;Qf(y),y.append(h),t.items.clear()}Js(e,!v)}else l={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(l)}function Js(t,e=!0){for(var r=0;r<t.length;r++)Ut(t[r],e)}var wl;function Ta(t,e,r,i,s,l=null){var f=t,d=new Map,v=(e&nu)!==0;if(v){var h=t;f=h.appendChild(Qn())}var y=null,x=mu(()=>{var K=r();return po(K)?K:K==null?[]:Ji(K)}),b,_=!0;function j(){P.fallback=y,gd(P,b,f,e,i),y!==null&&(b.length===0?(y.f&Yn)===0?ko(y):(y.f^=Yn,Va(y,null,f)):Gr(y,()=>{y=null}))}var q=_o(()=>{b=R(x);for(var K=b.length,ae=new Set,te=Ne,W=Tu(),Z=0;Z<K;Z+=1){var ve=b[Z],ne=i(ve,Z),me=_?null:d.get(ne);me?(me.v&&wa(me.v,ve),me.i&&wa(me.i,Z),W&&te.unskip_effect(me.e)):(me=md(d,_?f:wl??(wl=Qn()),ve,ne,Z,s,e,r),_||(me.e.f|=Yn),d.set(ne,me)),ae.add(ne)}if(K===0&&l&&!y&&(_?y=on(()=>l(f)):(y=on(()=>l(wl??(wl=Qn()))),y.f|=Yn)),K>ae.size&&lf(),!_)if(W){for(const[Oe,Re]of d)ae.has(Oe)||te.skip_effect(Re.e);te.oncommit(j),te.ondiscard(()=>{})}else j();R(x)}),P={effect:q,items:d,outrogroups:null,fallback:y};_=!1}function Fa(t){for(;t!==null&&(t.f&En)===0;)t=t.next;return t}function gd(t,e,r,i,s){var Re,ue,$,re,Ie,we,xe,Ce,B;var l=(i&_f)!==0,f=e.length,d=t.items,v=Fa(t.effect.first),h,y=null,x,b=[],_=[],j,q,P,K;if(l)for(K=0;K<f;K+=1)j=e[K],q=s(j,K),P=d.get(q).e,(P.f&Yn)===0&&((ue=(Re=P.nodes)==null?void 0:Re.a)==null||ue.measure(),(x??(x=new Set)).add(P));for(K=0;K<f;K+=1){if(j=e[K],q=s(j,K),P=d.get(q).e,t.outrogroups!==null)for(const H of t.outrogroups)H.pending.delete(P),H.done.delete(P);if((P.f&Yn)!==0)if(P.f^=Yn,P===v)Va(P,null,r);else{var ae=y?y.next:v;P===t.effect.last&&(t.effect.last=P.prev),P.prev&&(P.prev.next=P.next),P.next&&(P.next.prev=P.prev),fr(t,y,P),fr(t,P,ae),Va(P,ae,r),y=P,b=[],_=[],v=Fa(y.next);continue}if((P.f&Xt)!==0&&(ko(P),l&&((re=($=P.nodes)==null?void 0:$.a)==null||re.unfix(),(x??(x=new Set)).delete(P))),P!==v){if(h!==void 0&&h.has(P)){if(b.length<_.length){var te=_[0],W;y=te.prev;var Z=b[0],ve=b[b.length-1];for(W=0;W<b.length;W+=1)Va(b[W],te,r);for(W=0;W<_.length;W+=1)h.delete(_[W]);fr(t,Z.prev,ve.next),fr(t,y,Z),fr(t,ve,te),v=te,y=ve,K-=1,b=[],_=[]}else h.delete(P),Va(P,v,r),fr(t,P.prev,P.next),fr(t,P,y===null?t.effect.first:y.next),fr(t,y,P),y=P;continue}for(b=[],_=[];v!==null&&v!==P;)(h??(h=new Set)).add(v),_.push(v),v=Fa(v.next);if(v===null)continue}(P.f&Yn)===0&&b.push(P),y=P,v=Fa(P.next)}if(t.outrogroups!==null){for(const H of t.outrogroups)H.pending.size===0&&(Js(Ji(H.done)),(Ie=t.outrogroups)==null||Ie.delete(H));t.outrogroups.size===0&&(t.outrogroups=null)}if(v!==null||h!==void 0){var ne=[];if(h!==void 0)for(P of h)(P.f&Xt)===0&&ne.push(P);for(;v!==null;)(v.f&Xt)===0&&v!==t.fallback&&ne.push(v),v=Fa(v.next);var me=ne.length;if(me>0){var Oe=(i&nu)!==0&&f===0?r:null;if(l){for(K=0;K<me;K+=1)(xe=(we=ne[K].nodes)==null?void 0:we.a)==null||xe.measure();for(K=0;K<me;K+=1)(B=(Ce=ne[K].nodes)==null?void 0:Ce.a)==null||B.fix()}vd(t,ne,Oe)}}l&&mr(()=>{var H,ce;if(x!==void 0)for(P of x)(ce=(H=P.nodes)==null?void 0:H.a)==null||ce.apply()})}function md(t,e,r,i,s,l,f,d){var v=(f&yf)!==0?(f&wf)===0?$f(r,!1,!1):$r(r):null,h=(f&bf)!==0?$r(s):null;return{v,i:h,e:on(()=>(l(e,v??r,h??s,d),()=>{t.delete(i)}))}}function Va(t,e,r){if(t.nodes)for(var i=t.nodes.start,s=t.nodes.end,l=e&&(e.f&Yn)===0?e.nodes.start:r;i!==null;){var f=li(i);if(l.before(i),i===s)return;i=f}}function fr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function yd(t,e,r=!1,i=!1,s=!1){var l=t,f="";ke(()=>{var d=Je;if(f!==(f=e()??"")&&(d.nodes!==null&&(Ru(d.nodes.start,d.nodes.end),d.nodes=null),f!=="")){var v=f+"";r?v=`<svg>${v}</svg>`:i&&(v=`<math>${v}</math>`);var h=xo(v);if((r||i)&&(h=Yt(h)),Yr(Yt(h),h.lastChild),r||i)for(;Yt(h);)l.before(Yt(h));else l.before(h)}})}const kl=[...` 	
\r\fÂ \v\uFEFF`];function bd(t,e,r){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),r){for(var s in r)if(r[s])i=i?i+" "+s:s;else if(i.length)for(var l=s.length,f=0;(f=i.indexOf(s,f))>=0;){var d=f+l;(f===0||kl.includes(i[f-1]))&&(d===i.length||kl.includes(i[d]))?i=(f===0?"":i.substring(0,f))+i.substring(d+1):f=d}}return i===""?null:i}function xl(t,e=!1){var r=e?" !important;":";",i="";for(var s in t){var l=t[s];l!=null&&l!==""&&(i+=" "+s+": "+l+r)}return i}function Os(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function _d(t,e){if(e){var r="",i,s;if(Array.isArray(e)?(i=e[0],s=e[1]):i=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,f=0,d=!1,v=[];i&&v.push(...Object.keys(i).map(Os)),s&&v.push(...Object.keys(s).map(Os));var h=0,y=-1;const q=t.length;for(var x=0;x<q;x++){var b=t[x];if(d?b==="/"&&t[x-1]==="*"&&(d=!1):l?l===b&&(l=!1):b==="/"&&t[x+1]==="*"?d=!0:b==='"'||b==="'"?l=b:b==="("?f++:b===")"&&f--,!d&&l===!1&&f===0){if(b===":"&&y===-1)y=x;else if(b===";"||x===q-1){if(y!==-1){var _=Os(t.substring(h,y).trim());if(!v.includes(_)){b!==";"&&x++;var j=t.substring(h,x).trim();r+=" "+j+";"}}h=x+1,y=-1}}}}return i&&(r+=xl(i)),s&&(r+=xl(s,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function vr(t,e,r,i,s,l){var f=t.__className;if(f!==r||f===void 0){var d=bd(r,i,l);d==null?t.removeAttribute("class"):t.className=d,t.__className=r}else if(l&&s!==l)for(var v in l){var h=!!l[v];(s==null||h!==!!s[v])&&t.classList.toggle(v,h)}return l}function Ds(t,e={},r,i){for(var s in r){var l=r[s];e[s]!==l&&(r[s]==null?t.style.removeProperty(s):t.style.setProperty(s,l,i))}}function Wi(t,e,r,i){var s=t.__style;if(s!==e){var l=_d(e,i);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else i&&(Array.isArray(i)?(Ds(t,r==null?void 0:r[0],i[0]),Ds(t,r==null?void 0:r[1],i[1],"important")):Ds(t,r,i));return i}function $u(t,e,r=!1){if(t.multiple){if(e==null)return;if(!po(e))return Af();for(var i of t.options)i.selected=e.includes(Ja(i));return}for(i of t.options){var s=Ja(i);if(Vf(s,e)){i.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function wd(t){var e=new MutationObserver(()=>{$u(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Au(()=>{e.disconnect()})}function Yu(t,e,r=e){var i=new WeakSet,s=!0;Eu(t,"change",l=>{var f=l?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(f),Ja);else{var v=t.querySelector(f)??t.querySelector("option:not([disabled])");d=v&&Ja(v)}r(d),Ne!==null&&i.add(Ne)}),Cu(()=>{var l=e();if(t===document.activeElement){var f=Gi??Ne;if(i.has(f))return}if($u(t,l,s),s&&l===void 0){var d=t.querySelector(":checked");d!==null&&(l=Ja(d),r(l))}t.__value=l,s=!1}),wd(t)}function Ja(t){return"__value"in t?t.__value:t.value}const kd=Symbol("is custom element"),xd=Symbol("is html");function Vu(t,e,r,i){var s=Sd(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[af]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Td(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Sd(t){return t.__attributes??(t.__attributes={[kd]:t.nodeName.includes("-"),[xd]:t.namespaceURI===au})}var Sl=new Map;function Td(t){var e=t.getAttribute("is")||t.nodeName,r=Sl.get(e);if(r)return r;Sl.set(e,r=[]);for(var i,s=t,l=Element.prototype;l!==s;){i=Qc(s);for(var f in i)i[f].set&&r.push(f);s=Ql(s)}return r}function So(t,e,r=e){var i=new WeakSet;Eu(t,"input",async s=>{var l=s?t.defaultValue:t.value;if(l=Ms(t)?Ls(l):l,r(l),Ne!==null&&i.add(Ne),await Fu(),l!==(l=e())){var f=t.selectionStart,d=t.selectionEnd,v=t.value.length;if(t.value=l??"",d!==null){var h=t.value.length;f===d&&d===v&&h>v?(t.selectionStart=h,t.selectionEnd=h):(t.selectionStart=f,t.selectionEnd=Math.min(d,h))}}}),ci(e)==null&&t.value&&(r(Ms(t)?Ls(t.value):t.value),Ne!==null&&i.add(Ne)),bo(()=>{var s=e();if(t===document.activeElement){var l=Gi??Ne;if(i.has(l))return}Ms(t)&&s===Ls(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ms(t){var e=t.type;return e==="number"||e==="range"}function Ls(t){return t===""?null:+t}function Tl(t,e){return t===e||(t==null?void 0:t[Ur])===e}function Xu(t={},e,r,i){return Cu(()=>{var s,l;return bo(()=>{s=l,l=[],ci(()=>{t!==r(...l)&&(e(t,...l),s&&Tl(r(...s),t)&&e(null,...s))})}),()=>{mr(()=>{l&&Tl(r(...l),t)&&e(null,...l)})}}),t}let Di=!1;function Ed(t){var e=Di;try{return Di=!1,[t(),Di]}finally{Di=e}}function qe(t,e,r,i){var ae;var s=(r&Sf)!==0,l=(r&Tf)!==0,f=i,d=!0,v=()=>(d&&(d=!1,f=l?ci(i):i),f),h;if(s){var y=Ur in t||rf in t;h=((ae=ua(t,e))==null?void 0:ae.set)??(y&&e in t?te=>t[e]=te:void 0)}var x,b=!1;s?[x,b]=Ed(()=>t[e]):x=t[e],x===void 0&&i!==void 0&&(x=v(),h&&(pf(),h(x)));var _;if(_=()=>{var te=t[e];return te===void 0?v():(d=!0,te)},(r&xf)===0)return _;if(h){var j=t.$$legacy;return(function(te,W){return arguments.length>0?((!W||j||b)&&h(W?_():te),te):_()})}var q=!1,P=((r&kf)!==0?ns:mu)(()=>(q=!1,_()));s&&R(P);var K=Je;return(function(te,W){if(arguments.length>0){const Z=W?R(P):s?Vt(te):te;return G(P,Z),q=!0,f!==void 0&&(f=Z),te}return _r&&q||(K.f&Vn)!==0?P.v:R(P)})}function Rt(t){Qt===null&&sf(),Hi(()=>{const e=ci(t);if(typeof e=="function")return e})}const Ad="5";var Xl;typeof window<"u"&&((Xl=window.__svelte??(window.__svelte={})).v??(Xl.v=new Set)).add(Ad);const eo=[{id:"onnx-community/Qwen3-0.6B-ONNX",name:"Qwen3 0.6B",size:"~400 MB",description:"Fastest, best for quick answers"},{id:"onnx-community/Qwen3-1.7B-ONNX",name:"Qwen3 1.7B",size:"~1.1 GB",description:"Balanced speed and quality"},{id:"onnx-community/Qwen3-4B-ONNX",name:"Qwen3 4B",size:"~2.6 GB",description:"Better reasoning, slower"},{id:"onnx-community/DeepSeek-R1-Distill-Qwen-1.5B-ONNX",name:"DeepSeek R1 1.5B",size:"~1 GB",description:"Strong reasoning, CoT focused"},{id:"onnx-community/Phi-4-mini-instruct-ONNX",name:"Phi-4 Mini",size:"~2.5 GB",description:"Microsoft, good at reasoning"},{id:"onnx-community/Phi-3-mini-128k-instruct-ONNX",name:"Phi-3 Mini 128k",size:"~2.6 GB",description:"128k context, reliable"},{id:"onnx-community/gemma-3-270m-it-ONNX",name:"Gemma 3 270M",size:"~190 MB",description:"Smallest, ultra fast"}];var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fi={exports:{}},Pd=Fi.exports,El;function Rd(){return El||(El=1,(function(t,e){((r,i)=>{t.exports=i()})(Pd,function(){var r=function(n,a){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(o,u){o.__proto__=u}:function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])}))(n,a)},i=function(){return(i=Object.assign||function(n){for(var a,o=1,u=arguments.length;o<u;o++)for(var c in a=arguments[o])Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c]);return n}).apply(this,arguments)};function s(n,a,o){for(var u,c=0,p=a.length;c<p;c++)!u&&c in a||((u=u||Array.prototype.slice.call(a,0,c))[c]=a[c]);return n.concat(u||Array.prototype.slice.call(a))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Id,f=Object.keys,d=Array.isArray;function v(n,a){return typeof a=="object"&&f(a).forEach(function(o){n[o]=a[o]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var h=Object.getPrototypeOf,y={}.hasOwnProperty;function x(n,a){return y.call(n,a)}function b(n,a){typeof a=="function"&&(a=a(h(n))),(typeof Reflect>"u"?f:Reflect.ownKeys)(a).forEach(function(o){j(n,o,a[o])})}var _=Object.defineProperty;function j(n,a,o,u){_(n,a,v(o&&x(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function q(n){return{from:function(a){return n.prototype=Object.create(a.prototype),j(n.prototype,"constructor",n),{extend:b.bind(null,n.prototype)}}}}var P=Object.getOwnPropertyDescriptor,K=[].slice;function ae(n,a,o){return K.call(n,a,o)}function te(n,a){return a(n)}function W(n){if(!n)throw new Error("Assertion Failed")}function Z(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function ve(n,a){if(typeof a=="string"&&x(n,a))return n[a];if(!a)return n;if(typeof a!="string"){for(var o=[],u=0,c=a.length;u<c;++u){var p=ve(n,a[u]);o.push(p)}return o}var g,m=a.indexOf(".");return m===-1||(g=n[a.substr(0,m)])==null?void 0:ve(g,a.substr(m+1))}function ne(n,a,o){if(n&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof a!="string"&&"length"in a){W(typeof o!="string"&&"length"in o);for(var u=0,c=a.length;u<c;++u)ne(n,a[u],o[u])}else{var p,g,m=a.indexOf(".");m!==-1?(p=a.substr(0,m),(m=a.substr(m+1))===""?o===void 0?d(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o:ne(g=(g=n[p])&&x(n,p)?g:n[p]={},m,o)):o===void 0?d(n)&&!isNaN(parseInt(a))?n.splice(a,1):delete n[a]:n[a]=o}}function me(n){var a,o={};for(a in n)x(n,a)&&(o[a]=n[a]);return o}var Oe=[].concat;function Re(n){return Oe.apply([],n)}var Me="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Re([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(a){return a+n+"Array"})}))).filter(function(n){return l[n]}),ue=new Set(Me.map(function(n){return l[n]})),$=null;function re(n){return $=new WeakMap,n=(function a(o){if(!o||typeof o!="object")return o;var u=$.get(o);if(u)return u;if(d(o)){u=[],$.set(o,u);for(var c=0,p=o.length;c<p;++c)u.push(a(o[c]))}else if(ue.has(o.constructor))u=o;else{var g,m=h(o);for(g in u=m===Object.prototype?{}:Object.create(m),$.set(o,u),o)x(o,g)&&(u[g]=a(o[g]))}return u})(n),$=null,n}var Ie={}.toString;function we(n){return Ie.call(n).slice(8,-1)}var xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ce=typeof xe=="symbol"?function(n){var a;return n!=null&&(a=n[xe])&&a.apply(n)}:function(){return null};function B(n,a){a=n.indexOf(a),0<=a&&n.splice(a,1)}var H={};function ce(n){var a,o,u,c;if(arguments.length===1){if(d(n))return n.slice();if(this===H&&typeof n=="string")return[n];if(c=Ce(n))for(o=[];!(u=c.next()).done;)o.push(u.value);else{if(n==null)return[n];if(typeof(a=n.length)!="number")return[n];for(o=new Array(a);a--;)o[a]=n[a]}}else for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var be=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Me=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ht=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Me),Le={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function De(n,a){this.name=n,this.message=a}function Se(n,a){return n+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,u,c){return c.indexOf(o)===u}).join(`
`)}function nt(n,a,o,u){this.failures=a,this.failedKeys=u,this.successCount=o,this.message=Se(n,a)}function Te(n,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=Se(n,this.failures)}q(De).from(Error).extend({toString:function(){return this.name+": "+this.message}}),q(nt).from(De),q(Te).from(De);var et=ht.reduce(function(n,a){return n[a]=a+"Error",n},{}),pt=De,fe=ht.reduce(function(n,a){var o=a+"Error";function u(c,p){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(p?`
 `+p:""),this.inner=p||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Le[a]||o,this.inner=null)}return q(u).from(pt),n[a]=u,n},{}),Ot=(fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError,Me.reduce(function(n,a){return n[a+"Error"]=fe[a],n},{}));Me=ht.reduce(function(n,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(n[a+"Error"]=fe[a]),n},{});function He(){}function Jt(n){return n}function Jr(n,a){return n==null||n===Jt?a:function(o){return a(n(o))}}function Dt(n,a){return function(){n.apply(this,arguments),a.apply(this,arguments)}}function Ea(n,a){return n===He?a:function(){var o=n.apply(this,arguments),u=(o!==void 0&&(arguments[0]=o),this.onsuccess),c=this.onerror,p=(this.onsuccess=null,this.onerror=null,a.apply(this,arguments));return u&&(this.onsuccess=this.onsuccess?Dt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?Dt(c,this.onerror):c),p!==void 0?p:o}}function Aa(n,a){return n===He?a:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Dt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Dt(u,this.onerror):u)}}function er(n,a){return n===He?a:function(c){var u=n.apply(this,arguments),c=(v(c,u),this.onsuccess),p=this.onerror,g=(this.onsuccess=null,this.onerror=null,a.apply(this,arguments));return c&&(this.onsuccess=this.onsuccess?Dt(c,this.onsuccess):c),p&&(this.onerror=this.onerror?Dt(p,this.onerror):p),u===void 0?g===void 0?void 0:g:v(u,g)}}function ea(n,a){return n===He?a:function(){return a.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function tr(n,a){return n===He?a:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,c=arguments.length,p=new Array(c);c--;)p[c]=arguments[c];return o.then(function(){return a.apply(u,p)})}return a.apply(this,arguments)}}Me.ModifyError=nt,Me.DexieError=De,Me.BulkError=Te;var Gt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ia(n){Gt=n}var wr={},ta=100,pn=typeof Promise>"u"?[]:(ht=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[pn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(pn),ht]:[ht,h(ht),ht]),ht=pn[0],oa=pn[1],oa=oa&&oa.then,gt=ht&&ht.constructor,kr=!!pn[2],nr=function(n,a){zn.push([n,a]),rr&&(queueMicrotask(sr),rr=!1)},na=!0,rr=!0,An=[],Bn=[],ar=Jt,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},ye=mt,zn=[],hn=0,ra=[];function le(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=ye;if(typeof n!="function"){if(n!==wr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Fn(this,this._value)}else this._state=null,this._value=null,++a.ref,(function o(u,c){try{c(function(p){if(u._state===null){if(p===u)throw new TypeError("A promise cannot be resolved with itself.");var g=u._lib&&or();p&&typeof p.then=="function"?o(u,function(m,T){p instanceof le?p._then(m,T):p.then(m,T)}):(u._state=!0,u._value=p,pi(u)),g&&Kn()}},Fn.bind(null,u))}catch(p){Fn(u,p)}})(this,n)}var ir={get:function(){var n=ye,a=Er;function o(u,c){var p=this,g=!n.global&&(n!==ye||a!==Er),m=g&&!gn(),T=new le(function(M,E){Ca(p,new di(k(u,n,g,m),k(c,n,g,m),M,E,n))});return this._consoleTask&&(T._consoleTask=this._consoleTask),T}return o.prototype=wr,o},set:function(n){j(this,"then",n&&n.prototype===wr?ir:{get:function(){return n},set:ir.set})}};function di(n,a,o,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=u,this.psd=c}function Fn(n,a){var o,u;Bn.push(a),n._state===null&&(o=n._lib&&or(),a=ar(a),n._state=!1,n._value=a,u=n,An.some(function(c){return c._value===u._value})||An.push(u),pi(n),o)&&Kn()}function pi(n){var a=n._listeners;n._listeners=[];for(var o=0,u=a.length;o<u;++o)Ca(n,a[o]);var c=n._PSD;--c.ref||c.finalize(),hn===0&&(++hn,nr(function(){--hn==0&&xr()},[]))}function Ca(n,a){if(n._state===null)n._listeners.push(a);else{var o=n._state?a.onFulfilled:a.onRejected;if(o===null)return(n._state?a.resolve:a.reject)(n._value);++a.psd.ref,++hn,nr(ut,[o,n,a])}}function ut(n,a,o){try{var u,c=a._value;!a._state&&Bn.length&&(Bn=[]),u=Gt&&a._consoleTask?a._consoleTask.run(function(){return n(c)}):n(c),a._state||Bn.indexOf(c)!==-1||(p=>{for(var g=An.length;g;)if(An[--g]._value===p._value)return An.splice(g,1)})(a),o.resolve(u)}catch(p){o.reject(p)}finally{--hn==0&&xr(),--o.psd.ref||o.psd.finalize()}}function sr(){_e(mt,function(){or()&&Kn()})}function or(){var n=na;return rr=na=!1,n}function Kn(){var n,a,o;do for(;0<zn.length;)for(n=zn,zn=[],o=n.length,a=0;a<o;++a){var u=n[a];u[0].apply(null,u[1])}while(0<zn.length);rr=na=!0}function xr(){for(var n=An,a=(An=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)}),ra.slice(0)),o=a.length;o;)a[--o]()}function Sr(n){return new le(wr,!1,n)}function tt(n,a){var o=ye;return function(){var u=or(),c=ye;try{return mn(o,!0),n.apply(this,arguments)}catch(p){a&&a(p)}finally{mn(c,!1),u&&Kn()}}}b(le.prototype,{then:ir,_then:function(n,a){Ca(this,new di(null,null,n,a,ye))},catch:function(n){var a,o;return arguments.length===1?this.then(null,n):(a=n,o=arguments[1],typeof a=="function"?this.then(null,function(u){return(u instanceof a?o:Sr)(u)}):this.then(null,function(u){return(u&&u.name===a?o:Sr)(u)}))},finally:function(n){return this.then(function(a){return le.resolve(n()).then(function(){return a})},function(a){return le.resolve(n()).then(function(){return Sr(a)})})},timeout:function(n,a){var o=this;return n<1/0?new le(function(u,c){var p=setTimeout(function(){return c(new fe.Timeout(a))},n);o.then(u,c).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&j(le.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=vi(),b(le,{all:function(){var n=ce.apply(null,arguments).map(Ar);return new le(function(a,o){n.length===0&&a([]);var u=n.length;n.forEach(function(c,p){return le.resolve(c).then(function(g){n[p]=g,--u||a(n)},o)})})},resolve:function(n){return n instanceof le?n:n&&typeof n.then=="function"?new le(function(a,o){n.then(a,o)}):new le(wr,!0,n)},reject:Sr,race:function(){var n=ce.apply(null,arguments).map(Ar);return new le(function(a,o){n.map(function(u){return le.resolve(u).then(a,o)})})},PSD:{get:function(){return ye},set:function(n){return ye=n}},totalEchoes:{get:function(){return Er}},newPSD:vn,usePSD:_e,scheduler:{get:function(){return nr},set:function(n){nr=n}},rejectionMapper:{get:function(){return ar},set:function(n){ar=n}},follow:function(n,a){return new le(function(o,u){return vn(function(c,p){var g=ye;g.unhandleds=[],g.onunhandled=p,g.finalize=Dt(function(){var m,T=this;m=function(){T.unhandleds.length===0?c():p(T.unhandleds[0])},ra.push(function M(){m(),ra.splice(ra.indexOf(M),1)}),++hn,nr(function(){--hn==0&&xr()},[])},g.finalize),n()},a,o,u)})}}),gt&&(gt.allSettled&&j(le,"allSettled",function(){var n=ce.apply(null,arguments).map(Ar);return new le(function(a){n.length===0&&a([]);var o=n.length,u=new Array(o);n.forEach(function(c,p){return le.resolve(c).then(function(g){return u[p]={status:"fulfilled",value:g}},function(g){return u[p]={status:"rejected",reason:g}}).then(function(){return--o||a(u)})})})}),gt.any&&typeof AggregateError<"u"&&j(le,"any",function(){var n=ce.apply(null,arguments).map(Ar);return new le(function(a,o){n.length===0&&o(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(p,g){return le.resolve(p).then(function(m){return a(m)},function(m){c[g]=m,--u||o(new AggregateError(c))})})})}),gt.withResolvers)&&(le.withResolvers=gt.withResolvers);var vt={awaits:0,echoes:0,id:0},en=0,tn=[],Tr=0,Er=0,Pa=0;function vn(n,g,o,u){var c=ye,p=Object.create(c),g=(p.parent=c,p.ref=0,p.global=!1,p.id=++Pa,mt.env,p.env=kr?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject}:{},g&&v(p,g),++c.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},_e(p,n,o,u));return p.ref===0&&p.finalize(),g}function It(){return vt.id||(vt.id=++en),++vt.awaits,vt.echoes+=ta,vt.id}function gn(){return!!vt.awaits&&(--vt.awaits==0&&(vt.id=0),vt.echoes=vt.awaits*ta,!0)}function Ar(n){return vt.echoes&&n&&n.constructor===gt?(It(),n.then(function(a){return gn(),a},function(a){return gn(),ie(a)})):n}function hi(){var n=tn[tn.length-1];tn.pop(),mn(n,!1)}function mn(n,a){var o,u,c=ye;(a?!vt.echoes||Tr++&&n===ye:!Tr||--Tr&&n===ye)||queueMicrotask(a?(function(p){++Er,vt.echoes&&--vt.echoes!=0||(vt.echoes=vt.awaits=vt.id=0),tn.push(ye),mn(p,!0)}).bind(null,n):hi),n!==ye&&(ye=n,c===mt&&(mt.env=vi()),kr)&&(o=mt.env.Promise,u=n.env,c.global||n.global)&&(Object.defineProperty(l,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any)&&(o.any=u.any)}function vi(){var n=l.Promise;return kr?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function _e(n,a,o,u,c){var p=ye;try{return mn(n,!0),a(o,u,c)}finally{mn(p,!1)}}function k(n,a,o,u){return typeof n!="function"?n:function(){var c=ye;o&&It(),mn(a,!0);try{return n.apply(this,arguments)}finally{mn(c,!1),u&&queueMicrotask(gn)}}}function Q(n){Promise===gt&&vt.echoes===0?Tr===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+oa).indexOf("[native code]")===-1&&(It=gn=He);var ie=le.reject,Ve="ï¿¿",rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",st="String expected.",ct=[],jt="__dbnames",In="readonly",Ir="readwrite";function it(n,a){return n?a?function(){return n.apply(this,arguments)&&a.apply(this,arguments)}:n:a}var Ra={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Cr(n){return typeof n!="string"||/\./.test(n)?function(a){return a}:function(a){return a[n]===void 0&&n in a&&delete(a=re(a))[n],a}}function No(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function We(n,a){try{var o=qo(n),u=qo(a);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<n?1:n<a?-1:0;case"binary":for(var c=jo(n),p=jo(a),g=c.length,m=p.length,T=g<m?g:m,M=0;M<T;++M)if(c[M]!==p[M])return c[M]<p[M]?-1:1;return g===m?0:g<m?-1:1;case"Array":for(var E=n,w=a,I=E.length,C=w.length,A=I<C?I:C,S=0;S<A;++S){var L=We(E[S],w[S]);if(L!==0)return L}return I===C?0:I<C?-1:1}}catch{}return NaN}function qo(n){var a=typeof n;return a=="object"&&(ArrayBuffer.isView(n)||(a=we(n))==="ArrayBuffer")?"binary":a}function jo(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function gi(n,a,o){var u=n.schema.yProps;return u?(a&&0<o.numFailures&&(a=a.filter(function(c,p){return!o.failures[p]})),Promise.all(u.map(function(c){return c=c.updatesTable,a?n.db.table(c).where("k").anyOf(a).delete():n.db.table(c).clear()})).then(function(){return o})):o}Bo.prototype.execute=function(n){var a=this["@@propmod"];if(a.add!==void 0){var o=a.add;if(d(o))return s(s([],d(n)?n:[],!0),o).sort();if(typeof o=="number")return(Number(n)||0)+o;if(typeof o=="bigint")try{return BigInt(n)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(a.remove!==void 0){var u=a.remove;if(d(u))return d(n)?n.filter(function(c){return!u.includes(c)}).sort():[];if(typeof u=="number")return Number(n)-u;if(typeof u=="bigint")try{return BigInt(n)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return o=(o=a.replacePrefix)==null?void 0:o[0],o&&typeof n=="string"&&n.startsWith(o)?a.replacePrefix[1]+n.substring(o.length):n};var Oa=Bo;function Bo(n){this["@@propmod"]=n}function zo(n,a){for(var o=f(a),u=o.length,c=!1,p=0;p<u;++p){var g=o[p],m=a[g],T=ve(n,g);m instanceof Oa?(ne(n,g,m.execute(T)),c=!0):T!==m&&(ne(n,g,m),c=!0)}return c}at.prototype._trans=function(n,a,o){var u=this._tx||ye.trans,c=this.name,p=Gt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function g(M,E,w){if(w.schema[c])return a(w.idbtrans,w);throw new fe.NotFound("Table "+c+" not part of transaction")}var m=or();try{var T=u&&u.db._novip===this.db._novip?u===ye.trans?u._promise(n,g,o):vn(function(){return u._promise(n,g,o)},{trans:u,transless:ye.transless||ye}):(function M(E,w,I,C){if(E.idbdb&&(E._state.openComplete||ye.letThrough||E._vip)){var A=E._createTransaction(w,I,E._dbSchema);try{A.create(),E._state.PR1398_maxLoop=3}catch(S){return S.name===et.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return M(E,w,I,C)})):ie(S)}return A._promise(w,function(S,L){return vn(function(){return ye.trans=A,C(S,L,A)})}).then(function(S){if(w==="readwrite")try{A.idbtrans.commit()}catch{}return w==="readonly"?S:A._completion.then(function(){return S})})}if(E._state.openComplete)return ie(new fe.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return ie(new fe.DatabaseClosed);E.open().catch(He)}return E._state.dbReadyPromise.then(function(){return M(E,w,I,C)})})(this.db,n,[this.name],g);return p&&(T._consoleTask=p,T=T.catch(function(M){return console.trace(M),ie(M)})),T}finally{m&&Kn()}},at.prototype.get=function(n,a){var o=this;return n&&n.constructor===Object?this.where(n).first(a):n==null?ie(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(c){return o.hook.reading.fire(c)})}).then(a)},at.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(d(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var a=f(n);if(a.length===1)return this.where(a[0]).equals(n[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&a.every(function(M){return 0<=m.keyPath.indexOf(M)})){for(var T=0;T<a.length;++T)if(a.indexOf(m.keyPath[T])===-1)return!1;return!0}return!1}).sort(function(m,T){return m.keyPath.length-T.keyPath.length})[0];if(o&&this.db._maxKey!==Ve)return g=o.keyPath.slice(0,a.length),this.where(g).equals(g.map(function(m){return n[m]}));!o&&Gt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var u=this.schema.idxByName;function c(m,T){return We(m,T)===0}var g=a.reduce(function(E,T){var M=E[0],E=E[1],w=u[T],I=n[T];return[M||w,M||!w?it(E,w&&w.multi?function(C){return C=ve(C,T),d(C)&&C.some(function(A){return c(I,A)})}:function(C){return c(I,ve(C,T))}):E]},[null,null]),p=g[0],g=g[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(g):o?this.filter(g):this.where(a).equals("")},at.prototype.filter=function(n){return this.toCollection().and(n)},at.prototype.count=function(n){return this.toCollection().count(n)},at.prototype.offset=function(n){return this.toCollection().offset(n)},at.prototype.limit=function(n){return this.toCollection().limit(n)},at.prototype.each=function(n){return this.toCollection().each(n)},at.prototype.toArray=function(n){return this.toCollection().toArray(n)},at.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},at.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,d(n)?"[".concat(n.join("+"),"]"):n))},at.prototype.reverse=function(){return this.toCollection().reverse()},at.prototype.mapToClass=function(n){for(var a=this.db,o=this.name,u=((this.schema.mappedClass=n).prototype instanceof No&&(n=(g=>{var m=E,T=g;if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function M(){this.constructor=m}function E(){return g!==null&&g.apply(this,arguments)||this}return r(m,T),m.prototype=T===null?Object.create(T):(M.prototype=T.prototype,new M),Object.defineProperty(E.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),E.prototype.table=function(){return o},E})(n)),new Set),c=n.prototype;c;c=h(c))Object.getOwnPropertyNames(c).forEach(function(g){return u.add(g)});function p(g){if(!g)return g;var m,T=Object.create(n.prototype);for(m in g)if(!u.has(m))try{T[m]=g[m]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),n},at.prototype.defineClass=function(){return this.mapToClass(function(n){v(this,n)})},at.prototype.add=function(n,a){var o=this,u=this.schema.primKey,c=u.auto,p=u.keyPath,g=n;return p&&c&&(g=Cr(p)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"add",keys:a!=null?[a]:null,values:[g]})}).then(function(m){return m.numFailures?le.reject(m.failures[0]):m.lastResult}).then(function(m){if(p)try{ne(n,p,m)}catch{}return m})},at.prototype.upsert=function(n,a){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:n}).then(function(p){var g=p??{};return zo(g,a),u&&ne(g,u,n),o.core.mutate({trans:c,type:"put",values:[g],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[a]}}).then(function(m){return m.numFailures?le.reject(m.failures[0]):!!p})})})},at.prototype.update=function(n,a){return typeof n!="object"||d(n)?this.where(":id").equals(n).modify(a):(n=ve(n,this.schema.primKey.keyPath))===void 0?ie(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(a)},at.prototype.put=function(n,a){var o=this,u=this.schema.primKey,c=u.auto,p=u.keyPath,g=n;return p&&c&&(g=Cr(p)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"put",values:[g],keys:a!=null?[a]:null})}).then(function(m){return m.numFailures?le.reject(m.failures[0]):m.lastResult}).then(function(m){if(p)try{ne(n,p,m)}catch{}return m})},at.prototype.delete=function(n){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return gi(a,[n],u)}).then(function(u){return u.numFailures?le.reject(u.failures[0]):void 0})})},at.prototype.clear=function(){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"deleteRange",range:Ra}).then(function(o){return gi(n,null,o)})}).then(function(a){return a.numFailures?le.reject(a.failures[0]):void 0})},at.prototype.bulkGet=function(n){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(c){return a.hook.reading.fire(c)})})})},at.prototype.bulkAdd=function(n,a,o){var u=this,c=Array.isArray(a)?a:void 0,p=(o=o||(c?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(g){var m=u.schema.primKey,M=m.auto,m=m.keyPath;if(m&&c)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var T=n.length,M=m&&M?n.map(Cr(m)):n;return u.core.mutate({trans:g,type:"add",keys:c,values:M,wantResults:p}).then(function(E){var w=E.numFailures,I=E.failures;if(w===0)return p?E.results:E.lastResult;throw new Te("".concat(u.name,".bulkAdd(): ").concat(w," of ").concat(T," operations failed"),I)})})},at.prototype.bulkPut=function(n,a,o){var u=this,c=Array.isArray(a)?a:void 0,p=(o=o||(c?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(g){var m=u.schema.primKey,M=m.auto,m=m.keyPath;if(m&&c)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var T=n.length,M=m&&M?n.map(Cr(m)):n;return u.core.mutate({trans:g,type:"put",keys:c,values:M,wantResults:p}).then(function(E){var w=E.numFailures,I=E.failures;if(w===0)return p?E.results:E.lastResult;throw new Te("".concat(u.name,".bulkPut(): ").concat(w," of ").concat(T," operations failed"),I)})})},at.prototype.bulkUpdate=function(n){var a=this,o=this.core,u=n.map(function(g){return g.key}),c=n.map(function(g){return g.changes}),p=[];return this._trans("readwrite",function(g){return o.getMany({trans:g,keys:u,cache:"clone"}).then(function(m){var T=[],M=[],E=(n.forEach(function(w,I){var C=w.key,A=w.changes,S=m[I];if(S){for(var L=0,N=Object.keys(A);L<N.length;L++){var O=N[L],U=A[O];if(O===a.schema.primKey.keyPath){if(We(U,C)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else ne(S,O,U)}p.push(I),T.push(C),M.push(S)}}),T.length);return o.mutate({trans:g,type:"put",keys:T,values:M,updates:{keys:u,changeSpecs:c}}).then(function(w){var I=w.numFailures,C=w.failures;if(I===0)return E;for(var A=0,S=Object.keys(C);A<S.length;A++){var L,N=S[A],O=p[Number(N)];O!=null&&(L=C[N],delete C[N],C[O]=L)}throw new Te("".concat(a.name,".bulkUpdate(): ").concat(I," of ").concat(E," operations failed"),C)})})})},at.prototype.bulkDelete=function(n){var a=this,o=n.length;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return gi(a,n,c)})}).then(function(u){var c=u.numFailures,p=u.failures;if(c===0)return u.lastResult;throw new Te("".concat(a.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),p)})};var Fo=at;function at(){}function Da(n){function a(g,m){if(m){for(var T=arguments.length,M=new Array(T-1);--T;)M[T-1]=arguments[T];return o[g].subscribe.apply(null,M),n}if(typeof g=="string")return o[g]}var o={};a.addEventType=p;for(var u=1,c=arguments.length;u<c;++u)p(arguments[u]);return a;function p(g,m,T){var M,E;if(typeof g!="object")return m=m||ea,E={subscribers:[],fire:T=T||He,subscribe:function(w){E.subscribers.indexOf(w)===-1&&(E.subscribers.push(w),E.fire=m(E.fire,w))},unsubscribe:function(w){E.subscribers=E.subscribers.filter(function(I){return I!==w}),E.fire=E.subscribers.reduce(m,T)}},o[g]=a[g]=E;f(M=g).forEach(function(w){var I=M[w];if(d(I))p(w,M[w][0],M[w][1]);else{if(I!=="asap")throw new fe.InvalidArgument("Invalid event config");var C=p(w,Jt,function(){for(var A=arguments.length,S=new Array(A);A--;)S[A]=arguments[A];C.subscribers.forEach(function(L){Z(function(){L.apply(null,S)})})})}})}}function Ma(n,a){return q(a).from({prototype:n}),a}function aa(n,a){return!(n.filter||n.algorithm||n.or)&&(a?n.justLimit:!n.replayFilter)}function ss(n,a){n.filter=it(n.filter,a)}function os(n,a,o){var u=n.replayFilter;n.replayFilter=u?function(){return it(u(),a())}:a,n.justLimit=o&&!u}function mi(n,a){if(n.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(n.index);if(o)return o;throw new fe.Schema("KeyPath "+n.index+" on object store "+a.name+" is not indexed")}function Ko(n,a,o){var u=mi(n,a.schema);return a.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function yi(n,a,o,u){var c,p,g=n.replayFilter?it(n.filter,n.replayFilter()):n.filter;return n.or?(c={},p=function(m,T,M){var E,w;g&&!g(T,M,function(I){return T.stop(I)},function(I){return T.fail(I)})||((w=""+(E=T.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(E)),x(c,w))||(c[w]=!0,a(m,T,M))},Promise.all([n.or._iterate(p,o),Uo(Ko(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])):Uo(Ko(n,u,o),it(n.algorithm,g),a,!n.keysOnly&&n.valueMapper)}function Uo(n,a,o,u){var c=tt(u?function(p,g,m){return o(u(p),g,m)}:o);return n.then(function(p){if(p)return p.start(function(){var g=function(){return p.continue()};a&&!a(p,function(m){return g=m},function(m){p.stop(m),g=He},function(m){p.fail(m),g=He})||c(p.value,p,function(m){return g=m}),g()})})}Xe.prototype._read=function(n,a){var o=this._ctx;return o.error?o.table._trans(null,ie.bind(null,o.error)):o.table._trans("readonly",n).then(a)},Xe.prototype._write=function(n){var a=this._ctx;return a.error?a.table._trans(null,ie.bind(null,a.error)):a.table._trans("readwrite",n,"locked")},Xe.prototype._addAlgorithm=function(n){var a=this._ctx;a.algorithm=it(a.algorithm,n)},Xe.prototype._iterate=function(n,a){return yi(this._ctx,n,a,this._ctx.table.core)},Xe.prototype.clone=function(n){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&v(o,n),a._ctx=o,a},Xe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Xe.prototype.each=function(n){var a=this._ctx;return this._read(function(o){return yi(a,n,o,a.table.core)})},Xe.prototype.count=function(n){var a=this;return this._read(function(o){var u,c=a._ctx,p=c.table.core;return aa(c,!0)?p.count({trans:o,query:{index:mi(c,p.schema),range:c.range}}).then(function(g){return Math.min(g,c.limit)}):(u=0,yi(c,function(){return++u,!1},o,p).then(function(){return u}))}).then(n)},Xe.prototype.sortBy=function(n,a){var o=n.split(".").reverse(),u=o[0],c=o.length-1;function p(T,M){return M?p(T[o[M]],M-1):T[u]}var g=this._ctx.dir==="next"?1:-1;function m(T,M){return We(p(T,c),p(M,c))*g}return this.toArray(function(T){return T.sort(m)}).then(a)},Xe.prototype.toArray=function(n){var a=this;return this._read(function(o){var u,c,p,g=a._ctx;return g.dir==="next"&&aa(g,!0)&&0<g.limit?(u=g.valueMapper,c=mi(g,g.table.core.schema),g.table.core.query({trans:o,limit:g.limit,values:!0,query:{index:c,range:g.range}}).then(function(m){return m=m.result,u?m.map(u):m})):(p=[],yi(g,function(m){return p.push(m)},o,g.table.core).then(function(){return p}))},n)},Xe.prototype.offset=function(n){var a=this._ctx;return n<=0||(a.offset+=n,aa(a)?os(a,function(){var o=n;return function(u,c){return o===0||(o===1?--o:c(function(){u.advance(o),o=0}),!1)}}):os(a,function(){var o=n;return function(){return--o<0}})),this},Xe.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),os(this._ctx,function(){var a=n;return function(o,u,c){return--a<=0&&u(c),0<=a}},!0),this},Xe.prototype.until=function(n,a){return ss(this._ctx,function(o,u,c){return!n(o.value)||(u(c),a)}),this},Xe.prototype.first=function(n){return this.limit(1).toArray(function(a){return a[0]}).then(n)},Xe.prototype.last=function(n){return this.reverse().first(n)},Xe.prototype.filter=function(n){var a;return ss(this._ctx,function(o){return n(o.value)}),(a=this._ctx).isMatch=it(a.isMatch,n),this},Xe.prototype.and=function(n){return this.filter(n)},Xe.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},Xe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Xe.prototype.desc=function(){return this.reverse()},Xe.prototype.eachKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.key,u)})},Xe.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},Xe.prototype.eachPrimaryKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},Xe.prototype.keys=function(n){var a=this._ctx,o=(a.keysOnly=!a.isMatch,[]);return this.each(function(u,c){o.push(c.key)}).then(function(){return o}).then(n)},Xe.prototype.primaryKeys=function(n){var a=this._ctx;if(a.dir==="next"&&aa(a,!0)&&0<a.limit)return this._read(function(u){var c=mi(a,a.table.core.schema);return a.table.core.query({trans:u,values:!1,limit:a.limit,query:{index:c,range:a.range}})}).then(function(u){return u.result}).then(n);a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,c){o.push(c.primaryKey)}).then(function(){return o}).then(n)},Xe.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},Xe.prototype.firstKey=function(n){return this.limit(1).keys(function(a){return a[0]}).then(n)},Xe.prototype.lastKey=function(n){return this.reverse().firstKey(n)},Xe.prototype.distinct=function(){var n,a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];return a&&a.multi&&(n={},ss(this._ctx,function(u){var u=u.primaryKey.toString(),c=x(n,u);return n[u]=!0,!c})),this},Xe.prototype.modify=function(n){var a=this,o=this._ctx;return this._write(function(u){function c(S,L){var N=L.failures;I+=S-L.numFailures;for(var O=0,U=f(N);O<U.length;O++){var Y=U[O];w.push(N[Y])}}var p=typeof n=="function"?n:function(S){return zo(S,n)},g=o.table.core,E=g.schema.primaryKey,m=E.outbound,T=E.extractKey,M=200,E=a.db._options.modifyChunkSize,w=(E&&(M=typeof E=="object"?E[g.name]||E["*"]||200:E),[]),I=0,C=[],A=n===Go;return a.clone().primaryKeys().then(function(S){function L(O){var U=Math.min(M,S.length-O),Y=S.slice(O,O+U);return(A?Promise.resolve([]):g.getMany({trans:u,keys:Y,cache:"immutable"})).then(function(se){var oe=[],V=[],he=m?[]:null,de=A?Y:[];if(!A)for(var ee=0;ee<U;++ee){var ge=se[ee],$e={value:re(ge),primKey:S[O+ee]};p.call($e,$e.value,$e)!==!1&&($e.value==null?de.push(S[O+ee]):m||We(T(ge),T($e.value))===0?(V.push($e.value),m&&he.push(S[O+ee])):(de.push(S[O+ee]),oe.push($e.value)))}return Promise.resolve(0<oe.length&&g.mutate({trans:u,type:"add",values:oe}).then(function(Qe){for(var Ae in Qe.failures)de.splice(parseInt(Ae),1);c(oe.length,Qe)})).then(function(){return(0<V.length||N&&typeof n=="object")&&g.mutate({trans:u,type:"put",keys:he,values:V,criteria:N,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<O}).then(function(Qe){return c(V.length,Qe)})}).then(function(){return(0<de.length||N&&A)&&g.mutate({trans:u,type:"delete",keys:de,criteria:N,isAdditionalChunk:0<O}).then(function(Qe){return gi(o.table,de,Qe)}).then(function(Qe){return c(de.length,Qe)})}).then(function(){return S.length>O+U&&L(O+M)})})}var N=aa(o)&&o.limit===1/0&&(typeof n!="function"||A)&&{index:o.index,range:o.range};return L(0).then(function(){if(0<w.length)throw new nt("Error modifying one or more objects",w,I,C);return S.length})})})},Xe.prototype.delete=function(){var n=this._ctx,a=n.range;return!aa(n)||n.table.schema.yProps||!n.isPrimKey&&a.type!==3?this.modify(Go):this._write(function(o){var u=n.table.core.schema.primaryKey,c=a;return n.table.core.count({trans:o,query:{index:u,range:c}}).then(function(p){return n.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(T){var m=T.failures,T=T.numFailures;if(T)throw new nt("Could not delete some values",Object.keys(m).map(function(M){return m[M]}),p-T);return p-T})})})};var Ac=Xe;function Xe(){}var Go=function(n,a){return a.value=null};function Ic(n,a){return n<a?-1:n===a?0:1}function Cc(n,a){return a<n?-1:n===a?0:1}function Ht(n,a,o){return n=n instanceof Wo?new n.Collection(n):n,n._ctx.error=new(o||TypeError)(a),n}function ia(n){return new n.Collection(n,function(){return Ho("")}).limit(0)}function bi(C,a,o,u){var c,p,g,m,T,M,E,w=o.length;if(!o.every(function(S){return typeof S=="string"}))return Ht(C,st);function I(S){c=S==="next"?function(N){return N.toUpperCase()}:function(N){return N.toLowerCase()},p=S==="next"?function(N){return N.toLowerCase()}:function(N){return N.toUpperCase()},g=S==="next"?Ic:Cc;var L=o.map(function(N){return{lower:p(N),upper:c(N)}}).sort(function(N,O){return g(N.lower,O.lower)});m=L.map(function(N){return N.upper}),T=L.map(function(N){return N.lower}),E=(M=S)==="next"?"":u}I("next");var C=new C.Collection(C,function(){return lr(m[0],T[w-1]+u)}),A=(C._ondirectionchange=function(S){I(S)},0);return C._addAlgorithm(function(S,L,N){var O=S.key;if(typeof O=="string"){var U=p(O);if(a(U,T,A))return!0;for(var Y=null,se=A;se<w;++se){var oe=((V,he,de,ee,ge,$e)=>{for(var Qe=Math.min(V.length,ee.length),Ae=-1,je=0;je<Qe;++je){var ot=he[je];if(ot!==ee[je])return ge(V[je],de[je])<0?V.substr(0,je)+de[je]+de.substr(je+1):ge(V[je],ee[je])<0?V.substr(0,je)+ee[je]+de.substr(je+1):0<=Ae?V.substr(0,Ae)+he[Ae]+de.substr(Ae+1):null;ge(V[je],ot)<0&&(Ae=je)}return Qe<ee.length&&$e==="next"?V+de.substr(V.length):Qe<V.length&&$e==="prev"?V.substr(0,de.length):Ae<0?null:V.substr(0,Ae)+ee[Ae]+de.substr(Ae+1)})(O,U,m[se],T[se],g,M);oe===null&&Y===null?A=se+1:(Y===null||0<g(Y,oe))&&(Y=oe)}L(Y!==null?function(){S.continue(Y+E)}:N)}return!1}),C}function lr(n,a,o,u){return{type:2,lower:n,upper:a,lowerOpen:o,upperOpen:u}}function Ho(n){return{type:1,lower:n,upper:n}}Object.defineProperty(yt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),yt.prototype.between=function(n,a,o,u){o=o!==!1,u=u===!0;try{return 0<this._cmp(n,a)||this._cmp(n,a)===0&&(o||u)&&(!o||!u)?ia(this):new this.Collection(this,function(){return lr(n,a,!o,!u)})}catch{return Ht(this,rt)}},yt.prototype.equals=function(n){return n==null?Ht(this,rt):new this.Collection(this,function(){return Ho(n)})},yt.prototype.above=function(n){return n==null?Ht(this,rt):new this.Collection(this,function(){return lr(n,void 0,!0)})},yt.prototype.aboveOrEqual=function(n){return n==null?Ht(this,rt):new this.Collection(this,function(){return lr(n,void 0,!1)})},yt.prototype.below=function(n){return n==null?Ht(this,rt):new this.Collection(this,function(){return lr(void 0,n,!1,!0)})},yt.prototype.belowOrEqual=function(n){return n==null?Ht(this,rt):new this.Collection(this,function(){return lr(void 0,n)})},yt.prototype.startsWith=function(n){return typeof n!="string"?Ht(this,st):this.between(n,n+Ve,!0,!0)},yt.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):bi(this,function(a,o){return a.indexOf(o[0])===0},[n],Ve)},yt.prototype.equalsIgnoreCase=function(n){return bi(this,function(a,o){return a===o[0]},[n],"")},yt.prototype.anyOfIgnoreCase=function(){var n=ce.apply(H,arguments);return n.length===0?ia(this):bi(this,function(a,o){return o.indexOf(a)!==-1},n,"")},yt.prototype.startsWithAnyOfIgnoreCase=function(){var n=ce.apply(H,arguments);return n.length===0?ia(this):bi(this,function(a,o){return o.some(function(u){return a.indexOf(u)===0})},n,Ve)},yt.prototype.anyOf=function(){var n,a,o=this,u=ce.apply(H,arguments),c=this._cmp;try{u.sort(c)}catch{return Ht(this,rt)}return u.length===0?ia(this):((n=new this.Collection(this,function(){return lr(u[0],u[u.length-1])}))._ondirectionchange=function(p){c=p==="next"?o._ascending:o._descending,u.sort(c)},a=0,n._addAlgorithm(function(p,g,m){for(var T=p.key;0<c(T,u[a]);)if(++a===u.length)return g(m),!1;return c(T,u[a])===0||(g(function(){p.continue(u[a])}),!1)}),n)},yt.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},yt.prototype.noneOf=function(){var n=ce.apply(H,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Ht(this,rt)}var a=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[-1/0,u]]},null);return a.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},yt.prototype.inAnyRange=function(n,N){var o=this,u=this._cmp,c=this._ascending,p=this._descending,g=this._min,m=this._max;if(n.length===0)return ia(this);if(!n.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&c(O[0],O[1])<=0}))return Ht(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var T=!N||N.includeLowers!==!1,M=N&&N.includeUppers===!0,E,w=c;function I(O,U){return w(O[0],U[0])}try{(E=n.reduce(function(O,U){for(var Y=0,se=O.length;Y<se;++Y){var oe=O[Y];if(u(U[0],oe[1])<0&&0<u(U[1],oe[0])){oe[0]=g(oe[0],U[0]),oe[1]=m(oe[1],U[1]);break}}return Y===se&&O.push(U),O},[])).sort(I)}catch{return Ht(this,rt)}var C=0,A=M?function(O){return 0<c(O,E[C][1])}:function(O){return 0<=c(O,E[C][1])},S=T?function(O){return 0<p(O,E[C][0])}:function(O){return 0<=p(O,E[C][0])},L=A,N=new this.Collection(this,function(){return lr(E[0][0],E[E.length-1][1],!T,!M)});return N._ondirectionchange=function(O){w=O==="next"?(L=A,c):(L=S,p),E.sort(I)},N._addAlgorithm(function(O,U,Y){for(var se,oe=O.key;L(oe);)if(++C===E.length)return U(Y),!1;return!A(se=oe)&&!S(se)||(o._cmp(oe,E[C][1])===0||o._cmp(oe,E[C][0])===0||U(function(){w===c?O.continue(E[C][0]):O.continue(E[C][1])}),!1)}),N},yt.prototype.startsWithAnyOf=function(){var n=ce.apply(H,arguments);return n.every(function(a){return typeof a=="string"})?n.length===0?ia(this):this.inAnyRange(n.map(function(a){return[a,a+Ve]})):Ht(this,"startsWithAnyOf() only works with strings")};var Wo=yt;function yt(){}function Cn(n){return tt(function(a){return La(a),n(a.target.error),!1})}function La(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Na="storagemutated",ls="x-storagemutated-1",ur=Da(null,Na),Pc=(Pn.prototype._lock=function(){return W(!ye.global),++this._reculock,this._reculock!==1||ye.global||(ye.lockOwnerFor=this),this},Pn.prototype._unlock=function(){if(W(!ye.global),--this._reculock==0)for(ye.global||(ye.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{_e(n[1],n[0])}catch{}}return this},Pn.prototype._locked=function(){return this._reculock&&ye.lockOwnerFor!==this},Pn.prototype.create=function(n){var a=this;if(this.mode){var o=this.db.idbdb,u=this.db._state.dbOpenError;if(W(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(u);case"MissingAPIError":throw new fe.MissingAPI(u.message,u);default:throw new fe.OpenFailed(u)}if(!this.active)throw new fe.TransactionInactive;W(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=tt(function(c){La(c),a._reject(n.error)}),n.onabort=tt(function(c){La(c),a.active&&a._reject(new fe.Abort(n.error)),a.active=!1,a.on("abort").fire(c)}),n.oncomplete=tt(function(){a.active=!1,a._resolve(),"mutatedParts"in n&&ur.storagemutated.fire(n.mutatedParts)})}return this},Pn.prototype._promise=function(n,a,o){var u,c=this;return n==="readwrite"&&this.mode!=="readwrite"?ie(new fe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new le(function(p,g){c._blockedFuncs.push([function(){c._promise(n,a,o).then(p,g)},ye])}):o?vn(function(){var p=new le(function(g,m){c._lock();var T=a(g,m,c);T&&T.then&&T.then(g,m)});return p.finally(function(){return c._unlock()}),p._lib=!0,p}):((u=new le(function(p,g){var m=a(p,g,c);m&&m.then&&m.then(p,g)}))._lib=!0,u):ie(new fe.TransactionInactive)},Pn.prototype._root=function(){return this.parent?this.parent._root():this},Pn.prototype.waitFor=function(n){var a,o=this._root(),u=le.resolve(n),c=(o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return u}):(o._waitingFor=u,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=p)})()),o._waitingFor);return new le(function(p,g){u.then(function(m){return o._waitingQueue.push(tt(p.bind(null,m)))},function(m){return o._waitingQueue.push(tt(g.bind(null,m)))}).finally(function(){o._waitingFor===c&&(o._waitingFor=null)})})},Pn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},Pn.prototype.table=function(n){var a=this._memoizedTables||(this._memoizedTables={});if(x(a,n))return a[n];var o=this.schema[n];if(o)return(o=new this.db.Table(n,o,this)).core=this.db.core.table(n),a[n]=o;throw new fe.NotFound("Table "+n+" not part of transaction")},Pn);function Pn(){}function us(n,a,o,u,c,p,g,m){return{name:n,keyPath:a,unique:o,multi:u,auto:c,compound:p,src:(o&&!g?"&":"")+(u?"*":"")+(c?"++":"")+$o(a),type:m}}function $o(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function cs(n,a,o){return{name:n,primKey:a,indexes:o,mappedClass:null,idxByName:(u=function(c){return[c.name,c]},o.reduce(function(c,p,g){return p=u(p,g),p&&(c[p[0]]=p[1]),c},{}))};var u}var qa=function(n){try{return n.only([[]]),qa=function(){return[[]]},[[]]}catch{return qa=function(){return Ve},Ve}};function fs(n){return n==null?function(){}:typeof n=="string"?(a=n).split(".").length===1?function(o){return o[a]}:function(o){return ve(o,a)}:function(o){return ve(o,n)};var a}function Yo(n){return[].slice.call(n)}var Rc=0;function ja(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Oc(n,a,T){function u(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=A.lower,I=A.upper,C=A.lowerOpen,A=A.upperOpen;return w===void 0?I===void 0?null:a.upperBound(I,!!A):I===void 0?a.lowerBound(w,!!C):a.bound(w,I,!!C,!!A)}function c(E){var w,I=E.name;return{name:I,schema:E,mutate:function(C){var A=C.trans,S=C.type,L=C.keys,N=C.values,O=C.range;return new Promise(function(U,Y){U=tt(U);var se=A.objectStore(I),oe=se.keyPath==null,V=S==="put"||S==="add";if(!V&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var he,de=(L||N||{length:1}).length;if(L&&N&&L.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(de===0)return U({numFailures:0,failures:{},results:[],lastResult:void 0});function ee(lt){++Qe,La(lt)}var ge=[],$e=[],Qe=0;if(S==="deleteRange"){if(O.type===4)return U({numFailures:Qe,failures:$e,results:[],lastResult:void 0});O.type===3?ge.push(he=se.clear()):ge.push(he=se.delete(u(O)))}else{var oe=V?oe?[N,L]:[N,null]:[L,null],Ae=oe[0],je=oe[1];if(V)for(var ot=0;ot<de;++ot)ge.push(he=je&&je[ot]!==void 0?se[S](Ae[ot],je[ot]):se[S](Ae[ot])),he.onerror=ee;else for(ot=0;ot<de;++ot)ge.push(he=se[S](Ae[ot])),he.onerror=ee}function nn(lt){lt=lt.target.result,ge.forEach(function(Or,Cs){return Or.error!=null&&($e[Cs]=Or.error)}),U({numFailures:Qe,failures:$e,results:S==="delete"?L:ge.map(function(Or){return Or.result}),lastResult:lt})}he.onerror=function(lt){ee(lt),nn(lt)},he.onsuccess=nn})},getMany:function(C){var A=C.trans,S=C.keys;return new Promise(function(L,N){L=tt(L);for(var O,U=A.objectStore(I),Y=S.length,se=new Array(Y),oe=0,V=0,he=function(ge){ge=ge.target,se[ge._pos]=ge.result,++V===oe&&L(se)},de=Cn(N),ee=0;ee<Y;++ee)S[ee]!=null&&((O=U.get(S[ee]))._pos=ee,O.onsuccess=he,O.onerror=de,++oe);oe===0&&L(se)})},get:function(C){var A=C.trans,S=C.key;return new Promise(function(L,N){L=tt(L);var O=A.objectStore(I).get(S);O.onsuccess=function(U){return L(U.target.result)},O.onerror=Cn(N)})},query:(w=m,function(C){return new Promise(function(A,S){A=tt(A);var L,N,O,V=C.trans,U=C.values,Y=C.limit,oe=C.query,se=Y===1/0?void 0:Y,he=oe.index,oe=oe.range,V=V.objectStore(I),V=he.isPrimaryKey?V:V.index(he.name),he=u(oe);if(Y===0)return A({result:[]});w?((oe=U?V.getAll(he,se):V.getAllKeys(he,se)).onsuccess=function(de){return A({result:de.target.result})},oe.onerror=Cn(S)):(L=0,N=!U&&"openKeyCursor"in V?V.openKeyCursor(he):V.openCursor(he),O=[],N.onsuccess=function(de){var ee=N.result;return!ee||(O.push(U?ee.value:ee.primaryKey),++L===Y)?A({result:O}):void ee.continue()},N.onerror=Cn(S))})}),openCursor:function(C){var A=C.trans,S=C.values,L=C.query,N=C.reverse,O=C.unique;return new Promise(function(U,Y){U=tt(U);var V=L.index,se=L.range,oe=A.objectStore(I),oe=V.isPrimaryKey?oe:oe.index(V.name),V=N?O?"prevunique":"prev":O?"nextunique":"next",he=!S&&"openKeyCursor"in oe?oe.openKeyCursor(u(se),V):oe.openCursor(u(se),V);he.onerror=Cn(Y),he.onsuccess=tt(function(de){var ee,ge,$e,Qe,Ae=he.result;Ae?(Ae.___id=++Rc,Ae.done=!1,ee=Ae.continue.bind(Ae),ge=(ge=Ae.continuePrimaryKey)&&ge.bind(Ae),$e=Ae.advance.bind(Ae),Qe=function(){throw new Error("Cursor not stopped")},Ae.trans=A,Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=function(){throw new Error("Cursor not started")},Ae.fail=tt(Y),Ae.next=function(){var je=this,ot=1;return this.start(function(){return ot--?je.continue():je.stop()}).then(function(){return je})},Ae.start=function(je){function ot(){if(he.result)try{je()}catch(lt){Ae.fail(lt)}else Ae.done=!0,Ae.start=function(){throw new Error("Cursor behind last entry")},Ae.stop()}var nn=new Promise(function(lt,Or){lt=tt(lt),he.onerror=Cn(Or),Ae.fail=Or,Ae.stop=function(Cs){Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=Qe,lt(Cs)}});return he.onsuccess=tt(function(lt){he.onsuccess=ot,ot()}),Ae.continue=ee,Ae.continuePrimaryKey=ge,Ae.advance=$e,ot(),nn},U(Ae)):U(null)},Y)})},count:function(C){var A=C.query,S=C.trans,L=A.index,N=A.range;return new Promise(function(O,U){var Y=S.objectStore(I),Y=L.isPrimaryKey?Y:Y.index(L.name),se=u(N),se=se?Y.count(se):Y.count();se.onsuccess=tt(function(oe){return O(oe.target.result)}),se.onerror=Cn(U)})}}}p=T,g=Yo((T=n).objectStoreNames);var p,T={schema:{name:T.name,tables:g.map(function(E){return p.objectStore(E)}).map(function(E){var w=E.keyPath,I=E.autoIncrement,A=d(w),C={},A={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:A,keyPath:w,autoIncrement:I,unique:!0,extractKey:fs(w)},indexes:Yo(E.indexNames).map(function(S){return E.index(S)}).map(function(O){var U=O.name,L=O.unique,N=O.multiEntry,O=O.keyPath,U={name:U,compound:d(O),keyPath:O,unique:L,multiEntry:N,extractKey:fs(O)};return C[ja(O)]=U}),getIndexByKeyPath:function(S){return C[ja(S)]}};return C[":id"]=A.primaryKey,w!=null&&(C[ja(w)]=A.primaryKey),A})},hasGetAll:0<g.length&&"getAll"in p.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},g=T.schema,m=T.hasGetAll,T=g.tables.map(c),M={};return T.forEach(function(E){return M[E.name]=E}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(E){if(M[E])return M[E];throw new Error("Table '".concat(E,"' not found"))},MIN_KEY:-1/0,MAX_KEY:qa(a),schema:g}}function Dc(n,a,o,u){return o=o.IDBKeyRange,a=Oc(a,o,u),{dbcore:n.dbcore.reduce(function(c,p){return p=p.create,i(i({},c),p(c))},a)}}function _i(n,a){var o=a.db,o=Dc(n._middlewares,o,n._deps,a);n.core=o.dbcore,n.tables.forEach(function(u){var c=u.name;n.core.schema.tables.some(function(p){return p.name===c})&&(u.core=n.core.table(c),n[c]instanceof n.Table)&&(n[c].core=u.core)})}function wi(n,a,o,u){o.forEach(function(c){var p=u[c];a.forEach(function(g){var m=(function T(M,E){return P(M,E)||(M=h(M))&&T(M,E)})(g,c);(!m||"value"in m&&m.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?j(g,c,{get:function(){return this.table(c)},set:function(T){_(this,c,{value:T,writable:!0,configurable:!0,enumerable:!0})}}):g[c]=new n.Table(c,p))})})}function ds(n,a){a.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function Mc(n,a){return n._cfg.version-a._cfg.version}function Lc(n,a,o,u){var c=n._dbSchema,p=(o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=cs("$meta",Xo("")[0],[]),n._storeNames.push("$meta")),n._createTransaction("readwrite",n._storeNames,c)),g=(p.create(o),p._completion.catch(u),p._reject.bind(p)),m=ye.transless||ye;vn(function(){if(ye.trans=p,ye.transless=m,a!==0)return _i(n,o),M=a,((T=p).storeNames.includes("$meta")?T.table("$meta").get("version").then(function(E){return E??M}):le.resolve(M)).then(function(L){var w=n,I=L,C=p,A=o,S=[],L=w._versions,N=w._dbSchema=xi(0,w.idbdb,A);return(L=L.filter(function(O){return O._cfg.version>=I})).length===0?le.resolve():(L.forEach(function(O){S.push(function(){var U,Y,se,oe=N,V=O._cfg.dbschema,he=(Si(w,oe,A),Si(w,V,A),N=w._dbSchema=V,ps(oe,V)),de=(he.add.forEach(function(ee){hs(A,ee[0],ee[1].primKey,ee[1].indexes)}),he.change.forEach(function(ee){if(ee.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var ge=A.objectStore(ee.name);ee.add.forEach(function($e){return ki(ge,$e)}),ee.change.forEach(function($e){ge.deleteIndex($e.name),ki(ge,$e)}),ee.del.forEach(function($e){return ge.deleteIndex($e)})}),O._cfg.contentUpgrade);if(de&&O._cfg.version>I)return _i(w,A),C._memoizedTables={},U=me(V),he.del.forEach(function(ee){U[ee]=oe[ee]}),ds(w,[w.Transaction.prototype]),wi(w,[w.Transaction.prototype],f(U),U),C.schema=U,(Y=be(de))&&It(),V=le.follow(function(){var ee;(se=de(C))&&Y&&(ee=gn.bind(null,null),se.then(ee,ee))}),se&&typeof se.then=="function"?le.resolve(se):V.then(function(){return se})}),S.push(function(U){var Y,se,oe=O._cfg.dbschema;Y=oe,se=U,[].slice.call(se.db.objectStoreNames).forEach(function(V){return Y[V]==null&&se.db.deleteObjectStore(V)}),ds(w,[w.Transaction.prototype]),wi(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),C.schema=w._dbSchema}),S.push(function(U){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===O._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(Y){return Y!=="$meta"})):U.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return S.length?le.resolve(S.shift()(C.idbtrans)).then(O):le.resolve()})().then(function(){Vo(N,A)}))}).catch(g);var T,M;f(c).forEach(function(E){hs(o,E,c[E].primKey,c[E].indexes)}),_i(n,o),le.follow(function(){return n.on.populate.fire(p)}).catch(g)})}function Nc(n,a){Vo(n._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=xi(0,n.idbdb,a);Si(n,n._dbSchema,a);for(var u=0,c=ps(o,n._dbSchema).change;u<c.length;u++){var p=(g=>{if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=a.objectStore(g.name);g.add.forEach(function(T){Gt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(T.src)),ki(m,T)})})(c[u]);if(typeof p=="object")return p.value}}function ps(n,a){var o,u={del:[],add:[],change:[]};for(o in n)a[o]||u.del.push(o);for(o in a){var c=n[o],p=a[o];if(c){var g={name:o,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||c.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var m=c.idxByName,T=p.idxByName,M=void 0;for(M in m)T[M]||g.del.push(M);for(M in T){var E=m[M],w=T[M];E?E.src!==w.src&&g.change.push(w):g.add.push(w)}(0<g.del.length||0<g.add.length||0<g.change.length)&&u.change.push(g)}}else u.add.push([o,p])}return u}function hs(n,a,o,u){var c=n.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});u.forEach(function(p){return ki(c,p)})}function Vo(n,a){f(n).forEach(function(o){a.db.objectStoreNames.contains(o)||(Gt&&console.debug("Dexie: Creating missing table",o),hs(a,o,n[o].primKey,n[o].indexes))})}function ki(n,a){n.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function xi(n,a,o){var u={};return ae(a.objectStoreNames,0).forEach(function(c){for(var p=o.objectStore(c),g=us($o(M=p.keyPath),M||"",!0,!1,!!p.autoIncrement,M&&typeof M!="string",!0),m=[],T=0;T<p.indexNames.length;++T){var E=p.index(p.indexNames[T]),M=E.keyPath,E=us(E.name,M,!!E.unique,!!E.multiEntry,!1,M&&typeof M!="string",!1);m.push(E)}u[c]=cs(c,g,m)}),u}function Si(n,a,o){for(var u=o.db.objectStoreNames,c=0;c<u.length;++c){var p=u[c],g=o.objectStore(p);n._hasGetAll="getAll"in g;for(var m=0;m<g.indexNames.length;++m){var T,M=g.indexNames[m],E=g.index(M).keyPath,E=typeof E=="string"?E:"["+ae(E).join("+")+"]";a[p]&&(T=a[p].idxByName[E])&&(T.name=M,delete a[p].idxByName[E],a[p].idxByName[M]=T)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function Xo(n){return n.split(",").map(function(a,o){var c=a.split(":"),u=(u=c[1])==null?void 0:u.trim(),c=(a=c[0].trim()).replace(/([&*]|\+\+)/g,""),p=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return us(c,p||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),d(p),o===0,u)})}sa.prototype._createTableSchema=cs,sa.prototype._parseIndexSyntax=Xo,sa.prototype._parseStoresSpec=function(n,a){var o=this;f(n).forEach(function(u){if(n[u]!==null){var c=o._parseIndexSyntax(n[u]),p=c.shift();if(!p)throw new fe.Schema("Invalid schema for table "+u+": "+n[u]);if(p.unique=!0,p.multi)throw new fe.Schema("Primary key cannot be multiEntry*");c.forEach(function(g){if(g.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),p=o._createTableSchema(u,p,c),a[u]=p}})},sa.prototype.stores=function(o){var a=this.db,o=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,o):o,a._versions),u={},c={};return o.forEach(function(p){v(u,p._cfg.storesSource),c=p._cfg.dbschema={},p._parseStoresSpec(u,c)}),a._dbSchema=c,ds(a,[a._allTables,a,a.Transaction.prototype]),wi(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],f(c),c),a._storeNames=f(c),this},sa.prototype.upgrade=function(n){return this._cfg.contentUpgrade=tr(this._cfg.contentUpgrade||He,n),this};var qc=sa;function sa(){}function vs(n,a){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Un(jt,{addons:[],indexedDB:n,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function gs(n){return n&&typeof n.databases=="function"}function ms(n){return vn(function(){return ye.letThrough=!0,n()})}function ys(n){return!("from"in n)}var Ct=function(n,a){var o;if(!this)return o=new Ct,n&&"d"in n&&v(o,n),o;v(this,arguments.length?{d:1,from:n,to:1<arguments.length?a:n}:{d:0})};function Ba(n,a,o){var u=We(a,o);if(!isNaN(u)){if(0<u)throw RangeError();if(ys(n))return v(n,{from:a,to:o,d:1});var u=n.l,c=n.r;if(We(o,n.from)<0)return u?Ba(u,a,o):n.l={from:a,to:o,d:1,l:null,r:null},Zo(n);if(0<We(a,n.to))return c?Ba(c,a,o):n.r={from:a,to:o,d:1,l:null,r:null},Zo(n);We(a,n.from)<0&&(n.from=a,n.l=null,n.d=c?c.d+1:1),0<We(o,n.to)&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1),a=!n.r,u&&!n.l&&za(n,u),c&&a&&za(n,c)}}function za(n,a){ys(a)||(function o(u,c){var p=c.from,g=c.l,m=c.r;Ba(u,p,c.to),g&&o(u,g),m&&o(u,m)})(n,a)}function Qo(n,a){var o=Ti(a),u=o.next();if(!u.done)for(var c=u.value,p=Ti(n),g=p.next(c.from),m=g.value;!u.done&&!g.done;){if(We(m.from,c.to)<=0&&0<=We(m.to,c.from))return!0;We(c.from,m.from)<0?c=(u=o.next(m.from)).value:m=(g=p.next(c.from)).value}return!1}function Ti(n){var a=ys(n)?null:{s:0,n};return{next:function(o){for(var u=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,u)for(;a.n.l&&We(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!u||We(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Zo(n){var a,o,u,c=(((c=n.r)==null?void 0:c.d)||0)-(((c=n.l)==null?void 0:c.d)||0),c=1<c?"r":c<-1?"l":"";c&&(a=c=="r"?"l":"r",o=i({},n),u=n[c],n.from=u.from,n.to=u.to,n[c]=u[c],o[c]=u[a],(n[a]=o).d=Jo(o)),n.d=Jo(n)}function Jo(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Ei(n,a){return f(a).forEach(function(o){n[o]?za(n[o],a[o]):n[o]=(function u(c){var p,g,m={};for(p in c)x(c,p)&&(g=c[p],m[p]=!g||typeof g!="object"||ue.has(g.constructor)?g:u(g));return m})(a[o])}),n}function bs(n,a){return n.all||a.all||Object.keys(n).some(function(o){return a[o]&&Qo(a[o],n[o])})}b(Ct.prototype,((ht={add:function(n){return za(this,n),this},addKey:function(n){return Ba(this,n,n),this},addKeys:function(n){var a=this;return n.forEach(function(o){return Ba(a,o,o)}),this},hasKey:function(n){var a=Ti(this).next(n).value;return a&&We(a.from,n)<=0&&0<=We(a.to,n)}})[xe]=function(){return Ti(this)},ht));var Pr={},_s={},ws=!1;function Ai(n){Ei(_s,n),ws||(ws=!0,setTimeout(function(){ws=!1,ks(_s,!(_s={}))},0))}function ks(n,a){a===void 0&&(a=!1);var o=new Set;if(n.all)for(var u=0,c=Object.values(Pr);u<c.length;u++)el(m=c[u],n,o,a);else for(var p in n){var g,m,p=/^idb\:\/\/(.*)\/(.*)\//.exec(p);p&&(g=p[1],p=p[2],m=Pr["idb://".concat(g,"/").concat(p)])&&el(m,n,o,a)}o.forEach(function(T){return T()})}function el(n,a,o,u){for(var c=[],p=0,g=Object.entries(n.queries.query);p<g.length;p++){for(var m=g[p],T=m[0],M=[],E=0,w=m[1];E<w.length;E++){var I=w[E];bs(a,I.obsSet)?I.subscribers.forEach(function(L){return o.add(L)}):u&&M.push(I)}u&&c.push([T,M])}if(u)for(var C=0,A=c;C<A.length;C++){var S=A[C],T=S[0],M=S[1];n.queries.query[T]=M}}function jc(n){var a=n._state,o=n._deps.indexedDB;if(a.isBeingOpened||n.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?ie(a.dbOpenError):n});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var u=a.openCanceller,c=Math.round(10*n.verno),p=!1;function g(){if(a.openCanceller!==u)throw new fe.DatabaseClosed("db.open() was cancelled")}function m(){return new le(function(I,C){if(g(),!o)throw new fe.MissingAPI;var A=n.name,S=a.autoSchema||!c?o.open(A):o.open(A,c);if(!S)throw new fe.MissingAPI;S.onerror=Cn(C),S.onblocked=tt(n._fireOnBlocked),S.onupgradeneeded=tt(function(L){var N;E=S.transaction,a.autoSchema&&!n._options.allowEmptyDB?(S.onerror=La,E.abort(),S.result.close(),(N=o.deleteDatabase(A)).onsuccess=N.onerror=tt(function(){C(new fe.NoSuchDatabase("Database ".concat(A," doesnt exist")))})):(E.onerror=Cn(C),N=L.oldVersion>Math.pow(2,62)?0:L.oldVersion,w=N<1,n.idbdb=S.result,p&&Nc(n,E),Lc(n,N/10,E,C))},C),S.onsuccess=tt(function(){E=null;var L,N,O,U,Y,se,oe=n.idbdb=S.result,V=ae(oe.objectStoreNames);if(0<V.length)try{var he=oe.transaction((Y=V).length===1?Y[0]:Y,"readonly");if(a.autoSchema)se=oe,U=he,(O=n).verno=se.version/10,U=O._dbSchema=xi(0,se,U),O._storeNames=ae(se.objectStoreNames,0),wi(O,[O._allTables],f(U),U);else if(Si(n,n._dbSchema,he),N=he,((N=ps(xi(0,(L=n).idbdb,N),L._dbSchema)).add.length||N.change.some(function(de){return de.add.length||de.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),oe.close(),c=oe.version+1,p=!0,I(m());_i(n,he)}catch{}ct.push(n),oe.onversionchange=tt(function(de){a.vcFired=!0,n.on("versionchange").fire(de)}),oe.onclose=tt(function(){n.close({disableAutoOpen:!1})}),w&&(V=n._deps,Y=A,gs(se=V.indexedDB)||Y===jt||vs(se,V.IDBKeyRange).put({name:Y}).catch(He)),I()},C)}).catch(function(I){switch(I==null?void 0:I.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<c)return c=0,m()}return le.reject(I)})}var T,M=a.dbReadyResolve,E=null,w=!1;return le.race([u,(typeof navigator>"u"?le.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function C(){return indexedDB.databases().finally(I)}T=setInterval(C,100),C()}).finally(function(){return clearInterval(T)}):Promise.resolve()).then(m)]).then(function(){return g(),a.onReadyBeingFired=[],le.resolve(ms(function(){return n.on.ready.fire(n.vip)})).then(function I(){var C;if(0<a.onReadyBeingFired.length)return C=a.onReadyBeingFired.reduce(tr,He),a.onReadyBeingFired=[],le.resolve(ms(function(){return C(n.vip)})).then(I)})}).finally(function(){a.openCanceller===u&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(I){a.dbOpenError=I;try{E&&E.abort()}catch{}return u===a.openCanceller&&n._close(),ie(I)}).finally(function(){a.openComplete=!0,M()}).then(function(){var I;return w&&(I={},n.tables.forEach(function(C){C.schema.indexes.forEach(function(A){A.name&&(I["idb://".concat(n.name,"/").concat(C.name,"/").concat(A.name)]=new Ct(-1/0,[[[]]]))}),I["idb://".concat(n.name,"/").concat(C.name,"/")]=I["idb://".concat(n.name,"/").concat(C.name,"/:dels")]=new Ct(-1/0,[[[]]])}),ur(Na).fire(I),ks(I,!0)),n})}function xs(n){function a(p){return n.next(p)}var o=c(a),u=c(function(p){return n.throw(p)});function c(p){return function(m){var m=p(m),T=m.value;return m.done?T:T&&typeof T.then=="function"?T.then(o,u):d(T)?Promise.all(T).then(o,u):o(T)}}return c(a)()}function Ii(n,a,o){for(var u=d(n)?n.slice():[n],c=0;c<o;++c)u.push(a);return u}var Bc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return i(i({},n),{table:function(u){var o=n.table(u),u=o.schema,c={},p=[];function g(I,C,A){var O=ja(I),S=c[O]=c[O]||[],L=I==null?0:typeof I=="string"?1:I.length,N=0<C,O=i(i({},A),{name:N?"".concat(O,"(virtual-from:").concat(A.name,")"):A.name,lowLevelIndex:A,isVirtual:N,keyTail:C,keyLength:L,extractKey:fs(I),unique:!N&&A.unique});return S.push(O),O.isPrimaryKey||p.push(O),1<L&&g(L===2?I[0]:I.slice(0,L-1),C+1,A),S.sort(function(U,Y){return U.keyTail-Y.keyTail}),O}var m=g(u.primaryKey.keyPath,0,u.primaryKey);c[":id"]=[m];for(var T=0,M=u.indexes;T<M.length;T++){var E=M[T];g(E.keyPath,0,E)}function w(I){var C,A=I.query.index;return A.isVirtual?i(i({},I),{query:{index:A.lowLevelIndex,range:(C=I.query.range,A=A.keyTail,{type:C.type===1?2:C.type,lower:Ii(C.lower,C.lowerOpen?n.MAX_KEY:n.MIN_KEY,A),lowerOpen:!0,upper:Ii(C.upper,C.upperOpen?n.MIN_KEY:n.MAX_KEY,A),upperOpen:!0})}}):I}return i(i({},o),{schema:i(i({},u),{primaryKey:m,indexes:p,getIndexByKeyPath:function(I){return(I=c[ja(I)])&&I[0]}}),count:function(I){return o.count(w(I))},query:function(I){return o.query(w(I))},openCursor:function(I){var C=I.query.index,A=C.keyTail,S=C.keyLength;return C.isVirtual?o.openCursor(w(I)).then(function(N){return N&&L(N)}):o.openCursor(I);function L(N){return Object.create(N,{continue:{value:function(O){O!=null?N.continue(Ii(O,I.reverse?n.MAX_KEY:n.MIN_KEY,A)):I.unique?N.continue(N.key.slice(0,S).concat(I.reverse?n.MIN_KEY:n.MAX_KEY,A)):N.continue()}},continuePrimaryKey:{value:function(O,U){N.continuePrimaryKey(Ii(O,n.MAX_KEY,A),U)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var O=N.key;return S===1?O[0]:O.slice(0,S)}},value:{get:function(){return N.value}}})}}})}})}};function Ss(n,a,o,u){return o=o||{},u=u||"",f(n).forEach(function(c){var p,g,m;x(a,c)?(p=n[c],g=a[c],typeof p=="object"&&typeof g=="object"&&p&&g?(m=we(p))!==we(g)?o[u+c]=a[c]:m==="Object"?Ss(p,g,o,u+c+"."):p!==g&&(o[u+c]=a[c]):p!==g&&(o[u+c]=a[c])):o[u+c]=void 0}),f(a).forEach(function(c){x(n,c)||(o[u+c]=a[c])}),o}function Ts(n,a){return a.type==="delete"?a.keys:a.keys||a.values.map(n.extractKey)}var zc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return i(i({},n),{table:function(a){var o=n.table(a),u=o.schema.primaryKey;return i(i({},o),{mutate:function(c){var p=ye.trans,g=p.table(a).hook,m=g.deleting,T=g.creating,M=g.updating;switch(c.type){case"add":if(T.fire===He)break;return p._promise("readwrite",function(){return E(c)},!0);case"put":if(T.fire===He&&M.fire===He)break;return p._promise("readwrite",function(){return E(c)},!0);case"delete":if(m.fire===He)break;return p._promise("readwrite",function(){return E(c)},!0);case"deleteRange":if(m.fire===He)break;return p._promise("readwrite",function(){return(function w(I,C,A){return o.query({trans:I,values:!1,query:{index:u,range:C},limit:A}).then(function(S){var L=S.result;return E({type:"delete",keys:L,trans:I}).then(function(N){return 0<N.numFailures?Promise.reject(N.failures[0]):L.length<A?{failures:[],numFailures:0,lastResult:void 0}:w(I,i(i({},C),{lower:L[L.length-1],lowerOpen:!0}),A)})})})(c.trans,c.range,1e4)},!0)}return o.mutate(c);function E(w){var I,C,A,S=ye.trans,L=w.keys||Ts(u,w);if(L)return(w=w.type==="add"||w.type==="put"?i(i({},w),{keys:L}):i({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),I=o,A=L,((C=w).type==="add"?Promise.resolve([]):I.getMany({trans:C.trans,keys:A,cache:"immutable"})).then(function(N){var O=L.map(function(U,Y){var se,oe,V,he=N[Y],de={onerror:null,onsuccess:null};return w.type==="delete"?m.fire.call(de,U,he,S):w.type==="add"||he===void 0?(se=T.fire.call(de,U,w.values[Y],S),U==null&&se!=null&&(w.keys[Y]=U=se,u.outbound||ne(w.values[Y],u.keyPath,U))):(se=Ss(he,w.values[Y]),(oe=M.fire.call(de,se,U,he,S))&&(V=w.values[Y],Object.keys(oe).forEach(function(ee){x(V,ee)?V[ee]=oe[ee]:ne(V,ee,oe[ee])}))),de});return o.mutate(w).then(function(U){for(var Y=U.failures,se=U.results,oe=U.numFailures,U=U.lastResult,V=0;V<L.length;++V){var he=(se||L)[V],de=O[V];he==null?de.onerror&&de.onerror(Y[V]):de.onsuccess&&de.onsuccess(w.type==="put"&&N[V]?w.values[V]:he)}return{failures:Y,results:se,numFailures:oe,lastResult:U}}).catch(function(U){return O.forEach(function(Y){return Y.onerror&&Y.onerror(U)}),Promise.reject(U)})});throw new Error("Keys missing")}}})}})}};function tl(n,a,o){try{if(!a||a.keys.length<n.length)return null;for(var u=[],c=0,p=0;c<a.keys.length&&p<n.length;++c)We(a.keys[c],n[p])===0&&(u.push(o?re(a.values[c]):a.values[c]),++p);return u.length===n.length?u:null}catch{return null}}var Fc={stack:"dbcore",level:-1,create:function(n){return{table:function(a){var o=n.table(a);return i(i({},o),{getMany:function(u){var c;return u.cache?(c=tl(u.keys,u.trans._cache,u.cache==="clone"))?le.resolve(c):o.getMany(u).then(function(p){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?re(p):p},p}):o.getMany(u)},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function nl(n,a){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function rl(n,a){switch(n){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kc={stack:"dbcore",level:0,name:"Observability",create:function(n){var a=n.schema.name,o=new Ct(n.MIN_KEY,n.MAX_KEY);return i(i({},n),{transaction:function(u,c,p){if(ye.subscr&&c!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ye.querier));return n.transaction(u,c,p)},table:function(u){function c(L){var S,L=L.query;return[S=L.index,new Ct((S=(L=L.range).lower)!=null?S:n.MIN_KEY,(S=L.upper)!=null?S:n.MAX_KEY)]}var p=n.table(u),g=p.schema,m=g.primaryKey,T=g.indexes,M=m.extractKey,E=m.outbound,w=m.autoIncrement&&T.filter(function(A){return A.compound&&A.keyPath.includes(m.keyPath)}),I=i(i({},p),{mutate:function(A){function S(ge){return ge="idb://".concat(a,"/").concat(u,"/").concat(ge),Y[ge]||(Y[ge]=new Ct)}var L,N,O,U=A.trans,Y=A.mutatedParts||(A.mutatedParts={}),se=S(""),oe=S(":dels"),V=A.type,de=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Ts(m,A).filter(function(ge){return ge}),A.values]:[],he=de[0],de=de[1],ee=A.trans._cache;return d(he)?(se.addKeys(he),(V=V==="delete"||he.length===de.length?tl(he,ee):null)||oe.addKeys(he),(V||de)&&(L=S,N=V,O=de,g.indexes.forEach(function(ge){var $e=L(ge.name||"");function Qe(je){return je!=null?ge.extractKey(je):null}function Ae(je){ge.multiEntry&&d(je)?je.forEach(function(ot){return $e.addKey(ot)}):$e.addKey(je)}(N||O).forEach(function(je,lt){var nn=N&&Qe(N[lt]),lt=O&&Qe(O[lt]);We(nn,lt)!==0&&(nn!=null&&Ae(nn),lt!=null)&&Ae(lt)})}))):he?(de={from:(ee=he.lower)!=null?ee:n.MIN_KEY,to:(V=he.upper)!=null?V:n.MAX_KEY},oe.add(de),se.add(de)):(se.add(o),oe.add(o),g.indexes.forEach(function(ge){return S(ge.name).add(o)})),p.mutate(A).then(function(ge){return!he||A.type!=="add"&&A.type!=="put"||(se.addKeys(ge.results),w&&w.forEach(function($e){for(var Qe=A.values.map(function(nn){return $e.extractKey(nn)}),Ae=$e.keyPath.findIndex(function(nn){return nn===m.keyPath}),je=0,ot=ge.results.length;je<ot;++je)Qe[je][Ae]=ge.results[je];S($e.name).addKeys(Qe)})),U.mutatedParts=Ei(U.mutatedParts||{},Y),ge})}}),C={get:function(A){return[m,new Ct(A.key)]},getMany:function(A){return[m,new Ct().addKeys(A.keys)]},count:c,query:c,openCursor:c};return f(C).forEach(function(A){I[A]=function(S){var L=ye.subscr,N=!!L,O=nl(ye,p)&&rl(A,S)?S.obsSet={}:L;if(N){var U,L=function(de){return de="idb://".concat(a,"/").concat(u,"/").concat(de),O[de]||(O[de]=new Ct)},Y=L(""),se=L(":dels"),N=C[A](S),oe=N[0],N=N[1];if((A==="query"&&oe.isPrimaryKey&&!S.values?se:L(oe.name||"")).add(N),!oe.isPrimaryKey){if(A!=="count")return U=A==="query"&&E&&S.values&&p.query(i(i({},S),{values:!1})),p[A].apply(this,arguments).then(function(de){if(A==="query"){if(E&&S.values)return U.then(function(Qe){return Qe=Qe.result,Y.addKeys(Qe),de});var ee=S.values?de.result.map(M):de.result;(S.values?Y:se).addKeys(ee)}else{var ge,$e;if(A==="openCursor")return $e=S.values,(ge=de)&&Object.create(ge,{key:{get:function(){return se.addKey(ge.primaryKey),ge.key}},primaryKey:{get:function(){var Qe=ge.primaryKey;return se.addKey(Qe),Qe}},value:{get:function(){return $e&&Y.addKey(ge.primaryKey),ge.value}}})}return de});se.add(o)}}return p[A].apply(this,arguments)}}),I}})}};function al(n,a,o){var u;return o.numFailures===0?a:a.type==="deleteRange"||(u=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1,o.numFailures===u)?null:(u=i({},a),d(u.keys)&&(u.keys=u.keys.filter(function(c,p){return!(p in o.failures)})),"values"in u&&d(u.values)&&(u.values=u.values.filter(function(c,p){return!(p in o.failures)})),u)}function Es(n,a){return o=n,((u=a).lower===void 0||(u.lowerOpen?0<We(o,u.lower):0<=We(o,u.lower)))&&(o=n,(u=a).upper===void 0||(u.upperOpen?We(o,u.upper)<0:We(o,u.upper)<=0));var o,u}function il(n,a,o,u,c,p){var g,m,T,M,E,w;return!o||o.length===0||(g=a.query.index,m=g.multiEntry,T=a.query.range,M=u.schema.primaryKey.extractKey,E=g.extractKey,w=(g.lowLevelIndex||g).extractKey,(u=o.reduce(function(I,C){var A=I,S=[];if(C.type==="add"||C.type==="put")for(var L=new Ct,N=C.values.length-1;0<=N;--N){var O,U=C.values[N],Y=M(U);!L.hasKey(Y)&&(O=E(U),m&&d(O)?O.some(function(de){return Es(de,T)}):Es(O,T))&&(L.addKey(Y),S.push(U))}switch(C.type){case"add":var se=new Ct().addKeys(a.values?I.map(function(ee){return M(ee)}):I),A=I.concat(a.values?S.filter(function(ee){return ee=M(ee),!se.hasKey(ee)&&(se.addKey(ee),!0)}):S.map(function(ee){return M(ee)}).filter(function(ee){return!se.hasKey(ee)&&(se.addKey(ee),!0)}));break;case"put":var oe=new Ct().addKeys(C.values.map(function(ee){return M(ee)}));A=I.filter(function(ee){return!oe.hasKey(a.values?M(ee):ee)}).concat(a.values?S:S.map(function(ee){return M(ee)}));break;case"delete":var V=new Ct().addKeys(C.keys);A=I.filter(function(ee){return!V.hasKey(a.values?M(ee):ee)});break;case"deleteRange":var he=C.range;A=I.filter(function(ee){return!Es(M(ee),he)})}return A},n))===n)?n:(u.sort(function(I,C){return We(w(I),w(C))||We(M(I),M(C))}),a.limit&&a.limit<1/0&&(u.length>a.limit?u.length=a.limit:n.length===a.limit&&u.length<a.limit&&(c.dirty=!0)),p?Object.freeze(u):u)}function sl(n,a){return We(n.lower,a.lower)===0&&We(n.upper,a.upper)===0&&!!n.lowerOpen==!!a.lowerOpen&&!!n.upperOpen==!!a.upperOpen}function Uc(n,a){return((o,u,c,p)=>{if(o===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((o=We(o,u))===0){if(c&&p)return 0;if(c)return 1;if(p)return-1}return o})(n.lower,a.lower,n.lowerOpen,a.lowerOpen)<=0&&0<=((o,u,c,p)=>{if(o===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((o=We(o,u))===0){if(c&&p)return 0;if(c)return-1;if(p)return 1}return o})(n.upper,a.upper,n.upperOpen,a.upperOpen)}function Gc(n,a,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){var c,p;n.subscribers.delete(o),n.subscribers.size===0&&(c=n,p=a,setTimeout(function(){c.subscribers.size===0&&B(p,c)},3e3))})}var Hc={stack:"dbcore",level:0,name:"Cache",create:function(n){var a=n.schema.name;return i(i({},n),{transaction:function(o,u,c){var p,g,m=n.transaction(o,u,c);return u==="readwrite"&&(c=(p=new AbortController).signal,m.addEventListener("abort",(g=function(T){return function(){if(p.abort(),u==="readwrite"){for(var M=new Set,E=0,w=o;E<w.length;E++){var I=w[E],C=Pr["idb://".concat(a,"/").concat(I)];if(C){var A=n.table(I),S=C.optimisticOps.filter(function(ge){return ge.trans===m});if(m._explicit&&T&&m.mutatedParts)for(var L=0,N=Object.values(C.queries.query);L<N.length;L++)for(var O=0,U=(oe=N[L]).slice();O<U.length;O++)bs((V=U[O]).obsSet,m.mutatedParts)&&(B(oe,V),V.subscribers.forEach(function(ge){return M.add(ge)}));else if(0<S.length){C.optimisticOps=C.optimisticOps.filter(function(ge){return ge.trans!==m});for(var Y=0,se=Object.values(C.queries.query);Y<se.length;Y++)for(var oe,V,he,de=0,ee=(oe=se[Y]).slice();de<ee.length;de++)(V=ee[de]).res!=null&&m.mutatedParts&&(T&&!V.dirty?(he=Object.isFrozen(V.res),he=il(V.res,V.req,S,A,V,he),V.dirty?(B(oe,V),V.subscribers.forEach(function(ge){return M.add(ge)})):he!==V.res&&(V.res=he,V.promise=le.resolve({result:he}))):(V.dirty&&B(oe,V),V.subscribers.forEach(function(ge){return M.add(ge)})))}}}M.forEach(function(ge){return ge()})}}})(!1),{signal:c}),m.addEventListener("error",g(!1),{signal:c}),m.addEventListener("complete",g(!0),{signal:c})),m},table:function(o){var u=n.table(o),c=u.schema.primaryKey;return i(i({},u),{mutate:function(p){var g,m=ye.trans;return!c.outbound&&m.db._options.cache!=="disabled"&&!m.explicit&&m.idbtrans.mode==="readwrite"&&(g=Pr["idb://".concat(a,"/").concat(o)])?(m=u.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Ts(c,p).some(function(T){return T==null}))?(g.optimisticOps.push(p),p.mutatedParts&&Ai(p.mutatedParts),m.then(function(T){0<T.numFailures&&(B(g.optimisticOps,p),(T=al(0,p,T))&&g.optimisticOps.push(T),p.mutatedParts)&&Ai(p.mutatedParts)}),m.catch(function(){B(g.optimisticOps,p),p.mutatedParts&&Ai(p.mutatedParts)})):m.then(function(T){var M=al(0,i(i({},p),{values:p.values.map(function(E,w){var I;return T.failures[w]?E:(ne(I=(I=c.keyPath)!=null&&I.includes(".")?re(E):i({},E),c.keyPath,T.results[w]),I)})}),T);g.optimisticOps.push(M),queueMicrotask(function(){return p.mutatedParts&&Ai(p.mutatedParts)})}),m):u.mutate(p)},query:function(p){var g,m,T,M,E,w,I;return nl(ye,u)&&rl("query",p)?(g=((T=ye.trans)==null?void 0:T.db._options.cache)==="immutable",m=(T=ye).requery,T=T.signal,w=((C,A,S,L)=>{var N=Pr["idb://".concat(C,"/").concat(A)];if(!N)return[];if(!(C=N.queries[S]))return[null,!1,N,null];var O=C[(L.query?L.query.index.name:null)||""];if(!O)return[null,!1,N,null];switch(S){case"query":var U=O.find(function(Y){return Y.req.limit===L.limit&&Y.req.values===L.values&&sl(Y.req.query.range,L.query.range)});return U?[U,!0,N,O]:[O.find(function(Y){return("limit"in Y.req?Y.req.limit:1/0)>=L.limit&&(!L.values||Y.req.values)&&Uc(Y.req.query.range,L.query.range)}),!1,N,O];case"count":return U=O.find(function(Y){return sl(Y.req.query.range,L.query.range)}),[U,!!U,N,O]}})(a,o,"query",p),I=w[0],M=w[2],E=w[3],I&&w[1]?I.obsSet=p.obsSet:(w=u.query(p).then(function(C){var A=C.result;if(I&&(I.res=A),g){for(var S=0,L=A.length;S<L;++S)Object.freeze(A[S]);Object.freeze(A)}else C.result=re(A);return C}).catch(function(C){return E&&I&&B(E,I),Promise.reject(C)}),I={obsSet:p.obsSet,promise:w,subscribers:new Set,type:"query",req:p,dirty:!1},E?E.push(I):(E=[I],(M=M||(Pr["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=E)),Gc(I,E,m,T),I.promise.then(function(C){return{result:il(C.result,p,M==null?void 0:M.optimisticOps,u,I,g)}})):u.query(p)}})}})}};function Ci(n,a){return new Proxy(n,{get:function(o,u,c){return u==="db"?a:Reflect.get(o,u,c)}})}ft.prototype.version=function(n){if(isNaN(n)||n<.1)throw new fe.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var a=this._versions,o=a.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),a.push(o),a.sort(Mc),o.stores({}),this._state.autoSchema=!1),o},ft.prototype._whenReady=function(n){var a=this;return this.idbdb&&(this._state.openComplete||ye.letThrough||this._vip)?n():new le(function(o,u){if(a._state.openComplete)return u(new fe.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void u(new fe.DatabaseClosed);a.open().catch(He)}a._state.dbReadyPromise.then(o,u)}).then(n)},ft.prototype.use=function(c){var a=c.stack,o=c.create,u=c.level,c=c.name,p=(c&&this.unuse({stack:a,name:c}),this._middlewares[a]||(this._middlewares[a]=[]));return p.push({stack:a,create:o,level:u??10,name:c}),p.sort(function(g,m){return g.level-m.level}),this},ft.prototype.unuse=function(n){var a=n.stack,o=n.name,u=n.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(c){return u?c.create!==u:!!o&&c.name!==o})),this},ft.prototype.open=function(){var n=this;return _e(mt,function(){return jc(n)})},ft.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,a=ct.indexOf(this);if(0<=a&&ct.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new le(function(o){n.dbReadyResolve=o}),n.openCanceller=new le(function(o,u){n.cancelOpen=u}))},ft.prototype.close=function(a){var a=(a===void 0?{disableAutoOpen:!0}:a).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new fe.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new fe.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},ft.prototype.delete=function(n){var a=this,o=(n===void 0&&(n={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),u=this._state;return new le(function(c,p){function g(){a.close(n);var m=a._deps.indexedDB.deleteDatabase(a.name);m.onsuccess=tt(function(){var T,M,E;T=a._deps,M=a.name,gs(E=T.indexedDB)||M===jt||vs(E,T.IDBKeyRange).delete(M).catch(He),c()}),m.onerror=Cn(p),m.onblocked=a._fireOnBlocked}if(o)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(g):g()})},ft.prototype.backendDB=function(){return this.idbdb},ft.prototype.isOpen=function(){return this.idbdb!==null},ft.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},ft.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ft.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ft.prototype,"tables",{get:function(){var n=this;return f(this._allTables).map(function(a){return n._allTables[a]})},enumerable:!1,configurable:!0}),ft.prototype.transaction=function(){var n=(function(a,o,u){var c=arguments.length;if(c<2)throw new fe.InvalidArgument("Too few arguments");for(var p=new Array(c-1);--c;)p[c-1]=arguments[c];return u=p.pop(),[a,Re(p),u]}).apply(this,arguments);return this._transaction.apply(this,n)},ft.prototype._transaction=function(n,a,o){var u,c,p=this,g=ye.trans,m=(g&&g.db===this&&n.indexOf("!")===-1||(g=null),n.indexOf("?")!==-1);n=n.replace("!","").replace("?","");try{if(c=a.map(function(M){if(M=M instanceof p.Table?M.name:M,typeof M!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return M}),n=="r"||n===In)u=In;else{if(n!="rw"&&n!=Ir)throw new fe.InvalidArgument("Invalid transaction mode: "+n);u=Ir}if(g){if(g.mode===In&&u===Ir){if(!m)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&c.forEach(function(M){if(g&&g.storeNames.indexOf(M)===-1){if(!m)throw new fe.SubTransaction("Table "+M+" not included in parent transaction.");g=null}}),m&&g&&!g.active&&(g=null)}}catch(M){return g?g._promise(null,function(E,w){w(M)}):ie(M)}var T=(function M(E,w,I,C,A){return le.resolve().then(function(){var O=ye.transless||ye,S=E._createTransaction(w,I,E._dbSchema,C),O=(S.explicit=!0,{trans:S,transless:O});if(C)S.idbtrans=C.idbtrans;else try{S.create(),S.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(U){return U.name===et.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return M(E,w,I,null,A)})):ie(U)}var L,N=be(A),O=(N&&It(),le.follow(function(){var U;(L=A.call(S,S))&&(N?(U=gn.bind(null,null),L.then(U,U)):typeof L.next=="function"&&typeof L.throw=="function"&&(L=xs(L)))},O));return(L&&typeof L.then=="function"?le.resolve(L).then(function(U){return S.active?U:ie(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return L})).then(function(U){return C&&S._resolve(),S._completion.then(function(){return U})}).catch(function(U){return S._reject(U),ie(U)})})}).bind(null,this,u,c,g,o);return g?g._promise(u,T,"lock"):ye.trans?_e(ye.transless,function(){return p._whenReady(T)}):this._whenReady(T)},ft.prototype.table=function(n){if(x(this._allTables,n))return this._allTables[n];throw new fe.InvalidTable("Table ".concat(n," does not exist"))};var Un=ft;function ft(n,a){var o,u,c,p,g,m=this,T=(this._middlewares={},this.verno=0,ft.dependencies),T=(this._options=a=i({addons:ft.addons,autoOpen:!0,indexedDB:T.indexedDB,IDBKeyRange:T.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},a.addons),M=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen}),E=(M.dbReadyPromise=new le(function(w){M.dbReadyResolve=w}),M.openCanceller=new le(function(w,I){M.cancelOpen=I}),this._state=M,this.name=n,this.on=Da(this,"populate","blocked","versionchange","close",{ready:[tr,He]}),this.once=function(w,I){var C=function(){for(var A=[],S=0;S<arguments.length;S++)A[S]=arguments[S];m.on(w).unsubscribe(C),I.apply(m,A)};return m.on(w,C)},this.on.ready.subscribe=te(this.on.ready.subscribe,function(w){return function(I,C){ft.vip(function(){var A,S=m._state;S.openComplete?(S.dbOpenError||le.resolve().then(I),C&&w(I)):S.onReadyBeingFired?(S.onReadyBeingFired.push(I),C&&w(I)):(w(I),A=m,C||w(function L(){A.on.ready.unsubscribe(I),A.on.ready.unsubscribe(L)}))})}}),this.Collection=(o=this,Ma(Ac.prototype,function(L,S){this.db=o;var C=Ra,A=null;if(S)try{C=S()}catch(O){A=O}var S=L._ctx,L=S.table,N=L.hook.reading.fire;this._ctx={table:L,index:S.index,isPrimKey:!S.index||L.schema.primKey.keyPath&&S.index===L.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:A,or:S.or,valueMapper:N!==Jt?N:null}})),this.Table=(u=this,Ma(Fo.prototype,function(w,I,C){this.db=u,this._tx=C,this.name=w,this.schema=I,this.hook=u._allTables[w]?u._allTables[w].hook:Da(null,{creating:[Ea,He],reading:[Jr,Jt],updating:[er,He],deleting:[Aa,He]})})),this.Transaction=(c=this,Ma(Pc.prototype,function(w,I,C,A,S){var L=this;w!=="readonly"&&I.forEach(function(N){N=(N=C[N])==null?void 0:N.yProps,N&&(I=I.concat(N.map(function(O){return O.updatesTable})))}),this.db=c,this.mode=w,this.storeNames=I,this.schema=C,this.chromeTransactionDurability=A,this.idbtrans=null,this.on=Da(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le(function(N,O){L._resolve=N,L._reject=O}),this._completion.then(function(){L.active=!1,L.on.complete.fire()},function(N){var O=L.active;return L.active=!1,L.on.error.fire(N),L.parent?L.parent._reject(N):O&&L.idbtrans&&L.idbtrans.abort(),ie(N)})})),this.Version=(p=this,Ma(qc.prototype,function(w){this.db=p,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,Ma(Wo.prototype,function(w,I,C){if(this.db=g,this._ctx={table:w,index:I===":id"?null:I,or:C},this._cmp=this._ascending=We,this._descending=function(A,S){return We(S,A)},this._max=function(A,S){return 0<We(A,S)?A:S},this._min=function(A,S){return We(A,S)<0?A:S},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(m.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(m.name,"'. Closing db now to resume the delete request.")),m.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(m.name,"') was blocked")):console.warn("Upgrade '".concat(m.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=qa(a.IDBKeyRange),this._createTransaction=function(w,I,C,A){return new m.Transaction(w,I,C,m._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(w){m.on("blocked").fire(w),ct.filter(function(I){return I.name===m.name&&I!==m&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(w)})},this.use(Fc),this.use(Hc),this.use(Kc),this.use(Bc),this.use(zc),new Proxy(this,{get:function(w,I,C){var A;return I==="_vip"||(I==="table"?function(S){return Ci(m.table(S),E)}:(A=Reflect.get(w,I,C))instanceof Fo?Ci(A,E):I==="tables"?A.map(function(S){return Ci(S,E)}):I==="_createTransaction"?function(){return Ci(A.apply(this,arguments),E)}:A)}}));this.vip=E,T.forEach(function(w){return w(m)})}var Pi,oa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Wc=(As.prototype.subscribe=function(n,a,o){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:a,complete:o})},As.prototype[oa]=function(){return this},As);function As(n){this._subscribe=n}try{Pi={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Pi={indexedDB:null,IDBKeyRange:null}}function ol(n){var a,o=!1,u=new Wc(function(c){var p=be(n),g,m=!1,T={},M={},E={get closed(){return m},unsubscribe:function(){m||(m=!0,g&&g.abort(),w&&ur.storagemutated.unsubscribe(C))}},w=(c.start&&c.start(E),!1),I=function(){return Q(A)},C=function(S){Ei(T,S),bs(M,T)&&I()},A=function(){var S,L,N;!m&&Pi.indexedDB&&(T={},S={},g&&g.abort(),g=new AbortController,N=(O=>{var U=or();try{p&&It();var Y=vn(n,O);return Y=p?Y.finally(gn):Y}finally{U&&Kn()}})(L={subscr:S,signal:g.signal,requery:I,querier:n,trans:null}),Promise.resolve(N).then(function(O){o=!0,a=O,m||L.signal.aborted||(T={},(U=>{for(var Y in U)if(x(U,Y))return;return 1})(M=S)||w||(ur(Na,C),w=!0),Q(function(){return!m&&c.next&&c.next(O)}))},function(O){o=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||m||Q(function(){m||c.error&&c.error(O)})}))};return setTimeout(I,0),E});return u.hasValue=function(){return o},u.getValue=function(){return a},u}var Rr=Un;function Is(n){var a=cr;try{cr=!0,ur.storagemutated.fire(n),ks(n,!0)}finally{cr=a}}b(Rr,i(i({},Me),{delete:function(n){return new Rr(n,{addons:[]}).delete()},exists:function(n){return new Rr(n,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return a=Rr.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(gs(o)?Promise.resolve(o.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==jt})}):vs(o,a).toCollection().primaryKeys()).then(n)}catch{return ie(new fe.MissingAPI)}var a,o},defineClass:function(){return function(n){v(this,n)}},ignoreTransaction:function(n){return ye.trans?_e(ye.transless,n):n()},vip:ms,async:function(n){return function(){try{var a=xs(n.apply(this,arguments));return a&&typeof a.then=="function"?a:le.resolve(a)}catch(o){return ie(o)}}},spawn:function(n,a,o){try{var u=xs(n.apply(o,a||[]));return u&&typeof u.then=="function"?u:le.resolve(u)}catch(c){return ie(c)}},currentTransaction:{get:function(){return ye.trans||null}},waitFor:function(n,a){return n=le.resolve(typeof n=="function"?Rr.ignoreTransaction(n):n).timeout(a||6e4),ye.trans?ye.trans.waitFor(n):n},Promise:le,debug:{get:function(){return Gt},set:function(n){Ia(n)}},derive:q,extend:v,props:b,override:te,Events:Da,on:ur,liveQuery:ol,extendObservabilitySet:Ei,getByKeyPath:ve,setByKeyPath:ne,delByKeyPath:function(n,a){typeof a=="string"?ne(n,a,void 0):"length"in a&&[].map.call(a,function(o){ne(n,o,void 0)})},shallowClone:me,deepClone:re,getObjectDiff:Ss,cmp:We,asap:Z,minKey:-1/0,addons:[],connections:ct,errnames:et,dependencies:Pi,cache:Pr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(n){return parseInt(n)}).reduce(function(n,a,o){return n+a/Math.pow(10,2*o)})})),Rr.maxKey=qa(Rr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ur(Na,function(n){cr||(n=new CustomEvent(ls,{detail:n}),cr=!0,dispatchEvent(n),cr=!1)}),addEventListener(ls,function(n){n=n.detail,cr||Is(n)}));var la,cr=!1,ll=function(){};return typeof BroadcastChannel<"u"&&((ll=function(){(la=new BroadcastChannel(ls)).onmessage=function(n){return n.data&&Is(n.data)}})(),typeof la.unref=="function"&&la.unref(),ur(Na,function(n){cr||la.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Un.disableBfCache&&n.persisted){Gt&&console.debug("Dexie: handling persisted pagehide"),la!=null&&la.close();for(var a=0,o=ct;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Un.disableBfCache&&n.persisted&&(Gt&&console.debug("Dexie: handling persisted pageshow"),ll(),Is({all:new Ct(-1/0,[[]])}))})),le.rejectionMapper=function(n,a){return!n||n instanceof De||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Ot[n.name]?n:(a=new Ot[n.name](a||n.message,n),"stack"in n&&j(a,"stack",{get:function(){return this.inner.stack}}),a)},Ia(Gt),i(Un,Object.freeze({__proto__:null,Dexie:Un,Entity:No,PropModification:Oa,RangeSet:Ct,add:function(n){return new Oa({add:n})},cmp:We,default:Un,liveQuery:ol,mergeRanges:za,rangesOverlap:Qo,remove:function(n){return new Oa({remove:n})},replacePrefix:function(n,a){return new Oa({replacePrefix:[n,a]})}}),{default:Un}),Un})})(Fi)),Fi.exports}var Od=Rd();const to=Cd(Od),Al=Symbol.for("Dexie"),ln=globalThis[Al]||(globalThis[Al]=to);if(to.semVer!==ln.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${to.semVer} and ${ln.semVer}`);const{liveQuery:Pg,mergeRanges:Rg,rangesOverlap:Og,RangeSet:Dg,cmp:Mg,Entity:Lg,PropModification:Ng,replacePrefix:qg,add:jg,remove:Bg,DexieYProvider:zg}=ln,Fe=new ln("me-ai-store");Fe.version(1).stores({items:"id, sourceType, sourceId, threadKey, date, from, *labels, [sourceType+date]",contacts:"++id, &email, name, lastSeen",syncState:"sourceType"});function Qu(t,e){return`${t}:${e}`}async function Dd(){const t=await Fe.items.where("sourceType").equals("gmail").count(),e=await Fe.contacts.count();if(t===0)return null;const r=[`Stored data: ${t} emails, ${e} contacts.`],i=await Fe.items.where("[sourceType+date]").between(["gmail",ln.minKey],["gmail",ln.maxKey]).first(),s=await Fe.items.where("[sourceType+date]").between(["gmail",ln.minKey],["gmail",ln.maxKey]).last();if(i&&s){const f=new Date(i.date).toLocaleDateString(),d=new Date(s.date).toLocaleDateString();r.push(`Date range: ${f} to ${d}.`)}const l=await Zu(5);return l.length>0&&r.push("Top senders: "+l.map(([f,d])=>`${Fd(f)} (${d})`).join(", ")+"."),r.join(" ")}async function Md(){const t=await Fe.items.where("sourceType").equals("gmail").count(),e=await Fe.contacts.count();if(t===0)return"No emails stored locally.";const r=await Zu(10),i=await Bd(10),s=["## Data Summary",`- **Emails:** ${t}`,`- **Contacts:** ${e}`],l=await Fe.items.where("sourceType").equals("gmail").sortBy("date");if(l.length>0){const f=new Date(l[0].date).toLocaleDateString(),d=new Date(l[l.length-1].date).toLocaleDateString();s.push(`- **Date range:** ${f} â ${d}`)}if(r.length>0){s.push("","### Top Senders");for(const[f,d]of r)s.push(`- ${f}: ${d}`)}if(i.length>0){s.push("","### Labels");for(const[f,d]of i)s.push(`- ${f}: ${d}`)}return s.join(`
`)}async function Ld(t=10){const e=await Fe.items.where("[sourceType+date]").between(["gmail",ln.minKey],["gmail",ln.maxKey]).reverse().limit(t).toArray();return e.length===0?"No emails stored locally.":e.map(Ju).join(`

---

`)}async function Nd(t,e=10){if(!t)return"No search query provided.";const r=t.toLowerCase(),s=(await Fe.items.toArray()).map(l=>{var d,v,h,y,x;let f=0;return(d=l.subject)!=null&&d.toLowerCase().includes(r)&&(f+=3),(v=l.from)!=null&&v.toLowerCase().includes(r)&&(f+=2),(h=l.to)!=null&&h.toLowerCase().includes(r)&&(f+=2),(y=l.snippet)!=null&&y.toLowerCase().includes(r)&&(f+=1),(x=l.body)!=null&&x.toLowerCase().includes(r)&&(f+=1),{item:l,score:f}}).filter(({score:l})=>l>0).sort((l,f)=>f.score-l.score).slice(0,e);return s.length===0?`No results found for "${t}".`:s.map(({item:l})=>Ju(l)).join(`

---

`)}async function qd(){const t=await Dd();return t?["You have access to the user's locally stored data.",t,"The user can ask you about their emails. If they do, you can see recent emails and search results that will be provided."].join(" "):null}async function jd(t){const e=[],r=await Md();if(e.push(r),t){const i=await Nd(t,5);e.push("","## Relevant Emails",i)}else{const i=await Ld(5);e.push("","## Recent Emails",i)}return e.join(`
`)}async function Zu(t){const e=await Fe.items.where("sourceType").equals("gmail").toArray(),r={};for(const i of e){const s=i.from||"Unknown";r[s]=(r[s]||0)+1}return Object.entries(r).sort((i,s)=>s[1]-i[1]).slice(0,t)}async function Bd(t){const e=await Fe.items.where("sourceType").equals("gmail").toArray(),r={};for(const i of e)for(const s of i.labels||[])r[s]=(r[s]||0)+1;return Object.entries(r).sort((i,s)=>s[1]-i[1]).slice(0,t)}function Ju(t){const e=t.date?new Date(t.date).toLocaleString():"Unknown date",r=zd(t.body||t.snippet||"",500);switch(t.type){case"email":return[`**Subject:** ${t.subject}`,`**From:** ${t.from}`,`**To:** ${t.to}`,t.cc?`**CC:** ${t.cc}`:"",`**Date:** ${e}`,`**Labels:** ${(t.labels||[]).join(", ")}`,"",r].filter(Boolean).join(`
`);default:return[`**From:** ${t.from}`,`**Date:** ${e}`,"",r].join(`
`)}}function zd(t,e){return t?t.length<=e?t:t.slice(0,e)+"...":""}function Fd(t){if(!t)return"Unknown";const e=t.match(/^"?([^"<]+)"?\s*</);return e?e[1].trim():t.split("@")[0]}async function Kd({query:t,limit:e=50,offset:r=0}={}){if(t){const l=t.toLowerCase(),f=await Fe.items.where("sourceType").equals("gmail").filter(d=>{var v,h,y,x;return((v=d.subject)==null?void 0:v.toLowerCase().includes(l))||((h=d.from)==null?void 0:h.toLowerCase().includes(l))||((y=d.to)==null?void 0:y.toLowerCase().includes(l))||((x=d.snippet)==null?void 0:x.toLowerCase().includes(l))}).toArray();return f.sort((d,v)=>(v.date||0)-(d.date||0)),{items:f.slice(r,r+e),total:f.length}}const i=await Fe.items.where("sourceType").equals("gmail").count();return{items:await Fe.items.where("[sourceType+date]").between(["gmail",ln.minKey],["gmail",ln.maxKey]).reverse().offset(r).limit(e).toArray(),total:i}}function no(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,i)).toFixed(1)+" "+r[i]}function Ns(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e)),s=t/Math.pow(e,i),l=i>=2?2:i>=1?1:0;return s.toFixed(l)+" "+r[i]}function Ud(t,e){return!e||e<=0?null:Math.min(100,t/e*100)}const Gd=typeof localStorage<"u"&&localStorage.getItem("debug")==="true";function Il(...t){Gd&&console.log("[debug]",...t)}function Zt(t){return Il(`[MOUNT] ${t}`),()=>Il(`[DESTROY] ${t}`)}var Hd=J("<option> </option>"),Wd=J('<p class="model-description svelte-1p89qnn"> </p>'),$d=J('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Device</span><span class="svelte-1p89qnn"> </span></div>'),Yd=J('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Description</span><span class="svelte-1p89qnn"> </span></div>'),Vd=J('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Max buffer</span><span class="svelte-1p89qnn"> </span></div>'),Xd=J('<div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Features</span><span class="svelte-1p89qnn"> </span></div>'),Qd=J('<div class="gpu-card svelte-1p89qnn"><div class="gpu-card-header svelte-1p89qnn"><span class="gpu-dot svelte-1p89qnn"></span> <span>WebGPU Active</span></div> <div class="gpu-card-body svelte-1p89qnn"><div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Vendor</span><span class="svelte-1p89qnn"> </span></div> <div class="gpu-row svelte-1p89qnn"><span class="svelte-1p89qnn">Architecture</span><span class="svelte-1p89qnn"> </span></div> <!> <!> <!> <!></div></div>'),Zd=J('<p class="error svelte-1p89qnn"> </p>'),Jd=J('<div class="container center svelte-1p89qnn"><p class="subtitle svelte-1p89qnn">A private AI chat that runs <strong>entirely in your browser</strong> using WebGPU.</p> <div class="model-selector svelte-1p89qnn"><label for="model-select" class="svelte-1p89qnn">Choose Model:</label> <select id="model-select" class="svelte-1p89qnn"></select> <!></div> <!> <!> <button class="btn primary svelte-1p89qnn">Load Model</button></div>');function ep(t,e){Et(e,!0);let r=qe(e,"selectedModel",15),i=qe(e,"gpuInfo",3,null),s=qe(e,"error",3,null);Rt(()=>Zt("ModelSelector"));var l=Jd(),f=F(D(l),2),d=F(D(f),2);Ta(d,21,()=>eo,Sa,(q,P)=>{var K=Hd(),ae=D(K),te={};ke(()=>{pe(ae,`${R(P).name??""} â ${R(P).size??""}`),te!==(te=R(P).id)&&(K.value=(K.__value=R(P).id)??"")}),X(q,K)});var v=F(d,2);{var h=q=>{const P=Xn(()=>eo.find(W=>W.id===r()));var K=Wu(),ae=Kt(K);{var te=W=>{var Z=Wd(),ve=D(Z);ke(()=>pe(ve,R(P).description)),X(W,Z)};Ee(ae,W=>{R(P)&&W(te)})}X(q,K)};Ee(v,q=>{r()&&q(h)})}var y=F(f,2);{var x=q=>{var P=Qd(),K=F(D(P),2),ae=D(K),te=F(D(ae)),W=D(te),Z=F(ae,2),ve=F(D(Z)),ne=D(ve),me=F(Z,2);{var Oe=xe=>{var Ce=$d(),B=F(D(Ce)),H=D(B);ke(()=>pe(H,i().device)),X(xe,Ce)};Ee(me,xe=>{i().device&&i().device!=="unknown"&&xe(Oe)})}var Re=F(me,2);{var ue=xe=>{var Ce=Yd(),B=F(D(Ce)),H=D(B);ke(()=>pe(H,i().description)),X(xe,Ce)};Ee(Re,xe=>{i().description&&i().description!=="unknown"&&xe(ue)})}var $=F(Re,2);{var re=xe=>{var Ce=Vd(),B=F(D(Ce)),H=D(B);ke(ce=>pe(H,ce),[()=>no(i().limits.maxBufferSize)]),X(xe,Ce)};Ee($,xe=>{var Ce;(Ce=i().limits)!=null&&Ce.maxBufferSize&&xe(re)})}var Ie=F($,2);{var we=xe=>{var Ce=Xd(),B=F(D(Ce)),H=D(B);ke(()=>pe(H,`${i().features.length??""} supported`)),X(xe,Ce)};Ee(Ie,xe=>{var Ce;(Ce=i().features)!=null&&Ce.length&&xe(we)})}ke(()=>{pe(W,i().vendor),pe(ne,i().architecture)}),X(q,P)};Ee(y,q=>{i()&&q(x)})}var b=F(y,2);{var _=q=>{var P=Zd(),K=D(P);ke(()=>pe(K,s())),X(q,P)};Ee(b,q=>{s()&&q(_)})}var j=F(b,2);j.__click=function(...q){var P;(P=e.onload)==null||P.apply(this,q)},ke(()=>j.disabled=s()),Yu(d,r),X(t,l),At()}jn(["click"]);var tp=J('<span class="progress-percent svelte-r5fnze"> </span>'),np=J('<div class="progress-bar svelte-r5fnze"><div class="progress-fill svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-sep svelte-r5fnze">/</span> <span class="progress-total svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span></div>',1),rp=J('<span class="progress-loaded svelte-r5fnze"> </span> <span class="progress-raw svelte-r5fnze" title="Exact bytes"> </span>',1),ap=J('<span class="progress-indeterminate svelte-r5fnze">downloadingâ¦</span>'),ip=J('<div class="progress-bar svelte-r5fnze"><div class="progress-fill indeterminate svelte-r5fnze"></div></div> <div class="progress-numbers svelte-r5fnze"><!></div>',1),sp=J('<div class="progress-card svelte-r5fnze"><div class="progress-header svelte-r5fnze"><span class="progress-file svelte-r5fnze"> </span> <!></div> <!></div>'),op=J('<div class="container center loading-container svelte-r5fnze"><p class="loading-msg svelte-r5fnze"> </p> <!></div>');function lp(t,e){Et(e,!0);let r=qe(e,"message",3,""),i=qe(e,"items",19,()=>[]);Rt(()=>Zt("LoadingProgress"));var s=op(),l=D(s),f=D(l),d=F(l,2);Ta(d,17,i,Sa,(v,h)=>{const y=Xn(()=>R(h).total?Ud(R(h).loaded||0,R(h).total):null);var x=sp(),b=D(x),_=D(b),j=D(_),q=F(_,2);{var P=W=>{var Z=tp(),ve=D(Z);ke(ne=>pe(ve,`${ne??""}%`),[()=>R(y).toFixed(1)]),X(W,Z)};Ee(q,W=>{R(y)!==null&&W(P)})}var K=F(b,2);{var ae=W=>{var Z=np(),ve=Kt(Z),ne=D(ve),me=F(ve,2),Oe=D(me),Re=D(Oe),ue=F(Oe,4),$=D(ue),re=F(ue,2),Ie=D(re);ke((we,xe,Ce,B,H)=>{Wi(ne,`width: ${we??""}%`),pe(Re,xe),pe($,Ce),pe(Ie,`(${B??""} / ${H??""} B)`)},[()=>Math.max(R(h).progress??0,.5).toFixed(1),()=>Ns(R(h).loaded||0),()=>Ns(R(h).total),()=>(R(h).loaded||0).toLocaleString(),()=>R(h).total.toLocaleString()]),X(W,Z)},te=W=>{var Z=ip(),ve=F(Kt(Z),2),ne=D(ve);{var me=Re=>{var ue=rp(),$=Kt(ue),re=D($),Ie=F($,2),we=D(Ie);ke((xe,Ce)=>{pe(re,xe),pe(we,`(${Ce??""} B)`)},[()=>Ns(R(h).loaded),()=>R(h).loaded.toLocaleString()]),X(Re,ue)},Oe=Re=>{var ue=ap();X(Re,ue)};Ee(ne,Re=>{R(h).loaded?Re(me):Re(Oe,!1)})}X(W,Z)};Ee(K,W=>{R(h).total?W(ae):W(te,!1)})}ke(()=>{Vu(_,"title",R(h).file),pe(j,R(h).file)}),X(v,x)}),ke(()=>pe(f,r())),X(t,s),At()}var up=J('<span class="thinking-tokens svelte-11gjw00"> </span>'),cp=J('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Thinking...</span> <!></div>'),fp=J('<div class="thinking-bar active svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> <span class="svelte-11gjw00">Preparing...</span></div>'),dp=J('<details class="thinking-details svelte-11gjw00"><summary class="thinking-summary svelte-11gjw00"><span class="thinking-icon svelte-11gjw00">ð­</span> Thinking <span class="thinking-token-count svelte-11gjw00"> </span></summary> <div class="thinking-content svelte-11gjw00"> </div></details>'),pp=J('<div class="gen-status svelte-11gjw00"><span class="gen-dots svelte-11gjw00"><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span><span class="svelte-11gjw00"></span></span> Generating...</div>'),hp=J('<span class="cursor svelte-11gjw00">|</span>'),vp=J(" <!>",1),gp=J('<!> <!> <div class="content svelte-11gjw00"><!></div>',1),mp=J('<div class="content svelte-11gjw00"> </div>'),yp=J('<div><div class="role svelte-11gjw00"> </div> <!></div>');function bp(t,e){Et(e,!0);let r=qe(e,"isLast",3,!1),i=qe(e,"isRunning",3,!1),s=qe(e,"generationPhase",3,null),l=qe(e,"numTokens",3,null);Rt(()=>Zt(`MessageBubble[${e.msg.role}]`));var f=yp(),d=D(f),v=D(d),h=F(d,2);{var y=b=>{var _=gp(),j=Kt(_);{var q=ne=>{var me=cp(),Oe=F(D(me),4);{var Re=ue=>{var $=up(),re=D($);ke(()=>pe(re,`${l()??""} tokens`)),X(ue,$)};Ee(Oe,ue=>{l()&&ue(Re)})}X(ne,me)},P=ne=>{var me=fp();X(ne,me)};Ee(j,ne=>{i()&&r()&&s()==="thinking"?ne(q):i()&&r()&&s()==="preparing"&&ne(P,1)})}var K=F(j,2);{var ae=ne=>{var me=dp(),Oe=D(me),Re=F(D(Oe),2),ue=D(Re),$=F(Oe,2),re=D($);ke(Ie=>{pe(ue,`${Ie??""} words`),pe(re,e.msg.thinking)},[()=>e.msg.thinking.split(/\s+/).length]),X(ne,me)};Ee(K,ne=>{e.msg.thinking&&ne(ae)})}var te=F(K,2),W=D(te);{var Z=ne=>{var me=pp();X(ne,me)},ve=ne=>{var me=vp(),Oe=Kt(me,!0),Re=F(Oe);{var ue=$=>{var re=hp();X($,re)};Ee(Re,$=>{i()&&r()&&$(ue)})}ke(()=>pe(Oe,e.msg.content)),X(ne,me)};Ee(W,ne=>{i()&&r()&&!e.msg.content&&s()!=="thinking"?ne(Z):ne(ve,!1)})}X(b,_)},x=b=>{var _=mp(),j=D(_);ke(()=>pe(j,e.msg.content)),X(b,_)};Ee(h,b=>{e.msg.role==="assistant"?b(y):b(x,!1)})}ke(()=>{vr(f,1,`bubble ${e.msg.role??""}`,"svelte-11gjw00"),pe(v,e.msg.role==="user"?"You":"AI")}),X(t,f),At()}var _p=J('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Device</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),wp=J('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Buffer</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),kp=J('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Max Compute Invocations</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),xp=J('<div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Workgroup Storage</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div>'),Sp=J('<span class="gpu-feature-tag svelte-1qmgokn"> </span>'),Tp=J('<div class="gpu-panel-item full svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn"> </div> <div class="gpu-panel-features svelte-1qmgokn"></div></div>'),Ep=J('<div class="gpu-panel svelte-1qmgokn"><div class="gpu-panel-grid svelte-1qmgokn"><div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Status</div> <div class="gpu-panel-value ok svelte-1qmgokn">Active</div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Vendor</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <div class="gpu-panel-item svelte-1qmgokn"><div class="gpu-panel-label svelte-1qmgokn">Architecture</div> <div class="gpu-panel-value svelte-1qmgokn"> </div></div> <!> <!> <!> <!> <!></div></div>');function Ap(t,e){Et(e,!0),Rt(()=>Zt("GpuPanel"));var r=Ep(),i=D(r),s=F(D(i),2),l=F(D(s),2),f=D(l),d=F(s,2),v=F(D(d),2),h=D(v),y=F(d,2);{var x=W=>{var Z=_p(),ve=F(D(Z),2),ne=D(ve);ke(()=>pe(ne,e.gpuInfo.device)),X(W,Z)};Ee(y,W=>{e.gpuInfo.device&&e.gpuInfo.device!=="unknown"&&W(x)})}var b=F(y,2);{var _=W=>{var Z=wp(),ve=F(D(Z),2),ne=D(ve);ke(me=>pe(ne,me),[()=>no(e.gpuInfo.limits.maxBufferSize)]),X(W,Z)};Ee(b,W=>{var Z;(Z=e.gpuInfo.limits)!=null&&Z.maxBufferSize&&W(_)})}var j=F(b,2);{var q=W=>{var Z=kp(),ve=F(D(Z),2),ne=D(ve);ke(()=>pe(ne,e.gpuInfo.limits.maxComputeInvocationsPerWorkgroup)),X(W,Z)};Ee(j,W=>{var Z;(Z=e.gpuInfo.limits)!=null&&Z.maxComputeInvocationsPerWorkgroup&&W(q)})}var P=F(j,2);{var K=W=>{var Z=xp(),ve=F(D(Z),2),ne=D(ve);ke(me=>pe(ne,me),[()=>no(e.gpuInfo.limits.maxComputeWorkgroupStorageSize)]),X(W,Z)};Ee(P,W=>{var Z;(Z=e.gpuInfo.limits)!=null&&Z.maxComputeWorkgroupStorageSize&&W(K)})}var ae=F(P,2);{var te=W=>{var Z=Tp(),ve=D(Z),ne=D(ve),me=F(ve,2);Ta(me,21,()=>e.gpuInfo.features,Sa,(Oe,Re)=>{var ue=Sp(),$=D(ue);ke(()=>pe($,R(Re))),X(Oe,ue)}),ke(()=>pe(ne,`Features (${e.gpuInfo.features.length??""})`)),X(W,Z)};Ee(ae,W=>{var Z;(Z=e.gpuInfo.features)!=null&&Z.length&&W(te)})}ke(()=>{pe(f,e.gpuInfo.vendor),pe(h,e.gpuInfo.architecture)}),X(t,r),At()}var Ip=J('<button class="gpu-badge svelte-1ktw27c"> </button>'),Cp=J('<span class="stats svelte-1ktw27c"> </span>'),Pp=J('<span class="stats preparing svelte-1ktw27c">preparing...</span>'),Rp=J('<span class="stats preparing svelte-1ktw27c"> </span>'),Op=J('<span class="stats svelte-1ktw27c"> </span>'),Dp=J('<div class="empty svelte-1ktw27c">Send a message to start chatting.</div>'),Mp=J('<button class="btn svelte-1ktw27c">Stop</button>'),Lp=J('<button class="btn primary svelte-1ktw27c">Send</button>'),Np=J('<div class="chat-wrapper svelte-1ktw27c"><header class="svelte-1ktw27c"><!> <!> <span class="spacer svelte-1ktw27c"></span> <button class="btn small svelte-1ktw27c">Reset</button></header> <!> <div class="messages svelte-1ktw27c"><!> <!></div> <div class="input-row svelte-1ktw27c"><textarea rows="1" placeholder="Type a message..." class="svelte-1ktw27c"></textarea> <!></div></div>');function qp(t,e){Et(e,!0),Rt(()=>Zt("ChatView"));let r=qe(e,"messages",19,()=>[]),i=qe(e,"isRunning",3,!1),s=qe(e,"tps",3,null),l=qe(e,"numTokens",3,null),f=qe(e,"generationPhase",3,null),d=qe(e,"gpuInfo",3,null),v=qe(e,"chatContainer",15),h=Pe(""),y=Pe(!1);function x(B){B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),b())}function b(){const B=R(h).trim();!B||i()||(G(h,""),e.onsend(B))}var _=Np(),j=D(_),q=D(j);{var P=B=>{var H=Ip();H.__click=()=>G(y,!R(y));var ce=D(H);ke(()=>pe(ce,`WebGPU ${R(y)?"â²":"â¼"}`)),X(B,H)};Ee(q,B=>{d()&&B(P)})}var K=F(q,2);{var ae=B=>{var H=Cp(),ce=D(H);ke((be,Me)=>pe(ce,`${l()??""} tokens in ${be??""}s
        (${Me??""} tok/s)`),[()=>(l()/s()).toFixed(1),()=>s().toFixed(1)]),X(B,H)},te=B=>{var H=Pp();X(B,H)},W=B=>{var H=Rp(),ce=D(H);ke(be=>pe(ce,`thinking... ${be??""}`),[()=>s()?`${s().toFixed(0)} tok/s`:""]),X(B,H)},Z=B=>{var H=Op(),ce=D(H);ke(be=>pe(ce,`${be??""} tok/s`),[()=>s().toFixed(1)]),X(B,H)};Ee(K,B=>{s()&&!i()?B(ae):i()&&f()==="preparing"?B(te,1):i()&&f()==="thinking"?B(W,2):s()&&i()&&B(Z,3)})}var ve=F(K,4);ve.__click=function(...B){var H;(H=e.onreset)==null||H.apply(this,B)};var ne=F(j,2);{var me=B=>{Ap(B,{get gpuInfo(){return d()}})};Ee(ne,B=>{R(y)&&d()&&B(me)})}var Oe=F(ne,2),Re=D(Oe);{var ue=B=>{var H=Dp();X(B,H)};Ee(Re,B=>{r().length===0&&B(ue)})}var $=F(Re,2);Ta($,17,r,Sa,(B,H,ce)=>{{let be=Xn(()=>ce===r().length-1);bp(B,{get msg(){return R(H)},get isLast(){return R(be)},get isRunning(){return i()},get generationPhase(){return f()},get numTokens(){return l()}})}}),Xu(Oe,B=>v(B),()=>v());var re=F(Oe,2),Ie=D(re);Ie.__keydown=x;var we=F(Ie,2);{var xe=B=>{var H=Mp();H.__click=function(...ce){var be;(be=e.onstop)==null||be.apply(this,ce)},X(B,H)},Ce=B=>{var H=Lp();H.__click=b,ke(ce=>H.disabled=ce,[()=>!R(h).trim()]),X(B,H)};Ee(we,B=>{i()?B(xe):B(Ce,!1)})}ke(()=>{ve.disabled=i(),Ie.disabled=i()}),So(Ie,()=>R(h),B=>G(h,B)),X(t,_),At()}jn(["click","keydown"]);var jp=J('<div class="container center svelte-1bi93vx"><h1 class="svelte-1bi93vx">WebGPU Not Available</h1> <p>Your browser does not support WebGPU. Please try Chrome 113+ or Edge 113+.</p></div>');function Bp(t,e){Et(e,!0);const r=!!navigator.gpu;let i=Pe(null),s=Pe(Vt(localStorage.getItem("selectedModel")||eo[0].id)),l=Pe(null),f=Pe(null),d=Pe(""),v=Pe(Vt([])),h=Pe(Vt([])),y=Pe(!1),x=Pe(null),b=Pe(null),_=Pe(null),j=Pe(null),q=Pe(null);Rt(()=>(G(i,new Worker(new URL("/me-ai/assets/worker-CsGlDG0A.js",import.meta.url),{type:"module"}),!0),R(i).postMessage({type:"check"}),R(i).addEventListener("message",ue=>{const $=ue.data;switch($.status){case"webgpu-info":G(j,$.data,!0);break;case"loading":G(l,"loading"),G(d,$.data,!0);break;case"initiate":G(v,[...R(v),$],!0);break;case"progress":G(v,R(v).map(re=>re.file===$.file?{...re,...$}:re),!0);break;case"done":G(v,R(v).filter(re=>re.file!==$.file),!0);break;case"ready":G(l,"ready");break;case"start":G(q,$.phase||"preparing",!0),G(h,[...R(h),{role:"assistant",content:"",thinking:""}],!0);break;case"phase":G(q,$.phase,!0);break;case"thinking":{G(x,$.tps,!0),G(b,$.numTokens,!0);const re=R(h)[R(h).length-1];G(h,[...R(h).slice(0,-1),{...re,thinking:(re.thinking||"")+$.content}],!0),P();break}case"thinking-done":{G(x,$.tps,!0),G(b,$.numTokens,!0);const re=R(h)[R(h).length-1];G(h,[...R(h).slice(0,-1),{...re,thinking:$.content}],!0);break}case"update":{G(x,$.tps,!0),G(b,$.numTokens,!0);const re=R(h)[R(h).length-1];G(h,[...R(h).slice(0,-1),{...re,content:re.content+$.output}],!0),P();break}case"complete":G(y,!1),G(q,null);break;case"error":G(f,$.data,!0),G(y,!1),G(q,null);break}}),()=>{var ue;return(ue=R(i))==null?void 0:ue.terminate()}));function P(){Fu().then(()=>{R(_)&&(R(_).scrollTop=R(_).scrollHeight)})}function K(){G(l,"loading"),localStorage.setItem("selectedModel",R(s)),R(i).postMessage({type:"load",modelId:R(s)})}async function ae(ue){if(!ue||R(y))return;G(h,[...R(h),{role:"user",content:ue}],!0),G(x,null),G(y,!0);let $=[];try{const Ie=/\b(email|mail|inbox|message|sent|sender|from|subject|unread|gmail)\b/i;let we;Ie.test(ue)?we=await jd(ue):we=await qd(),we&&($=[{role:"system",content:we}])}catch{}const re=R(h).map(Ie=>({role:Ie.role,content:Ie.content}));R(i).postMessage({type:"generate",data:[...$,...re]}),P()}function te(){R(i).postMessage({type:"interrupt"})}function W(){R(i).postMessage({type:"reset"}),G(h,[],!0),G(x,null),G(b,null)}var Z=Wu(),ve=Kt(Z);{var ne=ue=>{var $=jp();X(ue,$)},me=ue=>{ep(ue,{get gpuInfo(){return R(j)},get error(){return R(f)},onload:K,get selectedModel(){return R(s)},set selectedModel($){G(s,$,!0)}})},Oe=ue=>{lp(ue,{get message(){return R(d)},get items(){return R(v)}})},Re=ue=>{qp(ue,{get messages(){return R(h)},get isRunning(){return R(y)},get tps(){return R(x)},get numTokens(){return R(b)},get generationPhase(){return R(q)},get gpuInfo(){return R(j)},onsend:ae,onstop:te,onreset:W,get chatContainer(){return R(_)},set chatContainer($){G(_,$,!0)}})};Ee(ve,ue=>{r?R(l)===null?ue(me,1):R(l)==="loading"?ue(Oe,2):ue(Re,!1):ue(ne)})}X(t,Z),At()}const Cl="https://accounts.google.com/gsi/client",zp="https://www.googleapis.com/auth/gmail.readonly";let ro=null,Ki=null;function Fp(){return new Promise((t,e)=>{var s,l;if((l=(s=window.google)==null?void 0:s.accounts)!=null&&l.oauth2){t();return}const r=document.querySelector(`script[src="${Cl}"]`);if(r){r.addEventListener("load",()=>t()),r.addEventListener("error",()=>e(new Error("Failed to load Google Identity Services")));return}const i=document.createElement("script");i.src=Cl,i.async=!0,i.defer=!0,i.onload=()=>t(),i.onerror=()=>e(new Error("Failed to load Google Identity Services")),document.head.appendChild(i)})}async function Pl(t){await Fp(),ro=google.accounts.oauth2.initTokenClient({client_id:t,scope:zp,callback:e=>{Ki&&(Ki(e),Ki=null)}})}function Kp(){return new Promise((t,e)=>{if(!ro){e(new Error("Google Auth not initialized. Call initGoogleAuth first."));return}Ki=r=>{r.error?e(new Error(r.error_description||r.error)):t({access_token:r.access_token,expires_in:r.expires_in})},ro.requestAccessToken()})}function Up(t){return new Promise(e=>{var r,i;(i=(r=window.google)==null?void 0:r.accounts)!=null&&i.oauth2?google.accounts.oauth2.revoke(t,()=>e()):e()})}const Gp="https://gmail.googleapis.com/gmail/v1/users/me";function Hp(t){return{Authorization:`Bearer ${t}`}}async function rs(t,e){var i;const r=await fetch(`${Gp}${e}`,{headers:Hp(t)});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(((i=s.error)==null?void 0:i.message)||`Gmail API error: ${r.status}`)}return r.json()}function ec(t){return rs(t,"/profile")}function tc(t,{maxResults:e=20,pageToken:r,q:i}={}){const s=new URLSearchParams;return s.set("maxResults",String(e)),r&&s.set("pageToken",r),i&&s.set("q",i),rs(t,`/messages?${s}`)}function nc(t,e,r="full"){return rs(t,`/messages/${e}?format=${r}`)}function Wp(t,{startHistoryId:e,pageToken:r,maxResults:i=500}={}){const s=new URLSearchParams;return s.set("startHistoryId",e),s.set("maxResults",String(i)),s.append("historyTypes","messageAdded"),s.append("historyTypes","messageDeleted"),r&&s.set("pageToken",r),rs(t,`/history?${s}`)}function dr(t,e){var l;const r=((l=t==null?void 0:t.payload)==null?void 0:l.headers)||[],i=e.toLowerCase(),s=r.find(f=>f.name.toLowerCase()===i);return(s==null?void 0:s.value)||""}function ei(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;r&&(e+="=".repeat(4-r));const i=atob(e),s=Uint8Array.from(i,l=>l.charCodeAt(0));return new TextDecoder().decode(s)}function $p(t){var l,f,d;const e=t==null?void 0:t.payload;if(!e)return"";if((l=e.body)!=null&&l.data)return ei(e.body.data);const r=e.parts||[],i=$i(r,"text/plain");if((f=i==null?void 0:i.body)!=null&&f.data)return ei(i.body.data);const s=$i(r,"text/html");if((d=s==null?void 0:s.body)!=null&&d.data){const v=ei(s.body.data);return Vp(v)}return"(no body)"}function Yp(t){var s,l;const e=t==null?void 0:t.payload;if(!e)return null;if(e.mimeType==="text/html"&&((s=e.body)!=null&&s.data))return ei(e.body.data);const r=e.parts||[],i=$i(r,"text/html");return(l=i==null?void 0:i.body)!=null&&l.data?ei(i.body.data):null}function $i(t,e){for(const r of t){if(r.mimeType===e)return r;if(r.parts){const i=$i(r.parts,e);if(i)return i}}return null}function Vp(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script"))r.remove();return(e.body.textContent||"").replace(/\s+/g," ").trim()}catch{return t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&#x([0-9a-f]+);/gi,(e,r)=>String.fromCodePoint(parseInt(r,16))).replace(/&#(\d+);/g,(e,r)=>String.fromCodePoint(Number(r))).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/\s+/g," ").trim()}}const xt="gmail",Rl=8,rc=50,ac=100;async function Xp(t,{limit:e=rc,onProgress:r=()=>{},signal:i}={}){var f,d,v,h;const s=await Fe.syncState.get(xt);if(s!=null&&s.historyId)try{return await nh(t,s,r,i)}catch(y){if((f=y.message)!=null&&f.includes("404")||(d=y.message)!=null&&d.includes("notFound")||(v=y.message)!=null&&v.includes("Start history id")||(h=y.message)!=null&&h.includes("history_types"))r({phase:"info",message:"History expired, performing full re-sync..."}),await Fe.syncState.delete(xt);else throw y}return await eh(t,e===0?1/0:e,r,i)}async function Qp(t,{limit:e=rc,onProgress:r=()=>{},signal:i}={}){const s=await Fe.syncState.get(xt);return s!=null&&s.oldestPageToken?await th(t,s,e===0?1/0:e,r,i):(r({phase:"done",message:"All messages already synced"}),{added:0,errors:0})}async function Zp(){const t=await Fe.syncState.get(xt);return t?{synced:!0,totalItems:t.totalItems||0,lastSyncAt:t.lastSyncAt,historyId:t.historyId,hasMore:!!t.oldestPageToken}:{synced:!1,totalItems:0,lastSyncAt:null,hasMore:!1}}async function Jp(){await Fe.transaction("rw",[Fe.items,Fe.syncState],async()=>{await Fe.items.where("sourceType").equals(xt).delete(),await Fe.syncState.delete(xt)})}async function eh(t,e,r,i){r({phase:"counting",message:"Getting mailbox info..."}),Vr(i);const s=await ec(t);r({phase:"listing",message:"Listing messages...",current:0,total:Math.min(s.messagesTotal||e,e)});const l=[];let f,d=null;for(;l.length<e;){Vr(i);const x=e-l.length,b=await tc(t,{maxResults:Math.min(ac,x),pageToken:f}),_=(b.messages||[]).map(j=>j.id);if(l.push(..._),r({phase:"listing",message:`Listed ${l.length} messages...`,current:l.length,total:Math.min(s.messagesTotal||e,e)}),f=b.nextPageToken,!f||_.length===0)break}if(d=f||null,l.length===0)return await Fe.syncState.put({sourceType:xt,historyId:s.historyId,lastSyncAt:Date.now(),totalItems:0,oldestPageToken:null}),{added:0,deleted:0,errors:0};const{added:v,errors:h}=await ic(t,l,r,i),y=await Fe.items.where("sourceType").equals(xt).count();return await Fe.syncState.put({sourceType:xt,historyId:s.historyId,lastSyncAt:Date.now(),totalItems:y,oldestPageToken:d}),r({phase:"done",message:`Synced ${v} messages`,current:v,total:v}),{added:v,deleted:0,errors:h}}async function th(t,e,r,i,s){i({phase:"listing",message:"Loading more messages...",current:0}),Vr(s);const l=[];let f=e.oldestPageToken,d=null;for(;l.length<r;){Vr(s);const x=r-l.length,b=await tc(t,{maxResults:Math.min(ac,x),pageToken:f}),_=(b.messages||[]).map(j=>j.id);if(l.push(..._),i({phase:"listing",message:`Listed ${l.length} more messages...`,current:l.length}),f=b.nextPageToken,!f||_.length===0)break}if(d=f||null,l.length===0)return await Fe.syncState.update(xt,{oldestPageToken:null,lastSyncAt:Date.now()}),i({phase:"done",message:"All messages synced"}),{added:0,errors:0};const{added:v,errors:h}=await ic(t,l,i,s),y=await Fe.items.where("sourceType").equals(xt).count();return await Fe.syncState.update(xt,{totalItems:y,lastSyncAt:Date.now(),oldestPageToken:d}),i({phase:"done",message:d?`Downloaded ${v} more (more available)`:`Downloaded ${v} more (all synced)`,current:y,total:y}),{added:v,errors:h}}async function nh(t,e,r,i){r({phase:"syncing",message:"Checking for changes..."}),Vr(i);let s=0,l=0,f=0,d,v=e.historyId;do{Vr(i);const y=await Wp(t,{startHistoryId:e.historyId,pageToken:d});if(v=y.historyId||v,d=y.nextPageToken,!!y.history){for(const x of y.history){if(x.messagesAdded){const b=x.messagesAdded.map(j=>j.message.id),_=[...new Set(b.filter(j=>j))];if(_.length>0){const j=await Promise.allSettled(_.map(P=>nc(t,P))),q=[];for(const P of j)P.status==="fulfilled"?q.push(sc(P.value)):f++;q.length>0&&(await Fe.items.bulkPut(q),await oc(q),s+=q.length)}}if(x.messagesDeleted){const b=x.messagesDeleted.map(_=>Qu(xt,_.message.id)).filter(_=>_);b.length>0&&(await Fe.items.bulkDelete(b),l+=b.length)}}r({phase:"syncing",message:`Changes: +${s} -${l}`,current:s+l})}}while(d);const h=await Fe.items.where("sourceType").equals(xt).count();return await Fe.syncState.put({sourceType:xt,historyId:v,lastSyncAt:Date.now(),totalItems:h,oldestPageToken:e.oldestPageToken}),r({phase:"done",message:s===0&&l===0?"Already up to date":`Synced: +${s} -${l}`,current:h,total:h}),{added:s,deleted:l,errors:f}}async function ic(t,e,r,i){r({phase:"downloading",message:"Downloading messages...",current:0,total:e.length});let s=0,l=0;for(let f=0;f<e.length;f+=Rl){Vr(i);const d=e.slice(f,f+Rl),v=await Promise.allSettled(d.map(y=>nc(t,y))),h=[];for(const y of v)y.status==="fulfilled"?h.push(sc(y.value)):l++;h.length>0&&(await Fe.items.bulkPut(h),await oc(h)),s+=h.length,r({phase:"downloading",message:`Downloaded ${s} of ${e.length} messages`,current:s,total:e.length})}return{added:s,errors:l}}function sc(t){const e=dr(t,"From"),r=dr(t,"To"),i=dr(t,"Cc"),s=dr(t,"Subject")||"(no subject)",l=dr(t,"Date"),f=dr(t,"Message-ID"),d=dr(t,"In-Reply-To"),v=dr(t,"References");let h;try{h=l?new Date(l).getTime():t.internalDate?Number(t.internalDate):Date.now()}catch{h=Date.now()}return{id:Qu(xt,t.id),sourceType:xt,sourceId:t.id,threadKey:`gmail:${t.threadId}`,type:"email",from:e,to:r,cc:i,subject:s,snippet:t.snippet||"",body:$p(t),htmlBody:Yp(t),date:h,labels:t.labelIds||[],messageId:f,inReplyTo:d,references:v,raw:t,syncedAt:Date.now()}}async function oc(t){const e=new Map;for(const r of t)for(const i of[r.from,r.to,r.cc]){if(!i)continue;const s=i.split(",").map(l=>l.trim()).filter(Boolean);for(const l of s){const f=rh(l);f&&!e.has(f.email)&&e.set(f.email,{...f,date:r.date})}}for(const[r,{name:i,date:s}]of e)try{const l=await Fe.contacts.where("email").equals(r).first();if(l){const f={};i&&!l.name&&(f.name=i),s>(l.lastSeen||0)&&(f.lastSeen=s),Object.keys(f).length>0&&await Fe.contacts.update(l.id,f)}else await Fe.contacts.add({email:r,name:i||"",firstSeen:s,lastSeen:s})}catch{}}function rh(t){if(!t)return null;const e=t.match(/<([^>]+)>/);if(e){const i=e[1].toLowerCase().trim(),s=t.slice(0,t.indexOf("<")).replace(/"/g,"").trim();return{email:i,name:s}}const r=t.toLowerCase().trim();return r.includes("@")?{email:r,name:""}:null}function Vr(t){if(t!=null&&t.aborted)throw new DOMException("Sync was cancelled","AbortError")}var ah=J(`<div class="setup-container svelte-1mdd5r2"><div class="setup-card svelte-1mdd5r2"><h2 class="svelte-1mdd5r2">Connect Gmail</h2> <p class="setup-intro svelte-1mdd5r2">To access Gmail from the browser, you need a Google Cloud OAuth Client ID.
      This stays in your browser â no data is sent to any server.</p> <div class="setup-steps svelte-1mdd5r2"><div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">1</span> <div><a href="https://console.cloud.google.com/projectcreate" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create a Google Cloud project</a> (or use an existing one)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">2</span> <div><a href="https://console.cloud.google.com/apis/library/gmail.googleapis.com" target="_blank" rel="noopener" class="svelte-1mdd5r2">Enable the Gmail API</a> for your project</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">3</span> <div><a href="https://console.cloud.google.com/apis/credentials/oauthclient" target="_blank" rel="noopener" class="svelte-1mdd5r2">Create an OAuth 2.0 Client ID</a> (type: <strong>Web application</strong>)</div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">4</span> <div><p class="step-label svelte-1mdd5r2">Add these URLs to your OAuth client. Click to copy:</p> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized JavaScript origins (no trailing slash):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <div class="url-section svelte-1mdd5r2"><span class="url-section-title svelte-1mdd5r2">Authorized redirect URIs (add all three):</span> <div class="url-chips svelte-1mdd5r2"><button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button> <button class="url-chip svelte-1mdd5r2"><code class="svelte-1mdd5r2"></code> <span class="copy-icon svelte-1mdd5r2"> </span></button></div></div> <p class="step-hint svelte-1mdd5r2">Both localhost (dev) and GitHub Pages (prod) are needed. The /me-ai/ path
            is required because the app is deployed at a subpath. Changes may take a
            few minutes to propagate after saving.</p></div></div> <div class="step svelte-1mdd5r2"><span class="step-num svelte-1mdd5r2">5</span> <div>Copy the <strong>Client ID</strong> and paste it below</div></div></div> <div class="client-id-form svelte-1mdd5r2"><input type="text" placeholder="xxxx.apps.googleusercontent.com" class="svelte-1mdd5r2"/> <button class="btn primary svelte-1mdd5r2">Save</button></div></div></div>`);function ih(t,e){Et(e,!0);let r=qe(e,"clientIdInput",15);Rt(()=>Zt("SetupGuide"));let i=Pe(null);async function s(De){try{await navigator.clipboard.writeText(De),G(i,De,!0),setTimeout(()=>{G(i,null)},1500)}catch{const Se=document.createElement("input");Se.value=De,document.body.appendChild(Se),Se.select(),document.execCommand("copy"),document.body.removeChild(Se),G(i,De,!0),setTimeout(()=>{G(i,null)},1500)}}const l="http://localhost:5173",f="https://cypherkitty.github.io",d="https://cypherkitty.github.io/me-ai/";var v=ah(),h=D(v),y=F(D(h),4),x=F(D(y),6),b=F(D(x),2),_=F(D(b),2),j=F(D(_),2),q=D(j);q.__click=()=>s(l);var P=D(q);P.textContent="http://localhost:5173";var K=F(P,2),ae=D(K),te=F(q,2);te.__click=()=>s(f);var W=D(te);W.textContent="https://cypherkitty.github.io";var Z=F(W,2),ve=D(Z),ne=F(_,2),me=F(D(ne),2),Oe=D(me);Oe.__click=()=>s(l);var Re=D(Oe);Re.textContent="http://localhost:5173";var ue=F(Re,2),$=D(ue),re=F(Oe,2);re.__click=()=>s(f);var Ie=D(re);Ie.textContent="https://cypherkitty.github.io";var we=F(Ie,2),xe=D(we),Ce=F(re,2);Ce.__click=()=>s(d);var B=D(Ce);B.textContent="https://cypherkitty.github.io/me-ai/";var H=F(B,2),ce=D(H),be=F(y,2),Me=D(be);Me.__keydown=De=>De.key==="Enter"&&e.onsave();var Le=F(Me,2);Le.__click=function(...De){var Se;(Se=e.onsave)==null||Se.apply(this,De)},ke(De=>{pe(ae,R(i)===l?"â":"â§"),pe(ve,R(i)===f?"â":"â§"),pe($,R(i)===l?"â":"â§"),pe(xe,R(i)===f?"â":"â§"),pe(ce,R(i)===d?"â":"â§"),Le.disabled=De},[()=>!r().trim()]),So(Me,r),X(t,v),At()}jn(["click","keydown"]);function sh(t){const e=t||"";if(e.includes("has not been used in project")||e.includes("is disabled")){const r=e.match(/project\s+(\d+)/),i=r==null?void 0:r[1];return{title:"Gmail API not enabled",description:"The Gmail API needs to be enabled in your Google Cloud project before it can be used.",fix:"Click the link below to enable it, then wait ~30 seconds and retry.",link:{url:i?`https://console.developers.google.com/apis/api/gmail.googleapis.com/overview?project=${i}`:"https://console.cloud.google.com/apis/library/gmail.googleapis.com",label:"Enable Gmail API"}}}return e.includes("Invalid Credentials")||e.includes("401")||e.includes("invalid_token")?{title:"Session expired",description:"Your access token has expired or is invalid.",fix:"Sign out and sign in again to get a fresh token.",action:"signout"}:e.includes("insufficient")&&e.includes("scope")?{title:"Insufficient permissions",description:"The app doesn't have the required permissions to access Gmail.",fix:"Sign out, sign in again, and make sure to grant the Gmail read permission in the consent screen.",action:"signout"}:e.includes("access_denied")||e.includes("user_denied")?{title:"Access denied",description:"You declined the Gmail permission request.",fix:"Click 'Sign in with Google' again and grant the Gmail read-only permission when prompted."}:e.includes("popup")||e.includes("blocked")?{title:"Popup blocked",description:"The sign-in popup was blocked by your browser.",fix:"Allow popups for localhost:5173 in your browser settings, then try again."}:e.includes("Rate Limit")||e.includes("429")||e.includes("quota")?{title:"Rate limit exceeded",description:"Too many requests to the Gmail API.",fix:"Wait a minute and try again."}:e.includes("Failed to fetch")||e.includes("NetworkError")||e.includes("network")?{title:"Network error",description:"Could not reach the Gmail API.",fix:"Check your internet connection and try again."}:{title:"Something went wrong",description:e,fix:null}}var oh=J('<div class="error-card-header svelte-14buhqq"><div class="error-card-title svelte-14buhqq"> </div> <button class="error-dismiss svelte-14buhqq">â</button></div>'),lh=J('<div class="error-card-title svelte-14buhqq"> </div>'),uh=J('<p class="error-card-fix svelte-14buhqq"> </p>'),ch=J('<a class="error-card-link svelte-14buhqq" target="_blank" rel="noopener"> </a>'),fh=J('<button class="btn small error-action svelte-14buhqq">Sign Out & Retry</button>'),dh=J('<div class="error-card svelte-14buhqq"><!> <p class="error-card-desc svelte-14buhqq"> </p> <!> <!> <!></div>');function lc(t,e){Et(e,!0);let r=qe(e,"ondismiss",3,null),i=qe(e,"onsignout",3,null),s=Xn(()=>sh(e.error));Rt(()=>Zt("ErrorCard"));var l=dh(),f=D(l);{var d=K=>{var ae=oh(),te=D(ae),W=D(te),Z=F(te,2);Z.__click=function(...ve){var ne;(ne=r())==null||ne.apply(this,ve)},ke(()=>pe(W,R(s).title)),X(K,ae)},v=K=>{var ae=lh(),te=D(ae);ke(()=>pe(te,R(s).title)),X(K,ae)};Ee(f,K=>{r()?K(d):K(v,!1)})}var h=F(f,2),y=D(h),x=F(h,2);{var b=K=>{var ae=uh(),te=D(ae);ke(()=>pe(te,R(s).fix)),X(K,ae)};Ee(x,K=>{R(s).fix&&K(b)})}var _=F(x,2);{var j=K=>{var ae=ch(),te=D(ae);ke(()=>{Vu(ae,"href",R(s).link.url),pe(te,`${R(s).link.label??""} â`)}),X(K,ae)};Ee(_,K=>{R(s).link&&K(j)})}var q=F(_,2);{var P=K=>{var ae=fh();ae.__click=function(...te){var W;(W=i())==null||W.apply(this,te)},X(K,ae)};Ee(q,K=>{R(s).action==="signout"&&i()&&K(P)})}ke(()=>pe(y,R(s).description)),X(t,l),At()}jn(["click"]);var ph=J('<span class="spinner svelte-nyqevv"></span> Signing in...',1),hh=Hu('<svg viewBox="0 0 24 24" width="18" height="18" class="google-icon svelte-nyqevv"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg> Sign in with Google',1),vh=J(`<div class="auth-container svelte-nyqevv"><div class="auth-card svelte-nyqevv"><h2 class="svelte-nyqevv">Gmail Dashboard</h2> <p class="auth-desc svelte-nyqevv">Sign in with your Google account to browse your Gmail messages.
      Read-only access â nothing is modified.</p> <!> <button class="btn google-btn svelte-nyqevv"><!></button> <div class="client-id-info svelte-nyqevv"><span class="client-id-label">Client ID:</span> <span class="client-id-value svelte-nyqevv"> </span> <button class="btn-link svelte-nyqevv">Change</button></div></div></div>`);function gh(t,e){Et(e,!0);let r=qe(e,"error",3,null),i=qe(e,"loadingAuth",3,!1);Rt(()=>Zt("AuthCard"));var s=vh(),l=D(s),f=F(D(l),4);{var d=P=>{lc(P,{get error(){return r()},get onsignout(){return e.onsignout}})};Ee(f,P=>{r()&&P(d)})}var v=F(f,2);v.__click=function(...P){var K;(K=e.onsignin)==null||K.apply(this,P)};var h=D(v);{var y=P=>{var K=ph();X(P,K)},x=P=>{var K=hh();X(P,K)};Ee(h,P=>{i()?P(y):P(x,!1)})}var b=F(v,2),_=F(D(b),2),j=D(_),q=F(_,2);q.__click=function(...P){var K;(K=e.onclear)==null||K.apply(this,P)},ke(P=>{v.disabled=i(),pe(j,`${P??""}...`)},[()=>e.clientId.slice(0,20)]),X(t,s),At()}jn(["click"]);function To(t){if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}catch{return t}}function uc(t){if(!t)return"Unknown";const e=t.match(/^"?([^"<]+)"?\s*</);return e?e[1].trim():t.split("@")[0]}function cc(t){return uc(t).charAt(0).toUpperCase()}var mh=J('<span class="profile-email svelte-1w180uc">Loading profile...</span>'),yh=J('<span class="profile-email svelte-1w180uc"> </span> <span class="profile-stats svelte-1w180uc"> </span>',1),bh=J('<div class="profile-card svelte-1w180uc"><div class="profile-avatar svelte-1w180uc"> </div> <div class="profile-info svelte-1w180uc"><!></div> <button class="btn small svelte-1w180uc">Sign Out</button></div>');function _h(t,e){Et(e,!0);let r=qe(e,"profile",3,null),i=qe(e,"loadingProfile",3,!1);Rt(()=>Zt("ProfileCard"));var s=bh(),l=D(s),f=D(l),d=F(l,2),v=D(d);{var h=b=>{var _=mh();X(b,_)},y=b=>{var _=yh(),j=Kt(_),q=D(j),P=F(j,2),K=D(P);ke((ae,te)=>{pe(q,r().emailAddress),pe(K,`${ae??""} messages
        Â· ${te??""} threads`)},[()=>{var ae;return((ae=r().messagesTotal)==null?void 0:ae.toLocaleString())||"?"},()=>{var ae;return((ae=r().threadsTotal)==null?void 0:ae.toLocaleString())||"?"}]),X(b,_)};Ee(v,b=>{i()?b(h):r()&&b(y,1)})}var x=F(d,2);x.__click=function(...b){var _;(_=e.onsignout)==null||_.apply(this,b)},ke(b=>pe(f,b),[()=>r()?cc(r().emailAddress):"?"]),X(t,s),At()}jn(["click"]);var wh=J('<span class="spinner svelte-1ds3j4k"></span>'),kh=Hu('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m0 0a9 9 0 0 1 9-9m-9 9a9 9 0 0 0 9 9" class="svelte-1ds3j4k"></path></svg>'),xh=J('<span class="sync-meta svelte-1ds3j4k"> <!></span>'),Sh=J('<span class="sync-meta svelte-1ds3j4k">Not synced yet</span>'),Th=J('<button class="btn-icon svelte-1ds3j4k" title="Clear local data"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ds3j4k"><path d="M3 6h18M8 6V4h8v2m1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z" class="svelte-1ds3j4k"></path></svg></button>'),Eh=J('<option class="svelte-1ds3j4k"> </option>'),Ah=J('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),Ih=J('<button class="btn sync-btn svelte-1ds3j4k"> </button> <!>',1),Ch=J('<button class="btn sync-btn primary svelte-1ds3j4k"> </button>'),Ph=J('<div class="sync-progress svelte-1ds3j4k"><div class="progress-bar svelte-1ds3j4k"><div></div></div> <span class="progress-text svelte-1ds3j4k"> </span></div>'),Rh=J('<div class="clear-confirm svelte-1ds3j4k"><span class="svelte-1ds3j4k">Delete all locally stored emails?</span> <div class="clear-actions svelte-1ds3j4k"><button class="btn small svelte-1ds3j4k">Cancel</button> <button class="btn small danger svelte-1ds3j4k">Delete</button></div></div>'),Oh=J('<div class="sync-card svelte-1ds3j4k"><div class="sync-header svelte-1ds3j4k"><div class="sync-icon svelte-1ds3j4k"><!></div> <div class="sync-info svelte-1ds3j4k"><span class="sync-title svelte-1ds3j4k">Local Storage</span> <!></div> <div class="sync-actions svelte-1ds3j4k"><!></div></div> <div class="sync-controls svelte-1ds3j4k"><div class="limit-group svelte-1ds3j4k"><label class="limit-label svelte-1ds3j4k" for="sync-limit">Batch:</label> <select id="sync-limit" class="limit-select svelte-1ds3j4k"></select></div> <div class="sync-buttons svelte-1ds3j4k"><!></div></div> <!> <!></div>');function Dh(t,e){Et(e,!0),Rt(()=>Zt("SyncStatus"));let r=qe(e,"syncStatus",3,null),i=qe(e,"syncProgress",3,null),s=qe(e,"isSyncing",3,!1),l=Pe(!1),f=Pe(50);const d=[{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:0,label:"All"}];function v(B){if(!B)return"never";const H=Math.floor((Date.now()-B)/1e3);if(H<60)return"just now";const ce=Math.floor(H/60);if(ce<60)return`${ce}m ago`;const be=Math.floor(ce/60);return be<24?`${be}h ago`:`${Math.floor(be/24)}d ago`}function h(){var B,H;return!((B=i())!=null&&B.total)||!((H=i())!=null&&H.current)?0:Math.round(i().current/i().total*100)}var y=Oh(),x=D(y),b=D(x),_=D(b);{var j=B=>{var H=wh();X(B,H)},q=B=>{var H=kh();X(B,H)};Ee(_,B=>{s()?B(j):B(q,!1)})}var P=F(b,2),K=F(D(P),2);{var ae=B=>{var H=xh(),ce=D(H),be=F(ce);{var Me=De=>{var Se=_l("Â· more available");X(De,Se)},Le=De=>{var Se=_l("Â· all synced");X(De,Se)};Ee(be,De=>{r().hasMore?De(Me):De(Le,!1)})}ke((De,Se)=>pe(ce,`${De??""} emails stored
          Â· synced ${Se??""} `),[()=>r().totalItems.toLocaleString(),()=>v(r().lastSyncAt)]),X(B,H)},te=B=>{var H=Sh();X(B,H)};Ee(K,B=>{var H;(H=r())!=null&&H.synced?B(ae):B(te,!1)})}var W=F(P,2),Z=D(W);{var ve=B=>{var H=Th();H.__click=()=>G(l,!R(l)),X(B,H)};Ee(Z,B=>{var H;(H=r())!=null&&H.synced&&!s()&&B(ve)})}var ne=F(x,2),me=D(ne),Oe=F(D(me),2);Ta(Oe,21,()=>d,Sa,(B,H)=>{var ce=Eh(),be=D(ce),Me={};ke(()=>{pe(be,R(H).label),Me!==(Me=R(H).value)&&(ce.value=(ce.__value=R(H).value)??"")}),X(B,ce)});var Re=F(me,2),ue=D(Re);{var $=B=>{var H=Ih(),ce=Kt(H);ce.__click=()=>e.onsync(R(f));var be=D(ce),Me=F(ce,2);{var Le=De=>{var Se=Ah();Se.__click=()=>e.onsyncmore(R(f));var nt=D(Se);ke(()=>{Se.disabled=s(),pe(nt,s()?"Loading...":"Sync More")}),X(De,Se)};Ee(Me,De=>{r().hasMore&&De(Le)})}ke(()=>{ce.disabled=s(),pe(be,s()?"Syncing...":"Sync New")}),X(B,H)},re=B=>{var H=Ch();H.__click=()=>e.onsync(R(f));var ce=D(H);ke(()=>{H.disabled=s(),pe(ce,s()?"Syncing...":"Download Emails")}),X(B,H)};Ee(ue,B=>{var H;(H=r())!=null&&H.synced?B($):B(re,!1)})}var Ie=F(ne,2);{var we=B=>{var H=Ph(),ce=D(H),be=D(ce);let Me,Le;var De=F(ce,2),Se=D(De);ke(nt=>{Me=vr(be,1,"progress-fill svelte-1ds3j4k",null,Me,{indeterminate:!i().total}),Le=Wi(be,"",Le,nt),pe(Se,i().message||"Syncing...")},[()=>({width:`${h()??""}%`})]),X(B,H)};Ee(Ie,B=>{s()&&i()&&B(we)})}var xe=F(Ie,2);{var Ce=B=>{var H=Rh(),ce=F(D(H),2),be=D(ce);be.__click=()=>G(l,!1);var Me=F(be,2);Me.__click=()=>{e.onclear(),G(l,!1)},X(B,H)};Ee(xe,B=>{R(l)&&B(Ce)})}ke(()=>Oe.disabled=s()),Yu(Oe,()=>R(f),B=>G(f,B)),X(t,y),At()}jn(["click"]);var Mh=J('<button class="message-row svelte-y2uamw"><div class="msg-avatar svelte-y2uamw"> </div> <div class="msg-body svelte-y2uamw"><div class="msg-top svelte-y2uamw"><span class="msg-from svelte-y2uamw"> </span> <span class="msg-date svelte-y2uamw"> </span></div> <div class="msg-subject svelte-y2uamw"> </div> <div class="msg-snippet svelte-y2uamw"> </div></div></button>'),Lh=J('<div class="message-list svelte-y2uamw"></div>');function Nh(t,e){Et(e,!0);let r=qe(e,"messages",19,()=>[]);Rt(()=>Zt("MessageList"));var i=Lh();Ta(i,21,r,Sa,(s,l)=>{var f=Mh();f.__click=()=>e.onselect(R(l));var d=D(f),v=D(d),h=F(d,2),y=D(h),x=D(y),b=D(x),_=F(x,2),j=D(_),q=F(y,2),P=D(q),K=F(q,2),ae=D(K);ke((te,W,Z)=>{pe(v,te),pe(b,W),pe(j,Z),pe(P,R(l).subject),pe(ae,R(l).snippet)},[()=>cc(R(l).from),()=>uc(R(l).from),()=>To(R(l).date)]),X(s,f)}),X(t,i),At()}jn(["click"]);function Eo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Zr=Eo();function fc(t){Zr=t}var Dr={exec:()=>null};function Ye(t,e=""){let r=typeof t=="string"?t:t.source,i={replace:(s,l)=>{let f=typeof l=="string"?l:l.source;return f=f.replace(Lt.caret,"$1"),r=r.replace(s,f),i},getRegex:()=>new RegExp(r,e)};return i}var qh=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Lt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}>`)},jh=/^(?:[ \t]*(?:\n|$))+/,Bh=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,zh=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Fh=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ao=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,dc=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,pc=Ye(dc).replace(/bull/g,Ao).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Kh=Ye(dc).replace(/bull/g,Ao).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Io=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Uh=/^[^\n]+/,Co=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Gh=Ye(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Co).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Hh=Ye(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ao).getRegex(),as="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Po=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Wh=Ye("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Po).replace("tag",as).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),hc=Ye(Io).replace("hr",fi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",as).getRegex(),$h=Ye(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",hc).getRegex(),Ro={blockquote:$h,code:Bh,def:Gh,fences:zh,heading:Fh,hr:fi,html:Wh,lheading:pc,list:Hh,newline:jh,paragraph:hc,table:Dr,text:Uh},Ol=Ye("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",as).getRegex(),Yh={...Ro,lheading:Kh,table:Ol,paragraph:Ye(Io).replace("hr",fi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ol).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",as).getRegex()},Vh={...Ro,html:Ye(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Po).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ye(Io).replace("hr",fi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",pc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Xh=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Qh=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,vc=/^( {2,}|\\)\n(?!\s*$)/,Zh=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,is=/[\p{P}\p{S}]/u,Oo=/[\s\p{P}\p{S}]/u,gc=/[^\s\p{P}\p{S}]/u,Jh=Ye(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Oo).getRegex(),mc=/(?!~)[\p{P}\p{S}]/u,ev=/(?!~)[\s\p{P}\p{S}]/u,tv=/(?:[^\s\p{P}\p{S}]|~)/u,yc=/(?![*_])[\p{P}\p{S}]/u,nv=/(?![*_])[\s\p{P}\p{S}]/u,rv=/(?:[^\s\p{P}\p{S}]|[*_])/u,av=Ye(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",qh?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),bc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,iv=Ye(bc,"u").replace(/punct/g,is).getRegex(),sv=Ye(bc,"u").replace(/punct/g,mc).getRegex(),_c="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ov=Ye(_c,"gu").replace(/notPunctSpace/g,gc).replace(/punctSpace/g,Oo).replace(/punct/g,is).getRegex(),lv=Ye(_c,"gu").replace(/notPunctSpace/g,tv).replace(/punctSpace/g,ev).replace(/punct/g,mc).getRegex(),uv=Ye("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gc).replace(/punctSpace/g,Oo).replace(/punct/g,is).getRegex(),cv=Ye(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,yc).getRegex(),fv="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",dv=Ye(fv,"gu").replace(/notPunctSpace/g,rv).replace(/punctSpace/g,nv).replace(/punct/g,yc).getRegex(),pv=Ye(/\\(punct)/,"gu").replace(/punct/g,is).getRegex(),hv=Ye(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),vv=Ye(Po).replace("(?:-->|$)","-->").getRegex(),gv=Ye("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",vv).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yi=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,mv=Ye(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Yi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wc=Ye(/^!?\[(label)\]\[(ref)\]/).replace("label",Yi).replace("ref",Co).getRegex(),kc=Ye(/^!?\[(ref)\](?:\[\])?/).replace("ref",Co).getRegex(),yv=Ye("reflink|nolink(?!\\()","g").replace("reflink",wc).replace("nolink",kc).getRegex(),Dl=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Do={_backpedal:Dr,anyPunctuation:pv,autolink:hv,blockSkip:av,br:vc,code:Qh,del:Dr,delLDelim:Dr,delRDelim:Dr,emStrongLDelim:iv,emStrongRDelimAst:ov,emStrongRDelimUnd:uv,escape:Xh,link:mv,nolink:kc,punctuation:Jh,reflink:wc,reflinkSearch:yv,tag:gv,text:Zh,url:Dr},bv={...Do,link:Ye(/^!?\[(label)\]\((.*?)\)/).replace("label",Yi).getRegex(),reflink:Ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yi).getRegex()},ao={...Do,emStrongRDelimAst:lv,emStrongLDelim:sv,delLDelim:cv,delRDelim:dv,url:Ye(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Dl).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ye(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Dl).getRegex()},_v={...ao,br:Ye(vc).replace("{2,}","*").getRegex(),text:Ye(ao.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Mi={normal:Ro,gfm:Yh,pedantic:Vh},Ka={normal:Do,gfm:ao,breaks:_v,pedantic:bv},wv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ml=t=>wv[t];function Gn(t,e){if(e){if(Lt.escapeTest.test(t))return t.replace(Lt.escapeReplace,Ml)}else if(Lt.escapeTestNoEncode.test(t))return t.replace(Lt.escapeReplaceNoEncode,Ml);return t}function Ll(t){try{t=encodeURI(t).replace(Lt.percentDecode,"%")}catch{return null}return t}function Nl(t,e){var l;let r=t.replace(Lt.findPipe,(f,d,v)=>{let h=!1,y=d;for(;--y>=0&&v[y]==="\\";)h=!h;return h?"|":" |"}),i=r.split(Lt.splitPipe),s=0;if(i[0].trim()||i.shift(),i.length>0&&!((l=i.at(-1))!=null&&l.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(Lt.slashPipe,"|");return i}function Ua(t,e,r){let i=t.length;if(i===0)return"";let s=0;for(;s<i&&t.charAt(i-s-1)===e;)s++;return t.slice(0,i-s)}function kv(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function xv(t,e=0){let r=e,i="";for(let s of t)if(s==="	"){let l=4-r%4;i+=" ".repeat(l),r+=l}else i+=s,r++;return i}function ql(t,e,r,i,s){let l=e.href,f=e.title||null,d=t[1].replace(s.other.outputLinkReplace,"$1");i.state.inLink=!0;let v={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:l,title:f,text:d,tokens:i.inlineTokens(d)};return i.state.inLink=!1,v}function Sv(t,e,r){let i=t.match(r.other.indentCodeCompensation);if(i===null)return e;let s=i[1];return e.split(`
`).map(l=>{let f=l.match(r.other.beginningSpace);if(f===null)return l;let[d]=f;return d.length>=s.length?l.slice(s.length):l}).join(`
`)}var Vi=class{constructor(t){Ke(this,"options");Ke(this,"rules");Ke(this,"lexer");this.options=t||Zr}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ua(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],i=Sv(r,e[3]||"",this.rules);return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(this.rules.other.endingHash.test(r)){let i=Ua(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ua(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=Ua(e[0],`
`).split(`
`),i="",s="",l=[];for(;r.length>0;){let f=!1,d=[],v;for(v=0;v<r.length;v++)if(this.rules.other.blockquoteStart.test(r[v]))d.push(r[v]),f=!0;else if(!f)d.push(r[v]);else break;r=r.slice(v);let h=d.join(`
`),y=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${h}`:h,s=s?`${s}
${y}`:y;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(y,l,!0),this.lexer.state.top=x,r.length===0)break;let b=l.at(-1);if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){let _=b,j=_.raw+`
`+r.join(`
`),q=this.blockquote(j);l[l.length-1]=q,i=i.substring(0,i.length-_.raw.length)+q.raw,s=s.substring(0,s.length-_.text.length)+q.text;break}else if((b==null?void 0:b.type)==="list"){let _=b,j=_.raw+`
`+r.join(`
`),q=this.list(j);l[l.length-1]=q,i=i.substring(0,i.length-b.raw.length)+q.raw,s=s.substring(0,s.length-_.raw.length)+q.raw,r=j.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:l,text:s}}}list(t){var r,i;let e=this.rules.block.list.exec(t);if(e){let s=e[1].trim(),l=s.length>1,f={type:"list",raw:"",ordered:l,start:l?+s.slice(0,-1):"",loose:!1,items:[]};s=l?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=l?s:"[*+-]");let d=this.rules.other.listItemRegex(s),v=!1;for(;t;){let y=!1,x="",b="";if(!(e=d.exec(t))||this.rules.block.hr.test(t))break;x=e[0],t=t.substring(x.length);let _=xv(e[2].split(`
`,1)[0],e[1].length),j=t.split(`
`,1)[0],q=!_.trim(),P=0;if(this.options.pedantic?(P=2,b=_.trimStart()):q?P=e[1].length+1:(P=_.search(this.rules.other.nonSpaceChar),P=P>4?1:P,b=_.slice(P),P+=e[1].length),q&&this.rules.other.blankLine.test(j)&&(x+=j+`
`,t=t.substring(j.length+1),y=!0),!y){let K=this.rules.other.nextBulletRegex(P),ae=this.rules.other.hrRegex(P),te=this.rules.other.fencesBeginRegex(P),W=this.rules.other.headingBeginRegex(P),Z=this.rules.other.htmlBeginRegex(P),ve=this.rules.other.blockquoteBeginRegex(P);for(;t;){let ne=t.split(`
`,1)[0],me;if(j=ne,this.options.pedantic?(j=j.replace(this.rules.other.listReplaceNesting,"  "),me=j):me=j.replace(this.rules.other.tabCharGlobal,"    "),te.test(j)||W.test(j)||Z.test(j)||ve.test(j)||K.test(j)||ae.test(j))break;if(me.search(this.rules.other.nonSpaceChar)>=P||!j.trim())b+=`
`+me.slice(P);else{if(q||_.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||te.test(_)||W.test(_)||ae.test(_))break;b+=`
`+j}q=!j.trim(),x+=ne+`
`,t=t.substring(ne.length+1),_=me.slice(P)}}f.loose||(v?f.loose=!0:this.rules.other.doubleBlankLine.test(x)&&(v=!0)),f.items.push({type:"list_item",raw:x,task:!!this.options.gfm&&this.rules.other.listIsTask.test(b),loose:!1,text:b,tokens:[]}),f.raw+=x}let h=f.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;f.raw=f.raw.trimEnd();for(let y of f.items){if(this.lexer.state.top=!1,y.tokens=this.lexer.blockTokens(y.text,[]),y.task){if(y.text=y.text.replace(this.rules.other.listReplaceTask,""),((r=y.tokens[0])==null?void 0:r.type)==="text"||((i=y.tokens[0])==null?void 0:i.type)==="paragraph"){y.tokens[0].raw=y.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),y.tokens[0].text=y.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let b=this.lexer.inlineQueue.length-1;b>=0;b--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[b].src)){this.lexer.inlineQueue[b].src=this.lexer.inlineQueue[b].src.replace(this.rules.other.listReplaceTask,"");break}}let x=this.rules.other.listTaskCheckbox.exec(y.raw);if(x){let b={type:"checkbox",raw:x[0]+" ",checked:x[0]!=="[ ]"};y.checked=b.checked,f.loose?y.tokens[0]&&["paragraph","text"].includes(y.tokens[0].type)&&"tokens"in y.tokens[0]&&y.tokens[0].tokens?(y.tokens[0].raw=b.raw+y.tokens[0].raw,y.tokens[0].text=b.raw+y.tokens[0].text,y.tokens[0].tokens.unshift(b)):y.tokens.unshift({type:"paragraph",raw:b.raw,text:b.raw,tokens:[b]}):y.tokens.unshift(b)}}if(!f.loose){let x=y.tokens.filter(_=>_.type==="space"),b=x.length>0&&x.some(_=>this.rules.other.anyLine.test(_.raw));f.loose=b}}if(f.loose)for(let y of f.items){y.loose=!0;for(let x of y.tokens)x.type==="text"&&(x.type="paragraph")}return f}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:s}}}table(t){var f;let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=Nl(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(f=e[3])!=null&&f.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let d of i)this.rules.other.tableAlignRight.test(d)?l.align.push("right"):this.rules.other.tableAlignCenter.test(d)?l.align.push("center"):this.rules.other.tableAlignLeft.test(d)?l.align.push("left"):l.align.push(null);for(let d=0;d<r.length;d++)l.header.push({text:r[d],tokens:this.lexer.inline(r[d]),header:!0,align:l.align[d]});for(let d of s)l.rows.push(Nl(d,l.header.length).map((v,h)=>({text:v,tokens:this.lexer.inline(v),header:!1,align:l.align[h]})));return l}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let l=Ua(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{let l=kv(e[2],"()");if(l===-2)return;if(l>-1){let f=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,f).trim(),e[3]=""}}let i=e[2],s="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(i);l&&(i=l[1],s=l[3])}else s=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),ql(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[i.toLowerCase()];if(!s){let l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return ql(r,s,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,l,f,d=s,v=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*t.length+s);(i=h.exec(e))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(f=[...l].length,i[3]||i[4]){d+=f;continue}else if((i[5]||i[6])&&s%3&&!((s+f)%3)){v+=f;continue}if(d-=f,d>0)continue;f=Math.min(f,f+d+v);let y=[...i[0]][0].length,x=t.slice(0,s+i.index+y+f);if(Math.min(s,f)%2){let _=x.slice(1,-1);return{type:"em",raw:x,text:_,tokens:this.lexer.inlineTokens(_)}}let b=x.slice(2,-2);return{type:"strong",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t,e,r=""){let i=this.rules.inline.delLDelim.exec(t);if(i&&(!i[1]||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,l,f,d=s,v=this.rules.inline.delRDelim;for(v.lastIndex=0,e=e.slice(-1*t.length+s);(i=v.exec(e))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l||(f=[...l].length,f!==s))continue;if(i[3]||i[4]){d+=f;continue}if(d-=f,d>0)continue;f=Math.min(f,f+d);let h=[...i[0]][0].length,y=t.slice(0,s+i.index+h+f),x=y.slice(s,-s);return{type:"del",raw:y,text:x,tokens:this.lexer.inlineTokens(x)}}}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,i;return e[2]==="@"?(r=e[1],i="mailto:"+r):(r=e[1],i=r),{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let e;if(e=this.rules.inline.url.exec(t)){let i,s;if(e[2]==="@")i=e[0],s="mailto:"+i;else{let l;do l=e[0],e[0]=((r=this.rules.inline._backpedal.exec(e[0]))==null?void 0:r[0])??"";while(l!==e[0]);i=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:r}}}},wn=class io{constructor(e){Ke(this,"tokens");Ke(this,"options");Ke(this,"state");Ke(this,"inlineQueue");Ke(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Zr,this.options.tokenizer=this.options.tokenizer||new Vi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Lt,block:Mi.normal,inline:Ka.normal};this.options.pedantic?(r.block=Mi.pedantic,r.inline=Ka.pedantic):this.options.gfm&&(r.block=Mi.gfm,this.options.breaks?r.inline=Ka.breaks:r.inline=Ka.gfm),this.tokenizer.rules=r}static get rules(){return{block:Mi,inline:Ka}}static lex(e,r){return new io(r).lex(e)}static lexInline(e,r){return new io(r).inlineTokens(e)}lex(e){e=e.replace(Lt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],i=!1){var s,l,f;for(this.options.pedantic&&(e=e.replace(Lt.tabCharGlobal,"    ").replace(Lt.spaceLine,""));e;){let d;if((l=(s=this.options.extensions)==null?void 0:s.block)!=null&&l.some(h=>(d=h.call({lexer:this},e,r))?(e=e.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.space(e)){e=e.substring(d.raw.length);let h=r.at(-1);d.raw.length===1&&h!==void 0?h.raw+=`
`:r.push(d);continue}if(d=this.tokenizer.code(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.at(-1).src=h.text):r.push(d);continue}if(d=this.tokenizer.fences(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.heading(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.hr(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.blockquote(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.list(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.html(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.def(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.raw,this.inlineQueue.at(-1).src=h.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title},r.push(d));continue}if(d=this.tokenizer.table(e)){e=e.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.lheading(e)){e=e.substring(d.raw.length),r.push(d);continue}let v=e;if((f=this.options.extensions)!=null&&f.startBlock){let h=1/0,y=e.slice(1),x;this.options.extensions.startBlock.forEach(b=>{x=b.call({lexer:this},y),typeof x=="number"&&x>=0&&(h=Math.min(h,x))}),h<1/0&&h>=0&&(v=e.substring(0,h+1))}if(this.state.top&&(d=this.tokenizer.paragraph(v))){let h=r.at(-1);i&&(h==null?void 0:h.type)==="paragraph"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):r.push(d),i=v.length!==e.length,e=e.substring(d.raw.length);continue}if(d=this.tokenizer.text(e)){e=e.substring(d.raw.length);let h=r.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):r.push(d);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){var v,h,y,x,b;let i=e,s=null;if(this.tokens.links){let _=Object.keys(this.tokens.links);if(_.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)_.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)l=s[2]?s[2].length:0,i=i.slice(0,s.index+l)+"["+"a".repeat(s[0].length-l-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=((h=(v=this.options.hooks)==null?void 0:v.emStrongMask)==null?void 0:h.call({lexer:this},i))??i;let f=!1,d="";for(;e;){f||(d=""),f=!1;let _;if((x=(y=this.options.extensions)==null?void 0:y.inline)!=null&&x.some(q=>(_=q.call({lexer:this},e,r))?(e=e.substring(_.raw.length),r.push(_),!0):!1))continue;if(_=this.tokenizer.escape(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.tag(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.link(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(_.raw.length);let q=r.at(-1);_.type==="text"&&(q==null?void 0:q.type)==="text"?(q.raw+=_.raw,q.text+=_.text):r.push(_);continue}if(_=this.tokenizer.emStrong(e,i,d)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.codespan(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.br(e)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.del(e,i,d)){e=e.substring(_.raw.length),r.push(_);continue}if(_=this.tokenizer.autolink(e)){e=e.substring(_.raw.length),r.push(_);continue}if(!this.state.inLink&&(_=this.tokenizer.url(e))){e=e.substring(_.raw.length),r.push(_);continue}let j=e;if((b=this.options.extensions)!=null&&b.startInline){let q=1/0,P=e.slice(1),K;this.options.extensions.startInline.forEach(ae=>{K=ae.call({lexer:this},P),typeof K=="number"&&K>=0&&(q=Math.min(q,K))}),q<1/0&&q>=0&&(j=e.substring(0,q+1))}if(_=this.tokenizer.inlineText(j)){e=e.substring(_.raw.length),_.raw.slice(-1)!=="_"&&(d=_.raw.slice(-1)),f=!0;let q=r.at(-1);(q==null?void 0:q.type)==="text"?(q.raw+=_.raw,q.text+=_.text):r.push(_);continue}if(e){let q="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(q);break}else throw new Error(q)}}return r}},Xi=class{constructor(t){Ke(this,"options");Ke(this,"parser");this.options=t||Zr}space(t){return""}code({text:t,lang:e,escaped:r}){var l;let i=(l=(e||"").match(Lt.notSpaceStart))==null?void 0:l[0],s=t.replace(Lt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Gn(i)+'">'+(r?s:Gn(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Gn(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,r=t.start,i="";for(let f=0;f<t.items.length;f++){let d=t.items[f];i+=this.listitem(d)}let s=e?"ol":"ul",l=e&&r!==1?' start="'+r+'"':"";return"<"+s+l+`>
`+i+"</"+s+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",r="";for(let s=0;s<t.header.length;s++)r+=this.tablecell(t.header[s]);e+=this.tablerow({text:r});let i="";for(let s=0;s<t.rows.length;s++){let l=t.rows[s];r="";for(let f=0;f<l.length;f++)r+=this.tablecell(l[f]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Gn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let i=this.parser.parseInline(r),s=Ll(t);if(s===null)return i;t=s;let l='<a href="'+t+'"';return e&&(l+=' title="'+Gn(e)+'"'),l+=">"+i+"</a>",l}image({href:t,title:e,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let s=Ll(t);if(s===null)return Gn(r);t=s;let l=`<img src="${t}" alt="${r}"`;return e&&(l+=` title="${Gn(e)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Gn(t.text)}},Mo=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},kn=class so{constructor(e){Ke(this,"options");Ke(this,"renderer");Ke(this,"textRenderer");this.options=e||Zr,this.options.renderer=this.options.renderer||new Xi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Mo}static parse(e,r){return new so(r).parse(e)}static parseInline(e,r){return new so(r).parseInline(e)}parse(e){var i,s;let r="";for(let l=0;l<e.length;l++){let f=e[l];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[f.type]){let v=f,h=this.options.extensions.renderers[v.type].call({parser:this},v);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(v.type)){r+=h||"";continue}}let d=f;switch(d.type){case"space":{r+=this.renderer.space(d);break}case"hr":{r+=this.renderer.hr(d);break}case"heading":{r+=this.renderer.heading(d);break}case"code":{r+=this.renderer.code(d);break}case"table":{r+=this.renderer.table(d);break}case"blockquote":{r+=this.renderer.blockquote(d);break}case"list":{r+=this.renderer.list(d);break}case"checkbox":{r+=this.renderer.checkbox(d);break}case"html":{r+=this.renderer.html(d);break}case"def":{r+=this.renderer.def(d);break}case"paragraph":{r+=this.renderer.paragraph(d);break}case"text":{r+=this.renderer.text(d);break}default:{let v='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(v),"";throw new Error(v)}}}return r}parseInline(e,r=this.renderer){var s,l;let i="";for(let f=0;f<e.length;f++){let d=e[f];if((l=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&l[d.type]){let h=this.options.extensions.renderers[d.type].call({parser:this},d);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){i+=h||"";continue}}let v=d;switch(v.type){case"escape":{i+=r.text(v);break}case"html":{i+=r.html(v);break}case"link":{i+=r.link(v);break}case"image":{i+=r.image(v);break}case"checkbox":{i+=r.checkbox(v);break}case"strong":{i+=r.strong(v);break}case"em":{i+=r.em(v);break}case"codespan":{i+=r.codespan(v);break}case"br":{i+=r.br(v);break}case"del":{i+=r.del(v);break}case"text":{i+=r.text(v);break}default:{let h='Token with "'+v.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return i}},qi,Xa=(qi=class{constructor(t){Ke(this,"options");Ke(this,"block");this.options=t||Zr}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?wn.lex:wn.lexInline}provideParser(){return this.block?kn.parse:kn.parseInline}},Ke(qi,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ke(qi,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),qi),Tv=class{constructor(...t){Ke(this,"defaults",Eo());Ke(this,"options",this.setOptions);Ke(this,"parse",this.parseMarkdown(!0));Ke(this,"parseInline",this.parseMarkdown(!1));Ke(this,"Parser",kn);Ke(this,"Renderer",Xi);Ke(this,"TextRenderer",Mo);Ke(this,"Lexer",wn);Ke(this,"Tokenizer",Vi);Ke(this,"Hooks",Xa);this.use(...t)}walkTokens(t,e){var i,s;let r=[];for(let l of t)switch(r=r.concat(e.call(this,l)),l.type){case"table":{let f=l;for(let d of f.header)r=r.concat(this.walkTokens(d.tokens,e));for(let d of f.rows)for(let v of d)r=r.concat(this.walkTokens(v.tokens,e));break}case"list":{let f=l;r=r.concat(this.walkTokens(f.items,e));break}default:{let f=l;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[f.type]?this.defaults.extensions.childTokens[f.type].forEach(d=>{let v=f[d].flat(1/0);r=r.concat(this.walkTokens(v,e))}):f.tokens&&(r=r.concat(this.walkTokens(f.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let l=e.renderers[s.name];l?e.renderers[s.name]=function(...f){let d=s.renderer.apply(this,f);return d===!1&&(d=l.apply(this,f)),d}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[s.level];l?l.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),i.extensions=e),r.renderer){let s=this.defaults.renderer||new Xi(this.defaults);for(let l in r.renderer){if(!(l in s))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let f=l,d=r.renderer[f],v=s[f];s[f]=(...h)=>{let y=d.apply(s,h);return y===!1&&(y=v.apply(s,h)),y||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Vi(this.defaults);for(let l in r.tokenizer){if(!(l in s))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let f=l,d=r.tokenizer[f],v=s[f];s[f]=(...h)=>{let y=d.apply(s,h);return y===!1&&(y=v.apply(s,h)),y}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Xa;for(let l in r.hooks){if(!(l in s))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let f=l,d=r.hooks[f],v=s[f];Xa.passThroughHooks.has(l)?s[f]=h=>{if(this.defaults.async&&Xa.passThroughHooksRespectAsync.has(l))return(async()=>{let x=await d.call(s,h);return v.call(s,x)})();let y=d.call(s,h);return v.call(s,y)}:s[f]=(...h)=>{if(this.defaults.async)return(async()=>{let x=await d.apply(s,h);return x===!1&&(x=await v.apply(s,h)),x})();let y=d.apply(s,h);return y===!1&&(y=v.apply(s,h)),y}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,l=r.walkTokens;i.walkTokens=function(f){let d=[];return d.push(l.call(this,f)),s&&(d=d.concat(s.call(this,f))),d}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return wn.lex(t,e??this.defaults)}parser(t,e){return kn.parse(t,e??this.defaults)}parseMarkdown(t){return(e,r)=>{let i={...r},s={...this.defaults,...i},l=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let f=s.hooks?await s.hooks.preprocess(e):e,d=await(s.hooks?await s.hooks.provideLexer():t?wn.lex:wn.lexInline)(f,s),v=s.hooks?await s.hooks.processAllTokens(d):d;s.walkTokens&&await Promise.all(this.walkTokens(v,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():t?kn.parse:kn.parseInline)(v,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(l);try{s.hooks&&(e=s.hooks.preprocess(e));let f=(s.hooks?s.hooks.provideLexer():t?wn.lex:wn.lexInline)(e,s);s.hooks&&(f=s.hooks.processAllTokens(f)),s.walkTokens&&this.walkTokens(f,s.walkTokens);let d=(s.hooks?s.hooks.provideParser():t?kn.parse:kn.parseInline)(f,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(f){return l(f)}}}onError(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+Gn(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(r);throw r}}},Xr=new Tv;function Ze(t,e){return Xr.parse(t,e)}Ze.options=Ze.setOptions=function(t){return Xr.setOptions(t),Ze.defaults=Xr.defaults,fc(Ze.defaults),Ze};Ze.getDefaults=Eo;Ze.defaults=Zr;Ze.use=function(...t){return Xr.use(...t),Ze.defaults=Xr.defaults,fc(Ze.defaults),Ze};Ze.walkTokens=function(t,e){return Xr.walkTokens(t,e)};Ze.parseInline=Xr.parseInline;Ze.Parser=kn;Ze.parser=kn.parse;Ze.Renderer=Xi;Ze.TextRenderer=Mo;Ze.Lexer=wn;Ze.lexer=wn.lex;Ze.Tokenizer=Vi;Ze.Hooks=Xa;Ze.parse=Ze;Ze.options;Ze.setOptions;Ze.use;Ze.walkTokens;Ze.parseInline;kn.parse;wn.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:xc,setPrototypeOf:jl,isFrozen:Ev,getPrototypeOf:Av,getOwnPropertyDescriptor:Iv}=Object;let{freeze:Nt,seal:dn,create:oo}=Object,{apply:lo,construct:uo}=typeof Reflect<"u"&&Reflect;Nt||(Nt=function(e){return e});dn||(dn=function(e){return e});lo||(lo=function(e,r){for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return e.apply(r,s)});uo||(uo=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return new e(...i)});const Li=qt(Array.prototype.forEach),Cv=qt(Array.prototype.lastIndexOf),Bl=qt(Array.prototype.pop),Ga=qt(Array.prototype.push),Pv=qt(Array.prototype.splice),Ui=qt(String.prototype.toLowerCase),qs=qt(String.prototype.toString),js=qt(String.prototype.match),Ha=qt(String.prototype.replace),Rv=qt(String.prototype.indexOf),Ov=qt(String.prototype.trim),bn=qt(Object.prototype.hasOwnProperty),Mt=qt(RegExp.prototype.test),Wa=Dv(TypeError);function qt(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return lo(t,e,i)}}function Dv(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return uo(t,r)}}function ze(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ui;jl&&jl(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const l=r(s);l!==s&&(Ev(e)||(e[i]=l),s=l)}t[s]=!0}return t}function Mv(t){for(let e=0;e<t.length;e++)bn(t,e)||(t[e]=null);return t}function Rn(t){const e=oo(null);for(const[r,i]of xc(t))bn(t,r)&&(Array.isArray(i)?e[r]=Mv(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=Rn(i):e[r]=i);return e}function $a(t,e){for(;t!==null;){const i=Iv(t,e);if(i){if(i.get)return qt(i.get);if(typeof i.value=="function")return qt(i.value)}t=Av(t)}function r(){return null}return r}const zl=Nt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bs=Nt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zs=Nt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Lv=Nt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fs=Nt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Nv=Nt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fl=Nt(["#text"]),Kl=Nt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ks=Nt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ul=Nt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ni=Nt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qv=dn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jv=dn(/<%[\w\W]*|[\w\W]*%>/gm),Bv=dn(/\$\{[\w\W]*/gm),zv=dn(/^data-[\-\w.\u00B7-\uFFFF]+$/),Fv=dn(/^aria-[\-\w]+$/),Sc=dn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Kv=dn(/^(?:\w+script|data):/i),Uv=dn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tc=dn(/^html$/i),Gv=dn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Gl=Object.freeze({__proto__:null,ARIA_ATTR:Fv,ATTR_WHITESPACE:Uv,CUSTOM_ELEMENT:Gv,DATA_ATTR:zv,DOCTYPE_NAME:Tc,ERB_EXPR:jv,IS_ALLOWED_URI:Sc,IS_SCRIPT_OR_DATA:Kv,MUSTACHE_EXPR:qv,TMPLIT_EXPR:Bv});const Ya={element:1,text:3,progressingInstruction:7,comment:8,document:9},Hv=function(){return typeof window>"u"?null:window},Wv=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const l="dompurify"+(i?"#"+i:"");try{return e.createPolicy(l,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Hl=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ec(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hv();const e=_e=>Ec(_e);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==Ya.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:l,HTMLTemplateElement:f,Node:d,Element:v,NodeFilter:h,NamedNodeMap:y=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:x,DOMParser:b,trustedTypes:_}=t,j=v.prototype,q=$a(j,"cloneNode"),P=$a(j,"remove"),K=$a(j,"nextSibling"),ae=$a(j,"childNodes"),te=$a(j,"parentNode");if(typeof f=="function"){const _e=r.createElement("template");_e.content&&_e.content.ownerDocument&&(r=_e.content.ownerDocument)}let W,Z="";const{implementation:ve,createNodeIterator:ne,createDocumentFragment:me,getElementsByTagName:Oe}=r,{importNode:Re}=i;let ue=Hl();e.isSupported=typeof xc=="function"&&typeof te=="function"&&ve&&ve.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$,ERB_EXPR:re,TMPLIT_EXPR:Ie,DATA_ATTR:we,ARIA_ATTR:xe,IS_SCRIPT_OR_DATA:Ce,ATTR_WHITESPACE:B,CUSTOM_ELEMENT:H}=Gl;let{IS_ALLOWED_URI:ce}=Gl,be=null;const Me=ze({},[...zl,...Bs,...zs,...Fs,...Fl]);let Le=null;const De=ze({},[...Kl,...Ks,...Ul,...Ni]);let Se=Object.seal(oo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),nt=null,Te=null;const et=Object.seal(oo(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let pt=!0,fe=!0,Ot=!1,He=!0,Jt=!1,Jr=!0,Dt=!1,Ea=!1,Aa=!1,er=!1,ea=!1,tr=!1,Gt=!0,Ia=!1;const wr="user-content-";let ta=!0,pn=!1,ht={},gt=null;const kr=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nr=null;const na=ze({},["audio","video","img","source","image","track"]);let rr=null;const An=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bn="http://www.w3.org/1998/Math/MathML",ar="http://www.w3.org/2000/svg",mt="http://www.w3.org/1999/xhtml";let ye=mt,zn=!1,hn=null;const ra=ze({},[Bn,ar,mt],qs);let le=ze({},["mi","mo","mn","ms","mtext"]),ir=ze({},["annotation-xml"]);const di=ze({},["title","style","font","a","script"]);let Fn=null;const pi=["application/xhtml+xml","text/html"],Ca="text/html";let ut=null,sr=null;const or=r.createElement("form"),Kn=function(k){return k instanceof RegExp||k instanceof Function},xr=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(sr&&sr===k)){if((!k||typeof k!="object")&&(k={}),k=Rn(k),Fn=pi.indexOf(k.PARSER_MEDIA_TYPE)===-1?Ca:k.PARSER_MEDIA_TYPE,ut=Fn==="application/xhtml+xml"?qs:Ui,be=bn(k,"ALLOWED_TAGS")?ze({},k.ALLOWED_TAGS,ut):Me,Le=bn(k,"ALLOWED_ATTR")?ze({},k.ALLOWED_ATTR,ut):De,hn=bn(k,"ALLOWED_NAMESPACES")?ze({},k.ALLOWED_NAMESPACES,qs):ra,rr=bn(k,"ADD_URI_SAFE_ATTR")?ze(Rn(An),k.ADD_URI_SAFE_ATTR,ut):An,nr=bn(k,"ADD_DATA_URI_TAGS")?ze(Rn(na),k.ADD_DATA_URI_TAGS,ut):na,gt=bn(k,"FORBID_CONTENTS")?ze({},k.FORBID_CONTENTS,ut):kr,nt=bn(k,"FORBID_TAGS")?ze({},k.FORBID_TAGS,ut):Rn({}),Te=bn(k,"FORBID_ATTR")?ze({},k.FORBID_ATTR,ut):Rn({}),ht=bn(k,"USE_PROFILES")?k.USE_PROFILES:!1,pt=k.ALLOW_ARIA_ATTR!==!1,fe=k.ALLOW_DATA_ATTR!==!1,Ot=k.ALLOW_UNKNOWN_PROTOCOLS||!1,He=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jt=k.SAFE_FOR_TEMPLATES||!1,Jr=k.SAFE_FOR_XML!==!1,Dt=k.WHOLE_DOCUMENT||!1,er=k.RETURN_DOM||!1,ea=k.RETURN_DOM_FRAGMENT||!1,tr=k.RETURN_TRUSTED_TYPE||!1,Aa=k.FORCE_BODY||!1,Gt=k.SANITIZE_DOM!==!1,Ia=k.SANITIZE_NAMED_PROPS||!1,ta=k.KEEP_CONTENT!==!1,pn=k.IN_PLACE||!1,ce=k.ALLOWED_URI_REGEXP||Sc,ye=k.NAMESPACE||mt,le=k.MATHML_TEXT_INTEGRATION_POINTS||le,ir=k.HTML_INTEGRATION_POINTS||ir,Se=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&Kn(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&Kn(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Se.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jt&&(fe=!1),ea&&(er=!0),ht&&(be=ze({},Fl),Le=[],ht.html===!0&&(ze(be,zl),ze(Le,Kl)),ht.svg===!0&&(ze(be,Bs),ze(Le,Ks),ze(Le,Ni)),ht.svgFilters===!0&&(ze(be,zs),ze(Le,Ks),ze(Le,Ni)),ht.mathMl===!0&&(ze(be,Fs),ze(Le,Ul),ze(Le,Ni))),k.ADD_TAGS&&(typeof k.ADD_TAGS=="function"?et.tagCheck=k.ADD_TAGS:(be===Me&&(be=Rn(be)),ze(be,k.ADD_TAGS,ut))),k.ADD_ATTR&&(typeof k.ADD_ATTR=="function"?et.attributeCheck=k.ADD_ATTR:(Le===De&&(Le=Rn(Le)),ze(Le,k.ADD_ATTR,ut))),k.ADD_URI_SAFE_ATTR&&ze(rr,k.ADD_URI_SAFE_ATTR,ut),k.FORBID_CONTENTS&&(gt===kr&&(gt=Rn(gt)),ze(gt,k.FORBID_CONTENTS,ut)),k.ADD_FORBID_CONTENTS&&(gt===kr&&(gt=Rn(gt)),ze(gt,k.ADD_FORBID_CONTENTS,ut)),ta&&(be["#text"]=!0),Dt&&ze(be,["html","head","body"]),be.table&&(ze(be,["tbody"]),delete nt.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw Wa('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Wa('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');W=k.TRUSTED_TYPES_POLICY,Z=W.createHTML("")}else W===void 0&&(W=Wv(_,s)),W!==null&&typeof Z=="string"&&(Z=W.createHTML(""));Nt&&Nt(k),sr=k}},Sr=ze({},[...Bs,...zs,...Lv]),tt=ze({},[...Fs,...Nv]),vt=function(k){let Q=te(k);(!Q||!Q.tagName)&&(Q={namespaceURI:ye,tagName:"template"});const ie=Ui(k.tagName),Ve=Ui(Q.tagName);return hn[k.namespaceURI]?k.namespaceURI===ar?Q.namespaceURI===mt?ie==="svg":Q.namespaceURI===Bn?ie==="svg"&&(Ve==="annotation-xml"||le[Ve]):!!Sr[ie]:k.namespaceURI===Bn?Q.namespaceURI===mt?ie==="math":Q.namespaceURI===ar?ie==="math"&&ir[Ve]:!!tt[ie]:k.namespaceURI===mt?Q.namespaceURI===ar&&!ir[Ve]||Q.namespaceURI===Bn&&!le[Ve]?!1:!tt[ie]&&(di[ie]||!Sr[ie]):!!(Fn==="application/xhtml+xml"&&hn[k.namespaceURI]):!1},en=function(k){Ga(e.removed,{element:k});try{te(k).removeChild(k)}catch{P(k)}},tn=function(k,Q){try{Ga(e.removed,{attribute:Q.getAttributeNode(k),from:Q})}catch{Ga(e.removed,{attribute:null,from:Q})}if(Q.removeAttribute(k),k==="is")if(er||ea)try{en(Q)}catch{}else try{Q.setAttribute(k,"")}catch{}},Tr=function(k){let Q=null,ie=null;if(Aa)k="<remove></remove>"+k;else{const st=js(k,/^[\r\n\t ]+/);ie=st&&st[0]}Fn==="application/xhtml+xml"&&ye===mt&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const Ve=W?W.createHTML(k):k;if(ye===mt)try{Q=new b().parseFromString(Ve,Fn)}catch{}if(!Q||!Q.documentElement){Q=ve.createDocument(ye,"template",null);try{Q.documentElement.innerHTML=zn?Z:Ve}catch{}}const rt=Q.body||Q.documentElement;return k&&ie&&rt.insertBefore(r.createTextNode(ie),rt.childNodes[0]||null),ye===mt?Oe.call(Q,Dt?"html":"body")[0]:Dt?Q.documentElement:rt},Er=function(k){return ne.call(k.ownerDocument||k,k,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Pa=function(k){return k instanceof x&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof y)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},vn=function(k){return typeof d=="function"&&k instanceof d};function It(_e,k,Q){Li(_e,ie=>{ie.call(e,k,Q,sr)})}const gn=function(k){let Q=null;if(It(ue.beforeSanitizeElements,k,null),Pa(k))return en(k),!0;const ie=ut(k.nodeName);if(It(ue.uponSanitizeElement,k,{tagName:ie,allowedTags:be}),Jr&&k.hasChildNodes()&&!vn(k.firstElementChild)&&Mt(/<[/\w!]/g,k.innerHTML)&&Mt(/<[/\w!]/g,k.textContent)||k.nodeType===Ya.progressingInstruction||Jr&&k.nodeType===Ya.comment&&Mt(/<[/\w]/g,k.data))return en(k),!0;if(!(et.tagCheck instanceof Function&&et.tagCheck(ie))&&(!be[ie]||nt[ie])){if(!nt[ie]&&hi(ie)&&(Se.tagNameCheck instanceof RegExp&&Mt(Se.tagNameCheck,ie)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(ie)))return!1;if(ta&&!gt[ie]){const Ve=te(k)||k.parentNode,rt=ae(k)||k.childNodes;if(rt&&Ve){const st=rt.length;for(let ct=st-1;ct>=0;--ct){const jt=q(rt[ct],!0);jt.__removalCount=(k.__removalCount||0)+1,Ve.insertBefore(jt,K(k))}}}return en(k),!0}return k instanceof v&&!vt(k)||(ie==="noscript"||ie==="noembed"||ie==="noframes")&&Mt(/<\/no(script|embed|frames)/i,k.innerHTML)?(en(k),!0):(Jt&&k.nodeType===Ya.text&&(Q=k.textContent,Li([$,re,Ie],Ve=>{Q=Ha(Q,Ve," ")}),k.textContent!==Q&&(Ga(e.removed,{element:k.cloneNode()}),k.textContent=Q)),It(ue.afterSanitizeElements,k,null),!1)},Ar=function(k,Q,ie){if(Gt&&(Q==="id"||Q==="name")&&(ie in r||ie in or))return!1;if(!(fe&&!Te[Q]&&Mt(we,Q))){if(!(pt&&Mt(xe,Q))){if(!(et.attributeCheck instanceof Function&&et.attributeCheck(Q,k))){if(!Le[Q]||Te[Q]){if(!(hi(k)&&(Se.tagNameCheck instanceof RegExp&&Mt(Se.tagNameCheck,k)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(k))&&(Se.attributeNameCheck instanceof RegExp&&Mt(Se.attributeNameCheck,Q)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(Q,k))||Q==="is"&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&Mt(Se.tagNameCheck,ie)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(ie))))return!1}else if(!rr[Q]){if(!Mt(ce,Ha(ie,B,""))){if(!((Q==="src"||Q==="xlink:href"||Q==="href")&&k!=="script"&&Rv(ie,"data:")===0&&nr[k])){if(!(Ot&&!Mt(Ce,Ha(ie,B,"")))){if(ie)return!1}}}}}}}return!0},hi=function(k){return k!=="annotation-xml"&&js(k,H)},mn=function(k){It(ue.beforeSanitizeAttributes,k,null);const{attributes:Q}=k;if(!Q||Pa(k))return;const ie={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le,forceKeepAttr:void 0};let Ve=Q.length;for(;Ve--;){const rt=Q[Ve],{name:st,namespaceURI:ct,value:jt}=rt,In=ut(st),Ir=jt;let it=st==="value"?Ir:Ov(Ir);if(ie.attrName=In,ie.attrValue=it,ie.keepAttr=!0,ie.forceKeepAttr=void 0,It(ue.uponSanitizeAttribute,k,ie),it=ie.attrValue,Ia&&(In==="id"||In==="name")&&(tn(st,k),it=wr+it),Jr&&Mt(/((--!?|])>)|<\/(style|title|textarea)/i,it)){tn(st,k);continue}if(In==="attributename"&&js(it,"href")){tn(st,k);continue}if(ie.forceKeepAttr)continue;if(!ie.keepAttr){tn(st,k);continue}if(!He&&Mt(/\/>/i,it)){tn(st,k);continue}Jt&&Li([$,re,Ie],Cr=>{it=Ha(it,Cr," ")});const Ra=ut(k.nodeName);if(!Ar(Ra,In,it)){tn(st,k);continue}if(W&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!ct)switch(_.getAttributeType(Ra,In)){case"TrustedHTML":{it=W.createHTML(it);break}case"TrustedScriptURL":{it=W.createScriptURL(it);break}}if(it!==Ir)try{ct?k.setAttributeNS(ct,st,it):k.setAttribute(st,it),Pa(k)?en(k):Bl(e.removed)}catch{tn(st,k)}}It(ue.afterSanitizeAttributes,k,null)},vi=function _e(k){let Q=null;const ie=Er(k);for(It(ue.beforeSanitizeShadowDOM,k,null);Q=ie.nextNode();)It(ue.uponSanitizeShadowNode,Q,null),gn(Q),mn(Q),Q.content instanceof l&&_e(Q.content);It(ue.afterSanitizeShadowDOM,k,null)};return e.sanitize=function(_e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=null,ie=null,Ve=null,rt=null;if(zn=!_e,zn&&(_e="<!-->"),typeof _e!="string"&&!vn(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw Wa("dirty is not a string, aborting")}else throw Wa("toString is not a function");if(!e.isSupported)return _e;if(Ea||xr(k),e.removed=[],typeof _e=="string"&&(pn=!1),pn){if(_e.nodeName){const jt=ut(_e.nodeName);if(!be[jt]||nt[jt])throw Wa("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof d)Q=Tr("<!---->"),ie=Q.ownerDocument.importNode(_e,!0),ie.nodeType===Ya.element&&ie.nodeName==="BODY"||ie.nodeName==="HTML"?Q=ie:Q.appendChild(ie);else{if(!er&&!Jt&&!Dt&&_e.indexOf("<")===-1)return W&&tr?W.createHTML(_e):_e;if(Q=Tr(_e),!Q)return er?null:tr?Z:""}Q&&Aa&&en(Q.firstChild);const st=Er(pn?_e:Q);for(;Ve=st.nextNode();)gn(Ve),mn(Ve),Ve.content instanceof l&&vi(Ve.content);if(pn)return _e;if(er){if(ea)for(rt=me.call(Q.ownerDocument);Q.firstChild;)rt.appendChild(Q.firstChild);else rt=Q;return(Le.shadowroot||Le.shadowrootmode)&&(rt=Re.call(i,rt,!0)),rt}let ct=Dt?Q.outerHTML:Q.innerHTML;return Dt&&be["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&Mt(Tc,Q.ownerDocument.doctype.name)&&(ct="<!DOCTYPE "+Q.ownerDocument.doctype.name+`>
`+ct),Jt&&Li([$,re,Ie],jt=>{ct=Ha(ct,jt," ")}),W&&tr?W.createHTML(ct):ct},e.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xr(_e),Ea=!0},e.clearConfig=function(){sr=null,Ea=!1},e.isValidAttribute=function(_e,k,Q){sr||xr({});const ie=ut(_e),Ve=ut(k);return Ar(ie,Ve,Q)},e.addHook=function(_e,k){typeof k=="function"&&Ga(ue[_e],k)},e.removeHook=function(_e,k){if(k!==void 0){const Q=Cv(ue[_e],k);return Q===-1?void 0:Pv(ue[_e],Q,1)[0]}return Bl(ue[_e])},e.removeHooks=function(_e){ue[_e]=[]},e.removeAllHooks=function(){ue=Hl()},e}var $v=Ec();function Yv(t){const e=[];e.push(`# ${t.subject}`),e.push(""),e.push("| | |"),e.push("|---|---|"),e.push(`| **From** | ${Wl(t.from)} |`),e.push(`| **To** | ${Wl(t.to)} |`),e.push(`| **Date** | ${To(t.date)} |`),e.push(""),e.push("---"),e.push("");const r=t.htmlBody?Vv(t.htmlBody):null;return e.push(r||t.body||"*(no body)*"),e.push(""),e.join(`
`)}function Wl(t){return(t||"").replace(/\|/g,"\\|")}function Vv(t){try{const e=new DOMParser().parseFromString(t,"text/html");for(const r of e.querySelectorAll("style, script, head"))r.remove();return co(e.body).replace(/\n{3,}/g,`

`).trim()}catch{return null}}function Xv(t,e){if(!e||e.startsWith("data:"))return!0;const r=parseInt(t.getAttribute("width"),10),i=parseInt(t.getAttribute("height"),10);if(r>0&&r<=3||i>0&&i<=3)return!0;const s=e.toLowerCase();return s.includes("spacer")||s.includes("transparent")||s.includes("transp.gif")||s.includes("/track")&&s.includes("pixel")||/amazon\.com\/gp\/r\.html\?/.test(e)||/[?&](open|track|beacon|pixel|img)=/i.test(s)?!0:s.includes("mail.google.com/mail/u/")&&s.includes("view=fimg")?!1:!!(/ci\d+\.\w+\.com\//.test(s)||s.endsWith(".gif")&&s.includes("1x1"))}function co(t){var s;if(t.nodeType===3)return t.textContent.replace(/[ \t]+/g," ");if(t.nodeType!==1)return"";const e=t.tagName.toLowerCase();if(e==="br")return`
`;if(e==="hr")return`

---

`;if(e==="img"){const l=t.getAttribute("src")||"",f=t.getAttribute("alt")||"";return Xv(t,l)?"":`![${f}](${l})`}const r=Array.from(t.childNodes).map(co).join(""),i=r.trim();if(!i&&!["img","br","hr"].includes(e))return r;if(e==="p"||e==="div")return`

${i}

`;if(e==="blockquote")return`

> ${i.replace(/\n/g,`
> `)}

`;if(/^h[1-6]$/.test(e)){const l=Number(e[1]);return`

${"#".repeat(l)} ${i}

`}if(e==="ul"||e==="ol")return`

${r}

`;if(e==="li")return`${((s=t.parentElement)==null?void 0:s.tagName.toLowerCase())==="ol"?"1.":"-"} ${i}
`;if(e==="a"){const l=t.getAttribute("href")||"";return!l||l.startsWith("mailto:")?i:i===l?l:`[${i}](${l})`}if(e==="strong"||e==="b")return`**${i}**`;if(e==="em"||e==="i")return`*${i}*`;if(e==="code")return`\`${i}\``;if(e==="table")return`

${r}

`;if(e==="tr")return`| ${Array.from(t.children).map(f=>co(f).trim()).join(" | ")} |
`;if(e==="td"||e==="th")return r;if(e==="thead"){const l=r.trim(),f=(l.match(/\|/g)||[]).length-1,d="| "+Array(Math.max(f,1)).fill("---").join(" | ")+" |";return`${l}${d}
`}return r}function Qv(t){const e=Zv(t.date),r=(t.subject||"email").replace(/[^a-zA-Z0-9 _-]/g,"").replace(/\s+/g,"-").slice(0,60).replace(/-+$/,"");return`${e}_${r}.md`}function Zv(t){try{const e=new Date(t),r=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${i}-${s}`}catch{return"email"}}function $l(t,e,r="text/markdown;charset=utf-8"){const i=new Blob([t],{type:r}),s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}function Jv(t){return t.raw||null}function eg(t){const e=Jv(t);return e?JSON.stringify(e,null,2):"null"}function tg(t){const e=ng(t.date),r=(t.subject||"email").replace(/[^a-zA-Z0-9 _-]/g,"").replace(/\s+/g,"-").slice(0,60).replace(/-+$/,"");return`${e}_${r}.json`}function ng(t){try{const e=new Date(t),r=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${i}-${s}`}catch{return"email"}}var rg=J('<button title="View as Markdown">.md</button>'),ag=J('<div class="md-toolbar svelte-1b0rzpb"><span class="toolbar-label svelte-1b0rzpb">JSON</span> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .json file">Download</button></div> <div class="md-body svelte-1b0rzpb"><pre class="md-raw svelte-1b0rzpb"> </pre></div>',1),ig=J('<pre class="md-raw svelte-1b0rzpb"> </pre>'),sg=J('<div class="md-preview svelte-1b0rzpb"><!></div>'),og=J('<div class="md-toolbar svelte-1b0rzpb"><div class="md-tabs svelte-1b0rzpb"><button>Raw</button> <button>Preview</button></div> <button class="action-btn download-btn svelte-1b0rzpb" title="Download .md file">Download</button></div> <div class="md-body svelte-1b0rzpb"><!></div>',1),lg=J('<div class="loading-state svelte-1b0rzpb"><span class="spinner svelte-1b0rzpb"></span> <span>Loading message...</span></div>'),ug=J('<iframe class="html-frame svelte-1b0rzpb" sandbox="allow-same-origin" title="Email content"></iframe>'),cg=J('<pre class="message-text svelte-1b0rzpb"> </pre>'),fg=J('<p class="empty-body svelte-1b0rzpb">Loading...</p>'),dg=J('<div class="modal-meta svelte-1b0rzpb"><div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">From:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">To:</span> <span> </span></div> <div class="meta-row svelte-1b0rzpb"><span class="meta-label svelte-1b0rzpb">Date:</span> <span> </span></div></div> <div class="modal-body svelte-1b0rzpb"><!></div>',1),pg=J('<div class="modal-overlay svelte-1b0rzpb" role="dialog" aria-modal="true"><div class="modal-content svelte-1b0rzpb" role="document"><div class="modal-header svelte-1b0rzpb"><h3 class="modal-subject svelte-1b0rzpb"> </h3> <div class="header-actions svelte-1b0rzpb"><button title="View as JSON">.json</button> <!> <button class="modal-close svelte-1b0rzpb">â</button></div></div> <!></div></div>');function hg(t,e){Et(e,!0);let r=qe(e,"loading",3,!1);Rt(()=>Zt("MessageModal"));const i=new Ze.Renderer;i.link=({href:$,title:re,text:Ie})=>{const we=re?` title="${re}"`:"";return`<a href="${$}"${we} target="_blank" rel="noopener">${Ie}</a>`},Ze.setOptions({breaks:!0,gfm:!0,renderer:i});let s=Pe("email"),l=Xn(()=>e.message.body?Yv(e.message):""),f=Xn(()=>eg(e.message)),d=Pe("raw");function v($){G(s,R(s)===$?"email":$,!0),$==="markdown"&&G(d,"raw")}function h(){$l(R(l),Qv(e.message))}function y(){$l(R(f),tg(e.message),"application/json;charset=utf-8")}function x($){const re=Ze.parse($);return $v.sanitize(re,{ADD_ATTR:["target"],ALLOW_TAGS:["h1","h2","h3","h4","h5","h6","p","br","hr","blockquote","pre","code","strong","b","em","i","a","img","ul","ol","li","table","thead","tbody","tr","th","td","del","s"]})}let b=Pe(null);Hi(()=>{var $;if(R(b)&&e.message.htmlBody&&!r()&&R(s)==="email"){const re=R(b).contentDocument||(($=R(b).contentWindow)==null?void 0:$.document);re&&(re.open(),re.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <style>
              body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                font-size: 14px;
                line-height: 1.5;
                color: #e0e0e0;
                background: #1a1a1a;
                margin: 0;
                padding: 16px;
                word-break: break-word;
              }
              a { color: #60a5fa; }
              img { max-width: 100%; height: auto; }
              table { border-collapse: collapse; max-width: 100%; }
              td, th { padding: 4px 8px; }
            </style>
          </head>
          <body>${e.message.htmlBody}</body>
          </html>
        `),re.close())}});var _=pg();_.__click=function(...$){var re;(re=e.onclose)==null||re.apply(this,$)};var j=D(_);j.__click=$=>$.stopPropagation();var q=D(j),P=D(q),K=D(P),ae=F(P,2),te=D(ae);let W;te.__click=()=>v("json");var Z=F(te,2);{var ve=$=>{var re=rg();let Ie;re.__click=()=>v("markdown"),ke(()=>Ie=vr(re,1,"action-btn svelte-1b0rzpb",null,Ie,{active:R(s)==="markdown"})),X($,re)};Ee(Z,$=>{e.message.body&&$(ve)})}var ne=F(Z,2);ne.__click=function(...$){var re;(re=e.onclose)==null||re.apply(this,$)};var me=F(q,2);{var Oe=$=>{var re=ag(),Ie=Kt(re),we=F(D(Ie),2);we.__click=y;var xe=F(Ie,2),Ce=D(xe),B=D(Ce);ke(()=>pe(B,R(f))),X($,re)},Re=$=>{var re=og(),Ie=Kt(re),we=D(Ie),xe=D(we);let Ce;xe.__click=()=>G(d,"raw");var B=F(xe,2);let H;B.__click=()=>G(d,"preview");var ce=F(we,2);ce.__click=h;var be=F(Ie,2),Me=D(be);{var Le=Se=>{var nt=ig(),Te=D(nt);ke(()=>pe(Te,R(l))),X(Se,nt)},De=Se=>{var nt=sg(),Te=D(nt);yd(Te,()=>x(R(l))),X(Se,nt)};Ee(Me,Se=>{R(d)==="raw"?Se(Le):Se(De,!1)})}ke(()=>{Ce=vr(xe,1,"md-tab svelte-1b0rzpb",null,Ce,{active:R(d)==="raw"}),H=vr(B,1,"md-tab svelte-1b0rzpb",null,H,{active:R(d)==="preview"})}),X($,re)},ue=$=>{var re=dg(),Ie=Kt(re),we=D(Ie),xe=F(D(we),2),Ce=D(xe),B=F(we,2),H=F(D(B),2),ce=D(H),be=F(B,2),Me=F(D(be),2),Le=D(Me),De=F(Ie,2),Se=D(De);{var nt=fe=>{var Ot=lg();X(fe,Ot)},Te=fe=>{var Ot=ug();Xu(Ot,He=>G(b,He),()=>R(b)),X(fe,Ot)},et=fe=>{var Ot=cg(),He=D(Ot);ke(()=>pe(He,e.message.body)),X(fe,Ot)},pt=fe=>{var Ot=fg();X(fe,Ot)};Ee(Se,fe=>{r()?fe(nt):e.message.htmlBody?fe(Te,1):e.message.body?fe(et,2):fe(pt,!1)})}ke(fe=>{pe(Ce,e.message.from),pe(ce,e.message.to),pe(Le,fe)},[()=>To(e.message.date)]),X($,re)};Ee(me,$=>{R(s)==="json"?$(Oe):R(s)==="markdown"?$(Re,1):$(ue,!1)})}ke(()=>{pe(K,e.message.subject),W=vr(te,1,"action-btn svelte-1b0rzpb",null,W,{active:R(s)==="json"})}),X(t,_),At()}jn(["click"]);var vg=J('<div class="load-more svelte-6ts5xm"><button class="btn svelte-6ts5xm"> </button></div>'),gg=J('<div class="list-header svelte-6ts5xm"><span class="list-count svelte-6ts5xm"> </span></div> <!> <!>',1),mg=J('<div class="loading-state svelte-6ts5xm"><span class="spinner svelte-6ts5xm"></span> <span>Loading messages...</span></div>'),yg=J("<p> </p>"),bg=J('<p>No emails in local storage. Click "Sync New" to download.</p>'),_g=J('<div class="empty-state svelte-6ts5xm"><!></div>'),wg=J('<div class="empty-state svelte-6ts5xm"><p>Sync your emails to browse them locally.</p></div>'),kg=J('<div class="main-content svelte-6ts5xm"><!> <!> <!> <div class="toolbar svelte-6ts5xm"><input type="text" class="search-input svelte-6ts5xm" placeholder="Search stored emails (subject, sender, snippet)..."/> <button class="btn primary svelte-6ts5xm"> </button></div> <!></div> <!>',1);function xg(t,e){Et(e,!0),Rt(()=>Zt("DashboardView"));let r=qe(e,"error",3,null),i=qe(e,"profile",3,null),s=qe(e,"loadingProfile",3,!1),l=qe(e,"emailMessages",19,()=>[]),f=qe(e,"totalLocalMessages",3,0),d=qe(e,"hasMoreLocal",3,!1),v=qe(e,"loadingMessages",3,!1),h=qe(e,"selectedMessage",3,null),y=qe(e,"syncStatus",3,null),x=qe(e,"syncProgress",3,null),b=qe(e,"isSyncing",3,!1),_=qe(e,"searchQuery",15);var j=kg(),q=Kt(j),P=D(q);{var K=we=>{lc(we,{get error(){return r()},get ondismiss(){return e.ondismisserror},get onsignout(){return e.onsignout}})};Ee(P,we=>{r()&&we(K)})}var ae=F(P,2);_h(ae,{get profile(){return i()},get loadingProfile(){return s()},get onsignout(){return e.onsignout}});var te=F(ae,2);Dh(te,{get syncStatus(){return y()},get syncProgress(){return x()},get isSyncing(){return b()},get onsync(){return e.onsync},get onsyncmore(){return e.onsyncmore},get onclear(){return e.oncleardata}});var W=F(te,2),Z=D(W);Z.__keydown=we=>we.key==="Enter"&&e.onsearch();var ve=F(Z,2);ve.__click=function(...we){var xe;(xe=e.onsearch)==null||xe.apply(this,we)};var ne=D(ve),me=F(W,2);{var Oe=we=>{var xe=gg(),Ce=Kt(xe),B=D(Ce),H=D(B),ce=F(Ce,2);Nh(ce,{get messages(){return l()},get onselect(){return e.onviewmessage}});var be=F(ce,2);{var Me=Le=>{var De=vg(),Se=D(De);Se.__click=function(...Te){var et;(et=e.onloadmore)==null||et.apply(this,Te)};var nt=D(Se);ke(()=>{Se.disabled=v(),pe(nt,v()?"Loading...":"Load More")}),X(Le,De)};Ee(be,Le=>{d()&&Le(Me)})}ke(Le=>pe(H,`Showing ${l().length??""} of ${Le??""}
        ${_()?" matching":""} emails`),[()=>f().toLocaleString()]),X(we,xe)},Re=we=>{var xe=mg();X(we,xe)},ue=we=>{var xe=_g(),Ce=D(xe);{var B=ce=>{var be=yg(),Me=D(be);ke(()=>pe(Me,`No emails match "${_()??""}".`)),X(ce,be)},H=ce=>{var be=bg();X(ce,be)};Ee(Ce,ce=>{_()?ce(B):ce(H,!1)})}X(we,xe)},$=we=>{var xe=wg();X(we,xe)};Ee(me,we=>{var xe;l().length>0?we(Oe):v()?we(Re,1):(xe=y())!=null&&xe.synced?we(ue,2):we($,!1)})}var re=F(q,2);{var Ie=we=>{hg(we,{get message(){return h()},loading:!1,get onclose(){return e.onclosedetail}})};Ee(re,we=>{h()&&we(Ie)})}ke(()=>{ve.disabled=v(),pe(ne,v()?"Searching...":"Search")}),So(Z,_),X(t,j),At()}jn(["keydown","click"]);var Sg=J('<div class="dashboard svelte-1q5o2lv"><!></div>');function Tg(t,e){Et(e,!0);function r(Te){Te.key==="Escape"&&R(v)&&Ce()}Rt(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)));let i=Pe(Vt(localStorage.getItem("googleClientId")||"")),s=Pe(Vt(localStorage.getItem("googleClientId")||"")),l=Pe(!1),f=Pe(null),d=Pe(null),v=Pe(null),h=Pe(""),y=Pe(Vt([])),x=Pe(0),b=Pe(0),_=Pe(!1),j=Pe(!1),q=Pe(!1),P=Pe(null),K=Pe(null),ae=Pe(null),te=Pe(!1);const W=50;Hi(()=>{R(f)&&(B(),re())});let Z=Xn(()=>!R(i)),ve=Xn(()=>!!R(f)),ne=Xn(()=>R(y).length<R(x));Hi(()=>{R(i)&&!R(l)&&Pl(R(i)).then(()=>{G(l,!0)}).catch(Te=>{G(P,`Auth init failed: ${Te.message}`)})});function me(){const Te=R(s).trim();Te&&(localStorage.setItem("googleClientId",Te),G(i,Te,!0),G(P,null))}function Oe(){localStorage.removeItem("googleClientId"),G(i,""),G(s,""),G(l,!1),G(f,null),G(d,null),G(y,[],!0),G(x,0)}async function Re(){G(P,null),G(j,!0);try{R(l)||(await Pl(R(i)),G(l,!0));const Te=await Kp();G(f,Te.access_token,!0),await $()}catch(Te){G(P,Te.message,!0)}finally{G(j,!1)}}async function ue(){if(R(f))try{await Up(R(f))}catch{}G(f,null),G(d,null),G(y,[],!0),G(x,0),G(v,null),G(P,null)}async function $(){G(q,!0);try{const Te=await ec(R(f));if(!R(f))return;G(d,Te,!0)}catch(Te){if(!R(f))return;G(P,`Profile fetch failed: ${Te.message}`)}finally{G(q,!1)}}async function re(Te=!1){G(_,!0);try{const et=Te?R(b):0,pt=await Kd({query:R(h)||void 0,limit:W,offset:et});Te?G(y,[...R(y),...pt.items],!0):G(y,pt.items,!0),G(x,pt.total,!0),G(b,R(y).length,!0)}catch(et){G(P,`Failed to load messages: ${et.message}`)}finally{G(_,!1)}}function Ie(){G(b,0),re(!1)}function we(){re(!0)}function xe(Te){G(v,Te,!0)}function Ce(){G(v,null)}async function B(){try{G(K,await Zp(),!0)}catch{}}async function H(Te){if(R(te)||!R(f))return;G(P,null),G(te,!0),G(ae,null);const et=new AbortController;try{await Xp(R(f),{limit:Te,onProgress:pt=>{G(ae,{...pt},!0)},signal:et.signal}),await B(),await re(!1)}catch(pt){if(pt.name!=="AbortError"){if(!R(f))return;G(P,`Sync failed: ${pt.message}`)}}finally{G(te,!1)}}async function ce(Te){if(R(te)||!R(f))return;G(P,null),G(te,!0),G(ae,null);const et=new AbortController;try{await Qp(R(f),{limit:Te,onProgress:pt=>{G(ae,{...pt},!0)},signal:et.signal}),await B(),await re(!1)}catch(pt){if(pt.name!=="AbortError"){if(!R(f))return;G(P,`Sync more failed: ${pt.message}`)}}finally{G(te,!1)}}async function be(){try{await Jp(),await B(),G(y,[],!0),G(x,0),G(b,0)}catch(Te){G(P,`Failed to clear data: ${Te.message}`)}}var Me=Sg(),Le=D(Me);{var De=Te=>{ih(Te,{onsave:me,get clientIdInput(){return R(s)},set clientIdInput(et){G(s,et,!0)}})},Se=Te=>{gh(Te,{get clientId(){return R(i)},get error(){return R(P)},get loadingAuth(){return R(j)},onsignin:Re,onclear:Oe,onsignout:ue})},nt=Te=>{xg(Te,{get error(){return R(P)},get profile(){return R(d)},get loadingProfile(){return R(q)},get emailMessages(){return R(y)},get totalLocalMessages(){return R(x)},get hasMoreLocal(){return R(ne)},get loadingMessages(){return R(_)},get selectedMessage(){return R(v)},get syncStatus(){return R(K)},get syncProgress(){return R(ae)},get isSyncing(){return R(te)},onsignout:ue,onsearch:Ie,onloadmore:we,onviewmessage:xe,onclosedetail:Ce,ondismisserror:()=>G(P,null),onsync:H,onsyncmore:ce,oncleardata:be,get searchQuery(){return R(h)},set searchQuery(et){G(h,et,!0)}})};Ee(Le,Te=>{R(Z)?Te(De):R(ve)?Te(nt,!1):Te(Se,1)})}X(t,Me),At()}var Eg=J('<div class="app-shell svelte-1n46o8q"><nav class="top-nav svelte-1n46o8q"><a class="nav-brand svelte-1n46o8q" href="#chat">me-ai</a> <div class="nav-links svelte-1n46o8q"><a href="#chat">Chat</a> <a href="#dashboard">Dashboard</a></div></nav> <main class="svelte-1n46o8q"><div class="page-view svelte-1n46o8q"><!></div> <div class="page-view svelte-1n46o8q"><!></div></main></div>');function Ag(t,e){Et(e,!0);let r=Pe(Vt(location.hash==="#dashboard"?"dashboard":"chat"));Rt(()=>{function K(){G(r,location.hash==="#dashboard"?"dashboard":"chat",!0)}return window.addEventListener("hashchange",K),()=>window.removeEventListener("hashchange",K)});var i=Eg(),s=D(i),l=F(D(s),2),f=D(l);let d;var v=F(f,2);let h;var y=F(s,2),x=D(y);let b;var _=D(x);Bp(_,{});var j=F(x,2);let q;var P=D(j);Tg(P,{}),ke(()=>{d=vr(f,1,"svelte-1n46o8q",null,d,{active:R(r)==="chat"}),h=vr(v,1,"svelte-1n46o8q",null,h,{active:R(r)==="dashboard"}),b=Wi(x,"",b,{display:R(r)==="chat"?"flex":"none"}),q=Wi(j,"",q,{display:R(r)==="dashboard"?"flex":"none"})}),X(t,i),At()}fd(Ag,{target:document.getElementById("app")});
